#!/usr/bin/env node
'use strict';

var events = require('events');
var J3 = require('crypto');
var I_ = require('path');
var $P = require('os');
var RL = require('tls');
var vQ = require('readline');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var J3__default = /*#__PURE__*/_interopDefault(J3);
var I___default = /*#__PURE__*/_interopDefault(I_);
var $P__default = /*#__PURE__*/_interopDefault($P);
var RL__default = /*#__PURE__*/_interopDefault(RL);
var vQ__default = /*#__PURE__*/_interopDefault(vQ);

/**
 * Tabby Agent
 * https://github.com/tabbyml/tabby/tree/main/clients/tabby-agent
 * Copyright (c) 2023-2024 TabbyML, Inc.
 * Licensed under the Apache License 2.0.
 */
var K3=Object.create;var xc=Object.defineProperty;var z3=Object.getOwnPropertyDescriptor;var G3=Object.getOwnPropertyNames;var X3=Object.getPrototypeOf,Z3=Object.prototype.hasOwnProperty;var he=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),ob=e=>t=>{var r=e[t];if(r)return r();throw new Error("Module not found in bundle: "+t)};var Qh=(e,t)=>()=>(e&&(t=e(e=0)),t);var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Y3=(e,t)=>{for(var r in t)xc(e,r,{get:t[r],enumerable:!0});},ub=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of G3(t))!Z3.call(e,i)&&i!==r&&xc(e,i,{get:()=>t[i],enumerable:!(n=z3(t,i))||n.enumerable});return e};var or=(e,t,r)=>(r=e!=null?K3(X3(e)):{},ub(t||!e||!e.__esModule?xc(r,"default",{value:e,enumerable:!0}):r,e)),Q3=e=>ub(xc({},"__esModule",{value:!0}),e);var tp=P((ete,fb)=>{var lb=Object.prototype.toString;fb.exports=function(t){var r=lb.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&lb.call(t.callee)==="[object Function]"),n};});var Sb=P((tte,vb)=>{var _b;Object.keys||(Uo=Object.prototype.hasOwnProperty,rp=Object.prototype.toString,db=tp(),np=Object.prototype.propertyIsEnumerable,hb=!np.call({toString:null},"toString"),pb=np.call(function(){},"prototype"),$o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ic=function(e){var t=e.constructor;return t&&t.prototype===e},gb={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},mb=function(){if(typeof window>"u")return !1;for(var e in window)try{if(!gb["$"+e]&&Uo.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Ic(window[e]);}catch{return !0}}catch{return !0}return !1}(),yb=function(e){if(typeof window>"u"||!mb)return Ic(e);try{return Ic(e)}catch{return !1}},_b=function(t){var r=t!==null&&typeof t=="object",n=rp.call(t)==="[object Function]",i=db(t),s=r&&rp.call(t)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=pb&&n;if(s&&t.length>0&&!Uo.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(i&&t.length>0)for(var l=0;l<t.length;++l)a.push(String(l));else for(var u in t)!(o&&u==="prototype")&&Uo.call(t,u)&&a.push(String(u));if(hb)for(var f=yb(t),h=0;h<$o.length;++h)!(f&&$o[h]==="constructor")&&Uo.call(t,$o[h])&&a.push($o[h]);return a});var Uo,rp,db,np,hb,pb,$o,Ic,gb,mb,yb;vb.exports=_b;});var Pc=P((rte,Cb)=>{var rq=Array.prototype.slice,nq=tp(),bb=Object.keys,Rc=bb?function(t){return bb(t)}:Sb(),Eb=Object.keys;Rc.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return nq(n)?Eb(rq.call(n)):Eb(n)});}else Object.keys=Rc;return Object.keys||Rc};Cb.exports=Rc;});var xb=P((nte,wb)=>{wb.exports=Error;});var Ab=P((ite,Tb)=>{Tb.exports=EvalError;});var Rb=P((ste,Ib)=>{Ib.exports=RangeError;});var Nb=P((ate,Pb)=>{Pb.exports=ReferenceError;});var ip=P((ote,kb)=>{kb.exports=SyntaxError;});var ji=P((ute,Db)=>{Db.exports=TypeError;});var Ob=P((cte,Lb)=>{Lb.exports=URIError;});var Nc=P((lte,Fb)=>{Fb.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return !1;if(typeof Symbol.iterator=="symbol")return !0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return !1;var i=42;t[r]=i;for(r in t)return !1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return !1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return !1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return !1}return !0};});var sp=P((fte,Mb)=>{var Bb=typeof Symbol<"u"&&Symbol,iq=Nc();Mb.exports=function(){return typeof Bb!="function"||typeof Symbol!="function"||typeof Bb("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:iq()};});var Hb=P((dte,qb)=>{var ap={__proto__:null,foo:{}},sq=Object;qb.exports=function(){return {__proto__:ap}.foo===ap.foo&&!(ap instanceof sq)};});var jb=P((hte,$b)=>{var aq="Function.prototype.bind called on incompatible ",oq=Object.prototype.toString,uq=Math.max,cq="[object Function]",Ub=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var s=0;s<r.length;s+=1)n[s+t.length]=r[s];return n},lq=function(t,r){for(var n=[],i=r||0,s=0;i<t.length;i+=1,s+=1)n[s]=t[i];return n},fq=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};$b.exports=function(t){var r=this;if(typeof r!="function"||oq.apply(r)!==cq)throw new TypeError(aq+r);for(var n=lq(arguments,1),i,s=function(){if(this instanceof i){var u=r.apply(this,Ub(n,arguments));return Object(u)===u?u:this}return r.apply(t,Ub(n,arguments))},a=uq(0,r.length-n.length),o=[],c=0;c<a;c++)o[c]="$"+c;if(i=Function("binder","return function ("+fq(o,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null;}return i};});var kc=P((pte,Vb)=>{var dq=jb();Vb.exports=Function.prototype.bind||dq;});var Kb=P((gte,Wb)=>{var hq=Function.prototype.call,pq=Object.prototype.hasOwnProperty,gq=kc();Wb.exports=gq.call(hq,pq);});var Yn=P((mte,Yb)=>{var ut,mq=xb(),yq=Ab(),_q=Rb(),vq=Nb(),Ta=ip(),xa=ji(),Sq=Ob(),Zb=Function,op=function(e){try{return Zb('"use strict"; return ('+e+").constructor;")()}catch{}},Ls=Object.getOwnPropertyDescriptor;var up=function(){throw new xa},bq=Ls?function(){try{return up}catch{try{return Ls(arguments,"callee").get}catch{return up}}}():up,Ca=sp()(),Eq=Hb()(),ur=Object.getPrototypeOf||(Eq?function(e){return e.__proto__}:null),wa={},Cq=typeof Uint8Array>"u"||!ur?ut:ur(Uint8Array),Os={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ut:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ut:ArrayBuffer,"%ArrayIteratorPrototype%":Ca&&ur?ur([][Symbol.iterator]()):ut,"%AsyncFromSyncIteratorPrototype%":ut,"%AsyncFunction%":wa,"%AsyncGenerator%":wa,"%AsyncGeneratorFunction%":wa,"%AsyncIteratorPrototype%":wa,"%Atomics%":typeof Atomics>"u"?ut:Atomics,"%BigInt%":typeof BigInt>"u"?ut:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ut:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ut:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ut:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":mq,"%eval%":eval,"%EvalError%":yq,"%Float32Array%":typeof Float32Array>"u"?ut:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ut:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ut:FinalizationRegistry,"%Function%":Zb,"%GeneratorFunction%":wa,"%Int8Array%":typeof Int8Array>"u"?ut:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ut:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ut:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ca&&ur?ur(ur([][Symbol.iterator]())):ut,"%JSON%":typeof JSON=="object"?JSON:ut,"%Map%":typeof Map>"u"?ut:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ca||!ur?ut:ur(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ut:Promise,"%Proxy%":typeof Proxy>"u"?ut:Proxy,"%RangeError%":_q,"%ReferenceError%":vq,"%Reflect%":typeof Reflect>"u"?ut:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ut:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ca||!ur?ut:ur(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ut:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ca&&ur?ur(""[Symbol.iterator]()):ut,"%Symbol%":Ca?Symbol:ut,"%SyntaxError%":Ta,"%ThrowTypeError%":bq,"%TypedArray%":Cq,"%TypeError%":xa,"%Uint8Array%":typeof Uint8Array>"u"?ut:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ut:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ut:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ut:Uint32Array,"%URIError%":Sq,"%WeakMap%":typeof WeakMap>"u"?ut:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ut:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ut:WeakSet};var wq=function e(t){var r;if(t==="%AsyncFunction%")r=op("async function () {}");else if(t==="%GeneratorFunction%")r=op("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=op("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype);}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&ur&&(r=ur(i.prototype));}return Os[t]=r,r},Gb={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jo=kc(),Dc=Kb(),xq=jo.call(Function.call,Array.prototype.concat),Tq=jo.call(Function.apply,Array.prototype.splice),Xb=jo.call(Function.call,String.prototype.replace),Lc=jo.call(Function.call,String.prototype.slice),Aq=jo.call(Function.call,RegExp.prototype.exec),Iq=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rq=/\\(\\)?/g,Pq=function(t){var r=Lc(t,0,1),n=Lc(t,-1);if(r==="%"&&n!=="%")throw new Ta("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ta("invalid intrinsic syntax, expected opening `%`");var i=[];return Xb(t,Iq,function(s,a,o,c){i[i.length]=o?Xb(c,Rq,"$1"):a||s;}),i},Nq=function(t,r){var n=t,i;if(Dc(Gb,n)&&(i=Gb[n],n="%"+i[0]+"%"),Dc(Os,n)){var s=Os[n];if(s===wa&&(s=wq(n)),typeof s>"u"&&!r)throw new xa("intrinsic "+t+" exists, but is not available. Please file an issue!");return {alias:i,name:n,value:s}}throw new Ta("intrinsic "+t+" does not exist!")};Yb.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new xa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new xa('"allowMissing" argument must be a boolean');if(Aq(/^%?[^%]*%?$/,t)===null)throw new Ta("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Pq(t),i=n.length>0?n[0]:"",s=Nq("%"+i+"%",r),a=s.name,o=s.value,c=!1,l=s.alias;l&&(i=l[0],Tq(n,xq([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=Lc(h,0,1),m=Lc(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Ta("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,a="%"+i+"%",Dc(Os,a))o=Os[a];else if(o!=null){if(!(h in o)){if(!r)throw new xa("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ls&&u+1>=n.length){var v=Ls(o,h);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?o=v.get:o=o[h];}else f=Dc(o,h),o=o[h];f&&!c&&(Os[a]=o);}}return o};});var Fc=P((yte,Qb)=>{var kq=Yn(),Oc=kq("%Object.defineProperty%",!0)||!1;if(Oc)try{Oc({},"a",{value:1});}catch{Oc=!1;}Qb.exports=Oc;});var Mc=P((_te,Jb)=>{var Dq=Yn(),Bc=Dq("%Object.getOwnPropertyDescriptor%",!0);if(Bc)try{Bc([],"length");}catch{Bc=null;}Jb.exports=Bc;});var qc=P((vte,rE)=>{var eE=Fc(),Lq=ip(),Aa=ji(),tE=Mc();rE.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Aa("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Aa("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Aa("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Aa("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Aa("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Aa("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!tE&&tE(t,r);if(eE)eE(t,r,{configurable:a===null&&c?c.configurable:!a,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:s===null&&c?c.writable:!s});else if(o||!i&&!s&&!a)t[r]=n;else throw new Lq("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")};});var Hc=P((Ste,iE)=>{var cp=Fc(),nE=function(){return !!cp};nE.hasArrayLengthDefineBug=function(){if(!cp)return null;try{return cp([],"length",{value:1}).length!==1}catch{return !0}};iE.exports=nE;});var Vi=P((bte,uE)=>{var Oq=Pc(),Fq=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Bq=Object.prototype.toString,Mq=Array.prototype.concat,sE=qc(),qq=function(e){return typeof e=="function"&&Bq.call(e)==="[object Function]"},aE=Hc()(),Hq=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!qq(n)||!n())return}aE?sE(e,t,r,!0):sE(e,t,r);},oE=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Oq(t);Fq&&(n=Mq.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)Hq(e,n[i],t[n[i]],r[n[i]]);};oE.supportsDescriptors=!!aE;uE.exports=oE;});var hE=P((Ete,dE)=>{var Uq=Yn(),cE=qc(),$q=Hc()(),lE=Mc(),fE=ji(),jq=Uq("%Math.floor%");dE.exports=function(t,r){if(typeof t!="function")throw new fE("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||jq(r)!==r)throw new fE("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in t&&lE){var a=lE(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(s=!1);}return (i||s||!n)&&($q?cE(t,"length",r,!0,!0):cE(t,"length",r)),t};});var Fs=P((Cte,Uc)=>{var lp=kc(),$c=Yn(),Vq=hE(),Wq=ji(),mE=$c("%Function.prototype.apply%"),yE=$c("%Function.prototype.call%"),_E=$c("%Reflect.apply%",!0)||lp.call(yE,mE),pE=Fc(),Kq=$c("%Math.max%");Uc.exports=function(t){if(typeof t!="function")throw new Wq("a function is required");var r=_E(lp,yE,arguments);return Vq(r,1+Kq(0,t.length-(arguments.length-1)),!0)};var gE=function(){return _E(lp,mE,arguments)};pE?pE(Uc.exports,"apply",{value:gE}):Uc.exports.apply=gE;});var Cn=P((wte,bE)=>{var vE=Yn(),SE=Fs(),zq=SE(vE("String.prototype.indexOf"));bE.exports=function(t,r){var n=vE(t,!!r);return typeof n=="function"&&zq(t,".prototype.")>-1?SE(n):n};});var fp=P((xte,TE)=>{var Gq=Pc(),wE=Nc()(),xE=Cn(),EE=Object,Xq=xE("Array.prototype.push"),CE=xE("Object.prototype.propertyIsEnumerable"),Zq=wE?Object.getOwnPropertySymbols:null;TE.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var n=EE(t);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var s=EE(arguments[i]),a=Gq(s),o=wE&&(Object.getOwnPropertySymbols||Zq);if(o)for(var c=o(s),l=0;l<c.length;++l){var u=c[l];CE(s,u)&&Xq(a,u);}for(var f=0;f<a.length;++f){var h=a[f];if(CE(s,h)){var p=s[h];n[h]=p;}}}return n};});var hp=P((Tte,AE)=>{var dp=fp(),Yq=function(){if(!Object.assign)return !1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),s="";for(var a in i)s+=a;return e!==s},Qq=function(){if(!Object.assign||!Object.preventExtensions)return !1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy");}catch{return e[1]==="y"}return !1};AE.exports=function(){return !Object.assign||Yq()||Qq()?dp:Object.assign};});var RE=P((Ate,IE)=>{var Jq=Vi(),e4=hp();IE.exports=function(){var t=e4();return Jq(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t};});var DE=P((Ite,kE)=>{var t4=Vi(),r4=Fs(),n4=fp(),PE=hp(),i4=RE(),s4=r4.apply(PE()),NE=function(t,r){return s4(Object,arguments)};t4(NE,{getPolyfill:PE,implementation:n4,shim:i4});kE.exports=NE;});var OE=P((Rte,LE)=>{var Wo=function(){return typeof function(){}.name=="string"},Vo=Object.getOwnPropertyDescriptor;Wo.functionsHaveConfigurableNames=function(){if(!Wo()||!Vo)return !1;var t=Vo(function(){},"name");return !!t&&!!t.configurable};var a4=Function.prototype.bind;Wo.boundFunctionsHaveNames=function(){return Wo()&&typeof a4=="function"&&function(){}.bind().name!==""};LE.exports=Wo;});var ME=P((Pte,BE)=>{var FE=qc(),o4=Hc()(),u4=OE().functionsHaveConfigurableNames(),c4=ji();BE.exports=function(t,r){if(typeof t!="function")throw new c4("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return (!n||u4)&&(o4?FE(t,"name",r,!0,!0):FE(t,"name",r)),t};});var pp=P((Nte,qE)=>{var l4=ME(),f4=ji(),d4=Object;qE.exports=l4(function(){if(this==null||this!==d4(this))throw new f4("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0);});var gp=P((kte,HE)=>{var h4=pp(),p4=Vi().supportsDescriptors,g4=Object.getOwnPropertyDescriptor;HE.exports=function(){if(p4&&/a/mig.flags==="gim"){var t=g4(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d";}}),Object.defineProperty(n,"sticky",{get:function(){r+="y";}}),r==="dy")return t.get}}return h4};});var jE=P((Dte,$E)=>{var m4=Vi().supportsDescriptors,y4=gp(),_4=Object.getOwnPropertyDescriptor,v4=Object.defineProperty,S4=TypeError,UE=Object.getPrototypeOf,b4=/a/;$E.exports=function(){if(!m4||!UE)throw new S4("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=y4(),r=UE(b4),n=_4(r,"flags");return (!n||n.get!==t)&&v4(r,"flags",{configurable:!0,enumerable:!1,get:t}),t};});var zE=P((Lte,KE)=>{var E4=Vi(),C4=Fs(),w4=pp(),VE=gp(),x4=jE(),WE=C4(VE());E4(WE,{getPolyfill:VE,implementation:w4,shim:x4});KE.exports=WE;});var ZE=P((Ote,XE)=>{var GE=Symbol.iterator;XE.exports=function(t){if(t!=null&&typeof t[GE]<"u")return t[GE]()};});var QE=P((Fte,YE)=>{YE.exports=he("util").inspect;});var _C=P((Bte,yC)=>{var xp=typeof Map=="function"&&Map.prototype,mp=Object.getOwnPropertyDescriptor&&xp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Vc=xp&&mp&&typeof mp.get=="function"?mp.get:null,JE=xp&&Map.prototype.forEach,Tp=typeof Set=="function"&&Set.prototype,yp=Object.getOwnPropertyDescriptor&&Tp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Wc=Tp&&yp&&typeof yp.get=="function"?yp.get:null,eC=Tp&&Set.prototype.forEach,T4=typeof WeakMap=="function"&&WeakMap.prototype,zo=T4?WeakMap.prototype.has:null,A4=typeof WeakSet=="function"&&WeakSet.prototype,Go=A4?WeakSet.prototype.has:null,I4=typeof WeakRef=="function"&&WeakRef.prototype,tC=I4?WeakRef.prototype.deref:null,R4=Boolean.prototype.valueOf,P4=Object.prototype.toString,N4=Function.prototype.toString,k4=String.prototype.match,Ap=String.prototype.slice,Ki=String.prototype.replace,D4=String.prototype.toUpperCase,rC=String.prototype.toLowerCase,fC=RegExp.prototype.test,nC=Array.prototype.concat,Qn=Array.prototype.join,L4=Array.prototype.slice,iC=Math.floor,Sp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,_p=Object.getOwnPropertySymbols,bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ar=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ia||!0)?Symbol.toStringTag:null,dC=Object.prototype.propertyIsEnumerable,sC=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function aC(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||fC.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-iC(-e):iC(e);if(n!==e){var i=String(n),s=Ap.call(t,i.length+1);return Ki.call(i,r,"$&_")+"."+Ki.call(Ki.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ki.call(t,r,"$&_")}var Ep=QE(),oC=Ep.custom,uC=pC(oC)?oC:null;yC.exports=function e(t,r,n,i){var s=r||{};if(Wi(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Wi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Wi(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Wi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Wi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof t>"u")return "undefined";if(t===null)return "null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return mC(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return o?aC(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return o?aC(t,l):l}var u=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof t=="object")return Cp(t)?"[Array]":"[Object]";var f=Q4(s,n);if(typeof i>"u")i=[];else if(gC(i,t)>=0)return "[Circular]";function h(me,Pe,W){if(Pe&&(i=L4.call(i),i.push(Pe)),W){var K={depth:s.depth};return Wi(s,"quoteStyle")&&(K.quoteStyle=s.quoteStyle),e(me,K,n+1,i)}return e(me,s,n+1,i)}if(typeof t=="function"&&!cC(t)){var p=j4(t),m=jc(t,h);return "[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Qn.call(m,", ")+" }":"")}if(pC(t)){var v=Ia?Ki.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):bp.call(t);return typeof t=="object"&&!Ia?Ko(v):v}if(X4(t)){for(var E="<"+rC.call(String(t.nodeName)),x=t.attributes||[],y=0;y<x.length;y++)E+=" "+x[y].name+"="+hC(O4(x[y].value),"double",s);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+rC.call(String(t.nodeName))+">",E}if(Cp(t)){if(t.length===0)return "[]";var S=jc(t,h);return f&&!Y4(S)?"["+wp(S,f)+"]":"[ "+Qn.call(S,", ")+" ]"}if(B4(t)){var N=jc(t,h);return !("cause"in Error.prototype)&&"cause"in t&&!dC.call(t,"cause")?"{ ["+String(t)+"] "+Qn.call(nC.call("[cause]: "+h(t.cause),N),", ")+" }":N.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Qn.call(N,", ")+" }"}if(typeof t=="object"&&a){if(uC&&typeof t[uC]=="function"&&Ep)return Ep(t,{depth:u-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(V4(t)){var O=[];return JE&&JE.call(t,function(me,Pe){O.push(h(Pe,t,!0)+" => "+h(me,t));}),lC("Map",Vc.call(t),O,f)}if(z4(t)){var j=[];return eC&&eC.call(t,function(me){j.push(h(me,t));}),lC("Set",Wc.call(t),j,f)}if(W4(t))return vp("WeakMap");if(G4(t))return vp("WeakSet");if(K4(t))return vp("WeakRef");if(q4(t))return Ko(h(Number(t)));if(U4(t))return Ko(h(Sp.call(t)));if(H4(t))return Ko(R4.call(t));if(M4(t))return Ko(h(String(t)));if(typeof window<"u"&&t===window)return "{ [object Window] }";if(t===global)return "{ [object globalThis] }";if(!F4(t)&&!cC(t)){var J=jc(t,h),z=sC?sC(t)===Object.prototype:t instanceof Object||t.constructor===Object,G=t instanceof Object?"":"null prototype",ee=!z&&Ar&&Object(t)===t&&Ar in t?Ap.call(zi(t),8,-1):G?"Object":"",H=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ne=H+(ee||G?"["+Qn.call(nC.call([],ee||[],G||[]),": ")+"] ":"");return J.length===0?ne+"{}":f?ne+"{"+wp(J,f)+"}":ne+"{ "+Qn.call(J,", ")+" }"}return String(t)};function hC(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function O4(e){return Ki.call(String(e),/"/g,"&quot;")}function Cp(e){return zi(e)==="[object Array]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function F4(e){return zi(e)==="[object Date]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function cC(e){return zi(e)==="[object RegExp]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function B4(e){return zi(e)==="[object Error]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function M4(e){return zi(e)==="[object String]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function q4(e){return zi(e)==="[object Number]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function H4(e){return zi(e)==="[object Boolean]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function pC(e){if(Ia)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return !0;if(!e||typeof e!="object"||!bp)return !1;try{return bp.call(e),!0}catch{}return !1}function U4(e){if(!e||typeof e!="object"||!Sp)return !1;try{return Sp.call(e),!0}catch{}return !1}var $4=Object.prototype.hasOwnProperty||function(e){return e in this};function Wi(e,t){return $4.call(e,t)}function zi(e){return P4.call(e)}function j4(e){if(e.name)return e.name;var t=k4.call(N4.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function gC(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function V4(e){if(!Vc||!e||typeof e!="object")return !1;try{Vc.call(e);try{Wc.call(e);}catch{return !0}return e instanceof Map}catch{}return !1}function W4(e){if(!zo||!e||typeof e!="object")return !1;try{zo.call(e,zo);try{Go.call(e,Go);}catch{return !0}return e instanceof WeakMap}catch{}return !1}function K4(e){if(!tC||!e||typeof e!="object")return !1;try{return tC.call(e),!0}catch{}return !1}function z4(e){if(!Wc||!e||typeof e!="object")return !1;try{Wc.call(e);try{Vc.call(e);}catch{return !0}return e instanceof Set}catch{}return !1}function G4(e){if(!Go||!e||typeof e!="object")return !1;try{Go.call(e,Go);try{zo.call(e,zo);}catch{return !0}return e instanceof WeakSet}catch{}return !1}function X4(e){return !e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function mC(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return mC(Ap.call(e,0,t.maxStringLength),t)+n}var i=Ki.call(Ki.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Z4);return hC(i,"single",t)}function Z4(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+D4.call(t.toString(16))}function Ko(e){return "Object("+e+")"}function vp(e){return e+" { ? }"}function lC(e,t,r,n){var i=n?wp(r,n):Qn.call(r,", ");return e+" ("+t+") {"+i+"}"}function Y4(e){for(var t=0;t<e.length;t++)if(gC(e[t],`
`)>=0)return !1;return !0}function Q4(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Qn.call(Array(e.indent+1)," ");else return null;return {base:r,prev:Qn.call(Array(t+1),r)}}function wp(e,t){if(e.length===0)return "";var r=`
`+t.prev+t.base;return r+Qn.call(e,","+r)+`
`+t.prev}function jc(e,t){var r=Cp(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Wi(e,i)?t(e[i],e):"";}var s=typeof _p=="function"?_p(e):[],a;if(Ia){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o];}for(var c in e)Wi(e,c)&&(r&&String(Number(c))===c&&c<e.length||Ia&&a["$"+c]instanceof Symbol||(fC.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if(typeof _p=="function")for(var l=0;l<s.length;l++)dC.call(e,s[l])&&n.push("["+t(s[l])+"]: "+t(e[s[l]],e));return n}});var bC=P((Mte,SC)=>{var vC=Yn(),Ra=Cn(),J4=_C(),eH=ji(),Kc=vC("%WeakMap%",!0),zc=vC("%Map%",!0),tH=Ra("WeakMap.prototype.get",!0),rH=Ra("WeakMap.prototype.set",!0),nH=Ra("WeakMap.prototype.has",!0),iH=Ra("Map.prototype.get",!0),sH=Ra("Map.prototype.set",!0),aH=Ra("Map.prototype.has",!0),Ip=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},oH=function(e,t){var r=Ip(e,t);return r&&r.value},uH=function(e,t,r){var n=Ip(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r};},cH=function(e,t){return !!Ip(e,t)};SC.exports=function(){var t,r,n,i={assert:function(s){if(!i.has(s))throw new eH("Side channel does not contain "+J4(s))},get:function(s){if(Kc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return tH(t,s)}else if(zc){if(r)return iH(r,s)}else if(n)return oH(n,s)},has:function(s){if(Kc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return nH(t,s)}else if(zc){if(r)return aH(r,s)}else if(n)return cH(n,s);return !1},set:function(s,a){Kc&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Kc),rH(t,s,a)):zc?(r||(r=new zc),sH(r,s,a)):(n||(n={key:{},next:null}),uH(n,s,a));}};return i};});var Rp=P((qte,CC)=>{var EC=function(e){return e!==e};CC.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||EC(t)&&EC(r))};});var Pp=P((Hte,wC)=>{var lH=Rp();wC.exports=function(){return typeof Object.is=="function"?Object.is:lH};});var TC=P((Ute,xC)=>{var fH=Pp(),dH=Vi();xC.exports=function(){var t=fH();return dH(Object,{is:t},{is:function(){return Object.is!==t}}),t};});var PC=P(($te,RC)=>{var hH=Vi(),pH=Fs(),gH=Rp(),AC=Pp(),mH=TC(),IC=pH(AC(),Object);hH(IC,{getPolyfill:AC,implementation:gH,shim:mH});RC.exports=IC;});var Gi=P((jte,NC)=>{var yH=Nc();NC.exports=function(){return yH()&&!!Symbol.toStringTag};});var LC=P((Vte,DC)=>{var _H=Gi()(),vH=Cn(),Np=vH("Object.prototype.toString"),Gc=function(t){return _H&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Np(t)==="[object Arguments]"},kC=function(t){return Gc(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Np(t)!=="[object Array]"&&Np(t.callee)==="[object Function]"},SH=function(){return Gc(arguments)}();Gc.isLegacyArguments=kC;DC.exports=SH?Gc:kC;});var FC=P((Wte,OC)=>{var bH={}.toString;OC.exports=Array.isArray||function(e){return bH.call(e)=="[object Array]"};});var Dp=P((Kte,HC)=>{var EH=Fs(),qC=Cn(),CH=Yn(),kp=CH("%ArrayBuffer%",!0),Xc=qC("ArrayBuffer.prototype.byteLength",!0),wH=qC("Object.prototype.toString"),BC=!!kp&&!Xc&&new kp(0).slice,MC=!!BC&&EH(BC);HC.exports=Xc||MC?function(t){if(!t||typeof t!="object")return !1;try{return Xc?Xc(t):MC(t,0),!0}catch{return !1}}:kp?function(t){return wH(t)==="[object ArrayBuffer]"}:function(t){return !1};});var $C=P((zte,UC)=>{var xH=Date.prototype.getDay,TH=function(t){try{return xH.call(t),!0}catch{return !1}},AH=Object.prototype.toString,IH="[object Date]",RH=Gi()();UC.exports=function(t){return typeof t!="object"||t===null?!1:RH?TH(t):AH.call(t)===IH};});var zC=P((Gte,KC)=>{var Lp=Cn(),jC=Gi()(),VC,WC,Op,Fp;jC&&(VC=Lp("Object.prototype.hasOwnProperty"),WC=Lp("RegExp.prototype.exec"),Op={},Zc=function(){throw Op},Fp={toString:Zc,valueOf:Zc},typeof Symbol.toPrimitive=="symbol"&&(Fp[Symbol.toPrimitive]=Zc));var Zc,PH=Lp("Object.prototype.toString"),NH=Object.getOwnPropertyDescriptor,kH="[object RegExp]";KC.exports=jC?function(t){if(!t||typeof t!="object")return !1;var r=NH(t,"lastIndex"),n=r&&VC(r,"value");if(!n)return !1;try{WC(t,Fp);}catch(i){return i===Op}}:function(t){return !t||typeof t!="object"&&typeof t!="function"?!1:PH(t)===kH};});var ZC=P((Xte,XC)=>{var DH=Cn(),GC=DH("SharedArrayBuffer.prototype.byteLength",!0);XC.exports=GC?function(t){if(!t||typeof t!="object")return !1;try{return GC(t),!0}catch{return !1}}:function(t){return !1};});var QC=P((Zte,YC)=>{var LH=String.prototype.valueOf,OH=function(t){try{return LH.call(t),!0}catch{return !1}},FH=Object.prototype.toString,BH="[object String]",MH=Gi()();YC.exports=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:MH?OH(t):FH.call(t)===BH};});var e1=P((Yte,JC)=>{var qH=Number.prototype.toString,HH=function(t){try{return qH.call(t),!0}catch{return !1}},UH=Object.prototype.toString,$H="[object Number]",jH=Gi()();JC.exports=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:jH?HH(t):UH.call(t)===$H};});var n1=P((Qte,r1)=>{var t1=Cn(),VH=t1("Boolean.prototype.toString"),WH=t1("Object.prototype.toString"),KH=function(t){try{return VH(t),!0}catch{return !1}},zH="[object Boolean]",GH=Gi()();r1.exports=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:GH&&Symbol.toStringTag in t?KH(t):WH(t)===zH};});var o1=P((Jte,Bp)=>{var XH=Object.prototype.toString,ZH=sp()();ZH?(i1=Symbol.prototype.toString,s1=/^Symbol\(.*\)$/,a1=function(t){return typeof t.valueOf()!="symbol"?!1:s1.test(i1.call(t))},Bp.exports=function(t){if(typeof t=="symbol")return !0;if(XH.call(t)!=="[object Symbol]")return !1;try{return a1(t)}catch{return !1}}):Bp.exports=function(t){return !1};var i1,s1,a1;});var l1=P((ere,c1)=>{var u1=typeof BigInt<"u"&&BigInt;c1.exports=function(){return typeof u1=="function"&&typeof BigInt=="function"&&typeof u1(42)=="bigint"&&typeof BigInt(42)=="bigint"};});var h1=P((tre,Mp)=>{var YH=l1()();YH?(f1=BigInt.prototype.valueOf,d1=function(t){try{return f1.call(t),!0}catch{}return !1},Mp.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:d1(t)}):Mp.exports=function(t){return !1};var f1,d1;});var g1=P((rre,p1)=>{var QH=QC(),JH=e1(),eU=n1(),tU=o1(),rU=h1();p1.exports=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(QH(t))return "String";if(JH(t))return "Number";if(eU(t))return "Boolean";if(tU(t))return "Symbol";if(rU(t))return "BigInt"};});var v1=P((nre,_1)=>{var qp=typeof Map=="function"&&Map.prototype?Map:null,nU=typeof Set=="function"&&Set.prototype?Set:null,Yc;qp||(Yc=function(t){return !1});var y1=qp?Map.prototype.has:null,m1=nU?Set.prototype.has:null;!Yc&&!y1&&(Yc=function(t){return !1});_1.exports=Yc||function(t){if(!t||typeof t!="object")return !1;try{if(y1.call(t),m1)try{m1.call(t);}catch{return !0}return t instanceof qp}catch{}return !1};});var C1=P((ire,E1)=>{var iU=typeof Map=="function"&&Map.prototype?Map:null,Hp=typeof Set=="function"&&Set.prototype?Set:null,Qc;Hp||(Qc=function(t){return !1});var S1=iU?Map.prototype.has:null,b1=Hp?Set.prototype.has:null;!Qc&&!b1&&(Qc=function(t){return !1});E1.exports=Qc||function(t){if(!t||typeof t!="object")return !1;try{if(b1.call(t),S1)try{S1.call(t);}catch{return !0}return t instanceof Hp}catch{}return !1};});var T1=P((sre,x1)=>{var Jc=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,w1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,el;Jc||(el=function(t){return !1});var $p=Jc?Jc.prototype.has:null,Up=w1?w1.prototype.has:null;!el&&!$p&&(el=function(t){return !1});x1.exports=el||function(t){if(!t||typeof t!="object")return !1;try{if($p.call(t,$p),Up)try{Up.call(t,Up);}catch{return !0}return t instanceof Jc}catch{}return !1};});var I1=P((are,Vp)=>{var sU=Yn(),A1=Cn(),aU=sU("%WeakSet%",!0),jp=A1("WeakSet.prototype.has",!0);jp?(tl=A1("WeakMap.prototype.has",!0),Vp.exports=function(t){if(!t||typeof t!="object")return !1;try{if(jp(t,jp),tl)try{tl(t,tl);}catch{return !0}return t instanceof aU}catch{}return !1}):Vp.exports=function(t){return !1};var tl;});var P1=P((ore,R1)=>{var oU=v1(),uU=C1(),cU=T1(),lU=I1();R1.exports=function(t){if(t&&typeof t=="object"){if(oU(t))return "Map";if(uU(t))return "Set";if(cU(t))return "WeakMap";if(lU(t))return "WeakSet"}return !1};});var L1=P((ure,D1)=>{var k1=Function.prototype.toString,Pa=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Kp,rl;if(typeof Pa=="function"&&typeof Object.defineProperty=="function")try{Kp=Object.defineProperty({},"length",{get:function(){throw rl}}),rl={},Pa(function(){throw 42},null,Kp);}catch(e){e!==rl&&(Pa=null);}else Pa=null;var fU=/^\s*class\b/,zp=function(t){try{var r=k1.call(t);return fU.test(r)}catch{return !1}},Wp=function(t){try{return zp(t)?!1:(k1.call(t),!0)}catch{return !1}},nl=Object.prototype.toString,dU="[object Object]",hU="[object Function]",pU="[object GeneratorFunction]",gU="[object HTMLAllCollection]",mU="[object HTML document.all class]",yU="[object HTMLCollection]",_U=typeof Symbol=="function"&&!!Symbol.toStringTag,vU=!(0 in[,]),Gp=function(){return !1};typeof document=="object"&&(N1=document.all,nl.call(N1)===nl.call(document.all)&&(Gp=function(t){if((vU||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=nl.call(t);return (r===gU||r===mU||r===yU||r===dU)&&t("")==null}catch{}return !1}));var N1;D1.exports=Pa?function(t){if(Gp(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;try{Pa(t,null,Kp);}catch(r){if(r!==rl)return !1}return !zp(t)&&Wp(t)}:function(t){if(Gp(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;if(_U)return Wp(t);if(zp(t))return !1;var r=nl.call(t);return r!==hU&&r!==pU&&!/^\[object HTML/.test(r)?!1:Wp(t)};});var B1=P((cre,F1)=>{var SU=L1(),bU=Object.prototype.toString,O1=Object.prototype.hasOwnProperty,EU=function(t,r,n){for(var i=0,s=t.length;i<s;i++)O1.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},CU=function(t,r,n){for(var i=0,s=t.length;i<s;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t);},wU=function(t,r,n){for(var i in t)O1.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},xU=function(t,r,n){if(!SU(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),bU.call(t)==="[object Array]"?EU(t,r,i):typeof t=="string"?CU(t,r,i):wU(t,r,i);};F1.exports=xU;});var q1=P((lre,M1)=>{M1.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"];});var U1=P((fre,H1)=>{var Xp=q1(),TU=typeof globalThis>"u"?global:globalThis;H1.exports=function(){for(var t=[],r=0;r<Xp.length;r++)typeof TU[Xp[r]]=="function"&&(t[t.length]=Xp[r]);return t};});var K1=P((dre,W1)=>{var sl=B1(),AU=U1(),$1=Fs(),Qp=Cn(),il=Mc(),IU=Qp("Object.prototype.toString"),V1=Gi()(),j1=typeof globalThis>"u"?global:globalThis,Yp=AU(),Jp=Qp("String.prototype.slice"),Zp=Object.getPrototypeOf,RU=Qp("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return -1},al={__proto__:null};V1&&il&&Zp?sl(Yp,function(e){var t=new j1[e];if(Symbol.toStringTag in t){var r=Zp(t),n=il(r,Symbol.toStringTag);if(!n){var i=Zp(r);n=il(i,Symbol.toStringTag);}al["$"+e]=$1(n.get);}}):sl(Yp,function(e){var t=new j1[e],r=t.slice||t.set;r&&(al["$"+e]=$1(r));});var PU=function(t){var r=!1;return sl(al,function(n,i){if(!r)try{"$"+n(t)===i&&(r=Jp(i,1));}catch{}}),r},NU=function(t){var r=!1;return sl(al,function(n,i){if(!r)try{n(t),r=Jp(i,1);}catch{}}),r};W1.exports=function(t){if(!t||typeof t!="object")return !1;if(!V1){var r=Jp(IU(t),8,-1);return RU(Yp,r)>-1?r:r!=="Object"?!1:NU(t)}return il?PU(t):null};});var X1=P((hre,G1)=>{var kU=Cn(),z1=kU("ArrayBuffer.prototype.byteLength",!0),DU=Dp();G1.exports=function(t){return DU(t)?z1?z1(t):t.byteLength:NaN};});var dl=P((pre,vw)=>{var mw=DE(),Jn=Cn(),Z1=zE(),LU=Yn(),Na=ZE(),OU=bC(),Y1=PC(),Q1=LC(),J1=FC(),ew=Dp(),tw=$C(),rw=zC(),nw=ZC(),iw=Pc(),sw=g1(),aw=P1(),ow=K1(),uw=X1(),cw=Jn("SharedArrayBuffer.prototype.byteLength",!0),lw=Jn("Date.prototype.getTime"),eg=Object.getPrototypeOf,fw=Jn("Object.prototype.toString"),ul=LU("%Set%",!0),tg=Jn("Map.prototype.has",!0),cl=Jn("Map.prototype.get",!0),dw=Jn("Map.prototype.size",!0),ll=Jn("Set.prototype.add",!0),yw=Jn("Set.prototype.delete",!0),fl=Jn("Set.prototype.has",!0),ol=Jn("Set.prototype.size",!0);function hw(e,t,r,n){for(var i=Na(e),s;(s=i.next())&&!s.done;)if(Hn(t,s.value,r,n))return yw(e,s.value),!0;return !1}function _w(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function FU(e,t,r,n,i,s){var a=_w(r);if(a!=null)return a;var o=cl(t,a),c=mw({},i,{strict:!1});return typeof o>"u"&&!tg(t,a)||!Hn(n,o,c,s)?!1:!tg(e,a)&&Hn(n,o,c,s)}function BU(e,t,r){var n=_w(r);return n??(fl(t,n)&&!fl(e,n))}function pw(e,t,r,n,i,s){for(var a=Na(e),o,c;(o=a.next())&&!o.done;)if(c=o.value,Hn(r,c,i,s)&&Hn(n,cl(t,c),i,s))return yw(e,c),!0;return !1}function Hn(e,t,r,n){var i=r||{};if(i.strict?Y1(e,t):e===t)return !0;var s=sw(e),a=sw(t);if(s!==a)return !1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?Y1(e,t):e==t;var o=n.has(e),c=n.has(t),l;if(o&&c){if(n.get(e)===n.get(t))return !0}else l={};return o||n.set(e,l),c||n.set(t,l),HU(e,t,i,n)}function gw(e){return !e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function MU(e,t,r,n){if(ol(e)!==ol(t))return !1;for(var i=Na(e),s=Na(t),a,o,c;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object")c||(c=new ul),ll(c,a.value);else if(!fl(t,a.value)){if(r.strict||!BU(e,t,a.value))return !1;c||(c=new ul),ll(c,a.value);}if(c){for(;(o=s.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!hw(c,o.value,r.strict,n))return !1}else if(!r.strict&&!fl(e,o.value)&&!hw(c,o.value,r.strict,n))return !1;return ol(c)===0}return !0}function qU(e,t,r,n){if(dw(e)!==dw(t))return !1;for(var i=Na(e),s=Na(t),a,o,c,l,u,f;(a=i.next())&&!a.done;)if(l=a.value[0],u=a.value[1],l&&typeof l=="object")c||(c=new ul),ll(c,l);else if(f=cl(t,l),typeof f>"u"&&!tg(t,l)||!Hn(u,f,r,n)){if(r.strict||!FU(e,t,l,u,r,n))return !1;c||(c=new ul),ll(c,l);}if(c){for(;(o=s.next())&&!o.done;)if(l=o.value[0],f=o.value[1],l&&typeof l=="object"){if(!pw(c,e,l,f,r,n))return !1}else if(!r.strict&&(!e.has(l)||!Hn(cl(e,l),f,r,n))&&!pw(c,e,l,f,mw({},r,{strict:!1}),n))return !1;return ol(c)===0}return !0}function HU(e,t,r,n){var i,s;if(typeof e!=typeof t||e==null||t==null||fw(e)!==fw(t)||Q1(e)!==Q1(t))return !1;var a=J1(e),o=J1(t);if(a!==o)return !1;var c=e instanceof Error,l=t instanceof Error;if(c!==l||(c||l)&&(e.name!==t.name||e.message!==t.message))return !1;var u=rw(e),f=rw(t);if(u!==f||(u||f)&&(e.source!==t.source||Z1(e)!==Z1(t)))return !1;var h=tw(e),p=tw(t);if(h!==p||(h||p)&&lw(e)!==lw(t)||r.strict&&eg&&eg(e)!==eg(t))return !1;var m=ow(e),v=ow(t);if(m!==v)return !1;if(m||v){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var E=gw(e),x=gw(t);if(E!==x)return !1;if(E||x){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var y=ew(e),S=ew(t);if(y!==S)return !1;if(y||S)return uw(e)!==uw(t)?!1:typeof Uint8Array=="function"&&Hn(new Uint8Array(e),new Uint8Array(t),r,n);var N=nw(e),O=nw(t);if(N!==O)return !1;if(N||O)return cw(e)!==cw(t)?!1:typeof Uint8Array=="function"&&Hn(new Uint8Array(e),new Uint8Array(t),r,n);if(typeof e!=typeof t)return !1;var j=iw(e),J=iw(t);if(j.length!==J.length)return !1;for(j.sort(),J.sort(),i=j.length-1;i>=0;i--)if(j[i]!=J[i])return !1;for(i=j.length-1;i>=0;i--)if(s=j[i],!Hn(e[s],t[s],r,n))return !1;var z=aw(e),G=aw(t);return z!==G?!1:z==="Set"||G==="Set"?MU(e,t,r,n):z==="Map"?qU(e,t,r,n):!0}vw.exports=function(t,r,n){return Hn(t,r,n,OU())};});var Rw={};Y3(Rw,{closest:()=>c5,distance:()=>Iw});var Ci,o5,u5,Iw,c5,Pw=Qh(()=>{Ci=new Uint32Array(65536),o5=(e,t)=>{let r=e.length,n=t.length,i=1<<r-1,s=-1,a=0,o=r,c=r;for(;c--;)Ci[e.charCodeAt(c)]|=1<<c;for(c=0;c<n;c++){let l=Ci[t.charCodeAt(c)],u=l|a;l|=(l&s)+s^s,a|=~(l|s),s&=l,a&i&&o++,s&i&&o--,a=a<<1|1,s=s<<1|~(u|a),a&=u;}for(c=r;c--;)Ci[e.charCodeAt(c)]=0;return o},u5=(e,t)=>{let r=t.length,n=e.length,i=[],s=[],a=Math.ceil(r/32),o=Math.ceil(n/32);for(let m=0;m<a;m++)s[m]=-1,i[m]=0;let c=0;for(;c<o-1;c++){let m=0,v=-1,E=c*32,x=Math.min(32,n)+E;for(let y=E;y<x;y++)Ci[e.charCodeAt(y)]|=1<<y;for(let y=0;y<r;y++){let S=Ci[t.charCodeAt(y)],N=s[y/32|0]>>>y&1,O=i[y/32|0]>>>y&1,j=S|m,J=((S|O)&v)+v^v|S|O,z=m|~(J|v),G=v&J;z>>>31^N&&(s[y/32|0]^=1<<y),G>>>31^O&&(i[y/32|0]^=1<<y),z=z<<1|N,G=G<<1|O,v=G|~(j|z),m=z&j;}for(let y=E;y<x;y++)Ci[e.charCodeAt(y)]=0;}let l=0,u=-1,f=c*32,h=Math.min(32,n-f)+f;for(let m=f;m<h;m++)Ci[e.charCodeAt(m)]|=1<<m;let p=n;for(let m=0;m<r;m++){let v=Ci[t.charCodeAt(m)],E=s[m/32|0]>>>m&1,x=i[m/32|0]>>>m&1,y=v|l,S=((v|x)&u)+u^u|v|x,N=l|~(S|u),O=u&S;p+=N>>>n-1&1,p-=O>>>n-1&1,N>>>31^E&&(s[m/32|0]^=1<<m),O>>>31^x&&(i[m/32|0]^=1<<m),N=N<<1|E,O=O<<1|x,u=O|~(y|N),l=N&y;}for(let m=f;m<h;m++)Ci[e.charCodeAt(m)]=0;return p},Iw=(e,t)=>{if(e.length<t.length){let r=t;t=e,e=r;}return t.length===0?e.length:e.length<=32?o5(e,t):u5(e,t)},c5=(e,t)=>{let r=1/0,n=0;for(let i=0;i<t.length;i++){let s=Iw(e,t[i]);s<r&&(r=s,n=i);}return t[n]};});var Nw=P((ag,Zo)=>{(function(){var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null;}catch{console.log("Collator could not be initialized and wouldn't be used");}var t=(Pw(),Q3(Rw)),r=[],n=[],i={get:function(s,a,o){var c=o&&e&&o.useCollator;if(c){var l=s.length,u=a.length;if(l===0)return u;if(u===0)return l;var f,h,p,m,v;for(p=0;p<u;++p)r[p]=p,n[p]=a.charCodeAt(p);r[u]=u;var E;for(p=0;p<l;++p){for(h=p+1,m=0;m<u;++m)f=h,E=e.compare(s.charAt(p),String.fromCharCode(n[m]))===0,h=r[m]+(E?0:1),v=f+1,h>v&&(h=v),v=r[m+1]+1,h>v&&(h=v),r[m]=f;r[m]=h;}return h}return t.distance(s,a)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return i}):typeof Zo<"u"&&Zo!==null&&typeof ag<"u"&&Zo.exports===ag?Zo.exports=i:typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"?self.Levenshtein=i:typeof window<"u"&&window!==null&&(window.Levenshtein=i);})();});var cr=P(fg=>{fg.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,s)=>i!=null?n(i):r(s)),e.apply(this,t);})},"name",{value:e.name})};fg.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r);},"name",{value:e.name})};});var Fw=P((Ere,Ow)=>{var Zi=he("constants"),d5=process.cwd,vl=null,h5=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return vl||(vl=d5.call(process)),vl};try{process.cwd();}catch{}typeof process.chdir=="function"&&(dg=process.chdir,process.chdir=function(e){vl=null,dg.call(process,e);},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,dg));var dg;Ow.exports=p5;function p5(e){Zi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=o(e.stat),e.fstat=o(e.fstat),e.lstat=o(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(u,f,h){h&&process.nextTick(h);},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(u,f,h,p){p&&process.nextTick(p);},e.lchownSync=function(){}),h5==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(u){function f(h,p,m){var v=Date.now(),E=0;u(h,p,function x(y){if(y&&(y.code==="EACCES"||y.code==="EPERM"||y.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){e.stat(p,function(S,N){S&&S.code==="ENOENT"?u(h,p,x):m(y);});},E),E<100&&(E+=10);return}m&&m(y);});}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(u){function f(h,p,m,v,E,x){var y;if(x&&typeof x=="function"){var S=0;y=function(N,O,j){if(N&&N.code==="EAGAIN"&&S<10)return S++,u.call(e,h,p,m,v,E,y);x.apply(this,arguments);};}return u.call(e,h,p,m,v,E,y)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(u){return function(f,h,p,m,v){for(var E=0;;)try{return u.call(e,f,h,p,m,v)}catch(x){if(x.code==="EAGAIN"&&E<10){E++;continue}throw x}}}(e.readSync);function t(u){u.lchmod=function(f,h,p){u.open(f,Zi.O_WRONLY|Zi.O_SYMLINK,h,function(m,v){if(m){p&&p(m);return}u.fchmod(v,h,function(E){u.close(v,function(x){p&&p(E||x);});});});},u.lchmodSync=function(f,h){var p=u.openSync(f,Zi.O_WRONLY|Zi.O_SYMLINK,h),m=!0,v;try{v=u.fchmodSync(p,h),m=!1;}finally{if(m)try{u.closeSync(p);}catch{}else u.closeSync(p);}return v};}function r(u){Zi.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,p,m){u.open(f,Zi.O_SYMLINK,function(v,E){if(v){m&&m(v);return}u.futimes(E,h,p,function(x){u.close(E,function(y){m&&m(x||y);});});});},u.lutimesSync=function(f,h,p){var m=u.openSync(f,Zi.O_SYMLINK),v,E=!0;try{v=u.futimesSync(m,h,p),E=!1;}finally{if(E)try{u.closeSync(m);}catch{}else u.closeSync(m);}return v}):u.futimes&&(u.lutimes=function(f,h,p,m){m&&process.nextTick(m);},u.lutimesSync=function(){});}function n(u){return u&&function(f,h,p){return u.call(e,f,h,function(m){l(m)&&(m=null),p&&p.apply(this,arguments);})}}function i(u){return u&&function(f,h){try{return u.call(e,f,h)}catch(p){if(!l(p))throw p}}}function s(u){return u&&function(f,h,p,m){return u.call(e,f,h,p,function(v){l(v)&&(v=null),m&&m.apply(this,arguments);})}}function a(u){return u&&function(f,h,p){try{return u.call(e,f,h,p)}catch(m){if(!l(m))throw m}}}function o(u){return u&&function(f,h,p){typeof h=="function"&&(p=h,h=null);function m(v,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),p&&p.apply(this,arguments);}return h?u.call(e,f,h,m):u.call(e,f,m)}}function c(u){return u&&function(f,h){var p=h?u.call(e,f,h):u.call(e,f);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function l(u){if(!u||u.code==="ENOSYS")return !0;var f=!process.getuid||process.getuid()!==0;return !!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var qw=P((Cre,Mw)=>{var Bw=he("stream").Stream;Mw.exports=g5;function g5(e){return {ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Bw.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),o=0,c=a.length;o<c;o++){var l=a[o];this[l]=i[l];}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start;}if(this.fd!==null){process.nextTick(function(){s._read();});return}e.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read();});}function r(n,i){if(!(this instanceof r))return new r(n,i);Bw.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),a=0,o=s.length;a<o;a++){var c=s[a];this[c]=i[c];}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start;}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush());}}});var Uw=P((wre,Hw)=>{Hw.exports=y5;var m5=Object.getPrototypeOf||function(e){return e.__proto__};function y5(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:m5(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));}),t}});var La=P((xre,gg)=>{var Gt=he("fs"),_5=Fw(),v5=qw(),S5=Uw(),Sl=he("util"),Er,El;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Er=Symbol.for("graceful-fs.queue"),El=Symbol.for("graceful-fs.previous")):(Er="___graceful-fs.queue",El="___graceful-fs.previous");function b5(){}function Vw(e,t){Object.defineProperty(e,Er,{get:function(){return t}});}var qs=b5;Sl.debuglog?qs=Sl.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(qs=function(){var e=Sl.format.apply(Sl,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e);});Gt[Er]||($w=global[Er]||[],Vw(Gt,$w),Gt.close=function(e){function t(r,n){return e.call(Gt,r,function(i){i||jw(),typeof n=="function"&&n.apply(this,arguments);})}return Object.defineProperty(t,El,{value:e}),t}(Gt.close),Gt.closeSync=function(e){function t(r){e.apply(Gt,arguments),jw();}return Object.defineProperty(t,El,{value:e}),t}(Gt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){qs(Gt[Er]),he("assert").equal(Gt[Er].length,0);}));var $w;global[Er]||Vw(global,Gt[Er]);gg.exports=hg(S5(Gt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Gt.__patched&&(gg.exports=hg(Gt),Gt.__patched=!0);function hg(e){_5(e),e.gracefulify=hg,e.createReadStream=O,e.createWriteStream=j;var t=e.readFile;e.readFile=r;function r(G,ee,H){return typeof ee=="function"&&(H=ee,ee=null),ne(G,ee,H);function ne(me,Pe,W,K){return t(me,Pe,function(se){se&&(se.code==="EMFILE"||se.code==="ENFILE")?Da([ne,[me,Pe,W],se,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments);})}}var n=e.writeFile;e.writeFile=i;function i(G,ee,H,ne){return typeof H=="function"&&(ne=H,H=null),me(G,ee,H,ne);function me(Pe,W,K,se,Ae){return n(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var s=e.appendFile;s&&(e.appendFile=a);function a(G,ee,H,ne){return typeof H=="function"&&(ne=H,H=null),me(G,ee,H,ne);function me(Pe,W,K,se,Ae){return s(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var o=e.copyFile;o&&(e.copyFile=c);function c(G,ee,H,ne){return typeof H=="function"&&(ne=H,H=0),me(G,ee,H,ne);function me(Pe,W,K,se,Ae){return o(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var l=e.readdir;e.readdir=f;var u=/^v[0-5]\./;function f(G,ee,H){typeof ee=="function"&&(H=ee,ee=null);var ne=u.test(process.version)?function(W,K,se,Ae){return l(W,me(W,K,se,Ae))}:function(W,K,se,Ae){return l(W,K,me(W,K,se,Ae))};return ne(G,ee,H);function me(Pe,W,K,se){return function(Ae,Fe){Ae&&(Ae.code==="EMFILE"||Ae.code==="ENFILE")?Da([ne,[Pe,W,K],Ae,se||Date.now(),Date.now()]):(Fe&&Fe.sort&&Fe.sort(),typeof K=="function"&&K.call(this,Ae,Fe));}}}if(process.version.substr(0,4)==="v0.8"){var h=v5(e);x=h.ReadStream,S=h.WriteStream;}var p=e.ReadStream;p&&(x.prototype=Object.create(p.prototype),x.prototype.open=y);var m=e.WriteStream;m&&(S.prototype=Object.create(m.prototype),S.prototype.open=N),Object.defineProperty(e,"ReadStream",{get:function(){return x},set:function(G){x=G;},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(G){S=G;},enumerable:!0,configurable:!0});var v=x;Object.defineProperty(e,"FileReadStream",{get:function(){return v},set:function(G){v=G;},enumerable:!0,configurable:!0});var E=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return E},set:function(G){E=G;},enumerable:!0,configurable:!0});function x(G,ee){return this instanceof x?(p.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function y(){var G=this;z(G.path,G.flags,G.mode,function(ee,H){ee?(G.autoClose&&G.destroy(),G.emit("error",ee)):(G.fd=H,G.emit("open",H),G.read());});}function S(G,ee){return this instanceof S?(m.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function N(){var G=this;z(G.path,G.flags,G.mode,function(ee,H){ee?(G.destroy(),G.emit("error",ee)):(G.fd=H,G.emit("open",H));});}function O(G,ee){return new e.ReadStream(G,ee)}function j(G,ee){return new e.WriteStream(G,ee)}var J=e.open;e.open=z;function z(G,ee,H,ne){return typeof H=="function"&&(ne=H,H=null),me(G,ee,H,ne);function me(Pe,W,K,se,Ae){return J(Pe,W,K,function(Fe,je){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}return e}function Da(e){qs("ENQUEUE",e[0].name,e[1]),Gt[Er].push(e),pg();}var bl;function jw(){for(var e=Date.now(),t=0;t<Gt[Er].length;++t)Gt[Er][t].length>2&&(Gt[Er][t][3]=e,Gt[Er][t][4]=e);pg();}function pg(){if(clearTimeout(bl),bl=void 0,Gt[Er].length!==0){var e=Gt[Er].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)qs("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){qs("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n);}else {var o=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);o>=l?(qs("RETRY",t.name,r),t.apply(null,r.concat([i]))):Gt[Er].push(e);}bl===void 0&&(bl=setTimeout(pg,0));}}});var Mr=P(xi=>{var Ww=cr().fromCallback,Br=La(),E5=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Br[e]=="function");Object.assign(xi,Br);E5.forEach(e=>{xi[e]=Ww(Br[e]);});xi.exists=function(e,t){return typeof t=="function"?Br.exists(e,t):new Promise(r=>Br.exists(e,r))};xi.read=function(e,t,r,n,i,s){return typeof s=="function"?Br.read(e,t,r,n,i,s):new Promise((a,o)=>{Br.read(e,t,r,n,i,(c,l,u)=>{if(c)return o(c);a({bytesRead:l,buffer:u});});})};xi.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Br.write(e,t,...r):new Promise((n,i)=>{Br.write(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesWritten:a,buffer:o});});})};xi.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?Br.readv(e,t,...r):new Promise((n,i)=>{Br.readv(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesRead:a,buffers:o});});})};xi.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Br.writev(e,t,...r):new Promise((n,i)=>{Br.writev(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesWritten:a,buffers:o});});})};typeof Br.realpath.native=="function"?xi.realpath.native=Ww(Br.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003");});var zw=P((Are,Kw)=>{var C5=he("path");Kw.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(C5.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};});var Yw=P((Ire,mg)=>{var Gw=Mr(),{checkPath:Xw}=zw(),Zw=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};mg.exports.makeDir=async(e,t)=>(Xw(e),Gw.mkdir(e,{mode:Zw(t),recursive:!0}));mg.exports.makeDirSync=(e,t)=>(Xw(e),Gw.mkdirSync(e,{mode:Zw(t),recursive:!0}));});var Un=P((Rre,Qw)=>{var w5=cr().fromPromise,{makeDir:x5,makeDirSync:yg}=Yw(),_g=w5(x5);Qw.exports={mkdirs:_g,mkdirsSync:yg,mkdirp:_g,mkdirpSync:yg,ensureDir:_g,ensureDirSync:yg};});var Yi=P((Pre,ex)=>{var T5=cr().fromPromise,Jw=Mr();function A5(e){return Jw.access(e).then(()=>!0).catch(()=>!1)}ex.exports={pathExists:T5(A5),pathExistsSync:Jw.existsSync};});var vg=P((Nre,tx)=>{var Oa=Mr(),I5=cr().fromPromise;async function R5(e,t,r){let n=await Oa.open(e,"r+"),i=null;try{await Oa.futimes(n,t,r);}finally{try{await Oa.close(n);}catch(s){i=s;}}if(i)throw i}function P5(e,t,r){let n=Oa.openSync(e,"r+");return Oa.futimesSync(n,t,r),Oa.closeSync(n)}tx.exports={utimesMillis:I5(R5),utimesMillisSync:P5};});var Hs=P((kre,sx)=>{var Fa=Mr(),lr=he("path"),rx=cr().fromPromise;function N5(e,t,r){let n=r.dereference?i=>Fa.stat(i,{bigint:!0}):i=>Fa.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function k5(e,t,r){let n,i=r.dereference?a=>Fa.statSync(a,{bigint:!0}):a=>Fa.lstatSync(a,{bigint:!0}),s=i(e);try{n=i(t);}catch(a){if(a.code==="ENOENT")return {srcStat:s,destStat:null};throw a}return {srcStat:s,destStat:n}}async function D5(e,t,r,n){let{srcStat:i,destStat:s}=await N5(e,t,n);if(s){if(Jo(i,s)){let a=lr.basename(e),o=lr.basename(t);if(r==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return {srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Sg(e,t))throw new Error(Cl(e,t,r));return {srcStat:i,destStat:s}}function L5(e,t,r,n){let{srcStat:i,destStat:s}=k5(e,t,n);if(s){if(Jo(i,s)){let a=lr.basename(e),o=lr.basename(t);if(r==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return {srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Sg(e,t))throw new Error(Cl(e,t,r));return {srcStat:i,destStat:s}}async function nx(e,t,r,n){let i=lr.resolve(lr.dirname(e)),s=lr.resolve(lr.dirname(r));if(s===i||s===lr.parse(s).root)return;let a;try{a=await Fa.stat(s,{bigint:!0});}catch(o){if(o.code==="ENOENT")return;throw o}if(Jo(t,a))throw new Error(Cl(e,r,n));return nx(e,t,s,n)}function ix(e,t,r,n){let i=lr.resolve(lr.dirname(e)),s=lr.resolve(lr.dirname(r));if(s===i||s===lr.parse(s).root)return;let a;try{a=Fa.statSync(s,{bigint:!0});}catch(o){if(o.code==="ENOENT")return;throw o}if(Jo(t,a))throw new Error(Cl(e,r,n));return ix(e,t,s,n)}function Jo(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Sg(e,t){let r=lr.resolve(e).split(lr.sep).filter(i=>i),n=lr.resolve(t).split(lr.sep).filter(i=>i);return r.every((i,s)=>n[s]===i)}function Cl(e,t,r){return `Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}sx.exports={checkPaths:rx(D5),checkPathsSync:L5,checkParentPaths:rx(nx),checkParentPathsSync:ix,isSrcSubdir:Sg,areIdentical:Jo};});var lx=P((Dre,cx)=>{var Ir=Mr(),eu=he("path"),{mkdirs:O5}=Un(),{pathExists:F5}=Yi(),{utimesMillis:B5}=vg(),tu=Hs();async function M5(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await tu.checkPaths(e,t,"copy",r);if(await tu.checkParentPaths(e,n,t,"copy"),!await ox(e,t,r))return;let a=eu.dirname(t);await F5(a)||await O5(a),await ux(i,e,t,r);}async function ox(e,t,r){return r.filter?r.filter(e,t):!0}async function ux(e,t,r,n){let s=await(n.dereference?Ir.stat:Ir.lstat)(t);if(s.isDirectory())return $5(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return q5(s,e,t,r,n);if(s.isSymbolicLink())return j5(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function q5(e,t,r,n,i){if(!t)return ax(e,r,n,i);if(i.overwrite)return await Ir.unlink(n),ax(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function ax(e,t,r,n){if(await Ir.copyFile(t,r),n.preserveTimestamps){H5(e.mode)&&await U5(r,e.mode);let i=await Ir.stat(t);await B5(r,i.atime,i.mtime);}return Ir.chmod(r,e.mode)}function H5(e){return (e&128)===0}function U5(e,t){return Ir.chmod(e,t|128)}async function $5(e,t,r,n,i){t||await Ir.mkdir(n);let s=await Ir.readdir(r);await Promise.all(s.map(async a=>{let o=eu.join(r,a),c=eu.join(n,a);if(!await ox(o,c,i))return;let{destStat:u}=await tu.checkPaths(o,c,"copy",i);return ux(u,o,c,i)})),t||await Ir.chmod(n,e.mode);}async function j5(e,t,r,n){let i=await Ir.readlink(t);if(n.dereference&&(i=eu.resolve(process.cwd(),i)),!e)return Ir.symlink(i,r);let s=null;try{s=await Ir.readlink(r);}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Ir.symlink(i,r);throw a}if(n.dereference&&(s=eu.resolve(process.cwd(),s)),tu.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(tu.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await Ir.unlink(r),Ir.symlink(i,r)}cx.exports=M5;});var gx=P((Lre,px)=>{var qr=La(),ru=he("path"),V5=Un().mkdirsSync,W5=vg().utimesMillisSync,nu=Hs();function K5(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=nu.checkPathsSync(e,t,"copy",r);if(nu.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let s=ru.dirname(t);return qr.existsSync(s)||V5(s),fx(i,e,t,r)}function fx(e,t,r,n){let s=(n.dereference?qr.statSync:qr.lstatSync)(t);if(s.isDirectory())return J5(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return z5(s,e,t,r,n);if(s.isSymbolicLink())return r8(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function z5(e,t,r,n,i){return t?G5(e,r,n,i):dx(e,r,n,i)}function G5(e,t,r,n){if(n.overwrite)return qr.unlinkSync(r),dx(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function dx(e,t,r,n){return qr.copyFileSync(t,r),n.preserveTimestamps&&X5(e.mode,t,r),bg(r,e.mode)}function X5(e,t,r){return Z5(e)&&Y5(r,e),Q5(t,r)}function Z5(e){return (e&128)===0}function Y5(e,t){return bg(e,t|128)}function bg(e,t){return qr.chmodSync(e,t)}function Q5(e,t){let r=qr.statSync(e);return W5(t,r.atime,r.mtime)}function J5(e,t,r,n,i){return t?hx(r,n,i):e8(e.mode,r,n,i)}function e8(e,t,r,n){return qr.mkdirSync(r),hx(t,r,n),bg(r,e)}function hx(e,t,r){qr.readdirSync(e).forEach(n=>t8(n,e,t,r));}function t8(e,t,r,n){let i=ru.join(t,e),s=ru.join(r,e);if(n.filter&&!n.filter(i,s))return;let{destStat:a}=nu.checkPathsSync(i,s,"copy",n);return fx(a,i,s,n)}function r8(e,t,r,n){let i=qr.readlinkSync(t);if(n.dereference&&(i=ru.resolve(process.cwd(),i)),e){let s;try{s=qr.readlinkSync(r);}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return qr.symlinkSync(i,r);throw a}if(n.dereference&&(s=ru.resolve(process.cwd(),s)),nu.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(nu.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return n8(i,r)}else return qr.symlinkSync(i,r)}function n8(e,t){return qr.unlinkSync(t),qr.symlinkSync(e,t)}px.exports=K5;});var wl=P((Ore,mx)=>{var i8=cr().fromPromise;mx.exports={copy:i8(lx()),copySync:gx()};});var iu=P((Fre,_x)=>{var yx=La(),s8=cr().fromCallback;function a8(e,t){yx.rm(e,{recursive:!0,force:!0},t);}function o8(e){yx.rmSync(e,{recursive:!0,force:!0});}_x.exports={remove:s8(a8),removeSync:o8};});var Tx=P((Bre,xx)=>{var u8=cr().fromPromise,bx=Mr(),Ex=he("path"),Cx=Un(),wx=iu(),vx=u8(async function(t){let r;try{r=await bx.readdir(t);}catch{return Cx.mkdirs(t)}return Promise.all(r.map(n=>wx.remove(Ex.join(t,n))))});function Sx(e){let t;try{t=bx.readdirSync(e);}catch{return Cx.mkdirsSync(e)}t.forEach(r=>{r=Ex.join(e,r),wx.removeSync(r);});}xx.exports={emptyDirSync:Sx,emptydirSync:Sx,emptyDir:vx,emptydir:vx};});var Px=P((Mre,Rx)=>{var c8=cr().fromPromise,Ax=he("path"),Ti=Mr(),Ix=Un();async function l8(e){let t;try{t=await Ti.stat(e);}catch{}if(t&&t.isFile())return;let r=Ax.dirname(e),n=null;try{n=await Ti.stat(r);}catch(i){if(i.code==="ENOENT"){await Ix.mkdirs(r),await Ti.writeFile(e,"");return}else throw i}n.isDirectory()?await Ti.writeFile(e,""):await Ti.readdir(r);}function f8(e){let t;try{t=Ti.statSync(e);}catch{}if(t&&t.isFile())return;let r=Ax.dirname(e);try{Ti.statSync(r).isDirectory()||Ti.readdirSync(r);}catch(n){if(n&&n.code==="ENOENT")Ix.mkdirsSync(r);else throw n}Ti.writeFileSync(e,"");}Rx.exports={createFile:c8(l8),createFileSync:f8};});var Ox=P((qre,Lx)=>{var d8=cr().fromPromise,Nx=he("path"),Qi=Mr(),kx=Un(),{pathExists:h8}=Yi(),{areIdentical:Dx}=Hs();async function p8(e,t){let r;try{r=await Qi.lstat(t);}catch{}let n;try{n=await Qi.lstat(e);}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(r&&Dx(n,r))return;let i=Nx.dirname(t);await h8(i)||await kx.mkdirs(i),await Qi.link(e,t);}function g8(e,t){let r;try{r=Qi.lstatSync(t);}catch{}try{let s=Qi.lstatSync(e);if(r&&Dx(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=Nx.dirname(t);return Qi.existsSync(n)||kx.mkdirsSync(n),Qi.linkSync(e,t)}Lx.exports={createLink:d8(p8),createLinkSync:g8};});var Bx=P((Hre,Fx)=>{var Ji=he("path"),su=Mr(),{pathExists:m8}=Yi(),y8=cr().fromPromise;async function _8(e,t){if(Ji.isAbsolute(e)){try{await su.lstat(e);}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return {toCwd:e,toDst:e}}let r=Ji.dirname(t),n=Ji.join(r,e);if(await m8(n))return {toCwd:n,toDst:e};try{await su.lstat(e);}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return {toCwd:e,toDst:Ji.relative(r,e)}}function v8(e,t){if(Ji.isAbsolute(e)){if(!su.existsSync(e))throw new Error("absolute srcpath does not exist");return {toCwd:e,toDst:e}}let r=Ji.dirname(t),n=Ji.join(r,e);if(su.existsSync(n))return {toCwd:n,toDst:e};if(!su.existsSync(e))throw new Error("relative srcpath does not exist");return {toCwd:e,toDst:Ji.relative(r,e)}}Fx.exports={symlinkPaths:y8(_8),symlinkPathsSync:v8};});var Hx=P((Ure,qx)=>{var Mx=Mr(),S8=cr().fromPromise;async function b8(e,t){if(t)return t;let r;try{r=await Mx.lstat(e);}catch{return "file"}return r&&r.isDirectory()?"dir":"file"}function E8(e,t){if(t)return t;let r;try{r=Mx.lstatSync(e);}catch{return "file"}return r&&r.isDirectory()?"dir":"file"}qx.exports={symlinkType:S8(b8),symlinkTypeSync:E8};});var Vx=P(($re,jx)=>{var C8=cr().fromPromise,Ux=he("path"),ti=Mr(),{mkdirs:w8,mkdirsSync:x8}=Un(),{symlinkPaths:T8,symlinkPathsSync:A8}=Bx(),{symlinkType:I8,symlinkTypeSync:R8}=Hx(),{pathExists:P8}=Yi(),{areIdentical:$x}=Hs();async function N8(e,t,r){let n;try{n=await ti.lstat(t);}catch{}if(n&&n.isSymbolicLink()){let[o,c]=await Promise.all([ti.stat(e),ti.stat(t)]);if($x(o,c))return}let i=await T8(e,t);e=i.toDst;let s=await I8(i.toCwd,r),a=Ux.dirname(t);return await P8(a)||await w8(a),ti.symlink(e,t,s)}function k8(e,t,r){let n;try{n=ti.lstatSync(t);}catch{}if(n&&n.isSymbolicLink()){let o=ti.statSync(e),c=ti.statSync(t);if($x(o,c))return}let i=A8(e,t);e=i.toDst,r=R8(i.toCwd,r);let s=Ux.dirname(t);return ti.existsSync(s)||x8(s),ti.symlinkSync(e,t,r)}jx.exports={createSymlink:C8(N8),createSymlinkSync:k8};});var Qx=P((jre,Yx)=>{var{createFile:Wx,createFileSync:Kx}=Px(),{createLink:zx,createLinkSync:Gx}=Ox(),{createSymlink:Xx,createSymlinkSync:Zx}=Vx();Yx.exports={createFile:Wx,createFileSync:Kx,ensureFile:Wx,ensureFileSync:Kx,createLink:zx,createLinkSync:Gx,ensureLink:zx,ensureLinkSync:Gx,createSymlink:Xx,createSymlinkSync:Zx,ensureSymlink:Xx,ensureSymlinkSync:Zx};});var xl=P((Vre,Jx)=>{function D8(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let s=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+s}function L8(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Jx.exports={stringify:D8,stripBom:L8};});var nT=P((Wre,rT)=>{var Ba;try{Ba=La();}catch{Ba=he("fs");}var Tl=cr(),{stringify:eT,stripBom:tT}=xl();async function O8(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Ba,n="throws"in t?t.throws:!0,i=await Tl.fromCallback(r.readFile)(e,t);i=tT(i);let s;try{s=JSON.parse(i,t?t.reviver:null);}catch(a){if(n)throw a.message=`${e}: ${a.message}`,a;return null}return s}var F8=Tl.fromPromise(O8);function B8(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Ba,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=tT(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function M8(e,t,r={}){let n=r.fs||Ba,i=eT(t,r);await Tl.fromCallback(n.writeFile)(e,i,r);}var q8=Tl.fromPromise(M8);function H8(e,t,r={}){let n=r.fs||Ba,i=eT(t,r);return n.writeFileSync(e,i,r)}var U8={readFile:F8,readFileSync:B8,writeFile:q8,writeFileSync:H8};rT.exports=U8;});var sT=P((Kre,iT)=>{var Al=nT();iT.exports={readJson:Al.readFile,readJsonSync:Al.readFileSync,writeJson:Al.writeFile,writeJsonSync:Al.writeFileSync};});var Il=P((zre,uT)=>{var $8=cr().fromPromise,Eg=Mr(),aT=he("path"),oT=Un(),j8=Yi().pathExists;async function V8(e,t,r="utf-8"){let n=aT.dirname(e);return await j8(n)||await oT.mkdirs(n),Eg.writeFile(e,t,r)}function W8(e,...t){let r=aT.dirname(e);Eg.existsSync(r)||oT.mkdirsSync(r),Eg.writeFileSync(e,...t);}uT.exports={outputFile:$8(V8),outputFileSync:W8};});var lT=P((Gre,cT)=>{var{stringify:K8}=xl(),{outputFile:z8}=Il();async function G8(e,t,r={}){let n=K8(t,r);await z8(e,n,r);}cT.exports=G8;});var dT=P((Xre,fT)=>{var{stringify:X8}=xl(),{outputFileSync:Z8}=Il();function Y8(e,t,r){let n=X8(t,r);Z8(e,n,r);}fT.exports=Y8;});var pT=P((Zre,hT)=>{var Q8=cr().fromPromise,Hr=sT();Hr.outputJson=Q8(lT());Hr.outputJsonSync=dT();Hr.outputJSON=Hr.outputJson;Hr.outputJSONSync=Hr.outputJsonSync;Hr.writeJSON=Hr.writeJson;Hr.writeJSONSync=Hr.writeJsonSync;Hr.readJSON=Hr.readJson;Hr.readJSONSync=Hr.readJsonSync;hT.exports=Hr;});var vT=P((Yre,_T)=>{var J8=Mr(),gT=he("path"),{copy:e6}=wl(),{remove:yT}=iu(),{mkdirp:t6}=Un(),{pathExists:r6}=Yi(),mT=Hs();async function n6(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await mT.checkPaths(e,t,"move",r);await mT.checkParentPaths(e,i,t,"move");let a=gT.dirname(t);return gT.parse(a).root!==a&&await t6(a),i6(e,t,n,s)}async function i6(e,t,r,n){if(!n){if(r)await yT(t);else if(await r6(t))throw new Error("dest already exists.")}try{await J8.rename(e,t);}catch(i){if(i.code!=="EXDEV")throw i;await s6(e,t,r);}}async function s6(e,t,r){return await e6(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),yT(e)}_T.exports=n6;});var wT=P((Qre,CT)=>{var bT=La(),wg=he("path"),a6=wl().copySync,ET=iu().removeSync,o6=Un().mkdirpSync,ST=Hs();function u6(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=ST.checkPathsSync(e,t,"move",r);return ST.checkParentPathsSync(e,i,t,"move"),c6(t)||o6(wg.dirname(t)),l6(e,t,n,s)}function c6(e){let t=wg.dirname(e);return wg.parse(t).root===t}function l6(e,t,r,n){if(n)return Cg(e,t,r);if(r)return ET(t),Cg(e,t,r);if(bT.existsSync(t))throw new Error("dest already exists.");return Cg(e,t,r)}function Cg(e,t,r){try{bT.renameSync(e,t);}catch(n){if(n.code!=="EXDEV")throw n;return f6(e,t,r)}}function f6(e,t,r){return a6(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),ET(e)}CT.exports=u6;});var TT=P((Jre,xT)=>{var d6=cr().fromPromise;xT.exports={move:d6(vT()),moveSync:wT()};});var Rl=P((ene,AT)=>{AT.exports={...Mr(),...wl(),...Tx(),...Qx(),...pT(),...Un(),...TT(),...Il(),...Yi(),...iu()};});var au=P((tne,kT)=>{var h6=he("path"),ri="\\\\/",IT=`[^${ri}]`,Ai="\\.",p6="\\+",g6="\\?",Pl="\\/",m6="(?=.)",RT="[^/]",xg=`(?:${Pl}|$)`,PT=`(?:^|${Pl})`,Tg=`${Ai}{1,2}${xg}`,y6=`(?!${Ai})`,_6=`(?!${PT}${Tg})`,v6=`(?!${Ai}{0,1}${xg})`,S6=`(?!${Tg})`,b6=`[^.${Pl}]`,E6=`${RT}*?`,NT={DOT_LITERAL:Ai,PLUS_LITERAL:p6,QMARK_LITERAL:g6,SLASH_LITERAL:Pl,ONE_CHAR:m6,QMARK:RT,END_ANCHOR:xg,DOTS_SLASH:Tg,NO_DOT:y6,NO_DOTS:_6,NO_DOT_SLASH:v6,NO_DOTS_SLASH:S6,QMARK_NO_DOT:b6,STAR:E6,START_ANCHOR:PT},C6={...NT,SLASH_LITERAL:`[${ri}]`,QMARK:IT,STAR:`${IT}*?`,DOTS_SLASH:`${Ai}{1,2}(?:[${ri}]|$)`,NO_DOT:`(?!${Ai})`,NO_DOTS:`(?!(?:^|[${ri}])${Ai}{1,2}(?:[${ri}]|$))`,NO_DOT_SLASH:`(?!${Ai}{0,1}(?:[${ri}]|$))`,NO_DOTS_SLASH:`(?!${Ai}{1,2}(?:[${ri}]|$))`,QMARK_NO_DOT:`[^.${ri}]`,START_ANCHOR:`(?:^|[${ri}])`,END_ANCHOR:`(?:[${ri}]|$)`},w6={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};kT.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:w6,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:h6.sep,extglobChars(e){return {"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?C6:NT}};});var Nl=P(Gr=>{var x6=he("path"),T6=process.platform==="win32",{REGEX_BACKSLASH:A6,REGEX_REMOVE_BACKSLASH:I6,REGEX_SPECIAL_CHARS:R6,REGEX_SPECIAL_CHARS_GLOBAL:P6}=au();Gr.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Gr.hasRegexChars=e=>R6.test(e);Gr.isRegexChar=e=>e.length===1&&Gr.hasRegexChars(e);Gr.escapeRegex=e=>e.replace(P6,"\\$1");Gr.toPosixSlashes=e=>e.replace(A6,"/");Gr.removeBackslashes=e=>e.replace(I6,t=>t==="\\"?"":t);Gr.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Gr.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:T6===!0||x6.sep==="\\";Gr.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Gr.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Gr.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Gr.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s};});var HT=P((nne,qT)=>{var DT=Nl(),{CHAR_ASTERISK:Ag,CHAR_AT:N6,CHAR_BACKWARD_SLASH:ou,CHAR_COMMA:k6,CHAR_DOT:Ig,CHAR_EXCLAMATION_MARK:Rg,CHAR_FORWARD_SLASH:MT,CHAR_LEFT_CURLY_BRACE:Pg,CHAR_LEFT_PARENTHESES:Ng,CHAR_LEFT_SQUARE_BRACKET:D6,CHAR_PLUS:L6,CHAR_QUESTION_MARK:LT,CHAR_RIGHT_CURLY_BRACE:O6,CHAR_RIGHT_PARENTHESES:OT,CHAR_RIGHT_SQUARE_BRACKET:F6}=au(),FT=e=>e===MT||e===ou,BT=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1);},B6=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],a=[],o=[],c=e,l=-1,u=0,f=0,h=!1,p=!1,m=!1,v=!1,E=!1,x=!1,y=!1,S=!1,N=!1,O=!1,j=0,J,z,G={value:"",depth:0,isGlob:!1},ee=()=>l>=n,H=()=>c.charCodeAt(l+1),ne=()=>(J=z,c.charCodeAt(++l));for(;l<n;){z=ne();let se;if(z===ou){y=G.backslashes=!0,z=ne(),z===Pg&&(x=!0);continue}if(x===!0||z===Pg){for(j++;ee()!==!0&&(z=ne());){if(z===ou){y=G.backslashes=!0,ne();continue}if(z===Pg){j++;continue}if(x!==!0&&z===Ig&&(z=ne())===Ig){if(h=G.isBrace=!0,m=G.isGlob=!0,O=!0,i===!0)continue;break}if(x!==!0&&z===k6){if(h=G.isBrace=!0,m=G.isGlob=!0,O=!0,i===!0)continue;break}if(z===O6&&(j--,j===0)){x=!1,h=G.isBrace=!0,O=!0;break}}if(i===!0)continue;break}if(z===MT){if(s.push(l),a.push(G),G={value:"",depth:0,isGlob:!1},O===!0)continue;if(J===Ig&&l===u+1){u+=2;continue}f=l+1;continue}if(r.noext!==!0&&(z===L6||z===N6||z===Ag||z===LT||z===Rg)===!0&&H()===Ng){if(m=G.isGlob=!0,v=G.isExtglob=!0,O=!0,z===Rg&&l===u&&(N=!0),i===!0){for(;ee()!==!0&&(z=ne());){if(z===ou){y=G.backslashes=!0,z=ne();continue}if(z===OT){m=G.isGlob=!0,O=!0;break}}continue}break}if(z===Ag){if(J===Ag&&(E=G.isGlobstar=!0),m=G.isGlob=!0,O=!0,i===!0)continue;break}if(z===LT){if(m=G.isGlob=!0,O=!0,i===!0)continue;break}if(z===D6){for(;ee()!==!0&&(se=ne());){if(se===ou){y=G.backslashes=!0,ne();continue}if(se===F6){p=G.isBracket=!0,m=G.isGlob=!0,O=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&z===Rg&&l===u){S=G.negated=!0,u++;continue}if(r.noparen!==!0&&z===Ng){if(m=G.isGlob=!0,i===!0){for(;ee()!==!0&&(z=ne());){if(z===Ng){y=G.backslashes=!0,z=ne();continue}if(z===OT){O=!0;break}}continue}break}if(m===!0){if(O=!0,i===!0)continue;break}}r.noext===!0&&(v=!1,m=!1);let me=c,Pe="",W="";u>0&&(Pe=c.slice(0,u),c=c.slice(u),f-=u),me&&m===!0&&f>0?(me=c.slice(0,f),W=c.slice(f)):m===!0?(me="",W=c):me=c,me&&me!==""&&me!=="/"&&me!==c&&FT(me.charCodeAt(me.length-1))&&(me=me.slice(0,-1)),r.unescape===!0&&(W&&(W=DT.removeBackslashes(W)),me&&y===!0&&(me=DT.removeBackslashes(me)));let K={prefix:Pe,input:e,start:u,base:me,glob:W,isBrace:h,isBracket:p,isGlob:m,isExtglob:v,isGlobstar:E,negated:S,negatedExtglob:N};if(r.tokens===!0&&(K.maxDepth=0,FT(z)||a.push(G),K.tokens=a),r.parts===!0||r.tokens===!0){let se;for(let Ae=0;Ae<s.length;Ae++){let Fe=se?se+1:u,je=s[Ae],Ve=e.slice(Fe,je);r.tokens&&(Ae===0&&u!==0?(a[Ae].isPrefix=!0,a[Ae].value=Pe):a[Ae].value=Ve,BT(a[Ae]),K.maxDepth+=a[Ae].depth),(Ae!==0||Ve!=="")&&o.push(Ve),se=je;}if(se&&se+1<e.length){let Ae=e.slice(se+1);o.push(Ae),r.tokens&&(a[a.length-1].value=Ae,BT(a[a.length-1]),K.maxDepth+=a[a.length-1].depth);}K.slashes=s,K.parts=o;}return K};qT.exports=B6;});var jT=P((ine,$T)=>{var kl=au(),dn=Nl(),{MAX_LENGTH:Dl,POSIX_REGEX_SOURCE:M6,REGEX_NON_SPECIAL_CHARS:q6,REGEX_SPECIAL_CHARS_BACKREF:H6,REPLACEMENTS:UT}=kl,U6=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;return r},Ma=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,kg=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=UT[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Dl,r.maxLength):Dl,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},a=[s],o=r.capture?"":"?:",c=dn.isWindows(t),l=kl.globChars(c),u=kl.extglobChars(l),{DOT_LITERAL:f,PLUS_LITERAL:h,SLASH_LITERAL:p,ONE_CHAR:m,DOTS_SLASH:v,NO_DOT:E,NO_DOT_SLASH:x,NO_DOTS_SLASH:y,QMARK:S,QMARK_NO_DOT:N,STAR:O,START_ANCHOR:j}=l,J=ye=>`(${o}(?:(?!${j}${ye.dot?v:f}).)*?)`,z=r.dot?"":E,G=r.dot?S:N,ee=r.bash===!0?J(r):O;r.capture&&(ee=`(${ee})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let H={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=dn.removePrefix(e,H),i=e.length;let ne=[],me=[],Pe=[],W=s,K,se=()=>H.index===i-1,Ae=H.peek=(ye=1)=>e[H.index+ye],Fe=H.advance=()=>e[++H.index]||"",je=()=>e.slice(H.index+1),Ve=(ye="",Ue=0)=>{H.consumed+=ye,H.index+=Ue;},ot=ye=>{H.output+=ye.output!=null?ye.output:ye.value,Ve(ye.value);},kt=()=>{let ye=1;for(;Ae()==="!"&&(Ae(2)!=="("||Ae(3)==="?");)Fe(),H.start++,ye++;return ye%2===0?!1:(H.negated=!0,H.start++,!0)},St=ye=>{H[ye]++,Pe.push(ye);},ft=ye=>{H[ye]--,Pe.pop();},Le=ye=>{if(W.type==="globstar"){let Ue=H.braces>0&&(ye.type==="comma"||ye.type==="brace"),le=ye.extglob===!0||ne.length&&(ye.type==="pipe"||ye.type==="paren");ye.type!=="slash"&&ye.type!=="paren"&&!Ue&&!le&&(H.output=H.output.slice(0,-W.output.length),W.type="star",W.value="*",W.output=ee,H.output+=W.output);}if(ne.length&&ye.type!=="paren"&&(ne[ne.length-1].inner+=ye.value),(ye.value||ye.output)&&ot(ye),W&&W.type==="text"&&ye.type==="text"){W.value+=ye.value,W.output=(W.output||"")+ye.value;return}ye.prev=W,a.push(ye),W=ye;},It=(ye,Ue)=>{let le={...u[Ue],conditions:1,inner:""};le.prev=W,le.parens=H.parens,le.output=H.output;let Re=(r.capture?"(":"")+le.open;St("parens"),Le({type:ye,value:Ue,output:H.output?"":m}),Le({type:"paren",extglob:!0,value:Fe(),output:Re}),ne.push(le);},qt=ye=>{let Ue=ye.close+(r.capture?")":""),le;if(ye.type==="negate"){let Re=ee;if(ye.inner&&ye.inner.length>1&&ye.inner.includes("/")&&(Re=J(r)),(Re!==ee||se()||/^\)+$/.test(je()))&&(Ue=ye.close=`)$))${Re}`),ye.inner.includes("*")&&(le=je())&&/^\.[^\\/.]+$/.test(le)){let We=kg(le,{...t,fastpaths:!1}).output;Ue=ye.close=`)${We})${Re})`;}ye.prev.type==="bos"&&(H.negatedExtglob=!0);}Le({type:"paren",extglob:!0,value:K,output:Ue}),ft("parens");};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let ye=!1,Ue=e.replace(H6,(le,Re,We,et,ze,vn)=>et==="\\"?(ye=!0,le):et==="?"?Re?Re+et+(ze?S.repeat(ze.length):""):vn===0?G+(ze?S.repeat(ze.length):""):S.repeat(We.length):et==="."?f.repeat(We.length):et==="*"?Re?Re+et+(ze?ee:""):ee:Re?le:`\\${le}`);return ye===!0&&(r.unescape===!0?Ue=Ue.replace(/\\/g,""):Ue=Ue.replace(/\\+/g,le=>le.length%2===0?"\\\\":le?"\\":"")),Ue===e&&r.contains===!0?(H.output=e,H):(H.output=dn.wrapOutput(Ue,H,t),H)}for(;!se();){if(K=Fe(),K==="\0")continue;if(K==="\\"){let le=Ae();if(le==="/"&&r.bash!==!0||le==="."||le===";")continue;if(!le){K+="\\",Le({type:"text",value:K});continue}let Re=/^\\+/.exec(je()),We=0;if(Re&&Re[0].length>2&&(We=Re[0].length,H.index+=We,We%2!==0&&(K+="\\")),r.unescape===!0?K=Fe():K+=Fe(),H.brackets===0){Le({type:"text",value:K});continue}}if(H.brackets>0&&(K!=="]"||W.value==="["||W.value==="[^")){if(r.posix!==!1&&K===":"){let le=W.value.slice(1);if(le.includes("[")&&(W.posix=!0,le.includes(":"))){let Re=W.value.lastIndexOf("["),We=W.value.slice(0,Re),et=W.value.slice(Re+2),ze=M6[et];if(ze){W.value=We+ze,H.backtrack=!0,Fe(),!s.output&&a.indexOf(W)===1&&(s.output=m);continue}}}(K==="["&&Ae()!==":"||K==="-"&&Ae()==="]")&&(K=`\\${K}`),K==="]"&&(W.value==="["||W.value==="[^")&&(K=`\\${K}`),r.posix===!0&&K==="!"&&W.value==="["&&(K="^"),W.value+=K,ot({value:K});continue}if(H.quotes===1&&K!=='"'){K=dn.escapeRegex(K),W.value+=K,ot({value:K});continue}if(K==='"'){H.quotes=H.quotes===1?0:1,r.keepQuotes===!0&&Le({type:"text",value:K});continue}if(K==="("){St("parens"),Le({type:"paren",value:K});continue}if(K===")"){if(H.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Ma("opening","("));let le=ne[ne.length-1];if(le&&H.parens===le.parens+1){qt(ne.pop());continue}Le({type:"paren",value:K,output:H.parens?")":"\\)"}),ft("parens");continue}if(K==="["){if(r.nobracket===!0||!je().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Ma("closing","]"));K=`\\${K}`;}else St("brackets");Le({type:"bracket",value:K});continue}if(K==="]"){if(r.nobracket===!0||W&&W.type==="bracket"&&W.value.length===1){Le({type:"text",value:K,output:`\\${K}`});continue}if(H.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Ma("opening","["));Le({type:"text",value:K,output:`\\${K}`});continue}ft("brackets");let le=W.value.slice(1);if(W.posix!==!0&&le[0]==="^"&&!le.includes("/")&&(K=`/${K}`),W.value+=K,ot({value:K}),r.literalBrackets===!1||dn.hasRegexChars(le))continue;let Re=dn.escapeRegex(W.value);if(H.output=H.output.slice(0,-W.value.length),r.literalBrackets===!0){H.output+=Re,W.value=Re;continue}W.value=`(${o}${Re}|${W.value})`,H.output+=W.value;continue}if(K==="{"&&r.nobrace!==!0){St("braces");let le={type:"brace",value:K,output:"(",outputIndex:H.output.length,tokensIndex:H.tokens.length};me.push(le),Le(le);continue}if(K==="}"){let le=me[me.length-1];if(r.nobrace===!0||!le){Le({type:"text",value:K,output:K});continue}let Re=")";if(le.dots===!0){let We=a.slice(),et=[];for(let ze=We.length-1;ze>=0&&(a.pop(),We[ze].type!=="brace");ze--)We[ze].type!=="dots"&&et.unshift(We[ze].value);Re=U6(et,r),H.backtrack=!0;}if(le.comma!==!0&&le.dots!==!0){let We=H.output.slice(0,le.outputIndex),et=H.tokens.slice(le.tokensIndex);le.value=le.output="\\{",K=Re="\\}",H.output=We;for(let ze of et)H.output+=ze.output||ze.value;}Le({type:"brace",value:K,output:Re}),ft("braces"),me.pop();continue}if(K==="|"){ne.length>0&&ne[ne.length-1].conditions++,Le({type:"text",value:K});continue}if(K===","){let le=K,Re=me[me.length-1];Re&&Pe[Pe.length-1]==="braces"&&(Re.comma=!0,le="|"),Le({type:"comma",value:K,output:le});continue}if(K==="/"){if(W.type==="dot"&&H.index===H.start+1){H.start=H.index+1,H.consumed="",H.output="",a.pop(),W=s;continue}Le({type:"slash",value:K,output:p});continue}if(K==="."){if(H.braces>0&&W.type==="dot"){W.value==="."&&(W.output=f);let le=me[me.length-1];W.type="dots",W.output+=K,W.value+=K,le.dots=!0;continue}if(H.braces+H.parens===0&&W.type!=="bos"&&W.type!=="slash"){Le({type:"text",value:K,output:f});continue}Le({type:"dot",value:K,output:f});continue}if(K==="?"){if(!(W&&W.value==="(")&&r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){It("qmark",K);continue}if(W&&W.type==="paren"){let Re=Ae(),We=K;if(Re==="<"&&!dn.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(W.value==="("&&!/[!=<:]/.test(Re)||Re==="<"&&!/<([!=]|\w+>)/.test(je()))&&(We=`\\${K}`),Le({type:"text",value:K,output:We});continue}if(r.dot!==!0&&(W.type==="slash"||W.type==="bos")){Le({type:"qmark",value:K,output:N});continue}Le({type:"qmark",value:K,output:S});continue}if(K==="!"){if(r.noextglob!==!0&&Ae()==="("&&(Ae(2)!=="?"||!/[!=<:]/.test(Ae(3)))){It("negate",K);continue}if(r.nonegate!==!0&&H.index===0){kt();continue}}if(K==="+"){if(r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){It("plus",K);continue}if(W&&W.value==="("||r.regex===!1){Le({type:"plus",value:K,output:h});continue}if(W&&(W.type==="bracket"||W.type==="paren"||W.type==="brace")||H.parens>0){Le({type:"plus",value:K});continue}Le({type:"plus",value:h});continue}if(K==="@"){if(r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){Le({type:"at",extglob:!0,value:K,output:""});continue}Le({type:"text",value:K});continue}if(K!=="*"){(K==="$"||K==="^")&&(K=`\\${K}`);let le=q6.exec(je());le&&(K+=le[0],H.index+=le[0].length),Le({type:"text",value:K});continue}if(W&&(W.type==="globstar"||W.star===!0)){W.type="star",W.star=!0,W.value+=K,W.output=ee,H.backtrack=!0,H.globstar=!0,Ve(K);continue}let ye=je();if(r.noextglob!==!0&&/^\([^?]/.test(ye)){It("star",K);continue}if(W.type==="star"){if(r.noglobstar===!0){Ve(K);continue}let le=W.prev,Re=le.prev,We=le.type==="slash"||le.type==="bos",et=Re&&(Re.type==="star"||Re.type==="globstar");if(r.bash===!0&&(!We||ye[0]&&ye[0]!=="/")){Le({type:"star",value:K,output:""});continue}let ze=H.braces>0&&(le.type==="comma"||le.type==="brace"),vn=ne.length&&(le.type==="pipe"||le.type==="paren");if(!We&&le.type!=="paren"&&!ze&&!vn){Le({type:"star",value:K,output:""});continue}for(;ye.slice(0,3)==="/**";){let Dr=e[H.index+4];if(Dr&&Dr!=="/")break;ye=ye.slice(3),Ve("/**",3);}if(le.type==="bos"&&se()){W.type="globstar",W.value+=K,W.output=J(r),H.output=W.output,H.globstar=!0,Ve(K);continue}if(le.type==="slash"&&le.prev.type!=="bos"&&!et&&se()){H.output=H.output.slice(0,-(le.output+W.output).length),le.output=`(?:${le.output}`,W.type="globstar",W.output=J(r)+(r.strictSlashes?")":"|$)"),W.value+=K,H.globstar=!0,H.output+=le.output+W.output,Ve(K);continue}if(le.type==="slash"&&le.prev.type!=="bos"&&ye[0]==="/"){let Dr=ye[1]!==void 0?"|$":"";H.output=H.output.slice(0,-(le.output+W.output).length),le.output=`(?:${le.output}`,W.type="globstar",W.output=`${J(r)}${p}|${p}${Dr})`,W.value+=K,H.output+=le.output+W.output,H.globstar=!0,Ve(K+Fe()),Le({type:"slash",value:"/",output:""});continue}if(le.type==="bos"&&ye[0]==="/"){W.type="globstar",W.value+=K,W.output=`(?:^|${p}|${J(r)}${p})`,H.output=W.output,H.globstar=!0,Ve(K+Fe()),Le({type:"slash",value:"/",output:""});continue}H.output=H.output.slice(0,-W.output.length),W.type="globstar",W.output=J(r),W.value+=K,H.output+=W.output,H.globstar=!0,Ve(K);continue}let Ue={type:"star",value:K,output:ee};if(r.bash===!0){Ue.output=".*?",(W.type==="bos"||W.type==="slash")&&(Ue.output=z+Ue.output),Le(Ue);continue}if(W&&(W.type==="bracket"||W.type==="paren")&&r.regex===!0){Ue.output=K,Le(Ue);continue}(H.index===H.start||W.type==="slash"||W.type==="dot")&&(W.type==="dot"?(H.output+=x,W.output+=x):r.dot===!0?(H.output+=y,W.output+=y):(H.output+=z,W.output+=z),Ae()!=="*"&&(H.output+=m,W.output+=m)),Le(Ue);}for(;H.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ma("closing","]"));H.output=dn.escapeLast(H.output,"["),ft("brackets");}for(;H.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ma("closing",")"));H.output=dn.escapeLast(H.output,"("),ft("parens");}for(;H.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ma("closing","}"));H.output=dn.escapeLast(H.output,"{"),ft("braces");}if(r.strictSlashes!==!0&&(W.type==="star"||W.type==="bracket")&&Le({type:"maybe_slash",value:"",output:`${p}?`}),H.backtrack===!0){H.output="";for(let ye of H.tokens)H.output+=ye.output!=null?ye.output:ye.value,ye.suffix&&(H.output+=ye.suffix);}return H};kg.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Dl,r.maxLength):Dl,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=UT[e]||e;let s=dn.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:c,DOTS_SLASH:l,NO_DOT:u,NO_DOTS:f,NO_DOTS_SLASH:h,STAR:p,START_ANCHOR:m}=kl.globChars(s),v=r.dot?f:u,E=r.dot?h:u,x=r.capture?"":"?:",y={negated:!1,prefix:""},S=r.bash===!0?".*?":p;r.capture&&(S=`(${S})`);let N=z=>z.noglobstar===!0?S:`(${x}(?:(?!${m}${z.dot?l:a}).)*?)`,O=z=>{switch(z){case"*":return `${v}${c}${S}`;case".*":return `${a}${c}${S}`;case"*.*":return `${v}${S}${a}${c}${S}`;case"*/*":return `${v}${S}${o}${c}${E}${S}`;case"**":return v+N(r);case"**/*":return `(?:${v}${N(r)}${o})?${E}${c}${S}`;case"**/*.*":return `(?:${v}${N(r)}${o})?${E}${S}${a}${c}${S}`;case"**/.*":return `(?:${v}${N(r)}${o})?${a}${c}${S}`;default:{let G=/^(.*?)\.(\w+)$/.exec(z);if(!G)return;let ee=O(G[1]);return ee?ee+a+G[2]:void 0}}},j=dn.removePrefix(e,y),J=O(j);return J&&r.strictSlashes!==!0&&(J+=`${o}?`),J};$T.exports=kg;});var WT=P((sne,VT)=>{var $6=he("path"),j6=HT(),Dg=jT(),Lg=Nl(),V6=au(),W6=e=>e&&typeof e=="object"&&!Array.isArray(e),tr=(e,t,r=!1)=>{if(Array.isArray(e)){let u=e.map(h=>tr(h,t,r));return h=>{for(let p of u){let m=p(h);if(m)return m}return !1}}let n=W6(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=Lg.isWindows(t),a=n?tr.compileRe(e,t):tr.makeRe(e,t,!1,!0),o=a.state;delete a.state;let c=()=>!1;if(i.ignore){let u={...t,ignore:null,onMatch:null,onResult:null};c=tr(i.ignore,u,r);}let l=(u,f=!1)=>{let{isMatch:h,match:p,output:m}=tr.test(u,a,t,{glob:e,posix:s}),v={glob:e,state:o,regex:a,posix:s,input:u,output:m,match:p,isMatch:h};return typeof i.onResult=="function"&&i.onResult(v),h===!1?(v.isMatch=!1,f?v:!1):c(u)?(typeof i.onIgnore=="function"&&i.onIgnore(v),v.isMatch=!1,f?v:!1):(typeof i.onMatch=="function"&&i.onMatch(v),f?v:!0)};return r&&(l.state=o),l};tr.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return {isMatch:!1,output:""};let s=r||{},a=s.format||(i?Lg.toPosixSlashes:null),o=e===n,c=o&&a?a(e):e;return o===!1&&(c=a?a(e):e,o=c===n),(o===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?o=tr.matchBase(e,t,r,i):o=t.exec(c)),{isMatch:!!o,match:o,output:c}};tr.matchBase=(e,t,r,n=Lg.isWindows(r))=>(t instanceof RegExp?t:tr.makeRe(t,r)).test($6.basename(e));tr.isMatch=(e,t,r)=>tr(t,r)(e);tr.parse=(e,t)=>Array.isArray(e)?e.map(r=>tr.parse(r,t)):Dg(e,{...t,fastpaths:!1});tr.scan=(e,t)=>j6(e,t);tr.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",a=i.contains?"":"$",o=`${s}(?:${e.output})${a}`;e&&e.negated===!0&&(o=`^(?!${o}).*$`);let c=tr.toRegex(o,t);return n===!0&&(c.state=e),c};tr.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=Dg.fastpaths(e,t)),i.output||(i=Dg(e,t)),tr.compileRe(i,t,r,n)};tr.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return /$^/}};tr.constants=V6;VT.exports=tr;});var Og=P((ane,KT)=>{KT.exports=WT();});var eA=P((one,JT)=>{var cu=he("fs"),{Readable:K6}=he("stream"),uu=he("path"),{promisify:Bl}=he("util"),Fg=Og(),z6=Bl(cu.readdir),G6=Bl(cu.stat),zT=Bl(cu.lstat),X6=Bl(cu.realpath),Z6="!",YT="READDIRP_RECURSIVE_ERROR",Y6=new Set(["ENOENT","EPERM","EACCES","ELOOP",YT]),Bg="files",QT="directories",Ol="files_directories",Ll="all",GT=[Bg,QT,Ol,Ll],Q6=e=>Y6.has(e.code),[XT,J6]=process.versions.node.split(".").slice(0,2).map(e=>Number.parseInt(e,10)),e$=process.platform==="win32"&&(XT>10||XT===10&&J6>=5),ZT=e=>{if(e!==void 0){if(typeof e=="function")return e;if(typeof e=="string"){let t=Fg(e.trim());return r=>t(r.basename)}if(Array.isArray(e)){let t=[],r=[];for(let n of e){let i=n.trim();i.charAt(0)===Z6?r.push(Fg(i.slice(1))):t.push(Fg(i));}return r.length>0?t.length>0?n=>t.some(i=>i(n.basename))&&!r.some(i=>i(n.basename)):n=>!r.some(i=>i(n.basename)):n=>t.some(i=>i(n.basename))}}},Fl=class e extends K6{static get defaultOptions(){return {root:".",fileFilter:t=>!0,directoryFilter:t=>!0,type:Bg,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(t={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:t.highWaterMark||4096});let r={...e.defaultOptions,...t},{root:n,type:i}=r;this._fileFilter=ZT(r.fileFilter),this._directoryFilter=ZT(r.directoryFilter);let s=r.lstat?zT:G6;e$?this._stat=a=>s(a,{bigint:!0}):this._stat=s,this._maxDepth=r.depth,this._wantsDir=[QT,Ol,Ll].includes(i),this._wantsFile=[Bg,Ol,Ll].includes(i),this._wantsEverything=i===Ll,this._root=uu.resolve(n),this._isDirent="Dirent"in cu&&!r.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0;}async _read(t){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&t>0;){let{path:r,depth:n,files:i=[]}=this.parent||{};if(i.length>0){let s=i.splice(0,t).map(a=>this._formatEntry(a,r));for(let a of await Promise.all(s)){if(this.destroyed)return;let o=await this._getEntryType(a);o==="directory"&&this._directoryFilter(a)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(a.fullPath,n+1)),this._wantsDir&&(this.push(a),t--)):(o==="file"||this._includeAsFile(a))&&this._fileFilter(a)&&this._wantsFile&&(this.push(a),t--);}}else {let s=this.parents.pop();if(!s){this.push(null);break}if(this.parent=await s,this.destroyed)return}}}catch(r){this.destroy(r);}finally{this.reading=!1;}}}async _exploreDir(t,r){let n;try{n=await z6(t,this._rdOptions);}catch(i){this._onError(i);}return {files:n,depth:r,path:t}}async _formatEntry(t,r){let n;try{let i=this._isDirent?t.name:t,s=uu.resolve(uu.join(r,i));n={path:uu.relative(this._root,s),fullPath:s,basename:i},n[this._statsProp]=this._isDirent?t:await this._stat(s);}catch(i){this._onError(i);}return n}_onError(t){Q6(t)&&!this.destroyed?this.emit("warn",t):this.destroy(t);}async _getEntryType(t){let r=t&&t[this._statsProp];if(r){if(r.isFile())return "file";if(r.isDirectory())return "directory";if(r&&r.isSymbolicLink()){let n=t.fullPath;try{let i=await X6(n),s=await zT(i);if(s.isFile())return "file";if(s.isDirectory()){let a=i.length;if(n.startsWith(i)&&n.substr(a,1)===uu.sep){let o=new Error(`Circular symlink detected: "${n}" points to "${i}"`);return o.code=YT,this._onError(o)}return "directory"}}catch(i){this._onError(i);}}}}_includeAsFile(t){let r=t&&t[this._statsProp];return r&&this._wantsEverything&&!r.isDirectory()}},qa=(e,t={})=>{let r=t.entryType||t.type;if(r==="both"&&(r=Ol),r&&(t.type=r),e){if(typeof e!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!GT.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${GT.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return t.root=e,new Fl(t)},t$=(e,t={})=>new Promise((r,n)=>{let i=[];qa(e,t).on("data",s=>i.push(s)).on("end",()=>r(i)).on("error",s=>n(s));});qa.promise=t$;qa.ReaddirpStream=Fl;qa.default=qa;JT.exports=qa;});var Mg=P((une,tA)=>{tA.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return "/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var i=e[2];(i==="?"||i===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//");}var s=e.split(/[/\\]+/);return t!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")};});var oA=P((sA,aA)=>{Object.defineProperty(sA,"__esModule",{value:!0});var iA=Og(),r$=Mg(),rA="!",n$={returnIndex:!1},i$=e=>Array.isArray(e)?e:[e],s$=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=iA(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},nA=(e,t,r,n)=>{let i=Array.isArray(r),s=i?r[0]:r;if(!i&&typeof s!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(s));let a=r$(s,!1);for(let c=0;c<t.length;c++){let l=t[c];if(l(a))return n?-1:!1}let o=i&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let l=e[c];if(i?l(...o):l(a))return n?c:!0}return n?-1:!1},qg=(e,t,r=n$)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,i=n.returnIndex||!1,s=i$(e),a=s.filter(c=>typeof c=="string"&&c.charAt(0)===rA).map(c=>c.slice(1)).map(c=>iA(c,n)),o=s.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==rA).map(c=>s$(c,n));return t==null?(c,l=!1)=>nA(o,a,c,typeof l=="boolean"?l:!1):nA(o,a,t,i)};qg.default=qg;aA.exports=qg;});var cA=P((cne,uA)=>{uA.exports=function(t){if(typeof t!="string"||t==="")return !1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return !0;t=t.slice(r.index+r[0].length);}return !1};});var Hg=P((lne,fA)=>{var a$=cA(),lA={"{":"}","(":")","[":"]"},o$=function(e){if(e[0]==="!")return !0;for(var t=0,r=-2,n=-2,i=-2,s=-2,a=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(a===-1||a>n||(a=e.indexOf("\\",t),a===-1||a>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(a=e.indexOf("\\",t),a===-1||a>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(a=e.indexOf("\\",t),a===-1||a>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(a=e.indexOf("\\",r),a===-1||a>s))))return !0;if(e[t]==="\\"){var o=e[t+1];t+=2;var c=lA[o];if(c){var l=e.indexOf(c,t);l!==-1&&(t=l+1);}if(e[t]==="!")return !0}else t++;}return !1},u$=function(e){if(e[0]==="!")return !0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return !0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=lA[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1);}if(e[t]==="!")return !0}else t++;}return !1};fA.exports=function(t,r){if(typeof t!="string"||t==="")return !1;if(a$(t))return !0;var n=o$;return r&&r.strict===!1&&(n=u$),n(t)};});var hA=P((fne,dA)=>{var c$=Hg(),l$=he("path").posix.dirname,f$=he("os").platform()==="win32",Ug="/",d$=/\\/g,h$=/[\{\[].*[\}\]]$/,p$=/(^|[^\\])([\{\[]|\([^\)]+$)/,g$=/\\([\!\*\?\|\[\]\(\)\{\}])/g;dA.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&f$&&t.indexOf(Ug)<0&&(t=t.replace(d$,Ug)),h$.test(t)&&(t+=Ug),t+="a";do t=l$(t);while(c$(t)||p$.test(t));return t.replace(g$,"$1")};});var Ml=P(wn=>{wn.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;wn.find=(e,t)=>e.nodes.find(r=>r.type===t);wn.exceedsLimit=(e,t,r=1,n)=>n===!1||!wn.isInteger(e)||!wn.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;wn.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0);};wn.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0);wn.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;wn.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;wn.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);wn.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s):s!==void 0&&t.push(s);}return t};return r(e),t};});var ql=P((hne,gA)=>{var pA=Ml();gA.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&pA.isInvalidBrace(i),a=n.invalid===!0&&t.escapeInvalid===!0,o="";if(n.value)return (s||a)&&pA.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let c of n.nodes)o+=r(c);return o};return r(e)};});var yA=P((pne,mA)=>{mA.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1};});var TA=P((gne,xA)=>{var _A=yA(),Us=(e,t,r)=>{if(_A(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(_A(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),a=String(n.capture),o=String(n.wrap),c=e+":"+t+"="+i+s+a+o;if(Us.cache.hasOwnProperty(c))return Us.cache[c].result;let l=Math.min(e,t),u=Math.max(e,t);if(Math.abs(l-u)===1){let v=e+"|"+t;return n.capture?`(${v})`:n.wrap===!1?v:`(?:${v})`}let f=wA(e)||wA(t),h={min:e,max:t,a:l,b:u},p=[],m=[];if(f&&(h.isPadded=f,h.maxLen=String(h.max).length),l<0){let v=u<0?Math.abs(u):1;m=vA(v,Math.abs(l),h,n),l=h.a=0;}return u>=0&&(p=vA(l,u,h,n)),h.negatives=m,h.positives=p,h.result=m$(m,p),n.capture===!0?h.result=`(${h.result})`:n.wrap!==!1&&p.length+m.length>1&&(h.result=`(?:${h.result})`),Us.cache[c]=h,h.result};function m$(e,t,r){let n=$g(e,t,"-",!1)||[],i=$g(t,e,"",!1)||[],s=$g(e,t,"-?",!0)||[];return n.concat(s).concat(i).join("|")}function y$(e,t){let r=1,n=1,i=bA(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=bA(e,r);for(i=EA(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=EA(t+1,n)-1;return s=[...s],s.sort(S$),s}function _$(e,t,r){if(e===t)return {pattern:e,count:[],digits:0};let n=v$(e,t),i=n.length,s="",a=0;for(let o=0;o<i;o++){let[c,l]=n[o];c===l?s+=c:c!=="0"||l!=="9"?s+=b$(c,l):a++;}return a&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[a],digits:i}}function vA(e,t,r,n){let i=y$(e,t),s=[],a=e,o;for(let c=0;c<i.length;c++){let l=i[c],u=_$(String(a),String(l),n),f="";if(!r.isPadded&&o&&o.pattern===u.pattern){o.count.length>1&&o.count.pop(),o.count.push(u.count[0]),o.string=o.pattern+CA(o.count),a=l+1;continue}r.isPadded&&(f=E$(l,r,n)),u.string=f+u.pattern+CA(u.count),s.push(u),a=l+1,o=u;}return s}function $g(e,t,r,n,i){let s=[];for(let a of e){let{string:o}=a;!n&&!SA(t,"string",o)&&s.push(r+o),n&&SA(t,"string",o)&&s.push(r+o);}return s}function v$(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function S$(e,t){return e>t?1:t>e?-1:0}function SA(e,t,r){return e.some(n=>n[t]===r)}function bA(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function EA(e,t){return e-e%Math.pow(10,t)}function CA(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function b$(e,t,r){return `[${e}${t-e===1?"":"-"}${t}]`}function wA(e){return /^-?(0+)\d/.test(e)}function E$(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return "";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}Us.cache={};Us.clearCache=()=>Us.cache={};xA.exports=Us;});var Wg=P((mne,LA)=>{var C$=he("util"),RA=TA(),AA=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),w$=e=>t=>e===!0?Number(t):String(t),jg=e=>typeof e=="number"||typeof e=="string"&&e!=="",lu=e=>Number.isInteger(+e),Vg=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return !1;for(;t[++r]==="0";);return r>0},x$=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,T$=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0");}return r===!1?String(e):e},IA=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},A$=(e,t)=>{e.negatives.sort((a,o)=>a<o?-1:a>o?1:0),e.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},PA=(e,t,r,n)=>{if(r)return RA(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return `[${i}-${s}]`},NA=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return RA(e,t,r)},kA=(...e)=>new RangeError("Invalid range arguments: "+C$.inspect(...e)),DA=(e,t,r)=>{if(r.strictRanges===!0)throw kA([e,t]);return []},I$=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return []},R$=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw kA([e,t]);return []}i===0&&(i=0),s===0&&(s=0);let a=i>s,o=String(e),c=String(t),l=String(r);r=Math.max(Math.abs(r),1);let u=Vg(o)||Vg(c)||Vg(l),f=u?Math.max(o.length,c.length,l.length):0,h=u===!1&&x$(e,t,n)===!1,p=n.transform||w$(h);if(n.toRegex&&r===1)return PA(IA(e,f),IA(t,f),!0,n);let m={negatives:[],positives:[]},v=y=>m[y<0?"negatives":"positives"].push(Math.abs(y)),E=[],x=0;for(;a?i>=s:i<=s;)n.toRegex===!0&&r>1?v(i):E.push(T$(p(i,x),f,h)),i=a?i-r:i+r,x++;return n.toRegex===!0?r>1?A$(m,n):NA(E,null,{wrap:!1,...n}):E},P$=(e,t,r=1,n={})=>{if(!lu(e)&&e.length>1||!lu(t)&&t.length>1)return DA(e,t,n);let i=n.transform||(h=>String.fromCharCode(h)),s=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),o=s>a,c=Math.min(s,a),l=Math.max(s,a);if(n.toRegex&&r===1)return PA(c,l,!1,n);let u=[],f=0;for(;o?s>=a:s<=a;)u.push(i(s,f)),s=o?s-r:s+r,f++;return n.toRegex===!0?NA(u,null,{wrap:!1,options:n}):u},Hl=(e,t,r,n={})=>{if(t==null&&jg(e))return [e];if(!jg(e)||!jg(t))return DA(e,t,n);if(typeof r=="function")return Hl(e,t,1,{transform:r});if(AA(r))return Hl(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,lu(r)?lu(e)&&lu(t)?R$(e,t,r,i):P$(e,t,Math.max(Math.abs(r),1),i):r!=null&&!AA(r)?I$(r,i):Hl(e,t,1,r)};LA.exports=Hl;});var BA=P((yne,FA)=>{var N$=Wg(),OA=Ml(),k$=(e,t={})=>{let r=(n,i={})=>{let s=OA.isInvalidBrace(i),a=n.invalid===!0&&t.escapeInvalid===!0,o=s===!0||a===!0,c=t.escapeInvalid===!0?"\\":"",l="";if(n.isOpen===!0||n.isClose===!0)return c+n.value;if(n.type==="open")return o?c+n.value:"(";if(n.type==="close")return o?c+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":o?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let u=OA.reduce(n.nodes),f=N$(...u,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return u.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let u of n.nodes)l+=r(u,n);return l};return r(e)};FA.exports=k$;});var HA=P((_ne,qA)=>{var D$=Wg(),MA=ql(),Ha=Ml(),$s=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?Ha.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push($s(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?$s(i,s,r):i+s);return Ha.flatten(n)},L$=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let a=s,o=s.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(i.invalid||i.dollar){o.push($s(o.pop(),MA(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){o.push($s(o.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=Ha.reduce(i.nodes);if(Ha.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let h=D$(...f,t);h.length===0&&(h=MA(i,t)),o.push($s(o.pop(),h)),i.nodes=[];return}let c=Ha.encloseBrace(i),l=i.queue,u=i;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,l=u.queue;for(let f=0;f<i.nodes.length;f++){let h=i.nodes[f];if(h.type==="comma"&&i.type==="brace"){f===1&&l.push(""),l.push("");continue}if(h.type==="close"){o.push($s(o.pop(),l,c));continue}if(h.value&&h.type!=="open"){l.push($s(l.pop(),h.value));continue}h.nodes&&n(h,i);}return l};return Ha.flatten(n(e))};qA.exports=L$;});var $A=P((vne,UA)=>{UA.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};});var zA=P((Sne,KA)=>{var O$=ql(),{MAX_LENGTH:jA,CHAR_BACKSLASH:Kg,CHAR_BACKTICK:F$,CHAR_COMMA:B$,CHAR_DOT:M$,CHAR_LEFT_PARENTHESES:q$,CHAR_RIGHT_PARENTHESES:H$,CHAR_LEFT_CURLY_BRACE:U$,CHAR_RIGHT_CURLY_BRACE:$$,CHAR_LEFT_SQUARE_BRACKET:VA,CHAR_RIGHT_SQUARE_BRACKET:WA,CHAR_DOUBLE_QUOTE:j$,CHAR_SINGLE_QUOTE:V$,CHAR_NO_BREAK_SPACE:W$,CHAR_ZERO_WIDTH_NOBREAK_SPACE:K$}=$A(),z$=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(jA,r.maxLength):jA;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],a=i,o=i,c=0,l=e.length,u=0,f=0,h,m=()=>e[u++],v=E=>{if(E.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&E.type==="text"){o.value+=E.value;return}return a.nodes.push(E),E.parent=a,E.prev=o,o=E,E};for(v({type:"bos"});u<l;)if(a=s[s.length-1],h=m(),!(h===K$||h===W$)){if(h===Kg){v({type:"text",value:(t.keepEscaping?h:"")+m()});continue}if(h===WA){v({type:"text",value:"\\"+h});continue}if(h===VA){c++;let x;for(;u<l&&(x=m());){if(h+=x,x===VA){c++;continue}if(x===Kg){h+=m();continue}if(x===WA&&(c--,c===0))break}v({type:"text",value:h});continue}if(h===q$){a=v({type:"paren",nodes:[]}),s.push(a),v({type:"text",value:h});continue}if(h===H$){if(a.type!=="paren"){v({type:"text",value:h});continue}a=s.pop(),v({type:"text",value:h}),a=s[s.length-1];continue}if(h===j$||h===V$||h===F$){let E=h,x;for(t.keepQuotes!==!0&&(h="");u<l&&(x=m());){if(x===Kg){h+=x+m();continue}if(x===E){t.keepQuotes===!0&&(h+=x);break}h+=x;}v({type:"text",value:h});continue}if(h===U$){f++;let x={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};a=v(x),s.push(a),v({type:"open",value:h});continue}if(h===$$){if(a.type!=="brace"){v({type:"text",value:h});continue}let E="close";a=s.pop(),a.close=!0,v({type:E,value:h}),f--,a=s[s.length-1];continue}if(h===B$&&f>0){if(a.ranges>0){a.ranges=0;let E=a.nodes.shift();a.nodes=[E,{type:"text",value:O$(a)}];}v({type:"comma",value:h}),a.commas++;continue}if(h===M$&&f>0&&a.commas===0){let E=a.nodes;if(f===0||E.length===0){v({type:"text",value:h});continue}if(o.type==="dot"){if(a.range=[],o.value+=h,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){E.pop();let x=E[E.length-1];x.value+=o.value+h,o=x,a.ranges--;continue}v({type:"dot",value:h});continue}v({type:"text",value:h});}do if(a=s.pop(),a.type!=="root"){a.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0);});let E=s[s.length-1],x=E.nodes.indexOf(a);E.nodes.splice(x,1,...a.nodes);}while(s.length>0);return v({type:"eos"}),i};KA.exports=z$;});var ZA=P((bne,XA)=>{var GA=ql(),G$=BA(),X$=HA(),Z$=zA(),hn=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=hn.create(n,t);Array.isArray(i)?r.push(...i):r.push(i);}else r=[].concat(hn.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};hn.parse=(e,t={})=>Z$(e,t);hn.stringify=(e,t={})=>GA(typeof e=="string"?hn.parse(e,t):e,t);hn.compile=(e,t={})=>(typeof e=="string"&&(e=hn.parse(e,t)),G$(e,t));hn.expand=(e,t={})=>{typeof e=="string"&&(e=hn.parse(e,t));let r=X$(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};hn.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?hn.compile(e,t):hn.expand(e,t);XA.exports=hn;});var YA=P((Ene,Y$)=>{Y$.exports=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];});var JA=P((Cne,QA)=>{QA.exports=YA();});var tI=P((wne,eI)=>{var Q$=he("path"),J$=JA(),ej=new Set(J$);eI.exports=e=>ej.has(Q$.extname(e).slice(1).toLowerCase());});var Ul=P(Oe=>{var{sep:tj}=he("path"),{platform:zg}=process,rj=he("os");Oe.EV_ALL="all";Oe.EV_READY="ready";Oe.EV_ADD="add";Oe.EV_CHANGE="change";Oe.EV_ADD_DIR="addDir";Oe.EV_UNLINK="unlink";Oe.EV_UNLINK_DIR="unlinkDir";Oe.EV_RAW="raw";Oe.EV_ERROR="error";Oe.STR_DATA="data";Oe.STR_END="end";Oe.STR_CLOSE="close";Oe.FSEVENT_CREATED="created";Oe.FSEVENT_MODIFIED="modified";Oe.FSEVENT_DELETED="deleted";Oe.FSEVENT_MOVED="moved";Oe.FSEVENT_CLONED="cloned";Oe.FSEVENT_UNKNOWN="unknown";Oe.FSEVENT_FLAG_MUST_SCAN_SUBDIRS=1;Oe.FSEVENT_TYPE_FILE="file";Oe.FSEVENT_TYPE_DIRECTORY="directory";Oe.FSEVENT_TYPE_SYMLINK="symlink";Oe.KEY_LISTENERS="listeners";Oe.KEY_ERR="errHandlers";Oe.KEY_RAW="rawEmitters";Oe.HANDLER_KEYS=[Oe.KEY_LISTENERS,Oe.KEY_ERR,Oe.KEY_RAW];Oe.DOT_SLASH=`.${tj}`;Oe.BACK_SLASH_RE=/\\/g;Oe.DOUBLE_SLASH_RE=/\/\//;Oe.SLASH_OR_BACK_SLASH_RE=/[/\\]/;Oe.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;Oe.REPLACER_RE=/^\.[/\\]/;Oe.SLASH="/";Oe.SLASH_SLASH="//";Oe.BRACE_START="{";Oe.BANG="!";Oe.ONE_DOT=".";Oe.TWO_DOTS="..";Oe.STAR="*";Oe.GLOBSTAR="**";Oe.ROOT_GLOBSTAR="/**/*";Oe.SLASH_GLOBSTAR="/**";Oe.DIR_SUFFIX="Dir";Oe.ANYMATCH_OPTS={dot:!0};Oe.STRING_TYPE="string";Oe.FUNCTION_TYPE="function";Oe.EMPTY_STR="";Oe.EMPTY_FN=()=>{};Oe.IDENTITY_FN=e=>e;Oe.isWindows=zg==="win32";Oe.isMacos=zg==="darwin";Oe.isLinux=zg==="linux";Oe.isIBMi=rj.type()==="OS400";});var oI=P((Tne,aI)=>{var Ii=he("fs"),fr=he("path"),{promisify:pu}=he("util"),nj=tI(),{isWindows:ij,isLinux:sj,EMPTY_FN:aj,EMPTY_STR:oj,KEY_LISTENERS:Ua,KEY_ERR:Gg,KEY_RAW:fu,HANDLER_KEYS:uj,EV_CHANGE:jl,EV_ADD:$l,EV_ADD_DIR:cj,EV_ERROR:nI,STR_DATA:lj,STR_END:fj,BRACE_START:dj,STAR:hj}=Ul(),pj="watch",gj=pu(Ii.open),iI=pu(Ii.stat),mj=pu(Ii.lstat),yj=pu(Ii.close),Xg=pu(Ii.realpath),_j={lstat:mj,stat:iI},Yg=(e,t)=>{e instanceof Set?e.forEach(t):t(e);},du=(e,t,r)=>{let n=e[t];n instanceof Set||(e[t]=n=new Set([n])),n.add(r);},vj=e=>t=>{let r=e[t];r instanceof Set?r.clear():delete e[t];},hu=(e,t,r)=>{let n=e[t];n instanceof Set?n.delete(r):n===r&&delete e[t];},sI=e=>e instanceof Set?e.size===0:!e,Vl=new Map;function rI(e,t,r,n,i){let s=(a,o)=>{r(e),i(a,o,{watchedPath:e}),o&&e!==o&&Wl(fr.resolve(e,o),Ua,fr.join(e,o));};try{return Ii.watch(e,t,s)}catch(a){n(a);}}var Wl=(e,t,r,n,i)=>{let s=Vl.get(e);s&&Yg(s[t],a=>{a(r,n,i);});},Sj=(e,t,r,n)=>{let{listener:i,errHandler:s,rawEmitter:a}=n,o=Vl.get(t),c;if(!r.persistent)return c=rI(e,r,i,s,a),c.close.bind(c);if(o)du(o,Ua,i),du(o,Gg,s),du(o,fu,a);else {if(c=rI(e,r,Wl.bind(null,t,Ua),s,Wl.bind(null,t,fu)),!c)return;c.on(nI,async l=>{let u=Wl.bind(null,t,Gg);if(o.watcherUnusable=!0,ij&&l.code==="EPERM")try{let f=await gj(e,"r");await yj(f),u(l);}catch{}else u(l);}),o={listeners:i,errHandlers:s,rawEmitters:a,watcher:c},Vl.set(t,o);}return ()=>{hu(o,Ua,i),hu(o,Gg,s),hu(o,fu,a),sI(o.listeners)&&(o.watcher.close(),Vl.delete(t),uj.forEach(vj(o)),o.watcher=void 0,Object.freeze(o));}},Zg=new Map,bj=(e,t,r,n)=>{let {listener:i,rawEmitter:s}=n,a=Zg.get(t),l=a&&a.options;return l&&(l.persistent<r.persistent||l.interval>r.interval)&&(Ii.unwatchFile(t),a=void 0),a?(du(a,Ua,i),du(a,fu,s)):(a={listeners:i,rawEmitters:s,options:r,watcher:Ii.watchFile(t,r,(u,f)=>{Yg(a.rawEmitters,p=>{p(jl,t,{curr:u,prev:f});});let h=u.mtimeMs;(u.size!==f.size||h>f.mtimeMs||h===0)&&Yg(a.listeners,p=>p(e,u));})},Zg.set(t,a)),()=>{hu(a,Ua,i),hu(a,fu,s),sI(a.listeners)&&(Zg.delete(t),Ii.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a));}},Qg=class{constructor(t){this.fsw=t,this._boundHandleError=r=>t._handleError(r);}_watchWithNodeFs(t,r){let n=this.fsw.options,i=fr.dirname(t),s=fr.basename(t);this.fsw._getWatchedDir(i).add(s);let o=fr.resolve(t),c={persistent:n.persistent};r||(r=aj);let l;return n.usePolling?(c.interval=n.enableBinaryInterval&&nj(s)?n.binaryInterval:n.interval,l=bj(t,o,c,{listener:r,rawEmitter:this.fsw._emitRaw})):l=Sj(t,o,c,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),l}_handleFile(t,r,n){if(this.fsw.closed)return;let i=fr.dirname(t),s=fr.basename(t),a=this.fsw._getWatchedDir(i),o=r;if(a.has(s))return;let c=async(u,f)=>{if(this.fsw._throttle(pj,t,5)){if(!f||f.mtimeMs===0)try{let h=await iI(t);if(this.fsw.closed)return;let p=h.atimeMs,m=h.mtimeMs;(!p||p<=m||m!==o.mtimeMs)&&this.fsw._emit(jl,t,h),sj&&o.ino!==h.ino?(this.fsw._closeFile(u),o=h,this.fsw._addPathCloser(u,this._watchWithNodeFs(t,c))):o=h;}catch{this.fsw._remove(i,s);}else if(a.has(s)){let h=f.atimeMs,p=f.mtimeMs;(!h||h<=p||p!==o.mtimeMs)&&this.fsw._emit(jl,t,f),o=f;}}},l=this._watchWithNodeFs(t,c);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(t)){if(!this.fsw._throttle($l,t,0))return;this.fsw._emit($l,t,r);}return l}async _handleSymlink(t,r,n,i){if(this.fsw.closed)return;let s=t.fullPath,a=this.fsw._getWatchedDir(r);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let o;try{o=await Xg(n);}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(a.has(i)?this.fsw._symlinkPaths.get(s)!==o&&(this.fsw._symlinkPaths.set(s,o),this.fsw._emit(jl,n,t.stats)):(a.add(i),this.fsw._symlinkPaths.set(s,o),this.fsw._emit($l,n,t.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return !0;this.fsw._symlinkPaths.set(s,!0);}_handleRead(t,r,n,i,s,a,o){if(t=fr.join(t,oj),!n.hasGlob&&(o=this.fsw._throttle("readdir",t,1e3),!o))return;let c=this.fsw._getWatchedDir(n.path),l=new Set,u=this.fsw._readdirp(t,{fileFilter:f=>n.filterPath(f),directoryFilter:f=>n.filterDir(f),depth:0}).on(lj,async f=>{if(this.fsw.closed){u=void 0;return}let h=f.path,p=fr.join(t,h);if(l.add(h),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,t,p,h))){if(this.fsw.closed){u=void 0;return}(h===i||!i&&!c.has(h))&&(this.fsw._incrReadyCount(),p=fr.join(s,fr.relative(s,p)),this._addToNodeFs(p,r,n,a+1));}}).on(nI,this._boundHandleError);return new Promise(f=>u.once(fj,()=>{if(this.fsw.closed){u=void 0;return}let h=o?o.clear():!1;f(),c.getChildren().filter(p=>p!==t&&!l.has(p)&&(!n.hasGlob||n.filterPath({fullPath:fr.resolve(t,p)}))).forEach(p=>{this.fsw._remove(t,p);}),u=void 0,h&&this._handleRead(t,!1,n,i,s,a,o);}))}async _handleDir(t,r,n,i,s,a,o){let c=this.fsw._getWatchedDir(fr.dirname(t)),l=c.has(fr.basename(t));!(n&&this.fsw.options.ignoreInitial)&&!s&&!l&&(!a.hasGlob||a.globFilter(t))&&this.fsw._emit(cj,t,r),c.add(fr.basename(t)),this.fsw._getWatchedDir(t);let u,f,h=this.fsw.options.depth;if((h==null||i<=h)&&!this.fsw._symlinkPaths.has(o)){if(!s&&(await this._handleRead(t,n,a,s,t,i,u),this.fsw.closed))return;f=this._watchWithNodeFs(t,(p,m)=>{m&&m.mtimeMs===0||this._handleRead(p,!1,a,s,t,i,u);});}return f}async _addToNodeFs(t,r,n,i,s){let a=this.fsw._emitReady;if(this.fsw._isIgnored(t)||this.fsw.closed)return a(),!1;let o=this.fsw._getWatchHelpers(t,i);!o.hasGlob&&n&&(o.hasGlob=n.hasGlob,o.globFilter=n.globFilter,o.filterPath=c=>n.filterPath(c),o.filterDir=c=>n.filterDir(c));try{let c=await _j[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))return a(),!1;let l=this.fsw.options.followSymlinks&&!t.includes(hj)&&!t.includes(dj),u;if(c.isDirectory()){let f=fr.resolve(t),h=l?await Xg(t):t;if(this.fsw.closed||(u=await this._handleDir(o.watchPath,c,r,i,s,o,h),this.fsw.closed))return;f!==h&&h!==void 0&&this.fsw._symlinkPaths.set(f,h);}else if(c.isSymbolicLink()){let f=l?await Xg(t):t;if(this.fsw.closed)return;let h=fr.dirname(o.watchPath);if(this.fsw._getWatchedDir(h).add(o.watchPath),this.fsw._emit($l,o.watchPath,c),u=await this._handleDir(h,c,r,i,t,o,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(fr.resolve(t),f);}else u=this._handleFile(o.watchPath,c,r);return a(),this.fsw._addPathCloser(t,u),!1}catch(c){if(this.fsw._handleError(c))return a(),t}}};aI.exports=Qg;});var cI,uI=Qh(()=>{cI="./fsevents-X6WP4TKM.node";});var fI=P((Rne,lI)=>{uI();try{lI.exports=he(cI);}catch{}});var dI=P(Kl=>{if(process.platform!=="darwin")throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);var gu=fI(),Ur=gu.constants;function Cj(e,t,r){if(typeof e!="string")throw new TypeError(`fsevents argument 1 must be a string and not a ${typeof e}`);if(typeof t=="function"&&typeof r>"u"&&(r=t,t=gu.flags.SinceNow),typeof t!="number")throw new TypeError(`fsevents argument 2 must be a number and not a ${typeof t}`);if(typeof r!="function")throw new TypeError(`fsevents argument 3 must be a function and not a ${typeof r}`);let n=gu.start(gu.global,e,t,r);if(!n)throw new Error(`could not watch: ${e}`);return ()=>{let i=n?Promise.resolve(n).then(gu.stop):Promise.resolve(void 0);return n=void 0,i}}function wj(e,t){return {path:e,flags:t,event:Aj(t),type:xj(t),changes:Ij(t)}}function xj(e){if(Ur.ItemIsFile&e)return "file";if(Ur.ItemIsDir&e||Ur.MustScanSubDirs&e)return "directory";if(Ur.ItemIsSymlink&e)return "symlink"}function Tj(e){for(let t in e)if(e[t])return !0;return !1}function Aj(e){return Ur.ItemRemoved&e?"deleted":Ur.ItemRenamed&e?"moved":Ur.ItemCreated&e?"created":Ur.ItemModified&e?"modified":Ur.RootChanged&e?"root-changed":Ur.ItemCloned&e?"cloned":Tj(e)?"modified":"unknown"}function Ij(e){return {inode:!!(Ur.ItemInodeMetaMod&e),finder:!!(Ur.ItemFinderInfoMod&e),access:!!(Ur.ItemChangeOwner&e),xattrs:!!(Ur.ItemXattrMod&e)}}Kl.watch=Cj;Kl.getInfo=wj;Kl.constants=Ur;});var vI=P((kne,am)=>{var im=he("fs"),dr=he("path"),{promisify:sm}=he("util"),$a;try{$a=dI();}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e);}if($a){let e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){let t=Number.parseInt(e[1],10),r=Number.parseInt(e[2],10);t===8&&r<16&&($a=void 0);}}var{EV_ADD:Jg,EV_CHANGE:Rj,EV_ADD_DIR:hI,EV_UNLINK:zl,EV_ERROR:Pj,STR_DATA:Nj,STR_END:kj,FSEVENT_CREATED:Dj,FSEVENT_MODIFIED:Lj,FSEVENT_DELETED:Oj,FSEVENT_MOVED:Fj,FSEVENT_UNKNOWN:Bj,FSEVENT_FLAG_MUST_SCAN_SUBDIRS:Mj,FSEVENT_TYPE_FILE:qj,FSEVENT_TYPE_DIRECTORY:mu,FSEVENT_TYPE_SYMLINK:_I,ROOT_GLOBSTAR:pI,DIR_SUFFIX:Hj,DOT_SLASH:gI,FUNCTION_TYPE:em,EMPTY_FN:Uj,IDENTITY_FN:$j}=Ul(),jj=e=>isNaN(e)?{}:{depth:e},rm=sm(im.stat),Vj=sm(im.lstat),mI=sm(im.realpath),Wj={stat:rm,lstat:Vj},js=new Map,Kj=10,zj=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),Gj=(e,t)=>({stop:$a.watch(e,t)});function Xj(e,t,r,n){let i=dr.extname(t)?dr.dirname(t):t,s=dr.dirname(i),a=js.get(i);Zj(s)&&(i=s);let o=dr.resolve(e),c=o!==t,l=(f,h,p)=>{c&&(f=f.replace(t,o)),(f===o||!f.indexOf(o+dr.sep))&&r(f,h,p);},u=!1;for(let f of js.keys())if(t.indexOf(dr.resolve(f)+dr.sep)===0){i=f,a=js.get(i),u=!0;break}return a||u?a.listeners.add(l):(a={listeners:new Set([l]),rawEmitter:n,watcher:Gj(i,(f,h)=>{if(!a.listeners.size||h&Mj)return;let p=$a.getInfo(f,h);a.listeners.forEach(m=>{m(f,h,p);}),a.rawEmitter(p.event,f,p);})},js.set(i,a)),()=>{let f=a.listeners;if(f.delete(l),!f.size&&(js.delete(i),a.watcher))return a.watcher.stop().then(()=>{a.rawEmitter=a.watcher=void 0,Object.freeze(a);})}}var Zj=e=>{let t=0;for(let r of js.keys())if(r.indexOf(e)===0&&(t++,t>=Kj))return !0;return !1},Yj=()=>$a&&js.size<128,tm=(e,t)=>{let r=0;for(;!e.indexOf(t)&&(e=dr.dirname(e))!==t;)r++;return r},yI=(e,t)=>e.type===mu&&t.isDirectory()||e.type===_I&&t.isSymbolicLink()||e.type===qj&&t.isFile(),nm=class{constructor(t){this.fsw=t;}checkIgnored(t,r){let n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(t,r))return n.add(t),r&&r.isDirectory()&&n.add(t+pI),!0;n.delete(t),n.delete(t+pI);}addOrChange(t,r,n,i,s,a,o,c){let l=s.has(a)?Rj:Jg;this.handleEvent(l,t,r,n,i,s,a,o,c);}async checkExists(t,r,n,i,s,a,o,c){try{let l=await rm(t);if(this.fsw.closed)return;yI(o,l)?this.addOrChange(t,r,n,i,s,a,o,c):this.handleEvent(zl,t,r,n,i,s,a,o,c);}catch(l){l.code==="EACCES"?this.addOrChange(t,r,n,i,s,a,o,c):this.handleEvent(zl,t,r,n,i,s,a,o,c);}}handleEvent(t,r,n,i,s,a,o,c,l){if(!(this.fsw.closed||this.checkIgnored(r)))if(t===zl){let u=c.type===mu;(u||a.has(o))&&this.fsw._remove(s,o,u);}else {if(t===Jg){if(c.type===mu&&this.fsw._getWatchedDir(r),c.type===_I&&l.followSymlinks){let f=l.depth===void 0?void 0:tm(n,i)+1;return this._addToFsEvents(r,!1,!0,f)}this.fsw._getWatchedDir(s).add(o);}let u=c.type===mu?t+Hj:t;this.fsw._emit(u,r),u===hI&&this._addToFsEvents(r,!1,!0);}}_watchWithFsEvents(t,r,n,i){if(this.fsw.closed||this.fsw._isIgnored(t))return;let s=this.fsw.options,o=Xj(t,r,async(c,l,u)=>{if(this.fsw.closed||s.depth!==void 0&&tm(c,r)>s.depth)return;let f=n(dr.join(t,dr.relative(t,c)));if(i&&!i(f))return;let h=dr.dirname(f),p=dr.basename(f),m=this.fsw._getWatchedDir(u.type===mu?f:h);if(zj.has(l)||u.event===Bj)if(typeof s.ignored===em){let v;try{v=await rm(f);}catch{}if(this.fsw.closed||this.checkIgnored(f,v))return;yI(u,v)?this.addOrChange(f,c,r,h,m,p,u,s):this.handleEvent(zl,f,c,r,h,m,p,u,s);}else this.checkExists(f,c,r,h,m,p,u,s);else switch(u.event){case Dj:case Lj:return this.addOrChange(f,c,r,h,m,p,u,s);case Oj:case Fj:return this.checkExists(f,c,r,h,m,p,u,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),o}async _handleFsEventsSymlink(t,r,n,i){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(r))){this.fsw._symlinkPaths.set(r,!0),this.fsw._incrReadyCount();try{let s=await mI(t);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||t,a=>{let o=t;return s&&s!==gI?o=a.replace(s,t):a!==gI&&(o=dr.join(t,a)),n(o)},!1,i);}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(t,r,n,i,s){let a=n(t),o=r.isDirectory(),c=this.fsw._getWatchedDir(dr.dirname(a)),l=dr.basename(a);o&&this.fsw._getWatchedDir(a),!c.has(l)&&(c.add(l),(!i.ignoreInitial||s===!0)&&this.fsw._emit(o?hI:Jg,a,r));}initWatch(t,r,n,i){if(this.fsw.closed)return;let s=this._watchWithFsEvents(n.watchPath,dr.resolve(t||n.watchPath),i,n.globFilter);this.fsw._addPathCloser(r,s);}async _addToFsEvents(t,r,n,i){if(this.fsw.closed)return;let s=this.fsw.options,a=typeof r===em?r:$j,o=this.fsw._getWatchHelpers(t);try{let c=await Wj[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))throw null;if(c.isDirectory()){if(o.globFilter||this.emitAdd(a(t),c,a,s,n),i&&i>s.depth)return;this.fsw._readdirp(o.watchPath,{fileFilter:l=>o.filterPath(l),directoryFilter:l=>o.filterDir(l),...jj(s.depth-(i||0))}).on(Nj,l=>{if(this.fsw.closed||l.stats.isDirectory()&&!o.filterPath(l))return;let u=dr.join(o.watchPath,l.path),{fullPath:f}=l;if(o.followSymlinks&&l.stats.isSymbolicLink()){let h=s.depth===void 0?void 0:tm(u,dr.resolve(o.watchPath))+1;this._handleFsEventsSymlink(u,f,a,h);}else this.emitAdd(u,l.stats,a,s,n);}).on(Pj,Uj).on(kj,()=>{this.fsw._emitReady();});}else this.emitAdd(o.watchPath,c,a,s,n),this.fsw._emitReady();}catch(c){(!c||this.fsw._handleError(c))&&(this.fsw._emitReady(),this.fsw._emitReady());}if(s.persistent&&n!==!0)if(typeof r===em)this.initWatch(void 0,t,o,a);else {let c;try{c=await mI(o.watchPath);}catch{}this.initWatch(c,t,o,a);}}};am.exports=nm;am.exports.canUse=Yj;});var Em=P(bm=>{var{EventEmitter:Qj}=he("events"),vm=he("fs"),At=he("path"),{promisify:TI}=he("util"),Jj=eA(),dm=oA().default,eV=hA(),om=Hg(),tV=ZA(),rV=Mg(),nV=oI(),SI=vI(),{EV_ALL:um,EV_READY:iV,EV_ADD:Gl,EV_CHANGE:yu,EV_UNLINK:bI,EV_ADD_DIR:sV,EV_UNLINK_DIR:aV,EV_RAW:oV,EV_ERROR:cm,STR_CLOSE:uV,STR_END:cV,BACK_SLASH_RE:lV,DOUBLE_SLASH_RE:EI,SLASH_OR_BACK_SLASH_RE:fV,DOT_RE:dV,REPLACER_RE:hV,SLASH:lm,SLASH_SLASH:pV,BRACE_START:gV,BANG:hm,ONE_DOT:AI,TWO_DOTS:mV,GLOBSTAR:yV,SLASH_GLOBSTAR:fm,ANYMATCH_OPTS:pm,STRING_TYPE:Sm,FUNCTION_TYPE:_V,EMPTY_STR:gm,EMPTY_FN:vV,isWindows:SV,isMacos:bV,isIBMi:EV}=Ul(),CV=TI(vm.stat),wV=TI(vm.readdir),mm=(e=[])=>Array.isArray(e)?e:[e],II=(e,t=[])=>(e.forEach(r=>{Array.isArray(r)?II(r,t):t.push(r);}),t),CI=e=>{let t=II(mm(e));if(!t.every(r=>typeof r===Sm))throw new TypeError(`Non-string provided as watch path: ${t}`);return t.map(RI)},wI=e=>{let t=e.replace(lV,lm),r=!1;for(t.startsWith(pV)&&(r=!0);t.match(EI);)t=t.replace(EI,lm);return r&&(t=lm+t),t},RI=e=>wI(At.normalize(wI(e))),xI=(e=gm)=>t=>typeof t!==Sm?t:RI(At.isAbsolute(t)?t:At.join(e,t)),xV=(e,t)=>At.isAbsolute(e)?e:e.startsWith(hm)?hm+At.join(t,e.slice(1)):At.join(t,e),$n=(e,t)=>e[t]===void 0,ym=class{constructor(t,r){this.path=t,this._removeWatcher=r,this.items=new Set;}add(t){let{items:r}=this;r&&t!==AI&&t!==mV&&r.add(t);}async remove(t){let{items:r}=this;if(!r||(r.delete(t),r.size>0))return;let n=this.path;try{await wV(n);}catch{this._removeWatcher&&this._removeWatcher(At.dirname(n),At.basename(n));}}has(t){let{items:r}=this;if(r)return r.has(t)}getChildren(){let{items:t}=this;if(t)return [...t.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this);}},TV="stat",AV="lstat",_m=class{constructor(t,r,n,i){this.fsw=i,this.path=t=t.replace(hV,gm),this.watchPath=r,this.fullWatchPath=At.resolve(r),this.hasGlob=r!==t,t===gm&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&n?void 0:!1,this.globFilter=this.hasGlob?dm(t,void 0,pm):!1,this.dirParts=this.getDirParts(t),this.dirParts.forEach(s=>{s.length>1&&s.pop();}),this.followSymlinks=n,this.statMethod=n?TV:AV;}checkGlobSymlink(t){return this.globSymlink===void 0&&(this.globSymlink=t.fullParentDir===this.fullWatchPath?!1:{realPath:t.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?t.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):t.fullPath}entryPath(t){return At.join(this.watchPath,At.relative(this.watchPath,this.checkGlobSymlink(t)))}filterPath(t){let{stats:r}=t;if(r&&r.isSymbolicLink())return this.filterDir(t);let n=this.entryPath(t);return (this.hasGlob&&typeof this.globFilter===_V?this.globFilter(n):!0)&&this.fsw._isntIgnored(n,r)&&this.fsw._hasReadPermissions(r)}getDirParts(t){if(!this.hasGlob)return [];let r=[];return (t.includes(gV)?tV.expand(t):[t]).forEach(i=>{r.push(At.relative(this.watchPath,i).split(fV));}),r}filterDir(t){if(this.hasGlob){let r=this.getDirParts(this.checkGlobSymlink(t)),n=!1;this.unmatchedGlob=!this.dirParts.some(i=>i.every((s,a)=>(s===yV&&(n=!0),n||!r[0][a]||dm(s,r[0][a],pm))));}return !this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(t),t.stats)}},Xl=class extends Qj{constructor(t){super();let r={};t&&Object.assign(r,t),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,$n(r,"persistent")&&(r.persistent=!0),$n(r,"ignoreInitial")&&(r.ignoreInitial=!1),$n(r,"ignorePermissionErrors")&&(r.ignorePermissionErrors=!1),$n(r,"interval")&&(r.interval=100),$n(r,"binaryInterval")&&(r.binaryInterval=300),$n(r,"disableGlobbing")&&(r.disableGlobbing=!1),r.enableBinaryInterval=r.binaryInterval!==r.interval,$n(r,"useFsEvents")&&(r.useFsEvents=!r.usePolling),SI.canUse()||(r.useFsEvents=!1),$n(r,"usePolling")&&!r.useFsEvents&&(r.usePolling=bV),EV&&(r.usePolling=!0);let i=process.env.CHOKIDAR_USEPOLLING;if(i!==void 0){let c=i.toLowerCase();c==="false"||c==="0"?r.usePolling=!1:c==="true"||c==="1"?r.usePolling=!0:r.usePolling=!!c;}let s=process.env.CHOKIDAR_INTERVAL;s&&(r.interval=Number.parseInt(s,10)),$n(r,"atomic")&&(r.atomic=!r.usePolling&&!r.useFsEvents),r.atomic&&(this._pendingUnlinks=new Map),$n(r,"followSymlinks")&&(r.followSymlinks=!0),$n(r,"awaitWriteFinish")&&(r.awaitWriteFinish=!1),r.awaitWriteFinish===!0&&(r.awaitWriteFinish={});let a=r.awaitWriteFinish;a&&(a.stabilityThreshold||(a.stabilityThreshold=2e3),a.pollInterval||(a.pollInterval=100),this._pendingWrites=new Map),r.ignored&&(r.ignored=mm(r.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=vV,this._readyEmitted=!0,process.nextTick(()=>this.emit(iV)));},this._emitRaw=(...c)=>this.emit(oV,...c),this._readyEmitted=!1,this.options=r,r.useFsEvents?this._fsEventsHandler=new SI(this):this._nodeFsHandler=new nV(this),Object.freeze(r);}add(t,r,n){let{cwd:i,disableGlobbing:s}=this.options;this.closed=!1;let a=CI(t);return i&&(a=a.map(o=>{let c=xV(o,i);return s||!om(o)?c:rV(c)})),a=a.filter(o=>o.startsWith(hm)?(this._ignoredPaths.add(o.slice(1)),!1):(this._ignoredPaths.delete(o),this._ignoredPaths.delete(o+fm),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=a.length),this.options.persistent&&(this._readyCount+=a.length),a.forEach(o=>this._fsEventsHandler._addToFsEvents(o))):(this._readyCount||(this._readyCount=0),this._readyCount+=a.length,Promise.all(a.map(async o=>{let c=await this._nodeFsHandler._addToNodeFs(o,!n,0,0,r);return c&&this._emitReady(),c})).then(o=>{this.closed||o.filter(c=>c).forEach(c=>{this.add(At.dirname(c),At.basename(r||c));});})),this}unwatch(t){if(this.closed)return this;let r=CI(t),{cwd:n}=this.options;return r.forEach(i=>{!At.isAbsolute(i)&&!this._closers.has(i)&&(n&&(i=At.join(n,i)),i=At.resolve(i)),this._closePath(i),this._ignoredPaths.add(i),this._watched.has(i)&&this._ignoredPaths.add(i+fm),this._userIgnored=void 0;}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();let t=[];return this._closers.forEach(r=>r.forEach(n=>{let i=n();i instanceof Promise&&t.push(i);})),this._streams.forEach(r=>r.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(r=>r.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(r=>{this[`_${r}`].clear();}),this._closePromise=t.length?Promise.all(t).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){let t={};return this._watched.forEach((r,n)=>{let i=this.options.cwd?At.relative(this.options.cwd,n):n;t[i||AI]=r.getChildren().sort();}),t}emitWithAll(t,r){this.emit(...r),t!==cm&&this.emit(um,...r);}async _emit(t,r,n,i,s){if(this.closed)return;let a=this.options;SV&&(r=At.normalize(r)),a.cwd&&(r=At.relative(a.cwd,r));let o=[t,r];s!==void 0?o.push(n,i,s):i!==void 0?o.push(n,i):n!==void 0&&o.push(n);let c=a.awaitWriteFinish,l;if(c&&(l=this._pendingWrites.get(r)))return l.lastChange=new Date,this;if(a.atomic){if(t===bI)return this._pendingUnlinks.set(r,o),setTimeout(()=>{this._pendingUnlinks.forEach((u,f)=>{this.emit(...u),this.emit(um,...u),this._pendingUnlinks.delete(f);});},typeof a.atomic=="number"?a.atomic:100),this;t===Gl&&this._pendingUnlinks.has(r)&&(t=o[0]=yu,this._pendingUnlinks.delete(r));}if(c&&(t===Gl||t===yu)&&this._readyEmitted){let u=(f,h)=>{f?(t=o[0]=cm,o[1]=f,this.emitWithAll(t,o)):h&&(o.length>2?o[2]=h:o.push(h),this.emitWithAll(t,o));};return this._awaitWriteFinish(r,c.stabilityThreshold,t,u),this}if(t===yu&&!this._throttle(yu,r,50))return this;if(a.alwaysStat&&n===void 0&&(t===Gl||t===sV||t===yu)){let u=a.cwd?At.join(a.cwd,r):r,f;try{f=await CV(u);}catch{}if(!f||this.closed)return;o.push(f);}return this.emitWithAll(t,o),this}_handleError(t){let r=t&&t.code;return t&&r!=="ENOENT"&&r!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||r!=="EPERM"&&r!=="EACCES")&&this.emit(cm,t),t||this.closed}_throttle(t,r,n){this._throttled.has(t)||this._throttled.set(t,new Map);let i=this._throttled.get(t),s=i.get(r);if(s)return s.count++,!1;let a,o=()=>{let l=i.get(r),u=l?l.count:0;return i.delete(r),clearTimeout(a),l&&clearTimeout(l.timeoutObject),u};a=setTimeout(o,n);let c={timeoutObject:a,clear:o,count:0};return i.set(r,c),c}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(t,r,n,i){let s,a=t;this.options.cwd&&!At.isAbsolute(t)&&(a=At.join(this.options.cwd,t));let o=new Date,c=l=>{vm.stat(a,(u,f)=>{if(u||!this._pendingWrites.has(t)){u&&u.code!=="ENOENT"&&i(u);return}let h=Number(new Date);l&&f.size!==l.size&&(this._pendingWrites.get(t).lastChange=h);let p=this._pendingWrites.get(t);h-p.lastChange>=r?(this._pendingWrites.delete(t),i(void 0,f)):s=setTimeout(c,this.options.awaitWriteFinish.pollInterval,f);});};this._pendingWrites.has(t)||(this._pendingWrites.set(t,{lastChange:o,cancelWait:()=>(this._pendingWrites.delete(t),clearTimeout(s),n)}),s=setTimeout(c,this.options.awaitWriteFinish.pollInterval));}_getGlobIgnored(){return [...this._ignoredPaths.values()]}_isIgnored(t,r){if(this.options.atomic&&dV.test(t))return !0;if(!this._userIgnored){let{cwd:n}=this.options,i=this.options.ignored,s=i&&i.map(xI(n)),a=mm(s).filter(c=>typeof c===Sm&&!om(c)).map(c=>c+fm),o=this._getGlobIgnored().map(xI(n)).concat(s,a);this._userIgnored=dm(o,void 0,pm);}return this._userIgnored([t,r])}_isntIgnored(t,r){return !this._isIgnored(t,r)}_getWatchHelpers(t,r){let n=r||this.options.disableGlobbing||!om(t)?t:eV(t),i=this.options.followSymlinks;return new _m(t,n,i,this)}_getWatchedDir(t){this._boundRemove||(this._boundRemove=this._remove.bind(this));let r=At.resolve(t);return this._watched.has(r)||this._watched.set(r,new ym(r,this._boundRemove)),this._watched.get(r)}_hasReadPermissions(t){if(this.options.ignorePermissionErrors)return !0;let n=(t&&Number.parseInt(t.mode,10))&511;return !!(4&Number.parseInt(n.toString(8)[0],10))}_remove(t,r,n){let i=At.join(t,r),s=At.resolve(i);if(n=n??(this._watched.has(i)||this._watched.has(s)),!this._throttle("remove",i,100))return;!n&&!this.options.useFsEvents&&this._watched.size===1&&this.add(t,r,!0),this._getWatchedDir(i).getChildren().forEach(h=>this._remove(i,h));let c=this._getWatchedDir(t),l=c.has(r);c.remove(r),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let u=i;if(this.options.cwd&&(u=At.relative(this.options.cwd,i)),this.options.awaitWriteFinish&&this._pendingWrites.has(u)&&this._pendingWrites.get(u).cancelWait()===Gl)return;this._watched.delete(i),this._watched.delete(s);let f=n?aV:bI;l&&!this._isIgnored(i)&&this._emit(f,i),this.options.useFsEvents||this._closePath(i);}_closePath(t){this._closeFile(t);let r=At.dirname(t);this._getWatchedDir(r).remove(At.basename(t));}_closeFile(t){let r=this._closers.get(t);r&&(r.forEach(n=>n()),this._closers.delete(t));}_addPathCloser(t,r){if(!r)return;let n=this._closers.get(t);n||(n=[],this._closers.set(t,n)),n.push(r);}_readdirp(t,r){if(this.closed)return;let n={type:um,alwaysStat:!0,lstat:!0,...r},i=Jj(t,n);return this._streams.add(i),i.once(uV,()=>{i=void 0;}),i.once(cV,()=>{i&&(this._streams.delete(i),i=void 0);}),i}};bm.FSWatcher=Xl;var IV=(e,t)=>{let r=new Xl(t);return r.add(e),r};bm.watch=IV;});var Am=P((Hne,OI)=>{var _u=e=>e&&typeof e.message=="string",Tm=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return _u(r)?r:void 0}else return _u(t)?t:void 0},DI=(e,t)=>{if(!_u(e))return "";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=Tm(e);return n?(t.add(e),r+`
caused by: `+DI(n,t)):r},kV=e=>DI(e,new Set),LI=(e,t,r)=>{if(!_u(e))return "";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=Tm(e);if(i){t.add(e);let s=typeof e.cause=="function";return n+(s?"":": ")+LI(i,t,s)}else return n},DV=e=>LI(e,new Set);OI.exports={isErrorLike:_u,getErrorCause:Tm,stackWithCauses:kV,messageWithCauses:DV};});var Im=P((Une,BI)=>{var LV=Symbol("circular-ref-tag"),Zl=Symbol("pino-raw-err-ref"),FI=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Zl]},set:function(e){this[Zl]=e;}}});Object.defineProperty(FI,Zl,{writable:!0,value:{}});BI.exports={pinoErrProto:FI,pinoErrorSymbols:{seen:LV,rawSymbol:Zl}};});var HI=P(($ne,qI)=>{qI.exports=Pm;var{messageWithCauses:OV,stackWithCauses:FV,isErrorLike:MI}=Am(),{pinoErrProto:BV,pinoErrorSymbols:MV}=Im(),{seen:Rm}=MV,{toString:qV}=Object.prototype;function Pm(e){if(!MI(e))return e;e[Rm]=void 0;let t=Object.create(BV);t.type=qV.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=OV(e),t.stack=FV(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Pm(r)));for(let r in e)if(t[r]===void 0){let n=e[r];MI(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Rm)&&(t[r]=Pm(n)):t[r]=n;}return delete e[Rm],t.raw=e,t}});var $I=P((jne,UI)=>{UI.exports=Ql;var{isErrorLike:Nm}=Am(),{pinoErrProto:HV,pinoErrorSymbols:UV}=Im(),{seen:Yl}=UV,{toString:$V}=Object.prototype;function Ql(e){if(!Nm(e))return e;e[Yl]=void 0;let t=Object.create(HV);t.type=$V.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Ql(r))),Nm(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,Yl)&&(t.cause=Ql(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Nm(n)?Object.prototype.hasOwnProperty.call(n,Yl)||(t[r]=Ql(n)):t[r]=n;}return delete e[Yl],t.raw=e,t}});var KI=P((Vne,WI)=>{WI.exports={mapHttpRequest:jV,reqSerializer:VI};var km=Symbol("pino-raw-req-ref"),jI=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[km]},set:function(e){this[km]=e;}}});Object.defineProperty(jI,km,{writable:!0,value:{}});function VI(e){let t=e.info||e.socket,r=Object.create(jI);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else {let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0;}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function jV(e){return {req:VI(e)}}});var ZI=P((Wne,XI)=>{XI.exports={mapHttpResponse:VV,resSerializer:GI};var Dm=Symbol("pino-raw-res-ref"),zI=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Dm]},set:function(e){this[Dm]=e;}}});Object.defineProperty(zI,Dm,{writable:!0,value:{}});function GI(e){let t=Object.create(zI);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function VV(e){return {res:GI(e)}}});var Om=P((Kne,YI)=>{var Lm=HI(),WV=$I(),Jl=KI(),ef=ZI();YI.exports={err:Lm,errWithCause:WV,mapHttpRequest:Jl.mapHttpRequest,mapHttpResponse:ef.mapHttpResponse,req:Jl.reqSerializer,res:ef.resSerializer,wrapErrorSerializer:function(t){return t===Lm?t:function(n){return t(Lm(n))}},wrapRequestSerializer:function(t){return t===Jl.reqSerializer?t:function(n){return t(Jl.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===ef.resSerializer?t:function(n){return t(ef.resSerializer(n))}}};});var Fm=P((zne,QI)=>{function KV(e,t){return t}QI.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=KV;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)s&&i.push(s.getFileName());return i};});var eR=P((Gne,JI)=>{JI.exports=zV;function zV(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(t());try{if(/〇/.test(s))throw Error();let a=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${a}
            if ([o${a}].length !== 1) throw Error()`)();}catch{throw Error(r(s))}});}}});var tf=P((Xne,tR)=>{tR.exports=/[^.[\]]+|\[((?:.)*?)\]/g;});var nR=P((Zne,rR)=>{var GV=tf();rR.exports=XV;function XV({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,s,a){var o=s.match(GV).map(u=>u.replace(/'|"|`/g,""));let c=s[0]==="[";o=o.map(u=>u[0]==="["?u.substr(1,u.length-2):u);let l=o.indexOf("*");if(l>-1){let u=o.slice(0,l),f=u.join("."),h=o.slice(l+1,o.length),p=h.length>0;r++,t.push({before:u,beforeStr:f,after:h,nested:p});}else i[s]={path:o,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:c};return i},{});return {wildcards:t,wcLen:r,secret:n}}});var sR=P((Yne,iR)=>{var ZV=tf();iR.exports=YV;function YV({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},a){let o=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${t9(n,t)}
    }
    const { censor, secret } = this
    ${QV(e,i,s)}
    this.compileRestore()
    ${JV(r>0,i,s)}
    ${e9(t)}
  `).bind(a);return t===!1&&(o.restore=c=>a.restore(c)),o}function QV(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:s,path:a}=e[n],o=s?1:0,c=s?"":".",l=[];for(var u;(u=ZV.exec(n))!==null;){let[,m]=u,{index:v,input:E}=u;v>o&&l.push(E.substring(0,v-(m?0:1)));}var f=l.map(m=>`o${c}${m}`).join(" && ");f.length===0?f+=`o${c}${n} != null`:f+=` && o${c}${n} != null`;let h=`
      switch (true) {
        ${l.reverse().map(m=>`
          case o${c}${m} === censor:
            secret[${i}].circle = ${JSON.stringify(m)}
            break
        `).join(`
`)}
      }
    `,p=r?`val, ${JSON.stringify(a)}`:"val";return `
      if (${f}) {
        const val = o${c}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${c}${n} = ${t?`censor(${p})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function JV(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function e9(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function t9(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Mm=P((Qne,uR)=>{uR.exports={groupRedact:n9,groupRestore:r9,nestedRedact:s9,nestedRestore:i9};function r9({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let s=e[i];r[s]=t[i];}}function n9(e,t,r,n,i){let s=aR(e,t);if(s==null)return {keys:null,values:null,target:null,flat:!0};let a=Object.keys(s),o=a.length,c=t.length,l=i?[...t]:void 0,u=new Array(o);for(var f=0;f<o;f++){let h=a[f];u[f]=s[h],i?(l[c]=h,s[h]=r(s[h],l)):n?s[h]=r(s[h]):s[h]=r;}return {keys:a,values:u,target:s,flat:!0}}function i9(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],s=r;for(let a=n.length-1;a>0;a--)s=s[n[a]];s[n[0]]=i;}}function s9(e,t,r,n,i,s,a){let o=aR(t,r);if(o==null)return;let c=Object.keys(o),l=c.length;for(var u=0;u<l;u++){let f=c[u];a9(e,o,f,r,n,i,s,a);}return e}function Bm(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function a9(e,t,r,n,i,s,a,o){let c=i.length,l=c-1,u=r;var f=-1,h,p,m,E=null,x,y,S=!1,N=0,O=0,j=o9();if(m=h=t[r],typeof h=="object"){for(;h!=null&&++f<c&&(O+=1,r=i[f],!(r!=="*"&&!E&&!(typeof h=="object"&&r in h)));)if(!(r==="*"&&(E==="*"&&(S=!0),E=r,f!==l))){if(E){let z=Object.keys(h);for(var J=0;J<z.length;J++){let G=z[J];if(y=h[G],x=r==="*",S)j=Ri(j,G,O),N=f,m=oR(y,N-1,r,n,i,s,a,o,u,h,p,m,x,G,f,l,j,e,t[u],O+1);else if(x||typeof y=="object"&&y!==null&&r in y){if(x?m=y:m=y[r],p=f!==l?m:a?o?s(m,[...n,u,...i]):s(m):s,x){let ee=vu(Ri(j,G,O),m,t[u]);e.push(ee),h[G]=p;}else if(y[r]!==p)if(p===void 0&&s!==void 0||Bm(y,r)&&p===m)j=Ri(j,G,O);else {j=Ri(j,G,O);let ee=vu(Ri(j,r,O+1),m,t[u]);e.push(ee),y[r]=p;}}}E=null;}else {if(m=h[r],j=Ri(j,r,O),p=f!==l?m:a?o?s(m,[...n,u,...i]):s(m):s,!(Bm(h,r)&&p===m||p===void 0&&s!==void 0)){let z=vu(j,m,t[u]);e.push(z),h[r]=p;}h=h[r];}if(typeof h!="object")break}}}function aR(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}function oR(e,t,r,n,i,s,a,o,c,l,u,f,h,p,m,v,E,x,y,S){if(t===0&&(h||typeof e=="object"&&e!==null&&r in e)){if(h?f=e:f=e[r],u=m!==v?f:a?o?s(f,[...n,c,...i]):s(f):s,h){let N=vu(E,f,y);x.push(N),l[p]=u;}else if(e[r]!==u){if(!(u===void 0&&s!==void 0||Bm(e,r)&&u===f)){let N=vu(Ri(E,r,S+1),f,y);x.push(N),e[r]=u;}}}for(let N in e)typeof e[N]=="object"&&(E=Ri(E,N,S),oR(e[N],t-1,r,n,i,s,a,o,c,l,u,f,h,p,m,v,E,x,y,S+1));}function o9(){return {parent:null,key:null,children:[],depth:0}}function Ri(e,t,r){if(e.depth===r)return Ri(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function vu(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return {path:i,value:t,target:r}}});var lR=P((Jne,cR)=>{var{groupRestore:u9,nestedRestore:c9}=Mm();cR.exports=l9;function l9({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=f9(e,n),s=t>0,a=s?{secret:e,groupRestore:u9,nestedRestore:c9}:{secret:e};this.restore=Function("o",d9(i,n,s)).bind(a);}}function f9(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=e[r],o=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,c=`secret[${i}].val = undefined`;return `
      if (secret[${i}].val !== undefined) {
        try { ${o} } catch (e) {}
        ${c}
      }
    `}).join("")}function d9(e,t,r){return `
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var dR=P((eie,fR)=>{fR.exports=h9;function h9(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:a,wildcards:o,wcLen:c}=e,l=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&l.push({serialize:i}),c>0&&l.push({groupRedact:s,nestedRedact:a,wildcards:o,wcLen:c}),Object.assign(...l)}});var gR=P((tie,pR)=>{var hR=eR(),p9=nR(),g9=sR(),m9=lR(),{groupRedact:y9,nestedRedact:_9}=Mm(),v9=dR(),S9=tf(),b9=hR(),qm=e=>e;qm.restore=qm;var E9="[REDACTED]";Hm.rx=S9;Hm.validator=hR;pR.exports=Hm;function Hm(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:E9,s=typeof i=="function",a=s&&i.length>1;if(t.length===0)return r||qm;b9({paths:t,serialize:r,censor:i});let{wildcards:o,wcLen:c,secret:l}=p9({paths:t,censor:i}),u=m9({secret:l,wcLen:c}),f="strict"in e?e.strict:!0;return g9({secret:l,wcLen:c,serialize:r,strict:f,isCensorFct:s,censorFctTakesPath:a},v9({secret:l,censor:i,compileRestore:u,serialize:r,groupRedact:y9,nestedRedact:_9,wildcards:o,wcLen:c}))}});var ja=P((rie,mR)=>{var C9=Symbol("pino.setLevel"),w9=Symbol("pino.getLevel"),x9=Symbol("pino.levelVal"),T9=Symbol("pino.levelComp"),A9=Symbol("pino.useLevelLabels"),I9=Symbol("pino.useOnlyCustomLevels"),R9=Symbol("pino.mixin"),P9=Symbol("pino.lsCache"),N9=Symbol("pino.chindings"),k9=Symbol("pino.asJson"),D9=Symbol("pino.write"),L9=Symbol("pino.redactFmt"),O9=Symbol("pino.time"),F9=Symbol("pino.timeSliceIndex"),B9=Symbol("pino.stream"),M9=Symbol("pino.stringify"),q9=Symbol("pino.stringifySafe"),H9=Symbol("pino.stringifiers"),U9=Symbol("pino.end"),$9=Symbol("pino.formatOpts"),j9=Symbol("pino.messageKey"),V9=Symbol("pino.errorKey"),W9=Symbol("pino.nestedKey"),K9=Symbol("pino.nestedKeyStr"),z9=Symbol("pino.mixinMergeStrategy"),G9=Symbol("pino.msgPrefix"),X9=Symbol("pino.wildcardFirst"),Z9=Symbol.for("pino.serializers"),Y9=Symbol.for("pino.formatters"),Q9=Symbol.for("pino.hooks"),J9=Symbol.for("pino.metadata");mR.exports={setLevelSym:C9,getLevelSym:w9,levelValSym:x9,levelCompSym:T9,useLevelLabelsSym:A9,mixinSym:R9,lsCacheSym:P9,chindingsSym:N9,asJsonSym:k9,writeSym:D9,serializersSym:Z9,redactFmtSym:L9,timeSym:O9,timeSliceIndexSym:F9,streamSym:B9,stringifySym:M9,stringifySafeSym:q9,stringifiersSym:H9,endSym:U9,formatOptsSym:$9,messageKeySym:j9,errorKeySym:V9,nestedKeySym:W9,wildcardFirstSym:X9,needsMetadataGsym:J9,useOnlyCustomLevelsSym:I9,formattersSym:Y9,hooksSym:Q9,nestedKeyStrSym:K9,mixinMergeStrategySym:z9,msgPrefixSym:G9};});var jm=P((nie,SR)=>{var $m=gR(),{redactFmtSym:eW,wildcardFirstSym:rf}=ja(),{rx:Um,validator:tW}=$m,yR=tW({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),_R="[Redacted]",vR=!1;function rW(e,t){let{paths:r,censor:n}=nW(e),i=r.reduce((o,c)=>{Um.lastIndex=0;let l=Um.exec(c),u=Um.exec(c),f=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(f==="*"&&(f=rf),u===null)return o[f]=null,o;if(o[f]===null)return o;let{index:h}=u,p=`${c.substr(h,c.length-1)}`;return o[f]=o[f]||[],f!==rf&&o[f].length===0&&o[f].push(...o[rf]||[]),f===rf&&Object.keys(o).forEach(function(m){o[m]&&o[m].push(p);}),o[f].push(p),o},{}),s={[eW]:$m({paths:r,censor:n,serialize:t,strict:vR})},a=(...o)=>t(typeof n=="function"?n(...o):n);return [...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((o,c)=>{if(i[c]===null)o[c]=l=>a(l,[c]);else {let l=typeof n=="function"?(u,f)=>n(u,[c,...f]):n;o[c]=$m({paths:i[c],censor:l,serialize:t,strict:vR});}return o},s)}function nW(e){if(Array.isArray(e))return e={paths:e,censor:_R},yR(e),e;let{paths:t,censor:r=_R,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),yR({paths:t,censor:r}),{paths:t,censor:r}}SR.exports=rW;});var ER=P((iie,bR)=>{var iW=()=>"",sW=()=>`,"time":${Date.now()}`,aW=()=>`,"time":${Math.round(Date.now()/1e3)}`,oW=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;bR.exports={nullTime:iW,epochTime:sW,unixTime:aW,isoTime:oW};});var wR=P((sie,CR)=>{function uW(e){try{return JSON.stringify(e)}catch{return '"[Circular]"'}}CR.exports=cW;function cW(e,t,r){var n=r&&r.stringify||uW,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var a=new Array(s);a[0]=n(e);for(var o=1;o<s;o++)a[o]=n(t[o]);return a.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",u=1-i,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=c||t[u]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[u]),f=p+2,p++;break;case 105:if(u>=c||t[u]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[u])),f=p+2,p++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;f<p&&(l+=e.slice(f,p));var m=typeof t[u];if(m==="string"){l+="'"+t[u]+"'",f=p+2,p++;break}if(m==="function"){l+=t[u].name||"<anonymous>",f=p+2,p++;break}l+=n(t[u]),f=p+2,p++;break;case 115:if(u>=c)break;f<p&&(l+=e.slice(f,p)),l+=String(t[u]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,u--;break}++u;}++p;}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}});var Wm=P((aie,Vm)=>{if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r));},e=new Int32Array(new SharedArrayBuffer(4));Vm.exports=t;}else {let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");};Vm.exports=e;}});var kR=P((oie,NR)=>{var rr=he("fs"),lW=he("events"),fW=he("util").inherits,xR=he("path"),zm=Wm(),nf=100,sf=Buffer.allocUnsafe(0),dW=16*1024,TR="buffer",AR="utf8";function IR(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(s,a){if(s){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",s);}):t.emit("error",s);return}t.fd=a,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!(t._reopening||t.destroyed)&&(!t._writing&&t._len>t.minLength||t._flushPending)&&t._actualWrite();}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&rr.mkdirSync(xR.dirname(e),{recursive:!0});let s=rr.openSync(e,n,i);r(null,s);}catch(s){throw r(s),s}else t.mkdir?rr.mkdir(xR.dirname(e),{recursive:!0},s=>{if(s)return r(s);rr.open(e,n,i,r);}):rr.open(e,n,i,r);}function jn(e){if(!(this instanceof jn))return new jn(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:s,sync:a,append:o=!0,mkdir:c,retryEAGAIN:l,fsync:u,contentMode:f,mode:h}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||dW,this.sync=a||!1,this.writable=!0,this._fsync=u||!1,this.append=o||!1,this.mode=h,this.retryEAGAIN=l||(()=>!0),this.mkdir=c||!1;let p,m;if(f===TR)this._writingBuf=sf,this.write=gW,this.flush=yW,this.flushSync=vW,this._actualWrite=bW,p=()=>rr.writeSync(this.fd,this._writingBuf),m=()=>rr.write(this.fd,this._writingBuf,this.release);else if(f===void 0||f===AR)this._writingBuf="",this.write=pW,this.flush=mW,this.flushSync=_W,this._actualWrite=SW,p=()=>rr.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>rr.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${AR}" and "${TR}", but passed ${f}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")IR(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(v,E)=>{if(v){if((v.code==="EAGAIN"||v.code==="EBUSY")&&this.retryEAGAIN(v,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{zm(nf),this.release(void 0,0);}catch(S){this.release(S);}else setTimeout(m,nf);else this._writing=!1,this.emit("error",v);return}this.emit("write",E);let x=Km(this._writingBuf,this._len,E);if(this._len=x.len,this._writingBuf=x.writingBuf,this._writingBuf.length){if(!this.sync){m();return}try{do{let S=p(),N=Km(this._writingBuf,this._len,S);this._len=N.len,this._writingBuf=N.writingBuf;}while(this._writingBuf.length)}catch(S){this.release(S);return}}this._fsync&&rr.fsyncSync(this.fd);let y=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):y>this.minLength?this._actualWrite():this._ending?y>0?this._actualWrite():(this._writing=!1,af(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(hW,this)):this.emit("drain"));},this.on("newListener",function(v){v==="drain"&&(this._asyncDrainScheduled=!1);});}function Km(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}function hW(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"));}fW(jn,lW);function RR(e,t){return e.length===0?sf:e.length===1?e[0]:Buffer.concat(e,t)}function pW(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function gW(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function PR(e){this._flushPending=!0;let t=()=>{this._fsync?(this._flushPending=!1,e()):rr.fsync(this.fd,n=>{this._flushPending=!1,e(n);}),this.off("error",r);},r=n=>{this._flushPending=!1,e(n),this.off("drain",t);};this.once("drain",t),this.once("error",r);}function mW(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&PR.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite());}function yW(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&PR.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite());}jn.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e);});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&rr.close(t,r=>{if(r)return this.emit("error",r)});}),IR(e||this.file,this);};jn.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end();});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():af(this)));};function _W(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=rr.writeSync(this.fd,e,"utf8"),r=Km(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift();}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;zm(nf);}}try{rr.fsyncSync(this.fd);}catch{}}function vW(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=sf);let e=sf;for(;this._bufs.length||e.length;){e.length<=0&&(e=RR(this._bufs[0],this._lens[0]));try{let t=rr.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift());}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;zm(nf);}}}jn.prototype.destroy=function(){this.destroyed||af(this);};function SW(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=rr.writeSync(this.fd,this._writingBuf,"utf8");e(null,t);}catch(t){e(t);}else rr.write(this.fd,this._writingBuf,"utf8",e);}function bW(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:RR(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=rr.writeSync(this.fd,this._writingBuf);e(null,t);}catch(t){e(t);}else rr.write(this.fd,this._writingBuf,e);}function af(e){if(e.fd===-1){e.once("ready",af.bind(null,e));return}e.destroyed=!0,e._bufs=[],e._lens=[],rr.fsync(e.fd,t);function t(){e.fd!==1&&e.fd!==2?rr.close(e.fd,r):r();}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close");}}jn.SonicBoom=jn;jn.default=jn;NR.exports=jn;});var Gm=P((uie,BR)=>{var Vn={exit:[],beforeExit:[]},DR={exit:wW,beforeExit:xW},Va;function EW(){Va===void 0&&(Va=new FinalizationRegistry(TW));}function CW(e){Vn[e].length>0||process.on(e,DR[e]);}function LR(e){Vn[e].length>0||(process.removeListener(e,DR[e]),Vn.exit.length===0&&Vn.beforeExit.length===0&&(Va=void 0));}function wW(){OR("exit");}function xW(){OR("beforeExit");}function OR(e){for(let t of Vn[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e);}Vn[e]=[];}function TW(e){for(let t of ["exit","beforeExit"]){let r=Vn[t].indexOf(e);Vn[t].splice(r,r+1),LR(t);}}function FR(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");CW(e);let n=new WeakRef(t);n.fn=r,EW(),Va.register(t,n),Vn[e].push(n);}function AW(e,t){FR("exit",e,t);}function IW(e,t){FR("beforeExit",e,t);}function RW(e){if(Va!==void 0){Va.unregister(e);for(let t of ["exit","beforeExit"])Vn[t]=Vn[t].filter(r=>{let n=r.deref();return n&&n!==e}),LR(t);}}BR.exports={register:AW,registerBeforeExit:IW,unregister:RW};});var MR=P((cie,PW)=>{PW.exports={name:"thread-stream",version:"2.4.1",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","pino-elasticsearch":"^6.0.0","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"};});var HR=P((lie,qR)=>{function NW(e,t,r,n,i){let s=Date.now()+n,a=Atomics.load(e,t);if(a===r){i(null,"ok");return}let o=a,c=l=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{o=a,a=Atomics.load(e,t),a===o?c(l>=1e3?1e3:l*2):a===r?i(null,"ok"):i(null,"not-equal");},l);};c(1);}function kW(e,t,r,n,i){let s=Date.now()+n,a=Atomics.load(e,t);if(a!==r){i(null,"ok");return}let o=c=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{a=Atomics.load(e,t),a!==r?i(null,"ok"):o(c>=1e3?1e3:c*2);},c);};o(1);}qR.exports={wait:NW,waitDiff:kW};});var $R=P((fie,UR)=>{UR.exports={WRITE_INDEX:4,READ_INDEX:8};});var zR=P((die,KR)=>{var{version:DW}=MR(),{EventEmitter:LW}=he("events"),{Worker:OW}=he("worker_threads"),{join:FW}=he("path"),{pathToFileURL:BW}=he("url"),{wait:MW}=HR(),{WRITE_INDEX:Zr,READ_INDEX:ni}=$R(),qW=he("buffer"),HW=he("assert"),ue=Symbol("kImpl"),UW=qW.constants.MAX_STRING_LENGTH,Su=class{constructor(t){this._value=t;}deref(){return this._value}},uf=class{register(){}unregister(){}},$W=process.env.NODE_V8_COVERAGE?uf:global.FinalizationRegistry||uf,jW=process.env.NODE_V8_COVERAGE?Su:global.WeakRef||Su,jR=new $W(e=>{e.exited||e.terminate();});function VW(e,t){let{filename:r,workerData:n}=t,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||FW(__dirname,"lib","worker.js"),a=new OW(s,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:BW(r).href,dataBuf:e[ue].dataBuf,stateBuf:e[ue].stateBuf,workerData:{$context:{threadStreamVersion:DW},...n}}});return a.stream=new Su(e),a.on("message",WW),a.on("exit",WR),jR.register(e,a),a}function VR(e){HW(!e[ue].sync),e[ue].needDrain&&(e[ue].needDrain=!1,e.emit("drain"));}function of(e){let t=Atomics.load(e[ue].state,Zr),r=e[ue].data.length-t;if(r>0){if(e[ue].buf.length===0){e[ue].flushing=!1,e[ue].ending?Jm(e):e[ue].needDrain&&process.nextTick(VR,e);return}let n=e[ue].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[ue].buf=e[ue].buf.slice(r),cf(e,n,of.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Zr,0);i>e[ue].data.length;)r=r/2,n=e[ue].buf.slice(0,r),i=Buffer.byteLength(n);e[ue].buf=e[ue].buf.slice(r),cf(e,n,of.bind(null,e));}});}else if(r===0){if(t===0&&e[ue].buf.length===0)return;e.flush(()=>{Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Zr,0),of(e);});}else ii(e,new Error("overwritten"));}function WW(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new jW(t),t.flush(()=>{t[ue].ready=!0,t.emit("ready");});break;case"ERROR":ii(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:ii(t,new Error("this should not happen: "+e.code));}}function WR(e){let t=this.stream.deref();t!==void 0&&(jR.unregister(t),t.worker.exited=!0,t.worker.off("exit",WR),ii(t,e!==0?new Error("the worker thread exited"):null));}var Zm=class extends LW{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[ue]={},this[ue].stateBuf=new SharedArrayBuffer(128),this[ue].state=new Int32Array(this[ue].stateBuf),this[ue].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[ue].data=Buffer.from(this[ue].dataBuf),this[ue].sync=t.sync||!1,this[ue].ending=!1,this[ue].ended=!1,this[ue].needDrain=!1,this[ue].destroyed=!1,this[ue].flushing=!1,this[ue].ready=!1,this[ue].finished=!1,this[ue].errored=null,this[ue].closed=!1,this[ue].buf="",this.worker=VW(this,t);}write(t){if(this[ue].destroyed)return Ym(this,new Error("the worker has exited")),!1;if(this[ue].ending)return Ym(this,new Error("the worker is ending")),!1;if(this[ue].flushing&&this[ue].buf.length+t.length>=UW)try{Xm(this),this[ue].flushing=!0;}catch(r){return ii(this,r),!1}if(this[ue].buf+=t,this[ue].sync)try{return Xm(this),!0}catch(r){return ii(this,r),!1}return this[ue].flushing||(this[ue].flushing=!0,setImmediate(of,this)),this[ue].needDrain=this[ue].data.length-this[ue].buf.length-Atomics.load(this[ue].state,Zr)<=0,!this[ue].needDrain}end(){this[ue].destroyed||(this[ue].ending=!0,Jm(this));}flush(t){if(this[ue].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[ue].state,Zr);MW(this[ue].state,ni,r,1/0,(n,i)=>{if(n){ii(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t);});}flushSync(){this[ue].destroyed||(Xm(this),Qm(this));}unref(){this.worker.unref();}ref(){this.worker.ref();}get ready(){return this[ue].ready}get destroyed(){return this[ue].destroyed}get closed(){return this[ue].closed}get writable(){return !this[ue].destroyed&&!this[ue].ending}get writableEnded(){return this[ue].ending}get writableFinished(){return this[ue].finished}get writableNeedDrain(){return this[ue].needDrain}get writableObjectMode(){return !1}get writableErrored(){return this[ue].errored}};function Ym(e,t){setImmediate(()=>{e.emit("error",t);});}function ii(e,t){e[ue].destroyed||(e[ue].destroyed=!0,t&&(e[ue].errored=t,Ym(e,t)),e.worker.exited?setImmediate(()=>{e[ue].closed=!0,e.emit("close");}):e.worker.terminate().catch(()=>{}).then(()=>{e[ue].closed=!0,e.emit("close");}));}function cf(e,t,r){let n=Atomics.load(e[ue].state,Zr),i=Buffer.byteLength(t);return e[ue].data.write(t,n),Atomics.store(e[ue].state,Zr,n+i),Atomics.notify(e[ue].state,Zr),r(),!0}function Jm(e){if(!(e[ue].ended||!e[ue].ending||e[ue].flushing)){e[ue].ended=!0;try{e.flushSync();let t=Atomics.load(e[ue].state,ni);Atomics.store(e[ue].state,Zr,-1),Atomics.notify(e[ue].state,Zr);let r=0;for(;t!==-1;){if(Atomics.wait(e[ue].state,ni,t,1e3),t=Atomics.load(e[ue].state,ni),t===-2){ii(e,new Error("end() failed"));return}if(++r===10){ii(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[ue].finished=!0,e.emit("finish");});}catch(t){ii(e,t);}}}function Xm(e){let t=()=>{e[ue].ending?Jm(e):e[ue].needDrain&&process.nextTick(VR,e);};for(e[ue].flushing=!1;e[ue].buf.length!==0;){let r=Atomics.load(e[ue].state,Zr),n=e[ue].data.length-r;if(n===0){Qm(e),Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Zr,0);continue}else if(n<0)throw new Error("overwritten");let i=e[ue].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)e[ue].buf=e[ue].buf.slice(n),cf(e,i,t);else {for(Qm(e),Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Zr,0);s>e[ue].buf.length;)n=n/2,i=e[ue].buf.slice(0,n),s=Buffer.byteLength(i);e[ue].buf=e[ue].buf.slice(n),cf(e,i,t);}}}function Qm(e){if(e[ue].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[ue].state,Zr),r=0;for(;;){let n=Atomics.load(e[ue].state,ni);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[ue].state,ni,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}KR.exports=Zm;});var r0=P((hie,GR)=>{var{createRequire:KW}=he("module"),zW=Fm(),{join:e0,isAbsolute:GW,sep:XW}=he("path"),ZW=Wm(),t0=Gm(),YW=zR();function QW(e){t0.register(e,e7),t0.registerBeforeExit(e,t7),e.on("close",function(){t0.unregister(e);});}function JW(e,t,r){let n=new YW({filename:e,workerData:t,workerOpts:r});n.on("ready",i),n.on("close",function(){process.removeListener("exit",s);}),process.on("exit",s);function i(){process.removeListener("exit",s),n.unref(),r.autoEnd!==!1&&QW(n);}function s(){n.closed||(n.flushSync(),ZW(100),n.end());}return n}function e7(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref();});}function t7(e){e.flushSync();}function r7(e){let{pipeline:t,targets:r,levels:n,dedupe:i,options:s={},worker:a={},caller:o=zW()}=e,c=typeof o=="string"?[o]:o,l="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},u=e.target;if(u&&r)throw new Error("only one of target or targets can be specified");return r?(u=l["pino-worker"]||e0(__dirname,"worker.js"),s.targets=r.map(h=>({...h,target:f(h.target)}))):t&&(u=l["pino-pipeline-worker"]||e0(__dirname,"worker-pipeline.js"),s.targets=t.map(h=>({...h,target:f(h.target)}))),n&&(s.levels=n),i&&(s.dedupe=i),JW(f(u),s,a);function f(h){if(h=l[h]||h,GW(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return e0(__dirname,"..","file.js");let p;for(let m of c)try{let v=m==="node:repl"?process.cwd()+XW:m;p=KW(v).resolve(h);break}catch{continue}if(!p)throw new Error(`unable to determine transport target for "${h}"`);return p}}GR.exports=r7;});var df=P((pie,s2)=>{var XR=wR(),{mapHttpRequest:n7,mapHttpResponse:i7}=Om(),i0=kR(),ZR=Gm(),{lsCacheSym:s7,chindingsSym:JR,writeSym:YR,serializersSym:e2,formatOptsSym:QR,endSym:a7,stringifiersSym:t2,stringifySym:r2,stringifySafeSym:s0,wildcardFirstSym:n2,nestedKeySym:o7,formattersSym:i2,messageKeySym:u7,errorKeySym:c7,nestedKeyStrSym:l7,msgPrefixSym:lf}=ja(),{isMainThread:f7}=he("worker_threads"),d7=r0();function Wa(){}function h7(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e);};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=n7(n):typeof n.setHeader=="function"&&(n=i7(n)));let a;s===null&&i.length===0?a=[null]:(s=i.shift(),a=i),typeof this[lf]=="string"&&s!==void 0&&s!==null&&(s=this[lf]+s),this[YR](n,XR(s,a,this[QR]),e);}else {let s=n===void 0?i.shift():n;typeof this[lf]=="string"&&s!==void 0&&s!==null&&(s=this[lf]+s),this[YR](null,XR(s,i,this[QR]),e);}}}function n0(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var a=0;a<s&&i>=32;a++)i=e.charCodeAt(a),(i===34||i===92)&&(t+=e.slice(r,a)+"\\",r=a,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function p7(e,t,r,n){let i=this[r2],s=this[s0],a=this[t2],o=this[a7],c=this[JR],l=this[e2],u=this[i2],f=this[u7],h=this[c7],p=this[s7][r]+n;p=p+c;let m;u.log&&(e=u.log(e));let v=a[n2],E="";for(let y in e)if(m=e[y],Object.prototype.hasOwnProperty.call(e,y)&&m!==void 0){l[y]?m=l[y](m):y===h&&l.err&&(m=l.err(m));let S=a[y]||v;switch(typeof m){case"undefined":case"function":continue;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":S&&(m=S(m));break;case"string":m=(S||n0)(m);break;default:m=(S||i)(m,s);}if(m===void 0)continue;let N=n0(y);E+=","+N+":"+m;}let x="";if(t!==void 0){m=l[f]?l[f](t):t;let y=a[f]||v;switch(typeof m){case"function":break;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":y&&(m=y(m)),x=',"'+f+'":'+m;break;case"string":m=(y||n0)(m),x=',"'+f+'":'+m;break;default:m=(y||i)(m,s),x=',"'+f+'":'+m;}}return this[o7]&&E?p+this[l7]+E.slice(1)+"}"+x+o:p+E+x+o}function g7(e,t){let r,n=e[JR],i=e[r2],s=e[s0],a=e[t2],o=a[n2],c=e[e2],l=e[i2].bindings;t=l(t);for(let u in t)if(r=t[u],(u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels"&&t.hasOwnProperty(u)&&r!==void 0)===!0){if(r=c[u]?c[u](r):r,r=(a[u]||o||i)(r,s),r===void 0)continue;n+=',"'+u+'":'+r;}return n}function m7(e){return e.write!==e.constructor.prototype.write}var y7=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function ff(e){let t=new i0(e);return t.on("error",r),!y7&&!e.sync&&f7&&(ZR.register(t,_7),t.on("close",function(){ZR.unregister(t);})),t;function r(n){if(n.code==="EPIPE"){t.write=Wa,t.end=Wa,t.flushSync=Wa,t.destroy=Wa;return}t.removeListener("error",r),t.emit("error",n);}}function _7(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end();})):e.flushSync());}function v7(e){return function(r,n,i={},s){if(typeof i=="string")s=ff({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=ff({dest:s});}else if(i instanceof i0||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof i0||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let c;i.customLevels&&(c=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=d7({caller:n,...i.transport,levels:c});}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:a,onChild:o}=i;return a===!1&&(i.level="silent"),o||(i.onChild=Wa),s||(m7(process.stdout)?s=process.stdout:s=ff({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function S7(e,t){try{return JSON.stringify(e)}catch{try{return (t||this[s0])(e)}catch{return '"[unable to serialize, circular reference is too complex to analyze]"'}}}function b7(e,t,r){return {level:e,bindings:t,log:r}}function E7(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}s2.exports={noop:Wa,buildSafeSonicBoom:ff,asChindings:g7,asJson:p7,genLog:h7,createArgsNormalizer:v7,stringify:S7,buildFormatters:b7,normalizeDestFileDescriptor:E7};});var hf=P((gie,a2)=>{var C7={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},w7={ASC:"ASC",DESC:"DESC"};a2.exports={DEFAULT_LEVELS:C7,SORTING_ORDER:w7};});var u0=P((mie,l2)=>{var{lsCacheSym:x7,levelValSym:a0,useOnlyCustomLevelsSym:T7,streamSym:A7,formattersSym:I7,hooksSym:R7,levelCompSym:o2}=ja(),{noop:P7,genLog:Ws}=df(),{DEFAULT_LEVELS:si,SORTING_ORDER:u2}=hf(),c2={fatal:e=>{let t=Ws(si.fatal,e);return function(...r){let n=this[A7];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync();}catch{}}},error:e=>Ws(si.error,e),warn:e=>Ws(si.warn,e),info:e=>Ws(si.info,e),debug:e=>Ws(si.debug,e),trace:e=>Ws(si.trace,e)},o0=Object.keys(si).reduce((e,t)=>(e[si[t]]=t,e),{}),N7=Object.keys(o0).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function k7(e){let t=e[I7].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1);}return e[x7]=n,e}function D7(e,t){if(t)return !1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return !0;default:return !1}}function L7(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e];}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[a0],i=this[a0]=r[e],s=this[T7],a=this[o2],o=this[R7].logMethod;for(let c in r){if(a(r[c],i)===!1){this[c]=P7;continue}this[c]=D7(c,s)?c2[c](o):Ws(r[c],o);}this.emit("level-change",e,i,t[n],n,this);}function O7(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function F7(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[o2](r,this[a0])}function B7(e,t,r){return e===u2.DESC?t<=r:t>=r}function M7(e){return typeof e=="string"?B7.bind(null,e):e}function q7(e=null,t=!1){let r=e?Object.keys(e).reduce((s,a)=>(s[e[a]]=a,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:o0,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:si,e);return {labels:n,values:i}}function H7(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(o0).map(s=>+s),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:si,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function U7(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}function $7(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(u2).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}l2.exports={initialLsCache:N7,genLsCache:k7,levelMethods:c2,getLevel:O7,setLevel:L7,isLevelEnabled:F7,mappings:q7,assertNoLevelCollisions:U7,assertDefaultLevelFound:H7,genLevelComparison:M7,assertLevelComparison:$7};});var c0=P((yie,f2)=>{f2.exports={version:"8.19.0"};});var E2=P((vie,b2)=>{var{EventEmitter:j7}=he("events"),{lsCacheSym:V7,levelValSym:W7,setLevelSym:f0,getLevelSym:d2,chindingsSym:d0,parsedChindingsSym:K7,mixinSym:z7,asJsonSym:y2,writeSym:G7,mixinMergeStrategySym:X7,timeSym:Z7,timeSliceIndexSym:Y7,streamSym:_2,serializersSym:Ks,formattersSym:l0,errorKeySym:Q7,messageKeySym:J7,useOnlyCustomLevelsSym:eK,needsMetadataGsym:tK,redactFmtSym:rK,stringifySym:nK,formatOptsSym:iK,stringifiersSym:sK,msgPrefixSym:h2}=ja(),{getLevel:aK,setLevel:oK,isLevelEnabled:uK,mappings:cK,initialLsCache:lK,genLsCache:fK,assertNoLevelCollisions:dK}=u0(),{asChindings:v2,asJson:hK,buildFormatters:p2,stringify:g2}=df(),{version:pK}=c0(),gK=jm(),mK=class{},S2={constructor:mK,child:yK,bindings:_K,setBindings:vK,flush:CK,isLevelEnabled:uK,version:pK,get level(){return this[d2]()},set level(e){this[f0](e);},get levelVal(){return this[W7]},set levelVal(e){throw Error("levelVal is read-only")},[V7]:lK,[G7]:bK,[y2]:hK,[d2]:aK,[f0]:oK};Object.setPrototypeOf(S2,j7.prototype);b2.exports=function(){return Object.create(S2)};var m2=e=>e;function yK(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Ks],n=this[l0],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[Ks]=Object.create(null);for(let u in r)i[Ks][u]=r[u];let c=Object.getOwnPropertySymbols(r);for(var s=0;s<c.length;s++){let u=c[s];i[Ks][u]=r[u];}for(let u in t.serializers)i[Ks][u]=t.serializers[u];let l=Object.getOwnPropertySymbols(t.serializers);for(var a=0;a<l.length;a++){let u=l[a];i[Ks][u]=t.serializers[u];}}else i[Ks]=r;if(t.hasOwnProperty("formatters")){let{level:c,bindings:l,log:u}=t.formatters;i[l0]=p2(c||n.level,l||m2,u||n.log);}else i[l0]=p2(n.level,m2,n.log);if(t.hasOwnProperty("customLevels")===!0&&(dK(this.levels,t.customLevels),i.levels=cK(t.customLevels,i[eK]),fK(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let c=gK(i.redact,g2),l={stringify:c[rK]};i[nK]=g2,i[sK]=c,i[iK]=l;}typeof t.msgPrefix=="string"&&(i[h2]=(this[h2]||"")+t.msgPrefix),i[d0]=v2(i,e);let o=t.level||this.level;return i[f0](o),this.onChild(i),i}function _K(){let t=`{${this[d0].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function vK(e){let t=v2(this,e);this[d0]=t,delete this[K7];}function SK(e,t){return Object.assign(t,e)}function bK(e,t,r){let n=this[Z7](),i=this[z7],s=this[Q7],a=this[J7],o=this[X7]||SK,c;e==null?c={}:e instanceof Error?(c={[s]:e},t===void 0&&(t=e.message)):(c=e,t===void 0&&e[a]===void 0&&e[s]&&(t=e[s].message)),i&&(c=o(c,i(c,r,this)));let l=this[y2](c,t,r,n),u=this[_2];u[tK]===!0&&(u.lastLevel=r,u.lastObj=c,u.lastMsg=t,u.lastTime=n.slice(this[Y7]),u.lastLogger=this),u.write(l);}function EK(){}function CK(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[_2];typeof t.flush=="function"?t.flush(e||EK):e&&e();}});var A2=P((m0,T2)=>{var{hasOwnProperty:pf}=Object.prototype,Gs=g0();Gs.configure=g0;Gs.stringify=Gs;Gs.default=Gs;m0.stringify=Gs;m0.configure=g0;T2.exports=Gs;var wK=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function es(e){return e.length<5e3&&!wK.test(e)?`"${e}"`:JSON.stringify(e)}function h0(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r;}return e}var xK=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function p0(e){return xK.call(e)!==void 0&&e.length!==0}function C2(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function TK(e){if(pf.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return `"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return {toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return '"[Circular]"'}function w2(e,t){let r;if(pf.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function x2(e,t){let r;if(pf.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function zs(e){return e===1?"1 item":`${e} items`}function AK(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function IK(e){if(pf.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function g0(e){e={...e};let t=IK(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=TK(e),n=w2(e,"bigint"),i=w2(e,"deterministic"),s=x2(e,"maximumDepth"),a=x2(e,"maximumBreadth");function o(h,p,m,v,E,x){let y=p[h];switch(typeof y=="object"&&y!==null&&typeof y.toJSON=="function"&&(y=y.toJSON(h)),y=v.call(p,h,y),typeof y){case"string":return es(y);case"object":{if(y===null)return "null";if(m.indexOf(y)!==-1)return r;let S="",N=",",O=x;if(Array.isArray(y)){if(y.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(y),E!==""&&(x+=E,S+=`
${x}`,N=`,
${x}`);let H=Math.min(y.length,a),ne=0;for(;ne<H-1;ne++){let Pe=o(String(ne),y,m,v,E,x);S+=Pe!==void 0?Pe:"null",S+=N;}let me=o(String(ne),y,m,v,E,x);if(S+=me!==void 0?me:"null",y.length-1>a){let Pe=y.length-a-1;S+=`${N}"... ${zs(Pe)} not stringified"`;}return E!==""&&(S+=`
${O}`),m.pop(),`[${S}]`}let j=Object.keys(y),J=j.length;if(J===0)return "{}";if(s<m.length+1)return '"[Object]"';let z="",G="";E!==""&&(x+=E,N=`,
${x}`,z=" ");let ee=Math.min(J,a);i&&!p0(y)&&(j=h0(j)),m.push(y);for(let H=0;H<ee;H++){let ne=j[H],me=o(ne,y,m,v,E,x);me!==void 0&&(S+=`${G}${es(ne)}:${z}${me}`,G=N);}if(J>a){let H=J-a;S+=`${G}"...":${z}"${zs(H)} not stringified"`,G=N;}return E!==""&&G.length>1&&(S=`
${x}${S}
${O}`),m.pop(),`{${S}}`}case"number":return isFinite(y)?String(y):t?t(y):"null";case"boolean":return y===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(y);default:return t?t(y):void 0}}function c(h,p,m,v,E,x){switch(typeof p=="object"&&p!==null&&typeof p.toJSON=="function"&&(p=p.toJSON(h)),typeof p){case"string":return es(p);case"object":{if(p===null)return "null";if(m.indexOf(p)!==-1)return r;let y=x,S="",N=",";if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p),E!==""&&(x+=E,S+=`
${x}`,N=`,
${x}`);let J=Math.min(p.length,a),z=0;for(;z<J-1;z++){let ee=c(String(z),p[z],m,v,E,x);S+=ee!==void 0?ee:"null",S+=N;}let G=c(String(z),p[z],m,v,E,x);if(S+=G!==void 0?G:"null",p.length-1>a){let ee=p.length-a-1;S+=`${N}"... ${zs(ee)} not stringified"`;}return E!==""&&(S+=`
${y}`),m.pop(),`[${S}]`}m.push(p);let O="";E!==""&&(x+=E,N=`,
${x}`,O=" ");let j="";for(let J of v){let z=c(J,p[J],m,v,E,x);z!==void 0&&(S+=`${j}${es(J)}:${O}${z}`,j=N);}return E!==""&&j.length>1&&(S=`
${x}${S}
${y}`),m.pop(),`{${S}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function l(h,p,m,v,E){switch(typeof p){case"string":return es(p);case"object":{if(p===null)return "null";if(typeof p.toJSON=="function"){if(p=p.toJSON(h),typeof p!="object")return l(h,p,m,v,E);if(p===null)return "null"}if(m.indexOf(p)!==-1)return r;let x=E;if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p),E+=v;let z=`
${E}`,G=`,
${E}`,ee=Math.min(p.length,a),H=0;for(;H<ee-1;H++){let me=l(String(H),p[H],m,v,E);z+=me!==void 0?me:"null",z+=G;}let ne=l(String(H),p[H],m,v,E);if(z+=ne!==void 0?ne:"null",p.length-1>a){let me=p.length-a-1;z+=`${G}"... ${zs(me)} not stringified"`;}return z+=`
${x}`,m.pop(),`[${z}]`}let y=Object.keys(p),S=y.length;if(S===0)return "{}";if(s<m.length+1)return '"[Object]"';E+=v;let N=`,
${E}`,O="",j="",J=Math.min(S,a);p0(p)&&(O+=C2(p,N,a),y=y.slice(p.length),J-=p.length,j=N),i&&(y=h0(y)),m.push(p);for(let z=0;z<J;z++){let G=y[z],ee=l(G,p[G],m,v,E);ee!==void 0&&(O+=`${j}${es(G)}: ${ee}`,j=N);}if(S>a){let z=S-a;O+=`${j}"...": "${zs(z)} not stringified"`,j=N;}return j!==""&&(O=`
${E}${O}
${x}`),m.pop(),`{${O}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function u(h,p,m){switch(typeof p){case"string":return es(p);case"object":{if(p===null)return "null";if(typeof p.toJSON=="function"){if(p=p.toJSON(h),typeof p!="object")return u(h,p,m);if(p===null)return "null"}if(m.indexOf(p)!==-1)return r;let v="";if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p);let N=Math.min(p.length,a),O=0;for(;O<N-1;O++){let J=u(String(O),p[O],m);v+=J!==void 0?J:"null",v+=",";}let j=u(String(O),p[O],m);if(v+=j!==void 0?j:"null",p.length-1>a){let J=p.length-a-1;v+=`,"... ${zs(J)} not stringified"`;}return m.pop(),`[${v}]`}let E=Object.keys(p),x=E.length;if(x===0)return "{}";if(s<m.length+1)return '"[Object]"';let y="",S=Math.min(x,a);p0(p)&&(v+=C2(p,",",a),E=E.slice(p.length),S-=p.length,y=","),i&&(E=h0(E)),m.push(p);for(let N=0;N<S;N++){let O=E[N],j=u(O,p[O],m);j!==void 0&&(v+=`${y}${es(O)}:${j}`,y=",");}if(x>a){let N=x-a;v+=`${y}"...":"${zs(N)} not stringified"`;}return m.pop(),`{${v}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function f(h,p,m){if(arguments.length>1){let v="";if(typeof m=="number"?v=" ".repeat(Math.min(m,10)):typeof m=="string"&&(v=m.slice(0,10)),p!=null){if(typeof p=="function")return o("",{"":h},[],p,v,"");if(Array.isArray(p))return c("",h,[],AK(p),v,"")}if(v.length!==0)return l("",h,[],v,"")}return u("",h,[])}return f}});var P2=P((Sie,R2)=>{var y0=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:I2}=hf(),RK=I2.info;function PK(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(I2);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(u=>{n[u]=t.levels[u];});let i={write:s,add:o,flushSync:a,end:c,minLevel:0,streams:[],clone:l,[y0]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(o,i):o.call(i,e),e=null,i;function s(u){let f,h=this.lastLevel,{streams:p}=this,m=0,v;for(let E=kK(p.length,t.dedupe);LK(E,p.length,t.dedupe);E=DK(E,t.dedupe))if(f=p[E],f.level<=h){if(m!==0&&m!==f.level)break;if(v=f.stream,v[y0]){let{lastTime:x,lastMsg:y,lastObj:S,lastLogger:N}=this;v.lastLevel=h,v.lastTime=x,v.lastMsg=y,v.lastObj=S,v.lastLogger=N;}v.write(u),t.dedupe&&(m=f.level);}else if(!t.dedupe)break}function a(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync();}function o(u){if(!u)return i;let f=typeof u.write=="function"||u.stream,h=u.write?u:u.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:p,streamLevels:m}=this,v;typeof u.levelVal=="number"?v=u.levelVal:typeof u.level=="string"?v=m[u.level]:typeof u.level=="number"?v=u.level:v=RK;let E={stream:h,level:v,levelVal:void 0,id:r++};return p.unshift(E),p.sort(NK),this.minLevel=p[0].level,i}function c(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync(),u.end();}function l(u){let f=new Array(this.streams.length);for(let h=0;h<f.length;h++)f[h]={level:u,stream:this.streams[h].stream};return {write:s,add:o,minLevel:u,streams:f,clone:l,flushSync:a,[y0]:!0}}}function NK(e,t){return e.level-t.level}function kK(e,t){return t?e-1:0}function DK(e,t){return t?e-1:e+1}function LK(e,t,r){return r?e>=0:e<t}R2.exports=PK;});var j2=P((bie,xn)=>{var OK=he("os"),M2=Om(),FK=Fm(),BK=jm(),q2=ER(),MK=E2(),H2=ja(),{configure:qK}=A2(),{assertDefaultLevelFound:HK,mappings:U2,genLsCache:UK,genLevelComparison:$K,assertLevelComparison:jK}=u0(),{DEFAULT_LEVELS:VK,SORTING_ORDER:WK}=hf(),{createArgsNormalizer:KK,asChindings:zK,buildSafeSonicBoom:N2,buildFormatters:GK,stringify:_0,normalizeDestFileDescriptor:k2,noop:XK}=df(),{version:ZK}=c0(),{chindingsSym:D2,redactFmtSym:YK,serializersSym:L2,timeSym:QK,timeSliceIndexSym:JK,streamSym:ez,stringifySym:O2,stringifySafeSym:v0,stringifiersSym:F2,setLevelSym:tz,endSym:rz,formatOptsSym:nz,messageKeySym:iz,errorKeySym:sz,nestedKeySym:az,mixinSym:oz,levelCompSym:uz,useOnlyCustomLevelsSym:cz,formattersSym:B2,hooksSym:lz,nestedKeyStrSym:fz,mixinMergeStrategySym:dz,msgPrefixSym:hz}=H2,{epochTime:$2,nullTime:pz}=q2,{pid:gz}=process,mz=OK.hostname(),yz=M2.err,_z={level:"info",levelComparison:WK.ASC,levels:VK,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:gz,hostname:mz},serializers:Object.assign(Object.create(null),{err:yz}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return {level:t}}}),hooks:{logMethod:void 0},timestamp:$2,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},vz=KK(_z),Sz=Object.assign(Object.create(null),M2);function S0(...e){let t={},{opts:r,stream:n}=vz(t,FK(),...e),{redact:i,crlf:s,serializers:a,timestamp:o,messageKey:c,errorKey:l,nestedKey:u,base:f,name:h,level:p,customLevels:m,levelComparison:v,mixin:E,mixinMergeStrategy:x,useOnlyCustomLevels:y,formatters:S,hooks:N,depthLimit:O,edgeLimit:j,onChild:J,msgPrefix:z}=r,G=qK({maximumDepth:O,maximumBreadth:j}),ee=GK(S.level,S.bindings,S.log),H=_0.bind({[v0]:G}),ne=i?BK(i,H):{},me=i?{stringify:ne[YK]}:{stringify:H},Pe="}"+(s?`\r
`:`
`),W=zK.bind(null,{[D2]:"",[L2]:a,[F2]:ne,[O2]:_0,[v0]:G,[B2]:ee}),K="";f!==null&&(h===void 0?K=W(f):K=W(Object.assign({},f,{name:h})));let se=o instanceof Function?o:o?$2:pz,Ae=se().indexOf(":")+1;if(y&&!m)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(E&&typeof E!="function")throw Error(`Unknown mixin type "${typeof E}" - expected "function"`);if(z&&typeof z!="string")throw Error(`Unknown msgPrefix type "${typeof z}" - expected "string"`);HK(p,m,y);let Fe=U2(m,y);jK(v);let je=$K(v);return Object.assign(t,{levels:Fe,[uz]:je,[cz]:y,[ez]:n,[QK]:se,[JK]:Ae,[O2]:_0,[v0]:G,[F2]:ne,[rz]:Pe,[nz]:me,[iz]:c,[sz]:l,[az]:u,[fz]:u?`,${JSON.stringify(u)}:{`:"",[L2]:a,[oz]:E,[dz]:x,[D2]:K,[B2]:ee,[lz]:N,silent:XK,onChild:J,[hz]:z}),Object.setPrototypeOf(t,MK()),UK(t),t[tz](p),t}xn.exports=S0;xn.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=k2(e.dest||process.stdout.fd),N2(e)):N2({dest:k2(e),minLength:0});xn.exports.transport=r0();xn.exports.multistream=P2();xn.exports.levels=U2();xn.exports.stdSerializers=Sz;xn.exports.stdTimeFunctions=Object.assign({},q2);xn.exports.symbols=H2;xn.exports.version=ZK;xn.exports.default=S0;xn.exports.pino=S0;});var bu=P(ts=>{Object.defineProperty(ts,"__esModule",{value:!0});ts.Frequency=ts.KeepLogFiles=void 0;(function(e){e[e.days=1]="days",e[e.fileCount=2]="fileCount";})(ts.KeepLogFiles||(ts.KeepLogFiles={}));(function(e){e[e.daily=1]="daily",e[e.minutes=2]="minutes",e[e.hours=3]="hours",e[e.date=4]="date",e[e.none=5]="none";})(ts.Frequency||(ts.Frequency={}));});var W2=P(E0=>{Object.defineProperty(E0,"__esModule",{value:!0});var V2=bu(),b0=class{static fileStreamRotatorOptions(t){return Object.assign(Object.assign({},{filename:"",verbose:!1,end_stream:!1,utc:!1,create_symlink:!1,symlink_name:"current.log"}),t)}static fileOptions(t){return Object.assign(Object.assign({},{flags:"a"}),t)}static auditSettings(t){let r={keepSettings:{type:V2.KeepLogFiles.fileCount,amount:10},auditFilename:"audit.json",hashType:"md5",extension:"",files:[]};return Object.assign(Object.assign({},r),t)}static rotationSettings(t){let r={filename:"",frequency:V2.Frequency.none,utc:!1};return Object.assign(Object.assign({},r),t)}static extractParam(t,r=!0){let n=t.toString().match(/(\w)$/),i={number:0};n?.length==2&&(i.letter=n[1].toLowerCase());let s=t.toString().match(/^(\d+)/);return s?.length==2&&(i.number=Number(s[1])),i}};E0.default=b0;});var gf=P(Ka=>{Object.defineProperty(Ka,"__esModule",{value:!0});Ka.Logger=Ka.makeDirectory=void 0;var Cz=he("fs"),wz=he("path");function xz(e){if(e.trim()!==""){var t=wz.dirname(e);try{Cz.mkdirSync(t,{recursive:!0});}catch(r){if(r.code!=="EEXIST")throw r}}}Ka.makeDirectory=xz;var C0=class e{constructor(){this.isVerbose=!1,this.allowDebug=!1;}static getInstance(t,r){return e.instance||(e.instance=new e,e.instance.isVerbose=t??!1,e.instance.allowDebug=r??!1),e.instance}static verbose(...t){e.getInstance().isVerbose&&console.log.apply(null,[new Date,"[FileStreamRotator:VERBOSE]",...t]);}static log(...t){console.log.apply(null,[new Date,"[FileStreamRotator]",...t]);}static debug(...t){e.getInstance().allowDebug&&console.debug.apply(null,[new Date,"[FileStreamRotator:DEBUG]",...t]);}};Ka.Logger=C0;});var z2=P(x0=>{Object.defineProperty(x0,"__esModule",{value:!0});var K2=he("fs"),pn=bu(),Xs=gf(),w0=class e{constructor(t,r){var n;switch(this.currentSize=0,this.lastDate="",this.fileIndx=0,this.settings=t,this.settings.frequency){case pn.Frequency.hours:this.settings.amount&&this.settings.amount<13?this.settings.amount&&this.settings.amount>0||(this.settings.amount=1):this.settings.amount=12,this.isFormatValidForHour()||(Xs.Logger.log("Date format not suitable for X hours rotation. Changing date format to 'YMDHm'"),this.settings.format="YMDHm");break;case pn.Frequency.minutes:this.settings.amount&&this.settings.amount<31?this.settings.amount&&this.settings.amount>0||(this.settings.amount=1):this.settings.amount=30,this.isFormatValidForMinutes()||(this.settings.format="YMDHm",Xs.Logger.log("Date format not suitable for X minutes rotation. Changing date format to 'YMDHm'"));break;case pn.Frequency.daily:this.isFormatValidForDaily()||(this.settings.format="YMD",Xs.Logger.log("Date format not suitable for daily rotation. Changing date format to 'YMD'"));break}if(this.settings.frequency!==pn.Frequency.none&&!this.settings.filename.match("%DATE%")&&(this.settings.filename+=".%DATE%",Xs.Logger.log("Appending date to the end of the filename")),this.lastDate=this.getDateString(),this.settings.maxSize&&r){let s=new Date(r.date),a=(n=this.settings.extension)!==null&&n!==void 0?n:"";if(Xs.Logger.debug(this.getDateString(s)==this.getDateString(new Date),this.getDateString(s),this.getDateString(new Date)),this.getDateString(s)==this.getDateString(new Date)){let o=r.name.match(RegExp("(\\d+)"+a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));o&&(this.fileIndx=Number(o[1]));var i=this.getSizeForFile(this.getNewFilename());i&&(this.currentSize=i),this.lastDate=this.getDateString(s),Xs.Logger.debug("LOADED LAST ENTRY",this.currentSize,this.lastDate,this.fileIndx);}else {var i=this.getSizeForFile(this.getNewFilename());i&&(this.currentSize=i),Xs.Logger.debug("CURRENT FILE:",this.getNewFilename(),this.currentSize);}}}getSizeForFile(t){try{if(K2.existsSync(t)){var r=K2.statSync(this.getNewFilename());if(r)return r.size}}catch{return}}hasMaxSizeReached(){return this.settings.maxSize?this.currentSize>this.settings.maxSize:!1}shouldRotate(){let t=this.hasMaxSizeReached();switch(this.settings.frequency){case pn.Frequency.none:return t;case pn.Frequency.hours:case pn.Frequency.minutes:case pn.Frequency.date:case pn.Frequency.daily:default:let r=this.getDateString();return this.lastDate!=r?!0:t}}isFormatValidForDaily(){let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,23,55,45),n=new Date(2022,2,21,2,55,45);return this.getDateString(t)===this.getDateString(r)&&this.getDateString(t)!==this.getDateString(n)}isFormatValidForHour(){if(!this.settings.amount||this.settings.frequency!=pn.Frequency.hours)return !1;let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,2+this.settings.amount,55,45);return this.getDateString(t)!==this.getDateString(r)}isFormatValidForMinutes(){if(!this.settings.amount||this.settings.frequency!=pn.Frequency.minutes)return !1;let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,1,2+this.settings.amount,45);return this.getDateString(t)!==this.getDateString(r)}getDateString(t){let r=t||new Date,n=e.getDateComponents(r,this.settings.utc),i=this.settings.format;if(i){switch(this.settings.frequency){case pn.Frequency.hours:if(this.settings.amount){var s=Math.floor(n.hour/this.settings.amount)*this.settings.amount;n.hour=s,n.minute=0,n.second=0;}case pn.Frequency.minutes:if(this.settings.amount){var a=Math.floor(n.minute/this.settings.amount)*this.settings.amount;n.minute=a,n.second=0;}}return i?.replace(/D+/,n.day.toString().padStart(2,"0")).replace(/M+/,n.month.toString().padStart(2,"0")).replace(/Y+/,n.year.toString()).replace(/H+/,n.hour.toString().padStart(2,"0")).replace(/m+/,n.minute.toString().padStart(2,"0")).replace(/s+/,n.second.toString().padStart(2,"0")).replace(/A+/,n.hour>11?"PM":"AM")}return ""}getFilename(t,r){return t.replace("%DATE%",this.lastDate)+(this.settings.maxSize||this.fileIndx>0?"."+this.fileIndx:"")+(r||"")}getNewFilename(){return this.getFilename(this.settings.filename,this.settings.extension)}addBytes(t){this.currentSize+=t;}rotate(t=!1){return t?(this.fileIndx+=1,this.currentSize=0,this.lastDate=this.getDateString()):this.shouldRotate()&&(this.hasMaxSizeReached()?this.fileIndx+=1:this.fileIndx=0,this.currentSize=0,this.lastDate=this.getDateString()),this.getNewFilename()}static getDateComponents(t,r){return r?{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),utc:r,source:t}:{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),utc:r,source:t}}static createDate(t,r){return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second)}};x0.default=w0;});var G2=P(I0=>{Object.defineProperty(I0,"__esModule",{value:!0});var mf=he("fs"),Tz=he("path"),Az=bu(),ai=gf(),T0=he("crypto"),A0=class{constructor(t,r){this.config=t,this.emitter=r,this.loadLog();}loadLog(){var t;if(!this.config.keepSettings||((t=this.config.keepSettings)===null||t===void 0?void 0:t.amount)==0||!this.config.auditFilename||this.config.auditFilename==""){ai.Logger.verbose("no existing audit settings found",this.config);return}try{let r=Tz.resolve(this.config.auditFilename),n=JSON.parse(mf.readFileSync(r,{encoding:"utf-8"}));this.config.files=n.files;}catch(r){if(r.code!=="ENOENT"){ai.Logger.log("Failed to load config file",r);return}}}writeLog(){if(this.config.auditFilename)try{(0, ai.makeDirectory)(this.config.auditFilename),mf.writeFileSync(this.config.auditFilename,JSON.stringify(this.config,null,4));}catch(t){ai.Logger.verbose("ERROR: Failed to store log audit",t);}}addLog(t){var r;if(!this.config.keepSettings||((r=this.config.keepSettings)===null||r===void 0?void 0:r.amount)==0||!this.config.auditFilename||this.config.auditFilename==""){ai.Logger.verbose("audit log missing");return}if(this.config.files.findIndex(s=>s.name===t)!==-1){ai.Logger.debug("file already in the log",t);return}var n=Date.now();if(this.config.files.push({date:n,name:t,hash:T0.createHash(this.config.hashType).update(t+"LOG_FILE"+n).digest("hex")}),ai.Logger.debug(`added file ${t} to log`),this.config.keepSettings&&this.config.keepSettings.amount){if(this.config.keepSettings.type==Az.KeepLogFiles.days){let s=Date.now()-86400*this.config.keepSettings.amount*1e3,a=this.config.files.filter(o=>{if(o.date>=s)return !0;this.removeLog(o);});this.config.files=a;}else if(this.config.files.length>this.config.keepSettings.amount){var i=this.config.files.splice(-this.config.keepSettings.amount);this.config.files.length>0&&this.config.files.filter(s=>(this.removeLog(s),!1)),this.config.files=i;}}this.writeLog();}removeLog(t){if(t.hash===T0.createHash(this.config.hashType).update(t.name+"LOG_FILE"+t.date).digest("hex"))try{mf.existsSync(t.name)&&(ai.Logger.debug("removing log file",t.name),mf.unlinkSync(t.name),this.emitter.emit("logRemoved",t.name));}catch{ai.Logger.verbose("Could not remove old log file: ",t.name);}else ai.Logger.debug("incorrect hash",t.name,t.hash,T0.createHash(this.config.hashType).update(t.name+"LOG_FILE"+t.date).digest("hex"));}};I0.default=A0;});var Z2=P(N0=>{Object.defineProperty(N0,"__esModule",{value:!0});var Iz=he("stream"),za=he("fs"),R0=he("path"),Pi=bu(),Ni=W2(),X2=z2(),Rz=G2(),Eu=gf(),P0=class e extends Iz.EventEmitter{constructor(t,r=!1){var n,i;super(),this.config={},this.config=this.parseOptions(t),Eu.Logger.getInstance(t.verbose,r),this.auditManager=new Rz.default((n=this.config.auditSettings)!==null&&n!==void 0?n:Ni.default.auditSettings({}),this);let s=this.auditManager.config.files.slice(-1).shift();this.rotator=new X2.default((i=this.config.rotationSettings)!==null&&i!==void 0?i:Ni.default.rotationSettings({}),s),this.rotate();}static getStream(t){return new e(t)}parseOptions(t){var r,n,i,s;let a={};a.options=Ni.default.fileStreamRotatorOptions(t),a.fileOptions=Ni.default.fileOptions((r=t.file_options)!==null&&r!==void 0?r:{});let o=Ni.default.auditSettings({});if(t.audit_file&&(o.auditFilename=t.audit_file),t.audit_hash_type&&(o.hashType=t.audit_hash_type),t.extension&&(o.extension=t.extension),t.max_logs){let l=Ni.default.extractParam(t.max_logs);o.keepSettings={type:((n=l.letter)===null||n===void 0?void 0:n.toLowerCase())=="d"?Pi.KeepLogFiles.days:Pi.KeepLogFiles.fileCount,amount:l.number};}switch(a.auditSettings=o,a.rotationSettings=Ni.default.rotationSettings({filename:t.filename,extension:t.extension}),t.date_format&&!t.frequency?a.rotationSettings.frequency=Pi.Frequency.date:a.rotationSettings.frequency=Pi.Frequency.none,t.date_format&&(a.rotationSettings.format=t.date_format),a.rotationSettings.utc=(i=t.utc)!==null&&i!==void 0?i:!1,t.frequency){case"daily":a.rotationSettings.frequency=Pi.Frequency.daily;break;case"custom":case"date":a.rotationSettings.frequency=Pi.Frequency.date;break;case"test":a.rotationSettings.frequency=Pi.Frequency.minutes,a.rotationSettings.amount=1;break;default:if(t.frequency){let l=Ni.default.extractParam(t.frequency);!((s=l.letter)===null||s===void 0)&&s.match(/^([mh])$/)&&(a.rotationSettings.frequency=l.letter=="h"?Pi.Frequency.hours:Pi.Frequency.minutes,a.rotationSettings.amount=l.number);}}if(t.size){let l=Ni.default.extractParam(t.size);switch(l.letter){case"k":a.rotationSettings.maxSize=l.number*1024;break;case"m":a.rotationSettings.maxSize=l.number*1024*1024;break;case"g":a.rotationSettings.maxSize=l.number*1024*1024*1024;break}}this.rotator=new X2.default(a.rotationSettings);this.rotator.getNewFilename();return a}rotate(t=!1){var r;let n=this.currentFile;this.rotator.rotate(t),this.currentFile=this.rotator.getNewFilename(),this.currentFile!=n&&(this.fs&&(((r=this.config.options)===null||r===void 0?void 0:r.end_stream)===!0?this.fs.end():this.fs.destroy()),n&&this.auditManager.addLog(n),this.createNewLog(this.currentFile),this.emit("new",this.currentFile),this.emit("rotate",n,this.currentFile,t));}createNewLog(t){var r;(0, Eu.makeDirectory)(t),this.auditManager.addLog(t);let n={};this.config.fileOptions&&(n=this.config.fileOptions),this.fs=za.createWriteStream(t,n),this.bubbleEvents(this.fs,t),!((r=this.config.options)===null||r===void 0)&&r.create_symlink&&this.createCurrentSymLink(t);}write(t,r){this.fs&&(this.rotator.shouldRotate()&&this.rotate(),this.fs.write(t,r??"utf8"),this.rotator.addBytes(Buffer.byteLength(t,r)),this.rotator.hasMaxSizeReached()&&this.rotate());}end(t){this.fs&&(this.fs.end(t),this.fs=void 0);}bubbleEvents(t,r){t.on("close",()=>{this.emit("close");}),t.on("finish",()=>{this.emit("finish");}),t.on("error",n=>{this.emit("error",n);}),t.on("open",n=>{this.emit("open",r);});}createCurrentSymLink(t){var r,n;if(!t)return;let i=(n=(r=this.config.options)===null||r===void 0?void 0:r.symlink_name)!==null&&n!==void 0?n:"current.log",s=R0.dirname(t),a=R0.basename(t),o=s+R0.sep+i;try{if(za.existsSync(o)){if(za.lstatSync(o).isSymbolicLink()){za.unlinkSync(o),za.symlinkSync(a,o);return}Eu.Logger.verbose("Could not create symlink file as file with the same name exists: ",o);}else za.symlinkSync(a,o);}catch(c){Eu.Logger.verbose("[Could not create symlink file: ",o," -> ",a),Eu.Logger.debug("error creating sym link",o,c);}}test(){return {config:this.config,rotator:this.rotator}}};N0.default=P0;});var Y2=P(yf=>{Object.defineProperty(yf,"__esModule",{value:!0});yf.getStream=void 0;var Pz=Z2();function Nz(e){return new Pz.default(e)}yf.getStream=Nz;});var rP=P(($ie,tP)=>{tP.exports=function(){function e(n,i){function s(){this.constructor=n;}s.prototype=i.prototype,n.prototype=new s;}function t(n,i,s,a,o,c){this.message=n,this.expected=i,this.found=s,this.offset=a,this.line=o,this.column=c,this.name="SyntaxError";}e(t,Error);function r(n){var i=arguments.length>1?arguments[1]:{},s={},a={start:HS},o=HS,l=function(){return sb},u=s,f="#",h={type:"literal",value:"#",description:'"#"'},p=void 0,m={type:"any",description:"any character"},v="[",E={type:"literal",value:"[",description:'"["'},x="]",y={type:"literal",value:"]",description:'"]"'},S=function(d){Zh(Sr("ObjectPath",d,_r,vr));},N=function(d){Zh(Sr("ArrayPath",d,_r,vr));},O=function(d,_){return d.concat(_)},j=function(d){return [d]},J=function(d){return d},z=".",G={type:"literal",value:".",description:'"."'},ee="=",H={type:"literal",value:"=",description:'"="'},ne=function(d,_){Zh(Sr("Assign",_,_r,vr,d));},me=function(d){return d.join("")},Pe=function(d){return d.value},W='"""',K={type:"literal",value:'"""',description:'"\\"\\"\\""'},se=null,Ae=function(d){return Sr("String",d.join(""),_r,vr)},Fe='"',je={type:"literal",value:'"',description:'"\\""'},Ve="'''",ot={type:"literal",value:"'''",description:`"'''"`},kt="'",St={type:"literal",value:"'",description:`"'"`},ft=function(d){return d},Le=function(d){return d},It="\\",qt={type:"literal",value:"\\",description:'"\\\\"'},ye=function(){return ""},Ue="e",le={type:"literal",value:"e",description:'"e"'},Re="E",We={type:"literal",value:"E",description:'"E"'},et=function(d,_){return Sr("Float",parseFloat(d+"e"+_),_r,vr)},ze=function(d){return Sr("Float",parseFloat(d),_r,vr)},vn="+",Dr={type:"literal",value:"+",description:'"+"'},Rs=function(d){return d.join("")},Lr="-",zr={type:"literal",value:"-",description:'"-"'},Ps=function(d){return "-"+d.join("")},_a=function(d){return Sr("Integer",parseInt(d,10),_r,vr)},on="true",Ns={type:"literal",value:"true",description:'"true"'},ks=function(){return Sr("Boolean",!0,_r,vr)},bi="false",Ds={type:"literal",value:"false",description:'"false"'},Mn=function(){return Sr("Boolean",!1,_r,vr)},M=function(){return Sr("Array",[],_r,vr)},ae=function(d){return Sr("Array",d?[d]:[],_r,vr)},be=function(d){return Sr("Array",d,_r,vr)},Ne=function(d,_){return Sr("Array",d.concat(_),_r,vr)},bt=function(d){return d},gt=",",Rt={type:"literal",value:",",description:'","'},Lt="{",tt={type:"literal",value:"{",description:'"{"'},xt="}",dt={type:"literal",value:"}",description:'"}"'},jt=function(d){return Sr("InlineTable",d,_r,vr)},Jt=function(d,_){return Sr("InlineTableValue",_,_r,vr,d)},Or=function(d){return "."+d},va=function(d){return d.join("")},qi=":",Hi={type:"literal",value:":",description:'":"'},Fo=function(d){return d.join("")},Bo="T",_c={type:"literal",value:"T",description:'"T"'},Y="Z",A={type:"literal",value:"Z",description:'"Z"'},q=function(d,_){return Sr("Date",new Date(d+"T"+_+"Z"),_r,vr)},U=function(d,_){return Sr("Date",new Date(d+"T"+_),_r,vr)},k=/^[ \t]/,b={type:"class",value:"[ \\t]",description:"[ \\t]"},X=`
`,oe={type:"literal",value:`
`,description:'"\\n"'},Ge="\r",Vt={type:"literal",value:"\r",description:'"\\r"'},Pt=/^[0-9a-f]/i,un={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},cn=/^[0-9]/,qn={type:"class",value:"[0-9]",description:"[0-9]"},nt="_",Ui={type:"literal",value:"_",description:'"_"'},Sa=function(){return ""},vc=/^[A-Za-z0-9_\-]/,u3={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},c3=function(d){return d.join("")},RS='\\"',l3={type:"literal",value:'\\"',description:'"\\\\\\""'},f3=function(){return '"'},PS="\\\\",d3={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},h3=function(){return "\\"},NS="\\b",p3={type:"literal",value:"\\b",description:'"\\\\b"'},g3=function(){return "\b"},kS="\\t",m3={type:"literal",value:"\\t",description:'"\\\\t"'},y3=function(){return "	"},DS="\\n",_3={type:"literal",value:"\\n",description:'"\\\\n"'},v3=function(){return `
`},LS="\\f",S3={type:"literal",value:"\\f",description:'"\\\\f"'},b3=function(){return "\f"},OS="\\r",E3={type:"literal",value:"\\r",description:'"\\\\r"'},C3=function(){return "\r"},BS="\\U",w3={type:"literal",value:"\\U",description:'"\\\\U"'},MS=function(d){return V3(d.join(""))},qS="\\u",x3={type:"literal",value:"\\u",description:'"\\\\u"'},g=0,ke=0,Mo=0,Vh={line:1,column:1,seenCR:!1},Sc=0,Wh=[],ce=0,pe={},bc;if("startRule"in i){if(!(i.startRule in a))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');o=a[i.startRule];}function _r(){return Kh(ke).line}function vr(){return Kh(ke).column}function Kh(d){function _(w,D,F){var Q,ie;for(Q=D;Q<F;Q++)ie=n.charAt(Q),ie===`
`?(w.seenCR||w.line++,w.column=1,w.seenCR=!1):ie==="\r"||ie==="\u2028"||ie==="\u2029"?(w.line++,w.column=1,w.seenCR=!0):(w.column++,w.seenCR=!1);}return Mo!==d&&(Mo>d&&(Mo=0,Vh={line:1,column:1,seenCR:!1}),_(Vh,Mo,d),Mo=d),Vh}function _e(d){g<Sc||(g>Sc&&(Sc=g,Wh=[]),Wh.push(d));}function zh(d,_,w){function D(Te){var Ke=1;for(Te.sort(function(Tt,_t){return Tt.description<_t.description?-1:Tt.description>_t.description?1:0});Ke<Te.length;)Te[Ke-1]===Te[Ke]?Te.splice(Ke,1):Ke++;}function F(Te,Ke){function Tt(Ea){function $i(fn){return fn.charCodeAt(0).toString(16).toUpperCase()}return Ea.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(fn){return "\\x0"+$i(fn)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(fn){return "\\x"+$i(fn)}).replace(/[\u0180-\u0FFF]/g,function(fn){return "\\u0"+$i(fn)}).replace(/[\u1080-\uFFFF]/g,function(fn){return "\\u"+$i(fn)})}var _t=new Array(Te.length),zt,er,ln;for(ln=0;ln<Te.length;ln++)_t[ln]=Te[ln].description;return zt=Te.length>1?_t.slice(0,-1).join(", ")+" or "+_t[Te.length-1]:_t[0],er=Ke?'"'+Tt(Ke)+'"':"end of input","Expected "+zt+" but "+er+" found."}var Q=Kh(w),ie=w<n.length?n.charAt(w):null;return _!==null&&D(_),new t(d!==null?d:F(_,ie),_,ie,w,Q.line,Q.column)}function HS(){var d,_,w,D=g*49+0,F=pe[D];if(F)return g=F.nextPos,F.result;for(d=g,_=[],w=US();w!==s;)_.push(w),w=US();return _!==s&&(ke=d,_=l()),d=_,pe[D]={nextPos:g,result:d},d}function US(){var d,_,w,D,F,Q,ie,Te=g*49+1,Ke=pe[Te];if(Ke)return g=Ke.nextPos,Ke.result;for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=T3(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s){for(F=[],Q=Ec();Q!==s;)F.push(Q),Q=Ec();if(F!==s){if(Q=[],ie=bn(),ie!==s)for(;ie!==s;)Q.push(ie),ie=bn();else Q=u;Q===s&&(Q=wc()),Q!==s?(_=[_,w,D,F,Q],d=_):(g=d,d=u);}else g=d,d=u;}else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){if(d=g,_=[],w=De(),w!==s)for(;w!==s;)_.push(w),w=De();else _=u;if(_!==s){if(w=[],D=bn(),D!==s)for(;D!==s;)w.push(D),D=bn();else w=u;w===s&&(w=wc()),w!==s?(_=[_,w],d=_):(g=d,d=u);}else g=d,d=u;d===s&&(d=bn());}return pe[Te]={nextPos:g,result:d},d}function T3(){var d,_=g*49+2,w=pe[_];return w?(g=w.nextPos,w.result):(d=Ec(),d===s&&(d=A3(),d===s&&(d=I3(),d===s&&(d=R3()))),pe[_]={nextPos:g,result:d},d)}function Ec(){var d,_,w,D,F,Q,ie=g*49+3,Te=pe[ie];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===35?(_=f,g++):(_=s,ce===0&&_e(h)),_!==s){for(w=[],D=g,F=g,ce++,Q=bn(),Q===s&&(Q=wc()),ce--,Q===s?F=p:(g=F,F=u),F!==s?(n.length>g?(Q=n.charAt(g),g++):(Q=s,ce===0&&_e(m)),Q!==s?(F=[F,Q],D=F):(g=D,D=u)):(g=D,D=u);D!==s;)w.push(D),D=g,F=g,ce++,Q=bn(),Q===s&&(Q=wc()),ce--,Q===s?F=p:(g=F,F=u),F!==s?(n.length>g?(Q=n.charAt(g),g++):(Q=s,ce===0&&_e(m)),Q!==s?(F=[F,Q],D=F):(g=D,D=u)):(g=D,D=u);w!==s?(_=[_,w],d=_):(g=d,d=u);}else g=d,d=u;return pe[ie]={nextPos:g,result:d},d}function A3(){var d,_,w,D,F,Q,ie=g*49+4,Te=pe[ie];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){for(w=[],D=De();D!==s;)w.push(D),D=De();if(w!==s)if(D=$S(),D!==s){for(F=[],Q=De();Q!==s;)F.push(Q),Q=De();F!==s?(n.charCodeAt(g)===93?(Q=x,g++):(Q=s,ce===0&&_e(y)),Q!==s?(ke=d,_=S(D),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;return pe[ie]={nextPos:g,result:d},d}function I3(){var d,_,w,D,F,Q,ie,Te,Ke=g*49+5,Tt=pe[Ke];if(Tt)return g=Tt.nextPos,Tt.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s)if(n.charCodeAt(g)===91?(w=v,g++):(w=s,ce===0&&_e(E)),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s)if(F=$S(),F!==s){for(Q=[],ie=De();ie!==s;)Q.push(ie),ie=De();Q!==s?(n.charCodeAt(g)===93?(ie=x,g++):(ie=s,ce===0&&_e(y)),ie!==s?(n.charCodeAt(g)===93?(Te=x,g++):(Te=s,ce===0&&_e(y)),Te!==s?(ke=d,_=N(F),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;return pe[Ke]={nextPos:g,result:d},d}function $S(){var d,_,w,D=g*49+6,F=pe[D];if(F)return g=F.nextPos,F.result;if(d=g,_=[],w=VS(),w!==s)for(;w!==s;)_.push(w),w=VS();else _=u;return _!==s?(w=jS(),w!==s?(ke=d,_=O(_,w),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=jS(),_!==s&&(ke=d,_=j(_)),d=_),pe[D]={nextPos:g,result:d},d}function jS(){var d,_,w,D,F,Q=g*49+7,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=qo(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();D!==s?(ke=d,_=J(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=Gh(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();D!==s?(ke=d,_=J(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}return pe[Q]={nextPos:g,result:d},d}function VS(){var d,_,w,D,F,Q,ie,Te=g*49+8,Ke=pe[Te];if(Ke)return g=Ke.nextPos,Ke.result;for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=qo(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s)if(n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),F!==s){for(Q=[],ie=De();ie!==s;)Q.push(ie),ie=De();Q!==s?(ke=d,_=J(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=Gh(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s)if(n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),F!==s){for(Q=[],ie=De();ie!==s;)Q.push(ie),ie=De();Q!==s?(ke=d,_=J(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}return pe[Te]={nextPos:g,result:d},d}function R3(){var d,_,w,D,F,Q,ie=g*49+9,Te=pe[ie];if(Te)return g=Te.nextPos,Te.result;if(d=g,_=qo(),_!==s){for(w=[],D=De();D!==s;)w.push(D),D=De();if(w!==s)if(n.charCodeAt(g)===61?(D=ee,g++):(D=s,ce===0&&_e(H)),D!==s){for(F=[],Q=De();Q!==s;)F.push(Q),Q=De();F!==s?(Q=ba(),Q!==s?(ke=d,_=ne(_,Q),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;if(d===s)if(d=g,_=Gh(),_!==s){for(w=[],D=De();D!==s;)w.push(D),D=De();if(w!==s)if(n.charCodeAt(g)===61?(D=ee,g++):(D=s,ce===0&&_e(H)),D!==s){for(F=[],Q=De();Q!==s;)F.push(Q),Q=De();F!==s?(Q=ba(),Q!==s?(ke=d,_=ne(_,Q),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;return pe[ie]={nextPos:g,result:d},d}function qo(){var d,_,w,D=g*49+10,F=pe[D];if(F)return g=F.nextPos,F.result;if(d=g,_=[],w=nb(),w!==s)for(;w!==s;)_.push(w),w=nb();else _=u;return _!==s&&(ke=d,_=me(_)),d=_,pe[D]={nextPos:g,result:d},d}function Gh(){var d,_,w=g*49+11,D=pe[w];return D?(g=D.nextPos,D.result):(d=g,_=WS(),_!==s&&(ke=d,_=Pe(_)),d=_,d===s&&(d=g,_=KS(),_!==s&&(ke=d,_=Pe(_)),d=_),pe[w]={nextPos:g,result:d},d)}function ba(){var d,_=g*49+12,w=pe[_];return w?(g=w.nextPos,w.result):(d=P3(),d===s&&(d=U3(),d===s&&(d=L3(),d===s&&(d=O3(),d===s&&(d=F3(),d===s&&(d=B3(),d===s&&(d=M3())))))),pe[_]={nextPos:g,result:d},d)}function P3(){var d,_=g*49+13,w=pe[_];return w?(g=w.nextPos,w.result):(d=N3(),d===s&&(d=WS(),d===s&&(d=k3(),d===s&&(d=KS()))),pe[_]={nextPos:g,result:d},d)}function N3(){var d,_,w,D,F,Q=g*49+14,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;if(d=g,n.substr(g,3)===W?(_=W,g+=3):(_=s,ce===0&&_e(K)),_!==s)if(w=bn(),w===s&&(w=se),w!==s){for(D=[],F=XS();F!==s;)D.push(F),F=XS();D!==s?(n.substr(g,3)===W?(F=W,g+=3):(F=s,ce===0&&_e(K)),F!==s?(ke=d,_=Ae(D),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[Q]={nextPos:g,result:d},d}function WS(){var d,_,w,D,F=g*49+15,Q=pe[F];if(Q)return g=Q.nextPos,Q.result;if(d=g,n.charCodeAt(g)===34?(_=Fe,g++):(_=s,ce===0&&_e(je)),_!==s){for(w=[],D=zS();D!==s;)w.push(D),D=zS();w!==s?(n.charCodeAt(g)===34?(D=Fe,g++):(D=s,ce===0&&_e(je)),D!==s?(ke=d,_=Ae(w),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[F]={nextPos:g,result:d},d}function k3(){var d,_,w,D,F,Q=g*49+16,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;if(d=g,n.substr(g,3)===Ve?(_=Ve,g+=3):(_=s,ce===0&&_e(ot)),_!==s)if(w=bn(),w===s&&(w=se),w!==s){for(D=[],F=ZS();F!==s;)D.push(F),F=ZS();D!==s?(n.substr(g,3)===Ve?(F=Ve,g+=3):(F=s,ce===0&&_e(ot)),F!==s?(ke=d,_=Ae(D),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[Q]={nextPos:g,result:d},d}function KS(){var d,_,w,D,F=g*49+17,Q=pe[F];if(Q)return g=Q.nextPos,Q.result;if(d=g,n.charCodeAt(g)===39?(_=kt,g++):(_=s,ce===0&&_e(St)),_!==s){for(w=[],D=GS();D!==s;)w.push(D),D=GS();w!==s?(n.charCodeAt(g)===39?(D=kt,g++):(D=s,ce===0&&_e(St)),D!==s?(ke=d,_=Ae(w),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[F]={nextPos:g,result:d},d}function zS(){var d,_,w,D=g*49+18,F=pe[D];return F?(g=F.nextPos,F.result):(d=ib(),d===s&&(d=g,_=g,ce++,n.charCodeAt(g)===34?(w=Fe,g++):(w=s,ce===0&&_e(je)),ce--,w===s?_=p:(g=_,_=u),_!==s?(n.length>g?(w=n.charAt(g),g++):(w=s,ce===0&&_e(m)),w!==s?(ke=d,_=ft(w),d=_):(g=d,d=u)):(g=d,d=u)),pe[D]={nextPos:g,result:d},d)}function GS(){var d,_,w,D=g*49+19,F=pe[D];return F?(g=F.nextPos,F.result):(d=g,_=g,ce++,n.charCodeAt(g)===39?(w=kt,g++):(w=s,ce===0&&_e(St)),ce--,w===s?_=p:(g=_,_=u),_!==s?(n.length>g?(w=n.charAt(g),g++):(w=s,ce===0&&_e(m)),w!==s?(ke=d,_=ft(w),d=_):(g=d,d=u)):(g=d,d=u),pe[D]={nextPos:g,result:d},d)}function XS(){var d,_,w,D=g*49+20,F=pe[D];return F?(g=F.nextPos,F.result):(d=ib(),d===s&&(d=D3(),d===s&&(d=g,_=g,ce++,n.substr(g,3)===W?(w=W,g+=3):(w=s,ce===0&&_e(K)),ce--,w===s?_=p:(g=_,_=u),_!==s?(n.length>g?(w=n.charAt(g),g++):(w=s,ce===0&&_e(m)),w!==s?(ke=d,_=Le(w),d=_):(g=d,d=u)):(g=d,d=u))),pe[D]={nextPos:g,result:d},d)}function D3(){var d,_,w,D,F,Q=g*49+21,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;if(d=g,n.charCodeAt(g)===92?(_=It,g++):(_=s,ce===0&&_e(qt)),_!==s)if(w=bn(),w!==s){for(D=[],F=rb();F!==s;)D.push(F),F=rb();D!==s?(ke=d,_=ye(),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[Q]={nextPos:g,result:d},d}function ZS(){var d,_,w,D=g*49+22,F=pe[D];return F?(g=F.nextPos,F.result):(d=g,_=g,ce++,n.substr(g,3)===Ve?(w=Ve,g+=3):(w=s,ce===0&&_e(ot)),ce--,w===s?_=p:(g=_,_=u),_!==s?(n.length>g?(w=n.charAt(g),g++):(w=s,ce===0&&_e(m)),w!==s?(ke=d,_=ft(w),d=_):(g=d,d=u)):(g=d,d=u),pe[D]={nextPos:g,result:d},d)}function L3(){var d,_,w,D,F=g*49+23,Q=pe[F];return Q?(g=Q.nextPos,Q.result):(d=g,_=YS(),_===s&&(_=Xh()),_!==s?(n.charCodeAt(g)===101?(w=Ue,g++):(w=s,ce===0&&_e(le)),w===s&&(n.charCodeAt(g)===69?(w=Re,g++):(w=s,ce===0&&_e(We))),w!==s?(D=Xh(),D!==s?(ke=d,_=et(_,D),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=YS(),_!==s&&(ke=d,_=ze(_)),d=_),pe[F]={nextPos:g,result:d},d)}function YS(){var d,_,w,D,F,Q,ie=g*49+24,Te=pe[ie];return Te?(g=Te.nextPos,Te.result):(d=g,n.charCodeAt(g)===43?(_=vn,g++):(_=s,ce===0&&_e(Dr)),_===s&&(_=se),_!==s?(w=g,D=Ho(),D!==s?(n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),F!==s?(Q=Ho(),Q!==s?(D=[D,F,Q],w=D):(g=w,w=u)):(g=w,w=u)):(g=w,w=u),w!==s?(ke=d,_=Rs(w),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,n.charCodeAt(g)===45?(_=Lr,g++):(_=s,ce===0&&_e(zr)),_!==s?(w=g,D=Ho(),D!==s?(n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),F!==s?(Q=Ho(),Q!==s?(D=[D,F,Q],w=D):(g=w,w=u)):(g=w,w=u)):(g=w,w=u),w!==s?(ke=d,_=Ps(w),d=_):(g=d,d=u)):(g=d,d=u)),pe[ie]={nextPos:g,result:d},d)}function O3(){var d,_,w=g*49+25,D=pe[w];return D?(g=D.nextPos,D.result):(d=g,_=Xh(),_!==s&&(ke=d,_=_a(_)),d=_,pe[w]={nextPos:g,result:d},d)}function Xh(){var d,_,w,D,F,Q=g*49+26,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;if(d=g,n.charCodeAt(g)===43?(_=vn,g++):(_=s,ce===0&&_e(Dr)),_===s&&(_=se),_!==s){if(w=[],D=Ct(),D!==s)for(;D!==s;)w.push(D),D=Ct();else w=u;w!==s?(D=g,ce++,n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),ce--,F===s?D=p:(g=D,D=u),D!==s?(ke=d,_=Rs(w),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s)if(d=g,n.charCodeAt(g)===45?(_=Lr,g++):(_=s,ce===0&&_e(zr)),_!==s){if(w=[],D=Ct(),D!==s)for(;D!==s;)w.push(D),D=Ct();else w=u;w!==s?(D=g,ce++,n.charCodeAt(g)===46?(F=z,g++):(F=s,ce===0&&_e(G)),ce--,F===s?D=p:(g=D,D=u),D!==s?(ke=d,_=Ps(w),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[Q]={nextPos:g,result:d},d}function F3(){var d,_,w=g*49+27,D=pe[w];return D?(g=D.nextPos,D.result):(d=g,n.substr(g,4)===on?(_=on,g+=4):(_=s,ce===0&&_e(Ns)),_!==s&&(ke=d,_=ks()),d=_,d===s&&(d=g,n.substr(g,5)===bi?(_=bi,g+=5):(_=s,ce===0&&_e(Ds)),_!==s&&(ke=d,_=Mn()),d=_),pe[w]={nextPos:g,result:d},d)}function B3(){var d,_,w,D,F,Q=g*49+28,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){for(w=[],D=Sn();D!==s;)w.push(D),D=Sn();w!==s?(n.charCodeAt(g)===93?(D=x,g++):(D=s,ce===0&&_e(y)),D!==s?(ke=d,_=M(),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s&&(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s?(w=QS(),w===s&&(w=se),w!==s?(n.charCodeAt(g)===93?(D=x,g++):(D=s,ce===0&&_e(y)),D!==s?(ke=d,_=ae(w),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s)){if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){if(w=[],D=Cc(),D!==s)for(;D!==s;)w.push(D),D=Cc();else w=u;w!==s?(n.charCodeAt(g)===93?(D=x,g++):(D=s,ce===0&&_e(y)),D!==s?(ke=d,_=be(w),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s)if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){if(w=[],D=Cc(),D!==s)for(;D!==s;)w.push(D),D=Cc();else w=u;w!==s?(D=QS(),D!==s?(n.charCodeAt(g)===93?(F=x,g++):(F=s,ce===0&&_e(y)),F!==s?(ke=d,_=Ne(w,D),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;}return pe[Q]={nextPos:g,result:d},d}function QS(){var d,_,w,D,F,Q=g*49+29,ie=pe[Q];if(ie)return g=ie.nextPos,ie.result;for(d=g,_=[],w=Sn();w!==s;)_.push(w),w=Sn();if(_!==s)if(w=ba(),w!==s){for(D=[],F=Sn();F!==s;)D.push(F),F=Sn();D!==s?(ke=d,_=bt(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[Q]={nextPos:g,result:d},d}function Cc(){var d,_,w,D,F,Q,ie,Te=g*49+30,Ke=pe[Te];if(Ke)return g=Ke.nextPos,Ke.result;for(d=g,_=[],w=Sn();w!==s;)_.push(w),w=Sn();if(_!==s)if(w=ba(),w!==s){for(D=[],F=Sn();F!==s;)D.push(F),F=Sn();if(D!==s)if(n.charCodeAt(g)===44?(F=gt,g++):(F=s,ce===0&&_e(Rt)),F!==s){for(Q=[],ie=Sn();ie!==s;)Q.push(ie),ie=Sn();Q!==s?(ke=d,_=bt(w),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;return pe[Te]={nextPos:g,result:d},d}function Sn(){var d,_=g*49+31,w=pe[_];return w?(g=w.nextPos,w.result):(d=De(),d===s&&(d=bn(),d===s&&(d=Ec())),pe[_]={nextPos:g,result:d},d)}function M3(){var d,_,w,D,F,Q,ie=g*49+32,Te=pe[ie];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===123?(_=Lt,g++):(_=s,ce===0&&_e(tt)),_!==s){for(w=[],D=De();D!==s;)w.push(D),D=De();if(w!==s){for(D=[],F=JS();F!==s;)D.push(F),F=JS();if(D!==s){for(F=[],Q=De();Q!==s;)F.push(Q),Q=De();F!==s?(n.charCodeAt(g)===125?(Q=xt,g++):(Q=s,ce===0&&_e(dt)),Q!==s?(ke=d,_=jt(D),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;}else g=d,d=u;}else g=d,d=u;return pe[ie]={nextPos:g,result:d},d}function JS(){var d,_,w,D,F,Q,ie,Te,Ke,Tt,_t,zt=g*49+33,er=pe[zt];if(er)return g=er.nextPos,er.result;for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=qo(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s)if(n.charCodeAt(g)===61?(F=ee,g++):(F=s,ce===0&&_e(H)),F!==s){for(Q=[],ie=De();ie!==s;)Q.push(ie),ie=De();if(Q!==s)if(ie=ba(),ie!==s){for(Te=[],Ke=De();Ke!==s;)Te.push(Ke),Ke=De();if(Te!==s)if(n.charCodeAt(g)===44?(Ke=gt,g++):(Ke=s,ce===0&&_e(Rt)),Ke!==s){for(Tt=[],_t=De();_t!==s;)Tt.push(_t),_t=De();Tt!==s?(ke=d,_=Jt(w,ie),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],w=De();w!==s;)_.push(w),w=De();if(_!==s)if(w=qo(),w!==s){for(D=[],F=De();F!==s;)D.push(F),F=De();if(D!==s)if(n.charCodeAt(g)===61?(F=ee,g++):(F=s,ce===0&&_e(H)),F!==s){for(Q=[],ie=De();ie!==s;)Q.push(ie),ie=De();Q!==s?(ie=ba(),ie!==s?(ke=d,_=Jt(w,ie),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}return pe[zt]={nextPos:g,result:d},d}function eb(){var d,_,w,D=g*49+34,F=pe[D];return F?(g=F.nextPos,F.result):(d=g,n.charCodeAt(g)===46?(_=z,g++):(_=s,ce===0&&_e(G)),_!==s?(w=Ho(),w!==s?(ke=d,_=Or(w),d=_):(g=d,d=u)):(g=d,d=u),pe[D]={nextPos:g,result:d},d)}function tb(){var d,_,w,D,F,Q,ie,Te,Ke,Tt,_t,zt,er=g*49+35,ln=pe[er];return ln?(g=ln.nextPos,ln.result):(d=g,_=g,w=Ct(),w!==s?(D=Ct(),D!==s?(F=Ct(),F!==s?(Q=Ct(),Q!==s?(n.charCodeAt(g)===45?(ie=Lr,g++):(ie=s,ce===0&&_e(zr)),ie!==s?(Te=Ct(),Te!==s?(Ke=Ct(),Ke!==s?(n.charCodeAt(g)===45?(Tt=Lr,g++):(Tt=s,ce===0&&_e(zr)),Tt!==s?(_t=Ct(),_t!==s?(zt=Ct(),zt!==s?(w=[w,D,F,Q,ie,Te,Ke,Tt,_t,zt],_=w):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(ke=d,_=va(_)),d=_,pe[er]={nextPos:g,result:d},d)}function q3(){var d,_,w,D,F,Q,ie,Te,Ke,Tt,_t,zt=g*49+36,er=pe[zt];return er?(g=er.nextPos,er.result):(d=g,_=g,w=Ct(),w!==s?(D=Ct(),D!==s?(n.charCodeAt(g)===58?(F=qi,g++):(F=s,ce===0&&_e(Hi)),F!==s?(Q=Ct(),Q!==s?(ie=Ct(),ie!==s?(n.charCodeAt(g)===58?(Te=qi,g++):(Te=s,ce===0&&_e(Hi)),Te!==s?(Ke=Ct(),Ke!==s?(Tt=Ct(),Tt!==s?(_t=eb(),_t===s&&(_t=se),_t!==s?(w=[w,D,F,Q,ie,Te,Ke,Tt,_t],_=w):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(ke=d,_=Fo(_)),d=_,pe[zt]={nextPos:g,result:d},d)}function H3(){var d,_,w,D,F,Q,ie,Te,Ke,Tt,_t,zt,er,ln,Ea,$i,fn,ab=g*49+37,Yh=pe[ab];return Yh?(g=Yh.nextPos,Yh.result):(d=g,_=g,w=Ct(),w!==s?(D=Ct(),D!==s?(n.charCodeAt(g)===58?(F=qi,g++):(F=s,ce===0&&_e(Hi)),F!==s?(Q=Ct(),Q!==s?(ie=Ct(),ie!==s?(n.charCodeAt(g)===58?(Te=qi,g++):(Te=s,ce===0&&_e(Hi)),Te!==s?(Ke=Ct(),Ke!==s?(Tt=Ct(),Tt!==s?(_t=eb(),_t===s&&(_t=se),_t!==s?(n.charCodeAt(g)===45?(zt=Lr,g++):(zt=s,ce===0&&_e(zr)),zt===s&&(n.charCodeAt(g)===43?(zt=vn,g++):(zt=s,ce===0&&_e(Dr))),zt!==s?(er=Ct(),er!==s?(ln=Ct(),ln!==s?(n.charCodeAt(g)===58?(Ea=qi,g++):(Ea=s,ce===0&&_e(Hi)),Ea!==s?($i=Ct(),$i!==s?(fn=Ct(),fn!==s?(w=[w,D,F,Q,ie,Te,Ke,Tt,_t,zt,er,ln,Ea,$i,fn],_=w):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(ke=d,_=Fo(_)),d=_,pe[ab]={nextPos:g,result:d},d)}function U3(){var d,_,w,D,F,Q=g*49+38,ie=pe[Q];return ie?(g=ie.nextPos,ie.result):(d=g,_=tb(),_!==s?(n.charCodeAt(g)===84?(w=Bo,g++):(w=s,ce===0&&_e(_c)),w!==s?(D=q3(),D!==s?(n.charCodeAt(g)===90?(F=Y,g++):(F=s,ce===0&&_e(A)),F!==s?(ke=d,_=q(_,D),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=tb(),_!==s?(n.charCodeAt(g)===84?(w=Bo,g++):(w=s,ce===0&&_e(_c)),w!==s?(D=H3(),D!==s?(ke=d,_=U(_,D),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u)),pe[Q]={nextPos:g,result:d},d)}function De(){var d,_=g*49+39,w=pe[_];return w?(g=w.nextPos,w.result):(k.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(b)),pe[_]={nextPos:g,result:d},d)}function bn(){var d,_,w,D=g*49+40,F=pe[D];return F?(g=F.nextPos,F.result):(n.charCodeAt(g)===10?(d=X,g++):(d=s,ce===0&&_e(oe)),d===s&&(d=g,n.charCodeAt(g)===13?(_=Ge,g++):(_=s,ce===0&&_e(Vt)),_!==s?(n.charCodeAt(g)===10?(w=X,g++):(w=s,ce===0&&_e(oe)),w!==s?(_=[_,w],d=_):(g=d,d=u)):(g=d,d=u)),pe[D]={nextPos:g,result:d},d)}function rb(){var d,_=g*49+41,w=pe[_];return w?(g=w.nextPos,w.result):(d=bn(),d===s&&(d=De()),pe[_]={nextPos:g,result:d},d)}function wc(){var d,_,w=g*49+42,D=pe[w];return D?(g=D.nextPos,D.result):(d=g,ce++,n.length>g?(_=n.charAt(g),g++):(_=s,ce===0&&_e(m)),ce--,_===s?d=p:(g=d,d=u),pe[w]={nextPos:g,result:d},d)}function En(){var d,_=g*49+43,w=pe[_];return w?(g=w.nextPos,w.result):(Pt.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(un)),pe[_]={nextPos:g,result:d},d)}function Ct(){var d,_,w=g*49+44,D=pe[w];return D?(g=D.nextPos,D.result):(cn.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(qn)),d===s&&(d=g,n.charCodeAt(g)===95?(_=nt,g++):(_=s,ce===0&&_e(Ui)),_!==s&&(ke=d,_=Sa()),d=_),pe[w]={nextPos:g,result:d},d)}function nb(){var d,_=g*49+45,w=pe[_];return w?(g=w.nextPos,w.result):(vc.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(u3)),pe[_]={nextPos:g,result:d},d)}function Ho(){var d,_,w,D=g*49+46,F=pe[D];if(F)return g=F.nextPos,F.result;if(d=g,_=[],w=Ct(),w!==s)for(;w!==s;)_.push(w),w=Ct();else _=u;return _!==s&&(ke=d,_=c3(_)),d=_,pe[D]={nextPos:g,result:d},d}function ib(){var d,_,w=g*49+47,D=pe[w];return D?(g=D.nextPos,D.result):(d=g,n.substr(g,2)===RS?(_=RS,g+=2):(_=s,ce===0&&_e(l3)),_!==s&&(ke=d,_=f3()),d=_,d===s&&(d=g,n.substr(g,2)===PS?(_=PS,g+=2):(_=s,ce===0&&_e(d3)),_!==s&&(ke=d,_=h3()),d=_,d===s&&(d=g,n.substr(g,2)===NS?(_=NS,g+=2):(_=s,ce===0&&_e(p3)),_!==s&&(ke=d,_=g3()),d=_,d===s&&(d=g,n.substr(g,2)===kS?(_=kS,g+=2):(_=s,ce===0&&_e(m3)),_!==s&&(ke=d,_=y3()),d=_,d===s&&(d=g,n.substr(g,2)===DS?(_=DS,g+=2):(_=s,ce===0&&_e(_3)),_!==s&&(ke=d,_=v3()),d=_,d===s&&(d=g,n.substr(g,2)===LS?(_=LS,g+=2):(_=s,ce===0&&_e(S3)),_!==s&&(ke=d,_=b3()),d=_,d===s&&(d=g,n.substr(g,2)===OS?(_=OS,g+=2):(_=s,ce===0&&_e(E3)),_!==s&&(ke=d,_=C3()),d=_,d===s&&(d=$3()))))))),pe[w]={nextPos:g,result:d},d)}function $3(){var d,_,w,D,F,Q,ie,Te,Ke,Tt,_t,zt=g*49+48,er=pe[zt];return er?(g=er.nextPos,er.result):(d=g,n.substr(g,2)===BS?(_=BS,g+=2):(_=s,ce===0&&_e(w3)),_!==s?(w=g,D=En(),D!==s?(F=En(),F!==s?(Q=En(),Q!==s?(ie=En(),ie!==s?(Te=En(),Te!==s?(Ke=En(),Ke!==s?(Tt=En(),Tt!==s?(_t=En(),_t!==s?(D=[D,F,Q,ie,Te,Ke,Tt,_t],w=D):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u),w!==s?(ke=d,_=MS(w),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,n.substr(g,2)===qS?(_=qS,g+=2):(_=s,ce===0&&_e(x3)),_!==s?(w=g,D=En(),D!==s?(F=En(),F!==s?(Q=En(),Q!==s?(ie=En(),ie!==s?(D=[D,F,Q,ie],w=D):(g=w,w=u)):(g=w,w=u)):(g=w,w=u)):(g=w,w=u),w!==s?(ke=d,_=MS(w),d=_):(g=d,d=u)):(g=d,d=u)),pe[zt]={nextPos:g,result:d},d)}var sb=[];function j3(d,_,w){var D=new Error(d);throw D.line=_,D.column=w,D}function Zh(d){sb.push(d);}function Sr(d,_,w,D,F){var Q={type:d,value:_,line:w(),column:D()};return F&&(Q.key=F),Q}function V3(d,_,w){var D=parseInt("0x"+d);if(!isFinite(D)||Math.floor(D)!=D||D<0||D>1114111||D>55295&&D<57344)j3("Invalid Unicode escape code: "+d,_,w);else return W3(D)}function W3(){var d=16384,_=[],w,D,F=-1,Q=arguments.length;if(!Q)return "";for(var ie="";++F<Q;){var Te=Number(arguments[F]);Te<=65535?_.push(Te):(Te-=65536,w=(Te>>10)+55296,D=Te%1024+56320,_.push(w,D)),(F+1==Q||_.length>d)&&(ie+=String.fromCharCode.apply(null,_),_.length=0);}return ie}if(bc=o(),bc!==s&&g===n.length)return bc;throw bc!==s&&g<n.length&&_e({type:"end",description:"end of input"}),zh(null,Wh,Sc)}return {SyntaxError:t,parse:r}}();});var iP=P((jie,nP)=>{function Oz(e){var t=[],r=[],n="",i=Object.create(null),s=i;return o(e);function o(y){for(var S,N=0;N<y.length;N++)switch(S=y[N],S.type){case"Assign":l(S);break;case"ObjectPath":p(S);break;case"ArrayPath":m(S);break}return i}function c(y,S,N){var O=new Error(y);throw O.line=S,O.column=N,O}function l(y){var S=y.key,N=y.value,O=y.line,j=y.column,J;n?J=n+"."+S:J=S,typeof s[S]<"u"&&c("Cannot redefine existing key '"+J+"'.",O,j),s[S]=f(N),u(J)||(t.push(J),r.push(J));}function u(y){return t.indexOf(y)!==-1}function f(y){return y.type==="Array"?E(y.value):y.type==="InlineTable"?h(y.value):y.value}function h(y){for(var S=Object.create(null),N=0;N<y.length;N++){var O=y[N];O.value.type==="InlineTable"?S[O.key]=h(O.value.value):O.type==="InlineTableValue"&&(S[O.key]=f(O.value));}return S}function p(y){var S=y.value,N=S.map(x).join("."),O=y.line,j=y.column;u(N)&&c("Cannot redefine existing key '"+S+"'.",O,j),t.push(N),s=v(i,S,Object.create(null),O,j),n=S;}function m(y){var S=y.value,N=S.map(x).join("."),O=y.line,j=y.column;if(u(N)||t.push(N),t=t.filter(function(z){return z.indexOf(N)!==0}),t.push(N),s=v(i,S,[],O,j),n=N,s instanceof Array){var J=Object.create(null);s.push(J),s=J;}else c("Cannot redefine existing key '"+S+"'.",O,j);}function v(y,S,N,O,j){for(var J=[],z="",G=S.join("."),ee=y,H=0;H<S.length;H++){var ne=S[H];J.push(ne),z=J.join("."),typeof ee[ne]>"u"?H===S.length-1?ee[ne]=N:ee[ne]=Object.create(null):H!==S.length-1&&r.indexOf(z)>-1&&c("Cannot redefine existing key '"+z+"'.",O,j),ee=ee[ne],ee instanceof Array&&ee.length&&H<S.length-1&&(ee=ee[ee.length-1]);}return ee}function E(y){for(var S=null,N=0;N<y.length;N++){var O=y[N];S===null?S=O.type:O.type!==S&&c("Cannot add value of type "+O.type+" to array of type "+S+".",O.line,O.column);}return y.map(f)}function x(y){return y.indexOf(".")>-1?'"'+y+'"':y}}nP.exports={compile:Oz};});var aP=P((Vie,sP)=>{var Fz=rP(),Bz=iP();sP.exports={parse:function(e){var t=Fz.parse(e.toString());return Bz.compile(t)}};});var SP=P((Zs,vP)=>{var q0=he("crypto");Zs=vP.exports=Tu;function Tu(e,t){return t=yP(e,t),Wz(e,t)}Zs.sha1=function(e){return Tu(e)};Zs.keys=function(e){return Tu(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};Zs.MD5=function(e){return Tu(e,{algorithm:"md5",encoding:"hex"})};Zs.keysMD5=function(e){return Tu(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var Za=q0.getHashes?q0.getHashes().slice():["sha1","md5"];Za.push("passthrough");var gP=["buffer","hex","binary","base64"];function yP(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<Za.length;++n)Za[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=Za[n]);if(Za.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+Za.join(", "));if(gP.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+gP.join(", "));return r}function mP(e){if(typeof e!="function")return !1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Wz(e,t){var r;t.algorithm!=="passthrough"?r=q0.createHash(t.algorithm):r=new _P,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=H0(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}Zs.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=yP(e,t),H0(t,r).dispatch(e)};function H0(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return {dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,a=Object.prototype.toString.call(i),o=s.exec(a);o?o=o[1]:o="unknown:["+a+"]",o=o.toLowerCase();var c=null;if((c=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+c+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](i);else {if(e.ignoreUnknown)return n("["+o+"]");throw new Error('Unknown object type "'+o+'"')}else {var l=Object.keys(i);e.unorderedObjects&&(l=l.sort()),e.respectType!==!1&&!mP(i)&&l.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(l=l.filter(function(f){return !e.excludeKeys(f)})),n("object:"+l.length+":");var u=this;return l.forEach(function(f){u.dispatch(f),n(":"),e.excludeValues||u.dispatch(i[f]),n(",");})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var a=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(l){return a.dispatch(l)});var o=[],c=i.map(function(l){var u=new _P,f=r.slice(),h=H0(e,u,f);return h.dispatch(l),o=o.concat(f.slice(r.length)),u.read().toString()});return r=r.concat(o),c.sort(),this._array(c,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString());},_function:function(i){n("fn:"),mP(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i);},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString())},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function _P(){return {buf:"",write:function(e){this.buf+=e;},end:function(e){this.buf+=e;},read:function(){return this.buf}}}});var AP=P((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize();}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function logExceptionOnExit(e){e instanceof ExitStatus||err("exiting due to exception: "+e);}if(ENVIRONMENT_IS_NODE){var fs=he("fs"),nodePath=he("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(e,t)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e,t?void 0:"utf8")),readBinary=e=>{var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),t},readAsync=(e,t,r)=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFile(e,function(n,i){n?r(n):t(i.buffer);});},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(e,t)=>{if(keepRuntimeAlive())throw process.exitCode=e,t;logExceptionOnExit(t),process.exit(e);},Module.inspect=function(){return "[Emscripten Module object]"};}else (ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?t(n.response):r();},n.onerror=r,n.send(null);},e=>document.title=e);Module.print||console.log.bind(console);var err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i));for(var s="";t<i;){var a=e[t++];if(128&a){var o=63&e[t++];if((224&a)!=192){var c=63&e[t++];if((a=(240&a)==224?(15&a)<<12|o<<6|c:(7&a)<<18|o<<12|c<<6|63&e[t++])<65536)s+=String.fromCharCode(a);else {var l=a-65536;s+=String.fromCharCode(55296|l>>10,56320|1023&l);}}else s+=String.fromCharCode((31&a)<<6|o);}else s+=String.fromCharCode(a);}return s}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var i=r,s=r+n-1,a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),o<=127){if(r>=s)break;t[r++]=o;}else if(o<=2047){if(r+1>=s)break;t[r++]=192|o>>6,t[r++]=128|63&o;}else if(o<=65535){if(r+2>=s)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o;}else {if(r+3>=s)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o;}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3;}return t}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e);}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__);}function preMain(){callRuntimeCallbacks(__ATMAIN__);}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(e){__ATPRERUN__.unshift(e);}function addOnInit(e){__ATINIT__.unshift(e);}function addOnPostRun(e){__ATPOSTRUN__.unshift(e);}var runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies);}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t();}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e="Aborted("+e+")"),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function isFileURI(e){return e.startsWith("file://")}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw "both async and sync fetching of the wasm failed"}catch(t){abort(t);}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw "failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(e,t){readAsync(wasmBinaryFile,function(r){e(new Uint8Array(r));},t);})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var e={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function t(i,s){var a=i.exports;a=relocateExports(a,1024);var o=getDylinkMetadata(s);o.neededDynlibs&&(dynamicLibraries=o.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency();}function r(i){t(i.instance,i.module);}function n(i){return getBinaryPromise().then(function(s){return WebAssembly.instantiate(s,e)}).then(function(s){return s}).then(i,function(s){err("failed to asynchronously prepare wasm: "+s),abort(s);})}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,e).then(r,function(s){return err("wasm streaming compile failed: "+s),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e;}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(e,t){var r=GOT[t];return r||(r=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(t)||(r.required=!0),r}};function callRuntimeCallbacks(e){for(;e.length>0;)e.shift()(Module);}function getDylinkMetadata(e){var t=0,r=0;function n(){for(var x=0,y=1;;){var S=e[t++];if(x+=(127&S)*y,y*=128,!(128&S))break}return x}function i(){var x=n();return UTF8ArrayToString(e,(t+=x)-x,x)}function s(x,y){if(x)throw new Error(y)}var a="dylink.0";if(e instanceof WebAssembly.Module){var o=WebAssembly.Module.customSections(e,a);o.length===0&&(a="dylink",o=WebAssembly.Module.customSections(e,a)),s(o.length===0,"need dylink section"),r=(e=new Uint8Array(o[0])).length;}else {s(new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),s(e[8]!==0,"need the dylink section to be first"),t=9;var c=n();r=t+c,a=i();}var l={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){l.memorySize=n(),l.memoryAlign=n(),l.tableSize=n(),l.tableAlign=n();for(var u=n(),f=0;f<u;++f){var h=i();l.neededDynlibs.push(h);}}else for(s(a!=="dylink.0");t<r;){var p=e[t++],m=n();if(p===1)l.memorySize=n(),l.memoryAlign=n(),l.tableSize=n(),l.tableAlign=n();else if(p===2)for(u=n(),f=0;f<u;++f)h=i(),l.neededDynlibs.push(h);else if(p===3)for(var v=n();v--;){var E=i();256&n()&&l.tlsExports.add(E);}else if(p===4)for(v=n();v--;)i(),E=i(),(3&n())==1&&l.weakImports.add(E);else t+=m;}return l}function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];case"*":return HEAPU32[e>>2];default:abort("invalid type for getValue: "+t);}return null}function asmjsMangle(e){return e.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function mergeLibSymbols(e,t){for(var r in e)if(e.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=e[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=e[r]),r=="__main_argc_argv"&&(Module._main=e[r]);}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(e,t,r){var n=Module["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}var wasmTableMirror=[];function getWasmTableEntry(e){var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t}function dynCall(e,t,r){return e.includes("j")?dynCallLegacy(e,t,r):getWasmTableEntry(t).apply(null,r)}function createInvokeFunction(e){return function(){var t=stackSave();try{return dynCall(e,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(t),r!==r+0)throw r;_setThrew(1,0);}}}var ___heap_base=78144;function zeroMemory(e,t){return HEAPU8.fill(0,e,e+t),e}function getMemory(e){if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,r=t+e+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,t}function isInternalSym(e){return ["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(e)}function uleb128Encode(e,t){e<128?t.push(e):t.push(e%128|128,e>>7);}function sigToWasmTypes(e){for(var t={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:e[0]=="v"?[]:[t[e[0]]]},n=1;n<e.length;++n)r.parameters.push(t[e[n]]),e[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(e,t){var r=e.slice(0,1),n=e.slice(1),i={i:127,p:127,j:126,f:125,d:124};t.push(96),uleb128Encode(n.length,t);for(var s=0;s<n.length;++s)t.push(i[n[s]]);r=="v"?t.push(0):t.push(1,i[r]);}function convertJsFunctionToWasm(e,t){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(t),e);var r=[1];generateFuncType(t,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:e}}).exports.f}function updateTableMap(e,t){if(functionsInTableMap)for(var r=e;r<e+t;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r);}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return wasmTable.length-1}function setWasmTableEntry(e,t){wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e);}function addFunction(e,t){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(e))return functionsInTableMap.get(e);var r=getEmptyTableSlot();try{setWasmTableEntry(r,e);}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(e,t));}return functionsInTableMap.set(e,r),r}function updateGOT(e,t){for(var r in e)if(!isInternalSym(r)){var n=e[r];r.startsWith("orig$")&&(r=r.split("$")[1],t=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n));}}function relocateExports(e,t,r){var n={};for(var i in e){var s=e[i];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=t),n[i]=s;}return updateGOT(n,r),n}function resolveGlobalSymbol(e,t){var r;return t&&(r=asmLibraryArg["orig$"+e]),r||(r=asmLibraryArg[e])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(e)]),!r&&e.startsWith("invoke_")&&(r=createInvokeFunction(e.split("_")[1])),r}function alignMemory(e,t){return Math.ceil(e/t)*t}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize);}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e,!1);return t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(t in asmLibraryArg)return asmLibraryArg[t];var r;return t in e||(e[t]=function(){return r||(r=resolveSymbol(t)),r.apply(null,arguments)}),e[t]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";eval(func);}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1;}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(e){return postInstantiation(e.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(e,t){return e.then(function(){return loadDynamicLibrary(t,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(e){loadDynamicLibrary(e,flags);}),loadModule())}function loadDynamicLibrary(e,t,r){t=t||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[e];if(n)return t.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module)),t.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!t.loadAsync||Promise.resolve(!0);function i(o){if(t.fs&&t.fs.findObject(o)){var c=t.fs.readFile(o,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),t.loadAsync?Promise.resolve(c):c}if(o=locateFile(o),t.loadAsync)return new Promise(function(l,u){readAsync(o,f=>l(new Uint8Array(f)),u);});if(!readBinary)throw new Error(o+": file not found, and synchronous loading of external files is not available");return readBinary(o)}function s(){if(typeof preloadedWasm<"u"&&preloadedWasm[e]){var o=preloadedWasm[e];return t.loadAsync?Promise.resolve(o):o}return t.loadAsync?i(e).then(function(c){return loadWebAssemblyModule(c,t,r)}):loadWebAssemblyModule(i(e),t,r)}function a(o){n.global&&mergeLibSymbols(o),n.module=o;}return n={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},LDSO.loadedLibsByName[e]=n,r&&(LDSO.loadedLibsByHandle[r]=n),t.loadAsync?s().then(function(o){return a(o),!0}):(a(s()),!0)}function reportUndefinedSymbols(){for(var e in GOT)if(GOT[e].value==0){var t=resolveGlobalSymbol(e,!0);if(!t&&!GOT[e].required)continue;if(typeof t=="function")GOT[e].value=addFunction(t,t.sig);else {if(typeof t!="number")throw new Error("bad export type for `"+e+"`: "+typeof t);GOT[e].value=t;}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency(),dynamicLibraries.reduce(function(e,t){return e.then(function(){return loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency();})):reportUndefinedSymbols();}function setValue(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;case"*":HEAPU32[e>>2]=t;break;default:abort("invalid type for setValue: "+r);}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("");}function _emscripten_memcpy_big(e,t,r){HEAPU8.copyWithin(e,t,t+r);}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(e){var t=HEAPU8.length;e>>>=0;var r=getHeapMax();if(e>r)return !1;for(var n=1;n<=4;n*=2){var i=t*(1+.2/n);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(r,(s=Math.max(e,i))+((a=65536)-s%a)%a)))return !0}var s,a;return !1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(PATH.isAbs(t))return t;var n;if(e===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(e).path,t.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,t)},doStat:function(e,t,r){try{var n=e(t);}catch(o){if(o&&o.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(o.node)))return -54;throw o}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),s=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=s%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(e,t,r,n,i){if(!FS.isFile(t.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var s=HEAPU8.slice(e,e+r);FS.msync(t,s,i,r,n);},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t}};function _proc_exit(e){EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e));}function exitJS(e,t){EXITSTATUS=e,_proc_exit(e);}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN}function _fd_seek(e,t,r,n,i){try{var s=convertI32PairToI53Checked(t,r);if(isNaN(s))return 61;var a=SYSCALLS.getStreamFromFD(e);return FS.llseek(a,s,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&s===0&&n===0&&(a.getdents=null),0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function doWritev(e,t,r,n){for(var i=0,s=0;s<r;s++){var a=HEAPU32[t>>2],o=HEAPU32[t+4>>2];t+=8;var c=FS.write(e,HEAP8,a,o,n);if(c<0)return -1;i+=c,n!==void 0&&(n+=c);}return i}function _fd_write(e,t,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(e),t,r);return HEAPU32[n>>2]=i,0}catch(s){if(typeof FS>"u"||!(s instanceof FS.ErrnoError))throw s;return s.errno}}function _tree_sitter_log_callback(e,t){if(currentLogCallback){let r=UTF8ToString(t);currentLogCallback(r,e!==0);}}function _tree_sitter_parse_callback(e,t,r,n,i){var s=currentParseCallback(t,{row:r,column:n});typeof s=="string"?(setValue(i,s.length,"i32"),stringToUTF16(s,e,10240)):setValue(i,0,"i32");}function handleException(e){if(e instanceof ExitStatus||e=="unwind")return EXITSTATUS;quit_(1,e);}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,r=stackAlloc(t);return stringToUTF8Array(e,HEAP8,r,t),r}function stringToUTF16(e,t,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=t,i=(r-=2)<2*e.length?r/2:e.length,s=0;s<i;++s){var a=e.charCodeAt(s);HEAP16[t>>1]=a,t+=2;}return HEAP16[t>>1]=0,t-n}function AsciiToString(e){for(var t="";;){var r=HEAPU8[e++>>0];if(!r)return t;t+=String.fromCharCode(r);}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback};createWasm();Module.___wasm_call_ctors=function(){return (Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)};Module.___wasm_apply_data_relocs=function(){return (Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)};var _malloc=Module._malloc=function(){return (_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)};Module._calloc=function(){return (Module._calloc=Module.asm.calloc).apply(null,arguments)};Module._realloc=function(){return (Module._realloc=Module.asm.realloc).apply(null,arguments)};Module._free=function(){return (Module._free=Module.asm.free).apply(null,arguments)};Module._ts_language_symbol_count=function(){return (Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)};Module._ts_language_version=function(){return (Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)};Module._ts_language_field_count=function(){return (Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)};Module._ts_language_symbol_name=function(){return (Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)};Module._ts_language_symbol_for_name=function(){return (Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)};Module._ts_language_symbol_type=function(){return (Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)};Module._ts_language_field_name_for_id=function(){return (Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)};Module._memset=function(){return (Module._memset=Module.asm.memset).apply(null,arguments)};Module._memcpy=function(){return (Module._memcpy=Module.asm.memcpy).apply(null,arguments)};Module._ts_parser_delete=function(){return (Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)};Module._ts_parser_reset=function(){return (Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)};Module._ts_parser_set_language=function(){return (Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)};Module._ts_parser_timeout_micros=function(){return (Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)};Module._ts_parser_set_timeout_micros=function(){return (Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)};Module._memmove=function(){return (Module._memmove=Module.asm.memmove).apply(null,arguments)};Module._memcmp=function(){return (Module._memcmp=Module.asm.memcmp).apply(null,arguments)};Module._ts_query_new=function(){return (Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)};Module._ts_query_delete=function(){return (Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)};Module._iswspace=function(){return (Module._iswspace=Module.asm.iswspace).apply(null,arguments)};Module._iswalnum=function(){return (Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)};Module._ts_query_pattern_count=function(){return (Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)};Module._ts_query_capture_count=function(){return (Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)};Module._ts_query_string_count=function(){return (Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)};Module._ts_query_capture_name_for_id=function(){return (Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)};Module._ts_query_string_value_for_id=function(){return (Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)};Module._ts_query_predicates_for_pattern=function(){return (Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)};Module._ts_tree_copy=function(){return (Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)};Module._ts_tree_delete=function(){return (Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)};Module._ts_init=function(){return (Module._ts_init=Module.asm.ts_init).apply(null,arguments)};Module._ts_parser_new_wasm=function(){return (Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)};Module._ts_parser_enable_logger_wasm=function(){return (Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)};Module._ts_parser_parse_wasm=function(){return (Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)};Module._ts_language_type_is_named_wasm=function(){return (Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)};Module._ts_language_type_is_visible_wasm=function(){return (Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)};Module._ts_tree_root_node_wasm=function(){return (Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)};Module._ts_tree_edit_wasm=function(){return (Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)};Module._ts_tree_get_changed_ranges_wasm=function(){return (Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)};Module._ts_tree_cursor_new_wasm=function(){return (Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)};Module._ts_tree_cursor_delete_wasm=function(){return (Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)};Module._ts_tree_cursor_reset_wasm=function(){return (Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_first_child_wasm=function(){return (Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return (Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_parent_wasm=function(){return (Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_type_id_wasm=function(){return (Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_is_named_wasm=function(){return (Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return (Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_id_wasm=function(){return (Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_start_position_wasm=function(){return (Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)};Module._ts_tree_cursor_end_position_wasm=function(){return (Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)};Module._ts_tree_cursor_start_index_wasm=function(){return (Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)};Module._ts_tree_cursor_end_index_wasm=function(){return (Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_field_id_wasm=function(){return (Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_wasm=function(){return (Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)};Module._ts_node_symbol_wasm=function(){return (Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)};Module._ts_node_child_count_wasm=function(){return (Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)};Module._ts_node_named_child_count_wasm=function(){return (Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)};Module._ts_node_child_wasm=function(){return (Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)};Module._ts_node_named_child_wasm=function(){return (Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)};Module._ts_node_child_by_field_id_wasm=function(){return (Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)};Module._ts_node_next_sibling_wasm=function(){return (Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)};Module._ts_node_prev_sibling_wasm=function(){return (Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)};Module._ts_node_next_named_sibling_wasm=function(){return (Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)};Module._ts_node_prev_named_sibling_wasm=function(){return (Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)};Module._ts_node_parent_wasm=function(){return (Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)};Module._ts_node_descendant_for_index_wasm=function(){return (Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)};Module._ts_node_named_descendant_for_index_wasm=function(){return (Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)};Module._ts_node_descendant_for_position_wasm=function(){return (Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)};Module._ts_node_named_descendant_for_position_wasm=function(){return (Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)};Module._ts_node_start_point_wasm=function(){return (Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)};Module._ts_node_end_point_wasm=function(){return (Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)};Module._ts_node_start_index_wasm=function(){return (Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)};Module._ts_node_end_index_wasm=function(){return (Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)};Module._ts_node_to_string_wasm=function(){return (Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)};Module._ts_node_children_wasm=function(){return (Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)};Module._ts_node_named_children_wasm=function(){return (Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)};Module._ts_node_descendants_of_type_wasm=function(){return (Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)};Module._ts_node_is_named_wasm=function(){return (Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)};Module._ts_node_has_changes_wasm=function(){return (Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)};Module._ts_node_has_error_wasm=function(){return (Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)};Module._ts_node_is_missing_wasm=function(){return (Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)};Module._ts_query_matches_wasm=function(){return (Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)};Module._ts_query_captures_wasm=function(){return (Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)};Module.___cxa_atexit=function(){return (Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)};Module._iswdigit=function(){return (Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)};Module._iswalpha=function(){return (Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)};Module._iswlower=function(){return (Module._iswlower=Module.asm.iswlower).apply(null,arguments)};Module._memchr=function(){return (Module._memchr=Module.asm.memchr).apply(null,arguments)};Module._strlen=function(){return (Module._strlen=Module.asm.strlen).apply(null,arguments)};Module._towupper=function(){return (Module._towupper=Module.asm.towupper).apply(null,arguments)};var _setThrew=Module._setThrew=function(){return (_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return (stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return (stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return (stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)};Module.__Znwm=function(){return (Module.__Znwm=Module.asm._Znwm).apply(null,arguments)};Module.__ZdlPv=function(){return (Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)};Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return (Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)};Module.dynCall_jiji=function(){return (Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)};Module._orig$ts_parser_timeout_micros=function(){return (Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)};Module._orig$ts_parser_set_timeout_micros=function(){return (Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)};var calledRun;function callMain(e){var t=Module._main;if(t){(e=e||[]).unshift(thisProgram);var r=e.length,n=stackAlloc(4*(r+1)),i=n>>2;e.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a);}),HEAP32[i]=0;try{var s=t(r,n);return exitJS(s),s}catch(a){return handleException(a)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e);};var dylibsLoaded=!1;function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()));}e=e||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("");},1),t();},1)):t()));}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0;}setLanguage(t){let r;if(t){if(t.constructor!==Language)throw new Error("Argument must be a Language");{r=t[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,t=null;return this.language=t,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(t,r,n){if(typeof t=="string")currentParseCallback=(c,l,u)=>t.slice(c,u);else {if(typeof t!="function")throw new Error("Argument must be a string or a function");currentParseCallback=t;}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,s=0;if(n&&n.includedRanges){i=n.includedRanges.length,s=C._calloc(i,SIZE_OF_RANGE);let c=s;for(let l=0;l<i;l++)marshalRange(c,n.includedRanges[l]),c+=SIZE_OF_RANGE;}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,s,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let o=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,o}reset(){C._ts_parser_reset(this[0]);}setTimeoutMicros(t){C._ts_parser_set_timeout_micros(this[0],t);}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(t){if(t){if(typeof t!="function")throw new Error("Logger callback must be a function")}else t=null;return this.logCallback=t,this}getLogger(){return this.logCallback}}class Tree{constructor(t,r,n,i){assertInternal(t),this[0]=r,this.language=n,this.textCallback=i;}copy(){let t=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,t,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0;}edit(t){marshalEdit(t),C._ts_tree_edit_wasm(this[0]);}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(t){if(t.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],t[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let s=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n);}return i}}class Node{constructor(t,r){assertInternal(t),this.tree=r;}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(t){return this.id===t.id}child(t){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}namedChild(t){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldId(t){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldName(t){let r=this.tree.language.fields.indexOf(t);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(t),t>0){let n=r;for(let i=0;i<t;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r);}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(t),t>0){let n=r;for(let i=0;i<t;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r);}}return this._namedChildren}descendantsOfType(t,r,n){Array.isArray(t)||(t=[t]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],s=this.tree.language.types;for(let u=0,f=s.length;u<f;u++)t.includes(s[u])&&i.push(u);let a=C._malloc(SIZE_OF_INT*i.length);for(let u=0,f=i.length;u<f;u++)setValue(a+u*SIZE_OF_INT,i[u],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let o=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=new Array(o);if(o>0){let u=c;for(let f=0;f<o;f++)l[f]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE;}return C._free(c),C._free(a),l}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,t,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,t,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,t),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,t),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let t=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(t);return C._free(t),r}}class TreeCursor{constructor(t,r){assertInternal(t),this.tree=r,unmarshalTreeCursor(this);}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0;}reset(t){marshalNode(t),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this);}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let t=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,t,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoNextSibling(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoParent(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}}class Language{constructor(t,r){assertInternal(t),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let s=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=s!==0?UTF8ToString(s):null;}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(t){let r=this.fields.indexOf(t);return r!==-1?r:null}fieldNameForId(t){return this.fields[t]||null}idForNodeType(t,r){let n=lengthBytesUTF8(t),i=C._malloc(n+1);stringToUTF8(t,i,n+1);let s=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(t){let r=C._ts_language_symbol_name(this[0],t);return r?UTF8ToString(r):null}nodeTypeIsNamed(t){return !!C._ts_language_type_is_named_wasm(this[0],t)}nodeTypeIsVisible(t){return !!C._ts_language_type_is_visible_wasm(this[0],t)}query(t){let r=lengthBytesUTF8(t),n=C._malloc(r+1);stringToUTF8(t,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let v=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,x=t.substr(E,100).split(`
`)[0],y,S=x.match(QUERY_WORD_REGEX)[0];switch(v){case 2:y=new RangeError(`Bad node name '${S}'`);break;case 3:y=new RangeError(`Bad field name '${S}'`);break;case 4:y=new RangeError(`Bad capture name @${S}`);break;case 5:y=new TypeError(`Bad pattern structure at offset ${E}: '${x}'...`),S="";break;default:y=new SyntaxError(`Bad syntax at offset ${E}: '${x}'...`),S="";}throw y.index=E,y.length=S.length,C._free(n),y}let s=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),o=C._ts_query_pattern_count(i),c=new Array(a),l=new Array(s);for(let v=0;v<a;v++){let E=C._ts_query_capture_name_for_id(i,v,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");c[v]=UTF8ToString(E,x);}for(let v=0;v<s;v++){let E=C._ts_query_string_value_for_id(i,v,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");l[v]=UTF8ToString(E,x);}let u=new Array(o),f=new Array(o),h=new Array(o),p=new Array(o),m=new Array(o);for(let v=0;v<o;v++){let E=C._ts_query_predicates_for_pattern(i,v,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");p[v]=[],m[v]=[];let y=[],S=E;for(let N=0;N<x;N++){let O=getValue(S,"i32");S+=SIZE_OF_INT;let j=getValue(S,"i32");if(S+=SIZE_OF_INT,O===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:c[j]});else if(O===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:l[j]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let J=y[0].value,z=!0;switch(J){case"not-eq?":z=!1;case"eq?":if(y.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(y.length-1));if(y[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${y[1].value}"`);if(y[2].type==="capture"){let ne=y[1].name,me=y[2].name;m[v].push(function(Pe){let W,K;for(let se of Pe)se.name===ne&&(W=se.node),se.name===me&&(K=se.node);return W===void 0||K===void 0||W.text===K.text===z});}else {let ne=y[1].name,me=y[2].value;m[v].push(function(Pe){for(let W of Pe)if(W.name===ne)return W.node.text===me===z;return !0});}break;case"not-match?":z=!1;case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${y[2].value}.`);let G=y[1].name,ee=new RegExp(y[2].value);m[v].push(function(ne){for(let me of ne)if(me.name===G)return ee.test(me.node.text)===z;return !0});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ne=>ne.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[v]||(u[v]={}),u[v][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${J}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ne=>ne.type!=="string"))throw new Error(`Arguments to \`#${J}\` predicate must be a strings.".`);let H=J==="is?"?f:h;H[v]||(H[v]={}),H[v][y[1].value]=y[2]?y[2].value:null;break;default:p[v].push({operator:J,operands:y.slice(1)});}y.length=0;}}Object.freeze(u[v]),Object.freeze(f[v]),Object.freeze(h[v]);}return C._free(n),new Query(INTERNAL,i,c,m,p,Object.freeze(u),Object.freeze(f),Object.freeze(h))}static load(t){let r;if(t instanceof Uint8Array)r=Promise.resolve(t);else {let i=t;if(typeof process<"u"&&process.versions&&process.versions.node){let s=he("fs");r=Promise.resolve(s.readFileSync(i));}else r=fetch(i).then(s=>s.arrayBuffer().then(a=>{if(s.ok)return new Uint8Array(a);{let o=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${s.status}.

${o}`)}}));}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let s=Object.keys(i),a=s.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(s,null,2)}`);let o=i[a]();return new Language(INTERNAL,o)})}}class Query{constructor(t,r,n,i,s,a,o,c){assertInternal(t),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=s,this.setProperties=a,this.assertedProperties=o,this.refutedProperties=c,this.exceededMatchLimit=!1;}delete(){C._ts_query_delete(this[0]),this[0]=0;}matches(t,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let s=i.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_matches_wasm(this[0],t.tree[0],r.row,r.column,n.row,n.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=new Array(a);this.exceededMatchLimit=!!c;let u=0,f=o;for(let h=0;h<a;h++){let p=getValue(f,"i32");f+=SIZE_OF_INT;let m=getValue(f,"i32");f+=SIZE_OF_INT;let v=new Array(m);if(f=unmarshalCaptures(this,t.tree,f,v),this.textPredicates[p].every(E=>E(v))){l[u++]={pattern:p,captures:v};let E=this.setProperties[p];E&&(l[h].setProperties=E);let x=this.assertedProperties[p];x&&(l[h].assertedProperties=x);let y=this.refutedProperties[p];y&&(l[h].refutedProperties=y);}}return l.length=u,C._free(o),l}captures(t,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let s=i.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_captures_wasm(this[0],t.tree[0],r.row,r.column,n.row,n.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=[];this.exceededMatchLimit=!!c;let u=[],f=o;for(let h=0;h<a;h++){let p=getValue(f,"i32");f+=SIZE_OF_INT;let m=getValue(f,"i32");f+=SIZE_OF_INT;let v=getValue(f,"i32");if(f+=SIZE_OF_INT,u.length=m,f=unmarshalCaptures(this,t.tree,f,u),this.textPredicates[p].every(E=>E(u))){let E=u[v],x=this.setProperties[p];x&&(E.setProperties=x);let y=this.assertedProperties[p];y&&(E.assertedProperties=y);let S=this.refutedProperties[p];S&&(E.refutedProperties=S),l.push(E);}}return C._free(o),l}predicatesForPattern(t){return this.predicates[t]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,r){let n=r-t,i=e.textCallback(t,null,r);for(t+=i.length;t<r;){let s=e.textCallback(t,null,r);if(!(s&&s.length>0))break;t+=s.length,i+=s;}return t>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(e,t,r,n){for(let i=0,s=n.length;i<s;i++){let a=getValue(r,"i32"),o=unmarshalNode(t,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:e.captureNames[a],node:o};}return r}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&typeof e.row=="number"&&typeof e.column=="number"}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32");}function unmarshalNode(e,t=TRANSFER_BUFFER){let r=getValue(t,"i32");if(r===0)return null;let n=getValue(t+=SIZE_OF_INT,"i32"),i=getValue(t+=SIZE_OF_INT,"i32"),s=getValue(t+=SIZE_OF_INT,"i32"),a=getValue(t+=SIZE_OF_INT,"i32"),o=new Node(INTERNAL,e);return o.id=r,o.startIndex=n,o.startPosition={row:i,column:s},o[0]=a,o}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32");}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32");}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32");}function unmarshalPoint(e){return {row:getValue(e,"i32"),column:getValue(e+SIZE_OF_INT,"i32")}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,"i32"),setValue(e+=SIZE_OF_INT,t.endIndex,"i32"),e+=SIZE_OF_INT;}function unmarshalRange(e){let t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32"),e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32"),t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT;}for(let e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise();};}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter);});var G0=P((Zae,jP)=>{var z0=class{constructor(t={}){let r=!t.flat&&t.base||1.001,n=t.precision??1e-9;if(!(n>0))throw new Error("precision must be a positive number");if(!(r>1)||!(r<1.5))throw new Error("base must be a number between 1 and 1.5");if(r+=1e-9,r=2**(1/Math.ceil(Math.log(2)/Math.log(r))),r===1)throw new Error("base too close to 1");n=Number.parseFloat(""+n);let i=Math.ceil(1/(r-1)),s=t.flat?1/0:n*i;t.flat?this._flat=!0:this._base=r,this._thresh=s,this._precision=n;}toJSON(){return this._flat?{precision:this._precision,flat:!0}:{precision:this._precision,base:this._base}}getBase(){return this._base}getPrecision(){return this._precision}round(t){if(typeof t!="number"&&(t=Number.parseFloat(t)),Number.isNaN(t))throw new Error("Attempt to round a non-numeric value: "+t);return t<0?-this.round(-t):t<this._thresh?Math.round(t/this._precision)*this._precision:this._thresh*this._base**Math.round(Math.log(t/this._thresh)/Math.log(this._base))}upper(t){return t<0?-this.lower(-t):(t=this.round(t),t<this._thresh?t+this._precision/2:t*Math.sqrt(this._base))}lower(t){return t<0?-this.upper(-t):(t=this.round(t),t<=this._thresh?t-this._precision/2:t/Math.sqrt(this._base))}shorten(t,r){return t===void 0?t:r===void 0?Ru(this.lower(t),this.upper(t)):Ru(t,r)}};function Ru(e,t,r=10){if(e===t)return e;if(e*t<=0)return 0;if(t<0)return -Ru(-t,-e,r);if(e>t)return Ru(t,e,r);let n=-Math.floor(Math.log(t-e)/Math.log(r));for(;Math.ceil(e*r**n)<=Math.floor(t*r**n);)n--;return n++,n>=0?Math.ceil(e*r**n)/r**n:Math.ceil(e/r**-n)*r**-n}jP.exports={Binning:z0,shorten:Ru};});var WP=P((Yae,VP)=>{var{Binning:nG}=G0(),iG="stats-logscale/univariate@1.0",Pu=class e extends nG{constructor(t={}){super(t),this.storage=new Map,this._count=0,this._cache={},this.neat=new Nu(this),t.bins&&this.addWeighted(t.bins);}add(...t){return this._cache={},t.forEach(r=>{let n=this.round(r),i=this.storage.get(n)??0;this.storage.set(n,i+1),this._count++;}),this}addWeighted(t){return this._cache={},t.forEach(r=>{let n=r[0],i=Number.parseFloat(r[1]);if(Number.isNaN(i))throw new Error("Attempt to provide a non-numeric weight");let s=this.round(n),a=(this.storage.get(s)??0)+i;a<=0?(this.storage.delete(s),this._count+=i-a):(this.storage.set(s,a),this._count+=i);}),this}toJSON(){return {version:iG,...super.toJSON(),bins:this.getBins()}}clone(t={}){let r=this.getBins(t);return t.transform&&(r=r.map(n=>[t.transform(n[0]),n[1]])),new e({...super.toJSON(),bins:r})}getBins(t){if(this._cache.data||(this._cache.data=[...this.storage].sort((o,c)=>o[0]-c[0])),!t)return this._cache.data;let r=Math.max(t.min??-1/0,this.percentile(t.ltrim??0)),n=Math.min(t.max??1/0,this.percentile(100-(t.rtrim??0)));if(!t.winsorize)return this._cache.data.filter(o=>o[0]>=r&&o[0]<=n);let i=[this.round(r),0],s=[this.round(n),0],a=[i];for(let[o,c]of this._cache.data)o<=i[0]?i[1]+=c:o>=s[0]?s[1]+=c:a.push([o,c]);return s[1]>0&&a.push(s),a}count(){return this._count}min(){let t=this.getBins();return this.lower(t[0][0])}max(){let t=this.getBins();return this.upper(t[t.length-1][0])}sumOf(t){let r=0;return [...this.storage].forEach(n=>{r+=n[1]*t(n[0]);}),r}E(t){return this._count?this.sumOf(t)/this._count:void 0}mean(){return this._count?this.sumOf(t=>t)/this._count:void 0}stdev(){if(this._count<2)return;let t=this.mean();return Math.sqrt(this.sumOf(r=>(r-t)*(r-t))/(this._count-1))}skewness(){let t=this.count();return t<3?void 0:t*t/((t-1)*(t-2))*this.momentStd(3)}kurtosis(){let t=this.count();if(t<4)return;let r=t*t*(t+1)/((t-1)*(t-2)*(t-3)),n=(t-1)*(t-1)/((t-2)*(t-3));return this.momentStd(4)*r-3*n}moment(t,r){if(!Number.isInteger(t))throw new Error("Cannot calculate non-integer moment (did you mean momentAbs?)");return r===void 0&&(r=this.mean()),this.E(n=>(n-r)**t)}momentAbs(t=1,r){return r===void 0&&(r=this.mean()),this.E(n=>Math.abs(n-r)**t)}momentStd(t){return this.moment(t)/this.stdev()**t}quantile(t){let r=t*this._count,n=this._cumulative(),i=0,s=n.length;for(;i+1<s;){let c=Math.floor((s+i)/2);n[c][1]>=r?s=c:i=c;}let a=this.lower(n[i][0]),o=this.upper(n[i][0])-a;return a+o*(r-n[i][1])/(n[i][2]-n[i][1])}percentile(t){return this.quantile(t/100)}median(){return this.quantile(.5)}cdf(t){return this._rawCdf(t)/this._count}_rawCdf(t){let r=this._cumulative(),n=this.round(t),i=0,s=r.length;for(;i<s;){let o=Math.floor((s+i)/2);r[o][0]<n?i=o+1:s=o;}if(i>=r.length)return this._count;let a=i>0?r[i-1][2]:0;if(n===r[i][0]){let o=this.upper(t)-this.lower(t),c=r[i][2]-r[i][1];a+=o>0?c*(t-this.lower(t))/o:c/2;}return a}histogram(t={}){if(!this._count)return [];let r=this.min(),n=this.max(),i=t.count||10,s=[],a=r,o=(n-r)/i;for(let c=0;c<i;c++)s.push([this._rawCdf(a+o),a,a+=o]);for(let c=s.length;c-- >1;)s[c][0]-=s[c-1][0];if(s[0][0]-=this._rawCdf(r),t.scale){let c=0;for(let l=0;l<s.length;l++)c<s[l][0]&&(c=s[l][0]);for(let l=0;l<s.length;l++)s[l][0]=s[l][0]*t.scale/c;}return s}_cumulative(){if(!this._cache.cumulative){let t=this.getBins(),r=[],n=0;for(let i=0;i<t.length;i++)r.push([t[i][0],n,n+=t[i][1]]);this._cache.cumulative=r;}return this._cache.cumulative}};["cdf+","kurtosis","max","mean","min","moment+","momentAbs+","momentStd+","quantile+","skewness","stdev"].forEach(e=>{let t=!!e.match(/\+/);t&&(e=e.replace("+",""));let r=Pu.prototype[e];if(typeof r!="function")throw new Error('method "'+e+'" is cached but never defined');Pu.prototype[e]=t?function(...n){if(this._count===0)return;this._cache[e]===void 0&&(this._cache[e]={});let i=n.join(":");return this._cache[e][i]===void 0&&(this._cache[e][i]=r.apply(this,n)),this._cache[e][i]}:function(){if(this._count!==0)return this._cache[e]===void 0&&(this._cache[e]=r.apply(this)),this._cache[e]};});var Nu=class{constructor(t){this._main=t;}min(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[0][0])}max(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[t.length-1][0])}};["E","kurtosis","mean","median","moment","momentAbs","momentStd","percentile","quantile","skewness","stdev","sumOf"].forEach(e=>{Nu.prototype[e]=function(t){return this._main.shorten(this._main[e](t))};});["cdf","count"].forEach(e=>{Nu.prototype[e]=function(t){return this._main[e](t)};});VP.exports={Univariate:Pu};});var KP=P((Qae,X0)=>{(()=>{let{Binning:e}=G0(),{Univariate:t}=WP(),r={Binning:e,Univariate:t};typeof window<"u"&&(window.logstat=r),typeof X0=="object"&&(X0.exports=r);})();});var GP=P((eoe,zP)=>{zP.exports=ku();});var ZP=P((toe,XP)=>{function sG(){return !!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}XP.exports=sG;});var Je=P((roe,YP)=>{YP.exports={options:{usePureJavaScript:!1}};});var eN=P((noe,JP)=>{var Y0={};JP.exports=Y0;var QP={};Y0.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=aG(e,t);else {var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var c=0,l=e[i];c<o.length;++c)l+=o[c]<<8,o[c]=l%s,l=l/s|0;for(;l>0;)o.push(l%s),l=l/s|0;}for(i=0;e[i]===0&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]];}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`);}return n};Y0.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=QP[t];if(!r){r=QP[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n;}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var c=0,l=o;c<a.length;++c)l+=a[c]*i,a[c]=l&255,l>>=8;for(;l>0;)a.push(l&255),l>>=8;}for(var u=0;e[u]===s&&u<e.length-1;++u)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function aG(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0;}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}});var mt=P((ioe,iN)=>{var tN=Je(),rN=eN(),V=iN.exports=tN.util=tN.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){V.nextTick=process.nextTick,typeof setImmediate=="function"?V.setImmediate=setImmediate:V.setImmediate=V.nextTick;return}if(typeof setImmediate=="function"){V.setImmediate=function(){return setImmediate.apply(void 0,arguments)},V.nextTick=function(o){return setImmediate(o)};return}if(V.setImmediate=function(o){setTimeout(o,0);},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(u){u();});}};var e="forge.setImmediate",t=[];V.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*");},window.addEventListener("message",o,!0);}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(l){l();});}).observe(i,{attributes:!0});var s=V.setImmediate;V.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n));};}V.nextTick=V.setImmediate;})();V.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;V.globalScope=function(){return V.isNodejs?global:typeof self>"u"?window:self}();V.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};V.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};V.isArrayBufferView=function(e){return e&&V.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Du(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}V.ByteBuffer=Q0;function Q0(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(V.isArrayBuffer(e)||V.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else {var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t);}catch{for(var r=0;r<t.length;++r)this.putByte(t[r]);}}else (e instanceof Q0||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0;}V.ByteStringBuffer=Q0;var oG=4096;V.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>oG&&(this.data.substr(0,1),this._constructedStringLength=0);};V.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};V.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};V.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};V.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};V.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};V.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(V.encodeUtf8(e))};V.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};V.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};V.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};V.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};V.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};V.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};V.ByteStringBuffer.prototype.putInt=function(e,t){Du(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};V.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};V.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};V.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};V.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};V.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};V.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};V.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};V.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};V.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};V.ByteStringBuffer.prototype.getInt=function(e){Du(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};V.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};V.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};V.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};V.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};V.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};V.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};V.ByteStringBuffer.prototype.copy=function(){var e=V.createBuffer(this.data);return e.read=this.read,e};V.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};V.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};V.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};V.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16);}return e};V.ByteStringBuffer.prototype.toString=function(){return V.decodeUtf8(this.bytes())};function uG(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=V.isArrayBuffer(e),n=V.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset);}V.DataBuffer=uG;V.DataBuffer.prototype.length=function(){return this.write-this.read};V.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};V.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};V.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};V.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};V.DataBuffer.prototype.putBytes=function(e,t){if(V.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(V.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof V.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&V.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof V.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=V.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=V.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=V.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};V.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};V.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};V.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};V.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};V.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};V.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};V.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};V.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};V.DataBuffer.prototype.putInt=function(e,t){Du(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};V.DataBuffer.prototype.putSignedInt=function(e,t){return Du(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};V.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};V.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};V.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};V.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};V.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};V.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};V.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};V.DataBuffer.prototype.getInt=function(e){Du(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};V.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};V.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};V.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};V.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};V.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};V.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};V.DataBuffer.prototype.copy=function(){return new V.DataBuffer(this)};V.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0;}return this};V.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};V.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};V.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16);}return e};V.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return V.binary.raw.encode(t);if(e==="hex")return V.binary.hex.encode(t);if(e==="base64")return V.binary.base64.encode(t);if(e==="utf8")return V.text.utf8.decode(t);if(e==="utf16")return V.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};V.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=V.encodeUtf8(e)),new V.ByteBuffer(e)};V.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};V.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};V.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};V.bytesToHex=function(e){return V.createBuffer(e).toHex()};V.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",is=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],nN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";V.encode64=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ns.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":ns.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};V.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,a=0;a<e.length;)r=is[e.charCodeAt(a++)-43],n=is[e.charCodeAt(a++)-43],i=is[e.charCodeAt(a++)-43],s=is[e.charCodeAt(a++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};V.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};V.decodeUtf8=function(e){return decodeURIComponent(escape(e))};V.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:rN.encode,decode:rN.decode}};V.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};V.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};V.binary.hex.encode=V.bytesToHex;V.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};V.binary.base64.encode=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],r+=ns.charAt(i>>2),r+=ns.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ns.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":ns.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};V.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,c=0,l=r;c<e.length;)i=is[e.charCodeAt(c++)-43],s=is[e.charCodeAt(c++)-43],a=is[e.charCodeAt(c++)-43],o=is[e.charCodeAt(c++)-43],n[l++]=i<<2|s>>4,a!==64&&(n[l++]=(s&15)<<4|a>>2,o!==64&&(n[l++]=(a&3)<<6|o));return t?l-r:n.subarray(0,l)};V.binary.base58.encode=function(e,t){return V.binary.baseN.encode(e,nN,t)};V.binary.base58.decode=function(e,t){return V.binary.baseN.decode(e,nN,t)};V.text={utf8:{},utf16:{}};V.text.utf8.encode=function(e,t,r){e=V.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};V.text.utf8.decode=function(e){return V.decodeUtf8(String.fromCharCode.apply(null,e))};V.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n};V.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};V.deflate=function(e,t,r){if(t=V.decode64(e.deflate(V.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4);}return t};V.inflate=function(e,t,r){var n=e.inflate(V.encode64(t)).rval;return n===null?null:V.decode64(n)};var J0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=V.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},ey=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null;}else r=r.rval;return r!==null&&(r=JSON.parse(V.decode64(r))),r},cG=function(e,t,r,n){var i=ey(e,t);i===null&&(i={}),i[r]=n,J0(e,t,i);},lG=function(e,t,r){var n=ey(e,t);return n!==null&&(n=r in n?n[r]:null),n},fG=function(e,t,r){var n=ey(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),J0(e,t,n);}},dG=function(e,t){J0(e,t,null);},Pf=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash";}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0);}catch(c){a=c;}if(s)break}if(!s)throw a;return n};V.setItem=function(e,t,r,n,i){Pf(cG,arguments,i);};V.getItem=function(e,t,r,n){return Pf(lG,arguments,n)};V.removeItem=function(e,t,r,n){Pf(fG,arguments,n);};V.clearItems=function(e,t,r){Pf(dG,arguments,r);};V.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return !1;return !0};V.format=function(e){for(var t=/%./g,r,n,i=0,s=[],a=0;r=t.exec(e);){n=e.substring(a,t.lastIndex-2),n.length>0&&s.push(n),a=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>");}}return s.push(e.substring(a)),s.join("")};V.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=r===void 0?",":r,o=n===void 0?".":n,c=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+o:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-l).toFixed(s).slice(2):"")};V.formatSize=function(e){return e>=1073741824?e=V.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=V.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=V.formatNumber(e/1024,0)+" KiB":e=V.formatNumber(e,0)+" bytes",e};V.bytesFromIP=function(e){return e.indexOf(".")!==-1?V.bytesFromIPv4(e):e.indexOf(":")!==-1?V.bytesFromIPv6(e):null};V.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=V.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n);}return t.getBytes()};V.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=V.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=V.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s);}return n.getBytes()};V.bytesToIP=function(e){return e.length===4?V.bytesToIPv4(e):e.length===16?V.bytesToIPv6(e):null};V.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};V.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=V.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=t.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1));}t.push(s);}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""));}return t.join(":")};V.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in V&&!e.update)return t(null,V.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return V.cores=navigator.hardwareConcurrency,t(null,V.cores);if(typeof Worker>"u")return V.cores=1,t(null,V.cores);if(typeof Blob>"u")return V.cores=2,t(null,V.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),c=o+4;Date.now()<c;);self.postMessage({st:o,et:c});});}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,c){if(o===0){var l=Math.floor(a.reduce(function(u,f){return u+f},0)/a.length);return V.cores=Math.max(1,l),URL.revokeObjectURL(r),t(null,V.cores)}i(c,function(u,f){a.push(s(c,f)),n(a,o-1,c);});}function i(a,o){for(var c=[],l=[],u=0;u<a;++u){var f=new Worker(r);f.addEventListener("message",function(h){if(l.push(h.data),l.length===a){for(var p=0;p<a;++p)c[p].terminate();o(null,l);}}),c.push(f);}for(var u=0;u<a;++u)c[u].postMessage(u);}function s(a,o){for(var c=[],l=0;l<a;++l)for(var u=o[l],f=c[l]=[],h=0;h<a;++h)if(l!==h){var p=o[h];(u.st>p.st&&u.st<p.et||p.st>u.st&&p.st<u.et)&&f.push(h);}return c.reduce(function(m,v){return Math.max(m,v.length)},0)}};});var Nf=P((soe,sN)=>{var hr=Je();mt();sN.exports=hr.cipher=hr.cipher||{};hr.cipher.algorithms=hr.cipher.algorithms||{};hr.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=hr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new hr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};hr.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=hr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new hr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};hr.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),hr.cipher.algorithms[e]=t;};hr.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in hr.cipher.algorithms?hr.cipher.algorithms[e]:null};var ty=hr.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e);};ty.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=hr.util.createBuffer(),this.output=e.output||hr.util.createBuffer(),this.mode.start(t);};ty.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact();};ty.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};});var ny=P((aoe,aN)=>{var pr=Je();mt();pr.cipher=pr.cipher||{};var it=aN.exports=pr.cipher.modes=pr.cipher.modes||{};it.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints);};it.ecb.prototype.start=function(e){};it.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);};it.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);};it.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};it.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return !1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};it.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints);};it.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0);}else if("iv"in e)this._iv=kf(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};it.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock;};it.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0);};it.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};it.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return !1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};it.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=kf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=kf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.ofb.prototype.decrypt=it.ofb.prototype.encrypt;it.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=kf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else {var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;}Df(this._inBlock);};it.ctr.prototype.decrypt=it.ctr.prototype.encrypt;it.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0,this._R=3774873600;};it.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=pr.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=pr.util.createBuffer(e.additionalData):r=pr.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=pr.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else {for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ry(n*8)));}this._inBlock=this._j0.slice(0),Df(this._inBlock),this._partialBytes=0,r=pr.util.createBuffer(r),this._aDataLength=ry(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);};it.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize;}else {var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a);}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize;}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Df(this._inBlock);};it.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return !0;this.cipher.encrypt(this._inBlock,this._outBlock),Df(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize;};it.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=pr.util.createBuffer();var n=this._aDataLength.concat(ry(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};it.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);}return r};it.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R);};it.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3];}return t};it.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};it.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],c=a/n|0,l=(n-1-a%n)*t;o[c]=1<<t-1<<l,s[a]=this.generateSubHashTable(this.multiply(o,e),t);}return s};it.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],c=i[a];i[s+a]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]];}s*=2;}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]];}return i};function kf(e,t){if(typeof e=="string"&&(e=pr.util.createBuffer(e)),pr.util.isArray(e)&&e.length>4){var r=e;e=pr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n]);}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!pr.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i;}return e}function Df(e){e[e.length-1]=e[e.length-1]+1&4294967295;}function ry(e){return [e/4294967296|0,e&4294967295]}});var ss=P((ooe,lN)=>{var Ft=Je();Nf();ny();mt();lN.exports=Ft.aes=Ft.aes||{};Ft.aes.startEncrypting=function(e,t,r,n){var i=Lf({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Ft.aes.createEncryptionCipher=function(e,t){return Lf({key:e,output:null,decrypt:!1,mode:t})};Ft.aes.startDecrypting=function(e,t,r,n){var i=Lf({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Ft.aes.createDecryptionCipher=function(e,t){return Lf({key:e,output:null,decrypt:!0,mode:t})};Ft.aes.Algorithm=function(e,t){ay||uN();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return sy(r._w,n,i,!1)},decrypt:function(n,i){return sy(r._w,n,i,!0)}}}),r._init=!1;};Ft.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Ft.util.createBuffer(t);else if(Ft.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Ft.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n]);}if(!Ft.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32());}}if(!Ft.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=cN(t,e.decrypt&&!a),this._init=!0;}};Ft.aes._expandKey=function(e,t){return ay||uN(),cN(e,t)};Ft.aes._updateBlock=sy;Ja("AES-ECB",Ft.cipher.modes.ecb);Ja("AES-CBC",Ft.cipher.modes.cbc);Ja("AES-CFB",Ft.cipher.modes.cfb);Ja("AES-OFB",Ft.cipher.modes.ofb);Ja("AES-CTR",Ft.cipher.modes.ctr);Ja("AES-GCM",Ft.cipher.modes.gcm);function Ja(e,t){var r=function(){return new Ft.aes.Algorithm(e,t)};Ft.cipher.registerAlgorithm(e,r);}var ay=!1,Qa=4,$r,iy,oN,Qs,Wn;function uN(){ay=!0,oN=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;$r=new Array(256),iy=new Array(256),Qs=new Array(4),Wn=new Array(4);for(var t=0;t<4;++t)Qs[t]=new Array(256),Wn[t]=new Array(256);for(var r=0,n=0,i,s,a,o,c,l,u,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,$r[r]=o,iy[o]=r,c=e[o],i=e[r],s=e[i],a=e[s],l=c<<24^o<<16^o<<8^(o^c),u=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var f=0;f<4;++f)Qs[f][r]=l,Wn[f][o]=u,l=l<<24|l>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^e[e[e[i^a]]],n^=e[e[n]]);}}function cN(e,t){for(var r=e.slice(0),n,i=1,s=r.length,a=s+6+1,o=Qa*a,c=s;c<o;++c)n=r[c-1],c%s===0?(n=$r[n>>>16&255]<<24^$r[n>>>8&255]<<16^$r[n&255]<<8^$r[n>>>24]^oN[i]<<24,i++):s>6&&c%s===4&&(n=$r[n>>>24]<<24^$r[n>>>16&255]<<16^$r[n>>>8&255]<<8^$r[n&255]),r[c]=r[c-s]^n;if(t){var l,u=Wn[0],f=Wn[1],h=Wn[2],p=Wn[3],m=r.slice(0);o=r.length;for(var c=0,v=o-Qa;c<o;c+=Qa,v-=Qa)if(c===0||c===o-Qa)m[c]=r[v],m[c+1]=r[v+3],m[c+2]=r[v+2],m[c+3]=r[v+1];else for(var E=0;E<Qa;++E)l=r[v+E],m[c+(3&-E)]=u[$r[l>>>24]]^f[$r[l>>>16&255]]^h[$r[l>>>8&255]]^p[$r[l&255]];r=m;}return r}function sy(e,t,r,n){var i=e.length/4-1,s,a,o,c,l;n?(s=Wn[0],a=Wn[1],o=Wn[2],c=Wn[3],l=iy):(s=Qs[0],a=Qs[1],o=Qs[2],c=Qs[3],l=$r);var u,f,h,p,m,v,E;u=t[0]^e[0],f=t[n?3:1]^e[1],h=t[2]^e[2],p=t[n?1:3]^e[3];for(var x=3,y=1;y<i;++y)m=s[u>>>24]^a[f>>>16&255]^o[h>>>8&255]^c[p&255]^e[++x],v=s[f>>>24]^a[h>>>16&255]^o[p>>>8&255]^c[u&255]^e[++x],E=s[h>>>24]^a[p>>>16&255]^o[u>>>8&255]^c[f&255]^e[++x],p=s[p>>>24]^a[u>>>16&255]^o[f>>>8&255]^c[h&255]^e[++x],u=m,f=v,h=E;r[0]=l[u>>>24]<<24^l[f>>>16&255]<<16^l[h>>>8&255]<<8^l[p&255]^e[++x],r[n?3:1]=l[f>>>24]<<24^l[h>>>16&255]<<16^l[p>>>8&255]<<8^l[u&255]^e[++x],r[2]=l[h>>>24]<<24^l[p>>>16&255]<<16^l[u>>>8&255]<<8^l[f&255]^e[++x],r[n?1:3]=l[p>>>24]<<24^l[u>>>16&255]<<16^l[f>>>8&255]<<8^l[h&255]^e[++x];}function Lf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Ft.cipher.createDecipher(r,e.key):n=Ft.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Ft.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a);},n}});var as=P((uoe,fN)=>{var Lu=Je();Lu.pki=Lu.pki||{};var oy=fN.exports=Lu.pki.oids=Lu.oids=Lu.oids||{};function ge(e,t){oy[e]=t,oy[t]=e;}function wt(e,t){oy[e]=t;}ge("1.2.840.113549.1.1.1","rsaEncryption");ge("1.2.840.113549.1.1.4","md5WithRSAEncryption");ge("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ge("1.2.840.113549.1.1.7","RSAES-OAEP");ge("1.2.840.113549.1.1.8","mgf1");ge("1.2.840.113549.1.1.9","pSpecified");ge("1.2.840.113549.1.1.10","RSASSA-PSS");ge("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ge("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ge("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ge("1.3.101.112","EdDSA25519");ge("1.2.840.10040.4.3","dsa-with-sha1");ge("1.3.14.3.2.7","desCBC");ge("1.3.14.3.2.26","sha1");ge("1.3.14.3.2.29","sha1WithRSASignature");ge("2.16.840.1.101.3.4.2.1","sha256");ge("2.16.840.1.101.3.4.2.2","sha384");ge("2.16.840.1.101.3.4.2.3","sha512");ge("2.16.840.1.101.3.4.2.4","sha224");ge("2.16.840.1.101.3.4.2.5","sha512-224");ge("2.16.840.1.101.3.4.2.6","sha512-256");ge("1.2.840.113549.2.2","md2");ge("1.2.840.113549.2.5","md5");ge("1.2.840.113549.1.7.1","data");ge("1.2.840.113549.1.7.2","signedData");ge("1.2.840.113549.1.7.3","envelopedData");ge("1.2.840.113549.1.7.4","signedAndEnvelopedData");ge("1.2.840.113549.1.7.5","digestedData");ge("1.2.840.113549.1.7.6","encryptedData");ge("1.2.840.113549.1.9.1","emailAddress");ge("1.2.840.113549.1.9.2","unstructuredName");ge("1.2.840.113549.1.9.3","contentType");ge("1.2.840.113549.1.9.4","messageDigest");ge("1.2.840.113549.1.9.5","signingTime");ge("1.2.840.113549.1.9.6","counterSignature");ge("1.2.840.113549.1.9.7","challengePassword");ge("1.2.840.113549.1.9.8","unstructuredAddress");ge("1.2.840.113549.1.9.14","extensionRequest");ge("1.2.840.113549.1.9.20","friendlyName");ge("1.2.840.113549.1.9.21","localKeyId");ge("1.2.840.113549.1.9.22.1","x509Certificate");ge("1.2.840.113549.1.12.10.1.1","keyBag");ge("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ge("1.2.840.113549.1.12.10.1.3","certBag");ge("1.2.840.113549.1.12.10.1.4","crlBag");ge("1.2.840.113549.1.12.10.1.5","secretBag");ge("1.2.840.113549.1.12.10.1.6","safeContentsBag");ge("1.2.840.113549.1.5.13","pkcs5PBES2");ge("1.2.840.113549.1.5.12","pkcs5PBKDF2");ge("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ge("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ge("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ge("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ge("1.2.840.113549.2.7","hmacWithSHA1");ge("1.2.840.113549.2.8","hmacWithSHA224");ge("1.2.840.113549.2.9","hmacWithSHA256");ge("1.2.840.113549.2.10","hmacWithSHA384");ge("1.2.840.113549.2.11","hmacWithSHA512");ge("1.2.840.113549.3.7","des-EDE3-CBC");ge("2.16.840.1.101.3.4.1.2","aes128-CBC");ge("2.16.840.1.101.3.4.1.22","aes192-CBC");ge("2.16.840.1.101.3.4.1.42","aes256-CBC");ge("2.5.4.3","commonName");ge("2.5.4.4","surname");ge("2.5.4.5","serialNumber");ge("2.5.4.6","countryName");ge("2.5.4.7","localityName");ge("2.5.4.8","stateOrProvinceName");ge("2.5.4.9","streetAddress");ge("2.5.4.10","organizationName");ge("2.5.4.11","organizationalUnitName");ge("2.5.4.12","title");ge("2.5.4.13","description");ge("2.5.4.15","businessCategory");ge("2.5.4.17","postalCode");ge("2.5.4.42","givenName");ge("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ge("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ge("2.16.840.1.113730.1.1","nsCertType");ge("2.16.840.1.113730.1.13","nsComment");wt("2.5.29.1","authorityKeyIdentifier");wt("2.5.29.2","keyAttributes");wt("2.5.29.3","certificatePolicies");wt("2.5.29.4","keyUsageRestriction");wt("2.5.29.5","policyMapping");wt("2.5.29.6","subtreesConstraint");wt("2.5.29.7","subjectAltName");wt("2.5.29.8","issuerAltName");wt("2.5.29.9","subjectDirectoryAttributes");wt("2.5.29.10","basicConstraints");wt("2.5.29.11","nameConstraints");wt("2.5.29.12","policyConstraints");wt("2.5.29.13","basicConstraints");ge("2.5.29.14","subjectKeyIdentifier");ge("2.5.29.15","keyUsage");wt("2.5.29.16","privateKeyUsagePeriod");ge("2.5.29.17","subjectAltName");ge("2.5.29.18","issuerAltName");ge("2.5.29.19","basicConstraints");wt("2.5.29.20","cRLNumber");wt("2.5.29.21","cRLReason");wt("2.5.29.22","expirationDate");wt("2.5.29.23","instructionCode");wt("2.5.29.24","invalidityDate");wt("2.5.29.25","cRLDistributionPoints");wt("2.5.29.26","issuingDistributionPoint");wt("2.5.29.27","deltaCRLIndicator");wt("2.5.29.28","issuingDistributionPoint");wt("2.5.29.29","certificateIssuer");wt("2.5.29.30","nameConstraints");ge("2.5.29.31","cRLDistributionPoints");ge("2.5.29.32","certificatePolicies");wt("2.5.29.33","policyMappings");wt("2.5.29.34","policyConstraints");ge("2.5.29.35","authorityKeyIdentifier");wt("2.5.29.36","policyConstraints");ge("2.5.29.37","extKeyUsage");wt("2.5.29.46","freshestCRL");wt("2.5.29.54","inhibitAnyPolicy");ge("1.3.6.1.4.1.11129.2.4.2","timestampList");ge("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ge("1.3.6.1.5.5.7.3.1","serverAuth");ge("1.3.6.1.5.5.7.3.2","clientAuth");ge("1.3.6.1.5.5.7.3.3","codeSigning");ge("1.3.6.1.5.5.7.3.4","emailProtection");ge("1.3.6.1.5.5.7.3.8","timeStamping");});var Kn=P((coe,hN)=>{var Ht=Je();mt();as();var we=hN.exports=Ht.asn1=Ht.asn1||{};we.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};we.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};we.create=function(e,t,r,n,i){if(Ht.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s;}var o={tagClass:e,type:t,constructed:r,composed:r||Ht.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=we.copy(o)),o};we.copy=function(e,t){var r;if(Ht.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(we.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:we.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};we.equals=function(e,t,r){if(Ht.util.isArray(e)){if(!Ht.util.isArray(t)||e.length!==t.length)return !1;for(var n=0;n<e.length;++n)if(!we.equals(e[n],t[n]))return !1;return !0}if(typeof e!=typeof t)return !1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&we.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};we.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Ou(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var hG=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else {var s=r&127;Ou(e,t,s),n=e.getInt(s<<3);}if(n<0)throw new Error("Negative length: "+n);return n}};we.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Ht.util.createBuffer(e));var r=e.length(),n=Of(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Of(e,t,r,n){var i;Ou(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var c=hG(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=e.length(),l.remaining=t,l.requested=c,l}c=t;}var u,f,h=(s&32)===32;if(h)if(u=[],c===void 0)for(;;){if(Ou(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(Of(e,t,r+1,n)),t-=i-e.length();}else for(;c>0;)i=e.length(),u.push(Of(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(u===void 0&&a===we.Class.UNIVERSAL&&o===we.Type.BITSTRING&&(f=e.bytes(c)),u===void 0&&n.decodeBitStrings&&a===we.Class.UNIVERSAL&&o===we.Type.BITSTRING&&c>1){var p=e.read,m=t,v=0;if(o===we.Type.BITSTRING&&(Ou(e,t,1),v=e.getByte(),t--),v===0)try{i=e.length();var E={strict:!0,decodeBitStrings:!0},x=Of(e,t,r+1,E),y=i-e.length();t-=y,o==we.Type.BITSTRING&&y++;var S=x.tagClass;y===c&&(S===we.Class.UNIVERSAL||S===we.Class.CONTEXT_SPECIFIC)&&(u=[x]);}catch{}u===void 0&&(e.read=p,t=m);}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t;}if(o===we.Type.BMPSTRING)for(u="";c>0;c-=2)Ou(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(c),t-=c;}var N=f===void 0?null:{bitStringContents:f};return we.create(a,o,h,u,N)}we.toDer=function(e){var t=Ht.util.createBuffer(),r=e.tagClass|e.type,n=Ht.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=we.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(we.toDer(e.value[s]));}else if(e.type===we.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===we.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else {var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s));}return t.putBuffer(n),t};we.oidToDer=function(e){var t=e.split("."),r=Ht.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,a,o=2;o<t.length;++o){n=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c]);}return r};we.derToOid=function(e){var t;typeof e=="string"&&(e=Ht.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};we.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),l=10;c!=="+"&&c!=="-"&&(o=parseInt(e.substr(10,2),10),l+=2);}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),l&&(c=e.charAt(l),c==="+"||c==="-")){var u=parseInt(e.substr(l+1,2),10),f=parseInt(e.substr(l+4,2),10),h=u*60+f;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h);}return t};we.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,l=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var p=parseInt(e.substr(f+1,2),10),m=parseInt(e.substr(f+4,2),10);l=p*60+m,l*=6e4,h==="+"&&(l*=-1),u=!0;}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,c),t.setTime(+t+l)):(t.setFullYear(r,n,i),t.setHours(s,a,o,c)),t};we.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};we.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};we.integerToDer=function(e){var t=Ht.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};we.derToInteger=function(e){typeof e=="string"&&(e=Ht.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};we.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Ht.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=we.validate(e.value[s],t.value[a],r,n),i?++s:t.value[a].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else {var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1);}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var dN=/[^\\u0000-\\u00ff]/;we.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case we.Class.UNIVERSAL:n+="Universal:";break;case we.Class.APPLICATION:n+="Application:";break;case we.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case we.Class.PRIVATE:n+="Private:";break}if(e.tagClass===we.Class.UNIVERSAL)switch(n+=e.type,e.type){case we.Type.NONE:n+=" (None)";break;case we.Type.BOOLEAN:n+=" (Boolean)";break;case we.Type.INTEGER:n+=" (Integer)";break;case we.Type.BITSTRING:n+=" (Bit string)";break;case we.Type.OCTETSTRING:n+=" (Octet string)";break;case we.Type.NULL:n+=" (Null)";break;case we.Type.OID:n+=" (Object Identifier)";break;case we.Type.ODESC:n+=" (Object Descriptor)";break;case we.Type.EXTERNAL:n+=" (External or Instance of)";break;case we.Type.REAL:n+=" (Real)";break;case we.Type.ENUMERATED:n+=" (Enumerated)";break;case we.Type.EMBEDDED:n+=" (Embedded PDV)";break;case we.Type.UTF8:n+=" (UTF8)";break;case we.Type.ROID:n+=" (Relative Object Identifier)";break;case we.Type.SEQUENCE:n+=" (Sequence)";break;case we.Type.SET:n+=" (Set)";break;case we.Type.PRINTABLESTRING:n+=" (Printable String)";break;case we.Type.IA5String:n+=" (IA5String (ASCII))";break;case we.Type.UTCTIME:n+=" (UTC time)";break;case we.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case we.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=we.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(o+=","));n+=i+"Sub values: "+a+o;}else {if(n+=i+"Value: ",e.type===we.Type.OID){var c=we.derToOid(e.value);n+=c,Ht.pki&&Ht.pki.oids&&c in Ht.pki.oids&&(n+=" ("+Ht.pki.oids[c]+") ");}if(e.type===we.Type.INTEGER)try{n+=we.derToInteger(e.value);}catch{n+="0x"+Ht.util.bytesToHex(e.value);}else if(e.type===we.Type.BITSTRING){if(e.value.length>1?n+="0x"+Ht.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)");}}else if(e.type===we.Type.OCTETSTRING)dN.test(e.value)||(n+="("+e.value+") "),n+="0x"+Ht.util.bytesToHex(e.value);else if(e.type===we.Type.UTF8)try{n+=Ht.util.decodeUtf8(e.value);}catch(u){if(u.message==="URI malformed")n+="0x"+Ht.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===we.Type.PRINTABLESTRING||e.type===we.Type.IA5String?n+=e.value:dN.test(e.value)?n+="0x"+Ht.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value;}return n};});var oi=P((loe,pN)=>{var Ff=Je();pN.exports=Ff.md=Ff.md||{};Ff.md.algorithms=Ff.md.algorithms||{};});var eo=P((foe,gN)=>{var ki=Je();oi();mt();var pG=gN.exports=ki.hmac=ki.hmac||{};pG.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in ki.md.algorithms)t=ki.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else {if(typeof a=="string")a=ki.util.createBuffer(a);else if(ki.util.isArray(a)){var o=a;a=ki.util.createBuffer();for(var c=0;c<o.length;++c)a.putByte(o[c]);}var l=a.length();l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=ki.util.createBuffer(),n=ki.util.createBuffer(),l=a.length();for(var c=0;c<l;++c){var o=a.at(c);r.putByte(54^o),n.putByte(92^o);}if(l<t.blockLength)for(var o=t.blockLength-l,c=0;c<o;++c)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes();}t.start(),t.update(r);},i.update=function(s){t.update(s);},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i};});var Mf=P((doe,vN)=>{var ui=Je();oi();mt();var yN=vN.exports=ui.md5=ui.md5||{};ui.md.md5=ui.md.algorithms.md5=yN;yN.create=function(){_N||gG();var e=null,t=ui.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=ui.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=ui.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),mN(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=ui.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(uy.substr(0,n.blockLength-a));for(var o,c=0,l=n.fullMessageLength.length-1;l>=0;--l)o=n.fullMessageLength[l]*8+c,c=o/4294967296>>>0,i.putInt32Le(o>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};mN(u,r,i);var f=ui.util.createBuffer();return f.putInt32Le(u.h0),f.putInt32Le(u.h1),f.putInt32Le(u.h2),f.putInt32Le(u.h3),f},n};var uy=null,Bf=null,Fu=null,to=null,_N=!1;function gG(){uy="\x80",uy+=ui.util.fillString("\0",64),Bf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Fu=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],to=new Array(64);for(var e=0;e<64;++e)to[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);_N=!0;}function mN(e,t,r){for(var n,i,s,a,o,c,l,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,u=0;u<16;++u)t[u]=r.getInt32Le(),c=o^s&(a^o),n=i+c+to[u]+t[u],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<32;++u)c=a^o&(s^a),n=i+c+to[u]+t[Bf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<48;++u)c=s^a^o,n=i+c+to[u]+t[Bf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<64;++u)c=a^(s|~o),n=i+c+to[u]+t[Bf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,f-=64;}}});var Js=P((hoe,bN)=>{var Hf=Je();mt();var SN=bN.exports=Hf.pem=Hf.pem||{};SN.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=qf(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=qf(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=qf(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=qf(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Hf.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};SN.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Hf.util.decode64(s[3])};if(t.push(o),!!s[2]){for(var c=s[2].split(i),l=0;s&&l<c.length;){for(var u=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;u+=h,l=f;}if(s=u.match(n),s){for(var p={name:s[1],values:[]},m=s[2].split(","),v=0;v<m.length;++v)p.values.push(mG(m[v]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=m[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:m[0],parameters:m[1]||null};}else o.headers.push(p);else {if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:m[0],type:m[1]};}}++l;}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function qf(e){for(var t=e.name+": ",r=[],n=function(c,l){return " "+l},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i;}else (t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function mG(e){return e.replace(/^\s+/,"")}});var Bu=P((poe,CN)=>{var Wt=Je();Nf();ny();mt();CN.exports=Wt.des=Wt.des||{};Wt.des.startEncrypting=function(e,t,r,n){var i=Uf({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Wt.des.createEncryptionCipher=function(e,t){return Uf({key:e,output:null,decrypt:!1,mode:t})};Wt.des.startDecrypting=function(e,t,r,n){var i=Uf({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Wt.des.createDecryptionCipher=function(e,t){return Uf({key:e,output:null,decrypt:!0,mode:t})};Wt.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return EN(r._keys,n,i,!1)},decrypt:function(n,i){return EN(r._keys,n,i,!0)}}}),r._init=!1;};Wt.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Wt.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=xG(t),this._init=!0;}};ci("DES-ECB",Wt.cipher.modes.ecb);ci("DES-CBC",Wt.cipher.modes.cbc);ci("DES-CFB",Wt.cipher.modes.cfb);ci("DES-OFB",Wt.cipher.modes.ofb);ci("DES-CTR",Wt.cipher.modes.ctr);ci("3DES-ECB",Wt.cipher.modes.ecb);ci("3DES-CBC",Wt.cipher.modes.cbc);ci("3DES-CFB",Wt.cipher.modes.cfb);ci("3DES-OFB",Wt.cipher.modes.ofb);ci("3DES-CTR",Wt.cipher.modes.ctr);function ci(e,t){var r=function(){return new Wt.des.Algorithm(e,t)};Wt.cipher.registerAlgorithm(e,r);}var yG=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],_G=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],vG=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],SG=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],bG=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],EG=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],CG=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],wG=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function xG(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=e.length()>8?3:1,E=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,S,N=0;N<v;N++){var O=e.getInt32(),j=e.getInt32();S=(O>>>4^j)&252645135,j^=S,O^=S<<4,S=(j>>>-16^O)&65535,O^=S,j^=S<<-16,S=(O>>>2^j)&858993459,j^=S,O^=S<<2,S=(j>>>-16^O)&65535,O^=S,j^=S<<-16,S=(O>>>1^j)&1431655765,j^=S,O^=S<<1,S=(j>>>8^O)&16711935,O^=S,j^=S<<8,S=(O>>>1^j)&1431655765,j^=S,O^=S<<1,S=O<<8|j>>>20&240,O=j<<24|j<<8&16711680|j>>>8&65280|j>>>24&240,j=S;for(var J=0;J<x.length;++J){x[J]?(O=O<<2|O>>>26,j=j<<2|j>>>26):(O=O<<1|O>>>27,j=j<<1|j>>>27),O&=-15,j&=-15;var z=t[O>>>28]|r[O>>>24&15]|n[O>>>20&15]|i[O>>>16&15]|s[O>>>12&15]|a[O>>>8&15]|o[O>>>4&15],G=c[j>>>28]|l[j>>>24&15]|u[j>>>20&15]|f[j>>>16&15]|h[j>>>12&15]|p[j>>>8&15]|m[j>>>4&15];S=(G>>>16^z)&65535,E[y++]=z^S,E[y++]=G^S<<16;}}return E}function EN(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],c=t[1];a=(o>>>4^c)&252645135,c^=a,o^=a<<4,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var l=0;l<i;l+=3){for(var u=s[l+1],f=s[l+2],h=s[l];h!=u;h+=f){var p=c^e[h],m=(c>>>4|c<<28)^e[h+1];a=o,o=c,c=a^(_G[p>>>24&63]|SG[p>>>16&63]|EG[p>>>8&63]|wG[p&63]|yG[m>>>24&63]|vG[m>>>16&63]|bG[m>>>8&63]|CG[m&63]);}a=o,o=c,c=a;}o=o>>>1|o<<31,c=c>>>1|c<<31,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(o>>>4^c)&252645135,c^=a,o^=a<<4,r[0]=o,r[1]=c;}function Uf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=Wt.cipher.createDecipher(r,e.key):n=Wt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Wt.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a);},n}});var $f=P((goe,wN)=>{var jr=Je();eo();oi();mt();var TG=jr.pkcs5=jr.pkcs5||{},Di;jr.util.isNodejs&&!jr.options.usePureJavaScript&&(Di=he("crypto"));wN.exports=jr.pbkdf2=TG.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),jr.util.isNodejs&&!jr.options.usePureJavaScript&&Di.pbkdf2&&(i===null||typeof i!="object")&&(Di.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?Di.pbkdf2Sync.length===4?Di.pbkdf2(e,t,r,n,function(S,N){if(S)return s(S);s(null,N.toString("binary"));}):Di.pbkdf2(e,t,r,n,i,function(S,N){if(S)return s(S);s(null,N.toString("binary"));}):Di.pbkdf2Sync.length===4?Di.pbkdf2Sync(e,t,r,n).toString("binary"):Di.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in jr.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=jr.md[i].create();}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var c=Math.ceil(n/a),l=n-(c-1)*a,u=jr.hmac.create();u.start(i,e);var f="",h,p,m;if(!s){for(var v=1;v<=c;++v){u.start(null,null),u.update(t),u.update(jr.util.int32ToBytes(v)),h=m=u.digest().getBytes();for(var E=2;E<=r;++E)u.start(null,null),u.update(m),p=u.digest().getBytes(),h=jr.util.xorBytes(h,p,a),m=p;f+=v<c?h:h.substr(0,l);}return f}var v=1,E;function x(){if(v>c)return s(null,f);u.start(null,null),u.update(t),u.update(jr.util.int32ToBytes(v)),h=m=u.digest().getBytes(),E=2,y();}function y(){if(E<=r)return u.start(null,null),u.update(m),p=u.digest().getBytes(),h=jr.util.xorBytes(h,p,a),m=p,++E,jr.util.setImmediate(y);f+=v<c?h:h.substr(0,l),++v,x();}x();};});var ly=P((moe,RN)=>{var li=Je();oi();mt();var TN=RN.exports=li.sha256=li.sha256||{};li.md.sha256=li.md.algorithms.sha256=TN;TN.create=function(){AN||AG();var e=null,t=li.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=li.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=li.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),xN(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=li.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(cy.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};xN(f,r,i);var h=li.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var cy=null,AN=!1,IN=null;function AG(){cy="\x80",cy+=li.util.fillString("\0",64),IN=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],AN=!0;}function xN(e,t,r){for(var n,i,s,a,o,c,l,u,f,h,p,m,v,E,x,y=r.length();y>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=n+t[l-7]+i+t[l-16]|0;for(u=e.h0,f=e.h1,h=e.h2,p=e.h3,m=e.h4,v=e.h5,E=e.h6,x=e.h7,l=0;l<64;++l)a=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),o=E^m&(v^E),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&f|h&(u^f),n=x+a+o+IN[l]+t[l],i=s+c,x=E,E=v,v=m,m=p+n>>>0,p=h,h=f,f=u,u=n+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+m|0,e.h5=e.h5+v|0,e.h6=e.h6+E|0,e.h7=e.h7+x|0,y-=64;}}});var fy=P((yoe,PN)=>{var fi=Je();mt();var jf=null;fi.util.isNodejs&&!fi.options.usePureJavaScript&&!process.versions["node-webkit"]&&(jf=he("crypto"));var IG=PN.exports=fi.prng=fi.prng||{};IG.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(l,u){if(!u)return t.generateSync(l);var f=t.plugin.cipher,h=t.plugin.increment,p=t.plugin.formatKey,m=t.plugin.formatSeed,v=fi.util.createBuffer();t.key=null,E();function E(x){if(x)return u(x);if(v.length()>=l)return u(null,v.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return fi.util.nextTick(function(){s(E);});var y=f(t.key,t.seed);t.generated+=y.length,v.putBytes(y),t.key=p(f(t.key,h(t.seed))),t.seed=m(f(t.key,t.seed)),fi.util.setImmediate(E);}},t.generateSync=function(l){var u=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var m=fi.util.createBuffer();m.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&a();var v=u(t.key,t.seed);t.generated+=v.length,m.putBytes(v),t.key=h(u(t.key,f(t.seed))),t.seed=p(u(t.key,t.seed));}return m.getBytes(l)};function s(l){if(t.pools[0].messageLength>=32)return o(),l();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(f,h){if(f)return l(f);t.collect(h),o(),l();});}function a(){if(t.pools[0].messageLength>=32)return o();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),o();}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var u=1,f=0;f<32;++f)t.reseeds%u===0&&(l.update(t.pools[f].digest().getBytes()),t.pools[f].start()),u=u<<1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var h=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0;}function c(l){var u=null,f=fi.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(u=function(O){return h.getRandomValues(O)});var p=fi.util.createBuffer();if(u)for(;p.length()<l;){var m=Math.max(1,Math.min(l-p.length(),65536)/4),v=new Uint32Array(Math.floor(m));try{u(v);for(var E=0;E<v.length;++E)p.putInt32(v[E]);}catch(O){if(!(typeof QuotaExceededError<"u"&&O instanceof QuotaExceededError))throw O}}if(p.length()<l)for(var x,y,S,N=Math.floor(Math.random()*65536);p.length()<l;){y=16807*(N&65535),x=16807*(N>>16),y+=(x&32767)<<16,y+=x>>15,y=(y&2147483647)+(y>>31),N=y&4294967295;for(var E=0;E<3;++E)S=N>>>(E<<3),S^=Math.floor(Math.random()*256),p.putByte(S&255);}return p.getBytes(l)}return jf?(t.seedFile=function(l,u){jf.randomBytes(l,function(f,h){if(f)return u(f);u(null,h.toString());});},t.seedFileSync=function(l){return jf.randomBytes(l).toString()}):(t.seedFile=function(l,u){try{u(null,c(l));}catch(f){u(f);}},t.seedFileSync=c),t.collect=function(l){for(var u=l.length,f=0;f<u;++f)t.pools[t.pool].update(l.substr(f,1)),t.pool=t.pool===31?0:t.pool+1;},t.collectInt=function(l,u){for(var f="",h=0;h<u;h+=8)f+=String.fromCharCode(l>>h&255);t.collect(f);},t.registerWorker=function(l){if(l===self)t.seedFile=function(f,h){function p(m){var v=m.data;v.forge&&v.forge.prng&&(self.removeEventListener("message",p),h(v.forge.prng.err,v.forge.prng.bytes));}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}});};else {var u=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(p,m){l.postMessage({forge:{prng:{err:p,bytes:m}}});});};l.addEventListener("message",u);}},t};});var Tn=P((_oe,dy)=>{var gr=Je();ss();ly();fy();mt();(function(){if(gr.random&&gr.random.getBytes){dy.exports=gr.random;return}(function(e){var t={},r=new Array(4),n=gr.util.createBuffer();t.formatKey=function(f){var h=gr.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),gr.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=gr.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return gr.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return ++f[3],f},t.md=gr.md.sha256;function i(){var f=gr.prng.create(t);return f.getBytes=function(h,p){return f.generate(h,p)},f.getBytesSync=function(h){return f.generate(h)},f}var s=i(),a=null,o=gr.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(a=function(f){return c.getRandomValues(f)}),gr.options.usePureJavaScript||!gr.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var u in navigator)try{typeof navigator[u]=="string"&&(l+=navigator[u]);}catch{}s.collect(l),l=null;}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16);}),e().keypress(function(f){s.collectInt(f.charCode,8);}));}if(!gr.random)gr.random=s;else for(var u in s)gr.random[u]=s[u];gr.random.createInstance=i,dy.exports=gr.random;})(typeof jQuery<"u"?jQuery:null);})();});var py=P((voe,DN)=>{var Qr=Je();mt();var hy=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],NN=[1,2,3,5],RG=function(e,t){return e<<t&65535|(e&65535)>>16-t},PG=function(e,t){return (e&65535)>>t|e<<16-t&65535};DN.exports=Qr.rc2=Qr.rc2||{};Qr.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Qr.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(hy[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,hy[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,hy[r.at(o+1)^r.at(o+s)]);return r};var kN=function(e,t,r){var n=!1,i=null,s=null,a=null,o,c,l,u,f=[];for(e=Qr.rc2.expandKey(e,t),l=0;l<64;l++)f.push(e.getInt16Le());r?(o=function(m){for(l=0;l<4;l++)m[l]+=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),m[l]=RG(m[l],NN[l]),u++;},c=function(m){for(l=0;l<4;l++)m[l]+=f[m[(l+3)%4]&63];}):(o=function(m){for(l=3;l>=0;l--)m[l]=PG(m[l],NN[l]),m[l]-=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),u--;},c=function(m){for(l=3;l>=0;l--)m[l]-=f[m[(l+3)%4]&63];});var h=function(m){var v=[];for(l=0;l<4;l++){var E=i.getInt16Le();a!==null&&(r?E^=a.getInt16Le():a.putInt16Le(E)),v.push(E&65535);}u=r?0:63;for(var x=0;x<m.length;x++)for(var y=0;y<m[x][0];y++)m[x][1](v);for(l=0;l<4;l++)a!==null&&(r?a.putInt16Le(v[l]):v[l]^=a.getInt16Le()),s.putInt16Le(v[l]);},p=null;return p={start:function(m,v){m&&typeof m=="string"&&(m=Qr.util.createBuffer(m)),n=!1,i=Qr.util.createBuffer(),s=v||new Qr.util.createBuffer,a=m,p.output=s;},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]]);},finish:function(m){var v=!0;if(r)if(m)v=m(8,i,!r);else {var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E);}if(v&&(n=!0,p.update()),!r&&(v=i.length()===0,v))if(m)v=m(8,s,!r);else {var x=s.length(),y=s.at(x-1);y>x?v=!1:s.truncate(y);}return v}},p};Qr.rc2.startEncrypting=function(e,t,r){var n=Qr.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Qr.rc2.createEncryptionCipher=function(e,t){return kN(e,t,!0)};Qr.rc2.startDecrypting=function(e,t,r){var n=Qr.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Qr.rc2.createDecryptionCipher=function(e,t){return kN(e,t,!1)};});var qu=P((Soe,UN)=>{var gy=Je();UN.exports=gy.jsbn=gy.jsbn||{};var Li;function fe(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t));}gy.jsbn.BigInteger=fe;function yt(){return new fe(null)}function kG(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863;}return i}function DG(e,t,r,n,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var c=this.data[e]&32767,l=this.data[e++]>>15,u=o*c+l*a;c=a*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+o*l+(i>>>30),r.data[n++]=c&1073741823;}return i}function ON(e,t,r,n,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var c=this.data[e]&16383,l=this.data[e++]>>14,u=o*c+l*a;c=a*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+o*l,r.data[n++]=c&268435455;}return i}typeof navigator>"u"?(fe.prototype.am=ON,Li=28):navigator.appName=="Microsoft Internet Explorer"?(fe.prototype.am=DG,Li=30):navigator.appName!="Netscape"?(fe.prototype.am=kG,Li=26):(fe.prototype.am=ON,Li=28);fe.prototype.DB=Li;fe.prototype.DM=(1<<Li)-1;fe.prototype.DV=1<<Li;var my=52;fe.prototype.FV=Math.pow(2,my);fe.prototype.F1=my-Li;fe.prototype.F2=2*Li-my;var LG="0123456789abcdefghijklmnopqrstuvwxyz",Vf=new Array,ro,An;ro=48;for(An=0;An<=9;++An)Vf[ro++]=An;ro=97;for(An=10;An<36;++An)Vf[ro++]=An;ro=65;for(An=10;An<36;++An)Vf[ro++]=An;function FN(e){return LG.charAt(e)}function BN(e,t){var r=Vf[e.charCodeAt(t)];return r??-1}function OG(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s;}function FG(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0;}function os(e){var t=yt();return t.fromInt(e),t}function BG(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else {this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=r==8?e[n]&255:BN(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB);}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&fe.ZERO.subTo(this,this);}function MG(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t;}function qG(e){if(this.s<0)return "-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=FN(n));a>=0;)o<t?(n=(this.data[a]&(1<<o)-1)<<t-o,n|=this.data[--a]>>(o+=this.DB-t)):(n=this.data[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=FN(n));return i?s:"0"}function HG(){var e=yt();return fe.ZERO.subTo(this,e),e}function UG(){return this.s<0?this.negate():this}function $G(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Wf(e){var t=1,r;return (r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function jG(){return this.t<=0?0:this.DB*(this.t-1)+Wf(this.data[this.t-1]^this.s&this.DM)}function VG(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s;}function WG(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s;}function KG(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp();}function zG(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp();}function GG(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else {for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s;}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp();}function XG(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&fe.ZERO.subTo(t,t);}function ZG(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1);}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp();}function YG(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=yt());var s=yt(),a=this.s,o=e.s,c=this.DB-Wf(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var l=s.t,u=s.data[l-1];if(u!=0){var f=u*(1<<this.F1)+(l>1?s.data[l-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,m=1<<this.F2,v=r.t,E=v-l,x=t??yt();for(s.dlShiftTo(E,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),fe.ONE.dlShiftTo(l,x),x.subTo(s,s);s.t<l;)s.data[s.t++]=0;for(;--E>=0;){var y=r.data[--v]==u?this.DM:Math.floor(r.data[v]*h+(r.data[v-1]+m)*p);if((r.data[v]+=s.am(0,y,r,E,0,l))<y)for(s.dlShiftTo(E,x),r.subTo(x,r);r.data[v]<--y;)r.subTo(x,r);}t!=null&&(r.drShiftTo(l,t),a!=o&&fe.ZERO.subTo(t,t)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&fe.ZERO.subTo(r,r);}}}function QG(e){var t=yt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(fe.ZERO)>0&&e.subTo(t,t),t}function ea(e){this.m=e;}function JG(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function eX(e){return e}function tX(e){e.divRemTo(this.m,null,e);}function rX(e,t,r){e.multiplyTo(t,r),this.reduce(r);}function nX(e,t){e.squareTo(t),this.reduce(t);}ea.prototype.convert=JG;ea.prototype.revert=eX;ea.prototype.reduce=tX;ea.prototype.mulTo=rX;ea.prototype.sqrTo=nX;function iX(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function ta(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t;}function sX(e){var t=yt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(fe.ZERO)>0&&this.m.subTo(t,t),t}function aX(e){var t=yt();return e.copyTo(t),this.reduce(t),t}function oX(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++;}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e);}function uX(e,t){e.squareTo(t),this.reduce(t);}function cX(e,t,r){e.multiplyTo(t,r),this.reduce(r);}ta.prototype.convert=sX;ta.prototype.revert=aX;ta.prototype.reduce=oX;ta.prototype.mulTo=cX;ta.prototype.sqrTo=uX;function lX(){return (this.t>0?this.data[0]&1:this.s)==0}function fX(e,t){if(e>4294967295||e<1)return fe.ONE;var r=yt(),n=yt(),i=t.convert(this),s=Wf(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else {var a=r;r=n,n=a;}return t.revert(r)}function dX(e,t){var r;return e<256||t.isEven()?r=new ea(t):r=new ta(t),this.exp(e,r)}fe.prototype.copyTo=OG;fe.prototype.fromInt=FG;fe.prototype.fromString=BG;fe.prototype.clamp=MG;fe.prototype.dlShiftTo=VG;fe.prototype.drShiftTo=WG;fe.prototype.lShiftTo=KG;fe.prototype.rShiftTo=zG;fe.prototype.subTo=GG;fe.prototype.multiplyTo=XG;fe.prototype.squareTo=ZG;fe.prototype.divRemTo=YG;fe.prototype.invDigit=iX;fe.prototype.isEven=lX;fe.prototype.exp=fX;fe.prototype.toString=qG;fe.prototype.negate=HG;fe.prototype.abs=UG;fe.prototype.compareTo=$G;fe.prototype.bitLength=jG;fe.prototype.mod=QG;fe.prototype.modPowInt=dX;fe.ZERO=os(0);fe.ONE=os(1);function hX(){var e=yt();return this.copyTo(e),e}function pX(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return -1}else {if(this.t==1)return this.data[0];if(this.t==0)return 0}return (this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function gX(){return this.t==0?this.s:this.data[0]<<24>>24}function mX(){return this.t==0?this.s:this.data[0]<<16>>16}function yX(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function _X(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function vX(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return "0";var t=this.chunkSize(e),r=Math.pow(e,t),n=os(r),i=yt(),s=yt(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a}function SX(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var c=BN(e,o);if(c<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0);}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&fe.ZERO.subTo(this,this);}function bX(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(fe.ONE.shiftLeft(e-1),yy,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(fe.ONE.shiftLeft(e-1),this);else {var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256);}}function EX(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function CX(e){return this.compareTo(e)==0}function wX(e){return this.compareTo(e)<0?this:e}function xX(e){return this.compareTo(e)>0?this:e}function TX(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t;}else {for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t;}r.s=t(this.s,e.s),r.clamp();}function AX(e,t){return e&t}function IX(e){var t=yt();return this.bitwiseTo(e,AX,t),t}function yy(e,t){return e|t}function RX(e){var t=yt();return this.bitwiseTo(e,yy,t),t}function MN(e,t){return e^t}function PX(e){var t=yt();return this.bitwiseTo(e,MN,t),t}function qN(e,t){return e&~t}function NX(e){var t=yt();return this.bitwiseTo(e,qN,t),t}function kX(){for(var e=yt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function DX(e){var t=yt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function LX(e){var t=yt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function OX(e){if(e==0)return -1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function FX(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+OX(this.data[e]);return this.s<0?this.t*this.DB:-1}function BX(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function MX(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=BX(this.data[r]^t);return e}function qX(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function HX(e,t){var r=fe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function UX(e){return this.changeBit(e,yy)}function $X(e){return this.changeBit(e,qN)}function jX(e){return this.changeBit(e,MN)}function VX(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else {for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s;}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp();}function WX(e){var t=yt();return this.addTo(e,t),t}function KX(e){var t=yt();return this.subTo(e,t),t}function zX(e){var t=yt();return this.multiplyTo(e,t),t}function GX(e){var t=yt();return this.divRemTo(e,t,null),t}function XX(e){var t=yt();return this.divRemTo(e,null,t),t}function ZX(e){var t=yt(),r=yt();return this.divRemTo(e,t,r),new Array(t,r)}function YX(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp();}function QX(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t];}}function Mu(){}function HN(e){return e}function JX(e,t,r){e.multiplyTo(t,r);}function eZ(e,t){e.squareTo(t);}Mu.prototype.convert=HN;Mu.prototype.revert=HN;Mu.prototype.mulTo=JX;Mu.prototype.sqrTo=eZ;function tZ(e){return this.exp(e,new Mu)}function rZ(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp();}function nZ(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r);}function no(e){this.r2=yt(),this.q3=yt(),fe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e;}function iZ(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=yt();return e.copyTo(t),this.reduce(t),t}function sZ(e){return e}function aZ(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e);}function oZ(e,t){e.squareTo(t),this.reduce(t);}function uZ(e,t,r){e.multiplyTo(t,r),this.reduce(r);}no.prototype.convert=iZ;no.prototype.revert=sZ;no.prototype.reduce=aZ;no.prototype.mulTo=uZ;no.prototype.sqrTo=oZ;function cZ(e,t){var r=e.bitLength(),n,i=os(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new ea(t):t.isEven()?s=new no(t):s=new ta(t);var a=new Array,o=3,c=n-1,l=(1<<n)-1;if(a[1]=s.convert(this),n>1){var u=yt();for(s.sqrTo(a[1],u);o<=l;)a[o]=yt(),s.mulTo(u,a[o-2],a[o]),o+=2;}var f=e.t-1,h,p=!0,m=yt(),v;for(r=Wf(e.data[f])-1;f>=0;){for(r>=c?h=e.data[f]>>r-c&l:(h=(e.data[f]&(1<<r+1)-1)<<c-r,f>0&&(h|=e.data[f-1]>>this.DB+r-c)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)a[h].copyTo(i),p=!1;else {for(;o>1;)s.sqrTo(i,m),s.sqrTo(m,i),o-=2;o>0?s.sqrTo(i,m):(v=i,i=m,m=v),s.mulTo(m,a[h],i);}for(;f>=0&&!(e.data[f]&1<<r);)s.sqrTo(i,m),v=i,i=m,m=v,--r<0&&(r=this.DB-1,--f);}return s.revert(i)}function lZ(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n;}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function fZ(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function dZ(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return fe.ZERO;for(var r=e.clone(),n=this.clone(),i=os(1),s=os(0),a=os(0),o=os(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o));}if(n.compareTo(fe.ONE)!=0)return fe.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var zn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],hZ=(1<<26)/zn[zn.length-1];function pZ(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=zn[zn.length-1]){for(t=0;t<zn.length;++t)if(r.data[0]==zn[t])return !0;return !1}if(r.isEven())return !1;for(t=1;t<zn.length;){for(var n=zn[t],i=t+1;i<zn.length&&n<hZ;)n*=zn[i++];for(n=r.modInt(n);t<i;)if(n%zn[t++]==0)return !1}return r.millerRabin(e)}function gZ(e){var t=this.subtract(fe.ONE),r=t.getLowestSetBit();if(r<=0)return !1;for(var n=t.shiftRight(r),i=mZ(),s,a=0;a<e;++a){do s=new fe(this.bitLength(),i);while(s.compareTo(fe.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(n,this);if(o.compareTo(fe.ONE)!=0&&o.compareTo(t)!=0){for(var c=1;c++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(fe.ONE)==0)return !1;if(o.compareTo(t)!=0)return !1}}return !0}function mZ(){return {nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256);}}}fe.prototype.chunkSize=yX;fe.prototype.toRadix=vX;fe.prototype.fromRadix=SX;fe.prototype.fromNumber=bX;fe.prototype.bitwiseTo=TX;fe.prototype.changeBit=HX;fe.prototype.addTo=VX;fe.prototype.dMultiply=YX;fe.prototype.dAddOffset=QX;fe.prototype.multiplyLowerTo=rZ;fe.prototype.multiplyUpperTo=nZ;fe.prototype.modInt=fZ;fe.prototype.millerRabin=gZ;fe.prototype.clone=hX;fe.prototype.intValue=pX;fe.prototype.byteValue=gX;fe.prototype.shortValue=mX;fe.prototype.signum=_X;fe.prototype.toByteArray=EX;fe.prototype.equals=CX;fe.prototype.min=wX;fe.prototype.max=xX;fe.prototype.and=IX;fe.prototype.or=RX;fe.prototype.xor=PX;fe.prototype.andNot=NX;fe.prototype.not=kX;fe.prototype.shiftLeft=DX;fe.prototype.shiftRight=LX;fe.prototype.getLowestSetBit=FX;fe.prototype.bitCount=MX;fe.prototype.testBit=qX;fe.prototype.setBit=UX;fe.prototype.clearBit=$X;fe.prototype.flipBit=jX;fe.prototype.add=WX;fe.prototype.subtract=KX;fe.prototype.multiply=zX;fe.prototype.divide=GX;fe.prototype.remainder=XX;fe.prototype.divideAndRemainder=ZX;fe.prototype.modPow=cZ;fe.prototype.modInverse=dZ;fe.prototype.pow=tZ;fe.prototype.gcd=lZ;fe.prototype.isProbablePrime=pZ;});var io=P((boe,WN)=>{var di=Je();oi();mt();var jN=WN.exports=di.sha1=di.sha1||{};di.md.sha1=di.md.algorithms.sha1=jN;jN.create=function(){VN||yZ();var e=null,t=di.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=di.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=di.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),$N(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=di.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(_y.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};$N(f,r,i);var h=di.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var _y=null,VN=!1;function yZ(){_y="\x80",_y+=di.util.fillString("\0",64),VN=!0;}function $N(e,t,r){for(var n,i,s,a,o,c,l,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s&a|o&(s^a),n=(i<<5|i>>>27)+l+c+2400959708+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+3395469782+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,f-=64;}}});var vy=P((Eoe,zN)=>{var hi=Je();mt();Tn();io();var KN=zN.exports=hi.pkcs1=hi.pkcs1||{};KN.encode_rsa_oaep=function(e,t,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=hi.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),c=o-2*s.digestLength-2;if(t.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=t.length,l.maxLength=c,l}n||(n=""),s.update(n,"raw");for(var u=s.digest(),f="",h=c-t.length,p=0;p<h;p++)f+="\0";var m=u.getBytes()+f+""+t;if(!i)i=hi.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=i.length,l.digestLength=s.digestLength,l}var v=Kf(i,o-s.digestLength-1,a),E=hi.util.xorBytes(m,v,m.length),x=Kf(E,s.digestLength,a),y=hi.util.xorBytes(i,x,i.length);return "\0"+y+E};KN.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=a,E}if(i===void 0?i=hi.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),c=t.charAt(0),l=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),f=Kf(u,i.digestLength,s),h=hi.util.xorBytes(l,f,l.length),p=Kf(h,a-i.digestLength-1,s),m=hi.util.xorBytes(u,p,u.length),v=m.substring(0,i.digestLength),E=c!=="\0",x=0;x<i.digestLength;++x)E|=o.charAt(x)!==v.charAt(x);for(var y=1,S=i.digestLength,N=i.digestLength;N<m.length;N++){var O=m.charCodeAt(N),j=O&1^1,J=y?65534:0;E|=O&J,y=y&j,S+=y;}if(E||m.charCodeAt(S)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(S+1)};function Kf(e,t,r){r||(r=hi.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+a),n+=r.digest().getBytes();}return n.substring(0,t)}});var by=P((Coe,Sy)=>{var us=Je();mt();qu();Tn();(function(){if(us.prime){Sy.exports=us.prime;return}var e=Sy.exports=us.prime=us.prime||{},t=us.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var m=h.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var v=h.prng||us.random,E={nextBytes:function(x){for(var y=v.getBytesSync(x.length),S=0;S<x.length;++S)x[S]=y.charCodeAt(S);}};if(m.name==="PRIMEINC")return s(f,E,m.options,p);throw new Error("Invalid prime generation algorithm: "+m.name)};function s(f,h,p,m){return "workers"in p?c(f,h,p,m):a(f,h,p,m)}function a(f,h,p,m){var v=l(f,h),E=0,x=u(v.bitLength());"millerRabinTests"in p&&(x=p.millerRabinTests);var y=10;"maxBlockTime"in p&&(y=p.maxBlockTime),o(v,f,h,E,x,y,m);}function o(f,h,p,m,v,E,x){var y=+new Date;do{if(f.bitLength()>h&&(f=l(h,p)),f.isProbablePrime(v))return x(null,f);f.dAddOffset(r[m++%8],0);}while(E<0||+new Date-y<E);us.util.setImmediate(function(){o(f,h,p,m,v,E,x);});}function c(f,h,p,m){if(typeof Worker>"u")return a(f,h,p,m);var v=l(f,h),E=p.workers,x=p.workLoad||100,y=x*30/8,S=p.workerScript||"forge/prime.worker.js";if(E===-1)return us.util.estimateCores(function(O,j){O&&(j=2),E=j-1,N();});N();function N(){E=Math.max(1,E);for(var O=[],j=0;j<E;++j)O[j]=new Worker(S);for(var J=E,j=0;j<E;++j)O[j].addEventListener("message",G);var z=!1;function G(ee){if(!z){--J;var H=ee.data;if(H.found){for(var ne=0;ne<O.length;++ne)O[ne].terminate();return z=!0,m(null,new t(H.prime,16))}v.bitLength()>f&&(v=l(f,h));var me=v.toString(16);ee.target.postMessage({hex:me,workLoad:x}),v.dAddOffset(y,0);}}}}function l(f,h){var p=new t(f,h),m=f-1;return p.testBit(m)||p.bitwiseTo(t.ONE.shiftLeft(m),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();});var Hu=P((woe,ek)=>{var Me=Je();Kn();qu();as();vy();by();Tn();mt();typeof ht>"u"&&(ht=Me.jsbn.BigInteger);var ht,Ey=Me.util.isNodejs?he("crypto"):null,Z=Me.asn1,In=Me.util;Me.pki=Me.pki||{};ek.exports=Me.pki.rsa=Me.rsa=Me.rsa||{};var Ze=Me.pki,_Z=[6,4,2,4,2,4,6,2],vZ={name:"PrivateKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},SZ={name:"RSAPrivateKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},bZ={name:"RSAPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Z.Class.UNIVERSAL,type:Z.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},EZ=Me.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},CZ={name:"DigestInfo",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Z.Class.UNIVERSAL,type:Z.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Z.Class.UNIVERSAL,type:Z.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Z.Class.UNIVERSAL,type:Z.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},wZ=function(e){var t;if(e.algorithm in Ze.oids)t=Ze.oids[e.algorithm];else {var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=Z.oidToDer(t).getBytes(),i=Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[]),s=Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[]);s.value.push(Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,n)),s.value.push(Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,""));var a=Z.create(Z.Class.UNIVERSAL,Z.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),Z.toDer(i).getBytes()},QN=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(ht.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(ht.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new ht(Me.util.bytesToHex(Me.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(ht.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(n.modInverse(t.n)).mod(t.n),a};Ze.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=JN(e,t,r)):(i=Me.util.createBuffer(),i.putBytes(e));for(var a=new ht(i.toHex(),16),o=QN(a,t,n),c=o.toString(16),l=Me.util.createBuffer(),u=s-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Me.util.hexToBytes(c)),l.getBytes()};Ze.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new ht(Me.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=QN(a,t,r),c=o.toString(16),l=Me.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Me.util.hexToBytes(c)),n!==!1?zf(l.getBytes(),t,r):l.getBytes()};Ze.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||Me.random,i={nextBytes:function(o){for(var c=n.getBytesSync(o.length),l=0;l<o.length;++l)o[l]=c.charCodeAt(l);}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new ht(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Ze.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new ht(null);r.fromInt(30);for(var n=0,i=function(f,h){return f|h},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,l=c-1;e.pqState===0?(e.num=new ht(c,e.rng),e.num.testBit(l)||e.num.bitwiseTo(ht.ONE.shiftLeft(l),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(TZ(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(_Z[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null);}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(ht.ONE),e.q1=e.q.subtract(ht.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(ht.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Ze.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Ze.rsa.setPublicKey(e.n,e.e)};}a=+new Date,o+=a-s,s=a;}return e.keys!==null};Ze.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!Me.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(GN("generateKeyPair"))return Ey.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,l){if(o)return n(o);n(null,{privateKey:Ze.privateKeyFromPem(l),publicKey:Ze.publicKeyFromPem(c)});});if(XN("generateKey")&&XN("exportKey"))return In.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:YN(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return In.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o);}).then(function(o){if(o){var c=Ze.privateKeyFromAsn1(Z.fromDer(Me.util.createBuffer(o)));n(null,{privateKey:c,publicKey:Ze.setRsaPublicKey(c.n,c.e)});}});if(ZN("generateKey")&&ZN("exportKey")){var i=In.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:YN(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,l=In.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(u){var f=u.target.result,h=Ze.privateKeyFromAsn1(Z.fromDer(Me.util.createBuffer(f)));n(null,{privateKey:h,publicKey:Ze.setRsaPublicKey(h.n,h.e)});},l.onerror=function(u){n(u);};},i.onerror=function(o){n(o);};return}}else if(GN("generateKeyPairSync")){var s=Ey.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return {privateKey:Ze.privateKeyFromPem(s.privateKey),publicKey:Ze.publicKeyFromPem(s.publicKey)}}}var a=Ze.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Ze.rsa.stepKeyPairGenerationState(a,0),a.keys;xZ(a,r,n);};Ze.setRsaPublicKey=Ze.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,l){return JN(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return Me.pkcs1.encode_rsa_oaep(c,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return Ze.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,l){l=zf(l,r,!0);var u=Z.fromDer(l,{parseAllBytes:a._parseAllDigestBytes}),f={},h=[];if(!Z.validate(u,CZ,f,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var m=Z.derToOid(f.algorithmIdentifier);if(!(m===Me.oids.md2||m===Me.oids.md5||m===Me.oids.sha1||m===Me.oids.sha224||m===Me.oids.sha256||m===Me.oids.sha384||m===Me.oids.sha512||m===Me.oids["sha512-224"]||m===Me.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=m,p}if((m===Me.oids.md2||m===Me.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,l){return l=zf(l,r,!0),c===l}});var o=Ze.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};Ze.setRsaPrivateKey=Ze.rsa.setPrivateKey=function(e,t,r,n,i,s,a,o){var c={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return c.decrypt=function(l,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var h=Ze.rsa.decrypt(l,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:zf};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(p,m){return Me.pkcs1.decode_rsa_oaep(m,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(h,c,!1)},c.sign=function(l,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:wZ},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return l}},f=1);var h=u.encode(l,c.n.bitLength());return Ze.rsa.encrypt(h,c,f)},c};Ze.wrapRsaPrivateKey=function(e){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,Z.integerToDer(0).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,Z.oidToDer(Ze.oids.rsaEncryption).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,"")]),Z.create(Z.Class.UNIVERSAL,Z.Type.OCTETSTRING,!1,Z.toDer(e).getBytes())])};Ze.privateKeyFromAsn1=function(e){var t={},r=[];if(Z.validate(e,vZ,t,r)&&(e=Z.fromDer(Me.util.createBuffer(t.privateKey))),t={},r=[],!Z.validate(e,SZ,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,c,l,u,f;return i=Me.util.createBuffer(t.privateKeyModulus).toHex(),s=Me.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=Me.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=Me.util.createBuffer(t.privateKeyPrime1).toHex(),c=Me.util.createBuffer(t.privateKeyPrime2).toHex(),l=Me.util.createBuffer(t.privateKeyExponent1).toHex(),u=Me.util.createBuffer(t.privateKeyExponent2).toHex(),f=Me.util.createBuffer(t.privateKeyCoefficient).toHex(),Ze.setRsaPrivateKey(new ht(i,16),new ht(s,16),new ht(a,16),new ht(o,16),new ht(c,16),new ht(l,16),new ht(u,16),new ht(f,16))};Ze.privateKeyToAsn1=Ze.privateKeyToRSAPrivateKey=function(e){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,Z.integerToDer(0).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.n)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.e)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.d)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.p)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.q)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.dP)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.dQ)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.qInv))])};Ze.publicKeyFromAsn1=function(e){var t={},r=[];if(Z.validate(e,EZ,t,r)){var n=Z.derToOid(t.publicKeyOid);if(n!==Ze.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey;}if(r=[],!Z.validate(e,bZ,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=Me.util.createBuffer(t.publicKeyModulus).toHex(),a=Me.util.createBuffer(t.publicKeyExponent).toHex();return Ze.setRsaPublicKey(new ht(s,16),new ht(a,16))};Ze.publicKeyToAsn1=Ze.publicKeyToSubjectPublicKeyInfo=function(e){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.OID,!1,Z.oidToDer(Ze.oids.rsaEncryption).getBytes()),Z.create(Z.Class.UNIVERSAL,Z.Type.NULL,!1,"")]),Z.create(Z.Class.UNIVERSAL,Z.Type.BITSTRING,!1,[Ze.publicKeyToRSAPublicKey(e)])])};Ze.publicKeyToRSAPublicKey=function(e){return Z.create(Z.Class.UNIVERSAL,Z.Type.SEQUENCE,!0,[Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.n)),Z.create(Z.Class.UNIVERSAL,Z.Type.INTEGER,!1,pi(e.e))])};function JN(e,t,r){var n=Me.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<a;++c)n.putByte(o);}else for(;a>0;){for(var l=0,u=Me.random.getBytes(a),c=0;c<a;++c)o=u.charCodeAt(c),o===0?++l:n.putByte(o);a=l;}return n.putByte(0),n.putBytes(e),n}function zf(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=Me.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-n;for(var l=0;l<c;++l)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c;}else if(o===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c;}var u=s.getByte();if(u!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function xZ(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(o,c){if(o)return r(o);if(e.p=c,e.q!==null)return a(o,e.q);s(e.qBits,a);});}function s(o,c){Me.prime.generateProbablePrime(o,n,c);}function a(o,c){if(o)return r(o);if(e.q=c,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l;}if(e.p.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)!==0){e.p=null,i();return}if(e.q.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(ht.ONE),e.q1=e.q.subtract(ht.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(ht.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:Ze.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Ze.rsa.setPublicKey(e.n,e.e)},r(null,e.keys);}}function pi(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=Me.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function TZ(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function GN(e){return Me.util.isNodejs&&typeof Ey[e]=="function"}function XN(e){return typeof In.globalScope<"u"&&typeof In.globalScope.crypto=="object"&&typeof In.globalScope.crypto.subtle=="object"&&typeof In.globalScope.crypto.subtle[e]=="function"}function ZN(e){return typeof In.globalScope<"u"&&typeof In.globalScope.msCrypto=="object"&&typeof In.globalScope.msCrypto.subtle=="object"&&typeof In.globalScope.msCrypto.subtle[e]=="function"}function YN(e){for(var t=Me.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var Cy=P((xoe,sk)=>{var Ie=Je();ss();Kn();Bu();oi();as();$f();Js();Tn();py();Hu();mt();var te=Ie.asn1,Qe=Ie.pki=Ie.pki||{};sk.exports=Qe.pbe=Ie.pbe=Ie.pbe||{};var ra=Qe.oids,AZ={name:"EncryptedPrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},IZ={name:"PBES2Algorithms",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},RZ={name:"pkcs-12PbeParams",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"iterations"}]};Qe.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ie.random.getBytesSync(r.saltSize),i=r.count,s=te.integerToDer(i),a,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,u,f;switch(r.algorithm){case"aes128":a=16,l=16,u=ra["aes128-CBC"],f=Ie.aes.createEncryptionCipher;break;case"aes192":a=24,l=16,u=ra["aes192-CBC"],f=Ie.aes.createEncryptionCipher;break;case"aes256":a=32,l=16,u=ra["aes256-CBC"],f=Ie.aes.createEncryptionCipher;break;case"des":a=8,l=8,u=ra.desCBC,f=Ie.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),m=ik(p),v=Ie.pkcs5.pbkdf2(t,n,i,a,m),E=Ie.random.getBytesSync(l),x=f(v);x.start(E),x.update(te.toDer(e)),x.finish(),c=x.output.getBytes();var y=PZ(n,s,a,p);o=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ra.pkcs5PBES2).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ra.pkcs5PBKDF2).getBytes()),y]),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(u).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,E)])])]);}else if(r.algorithm==="3des"){a=24;var S=new Ie.util.ByteBuffer(n),v=Qe.pbe.generatePkcs12Key(t,S,1,i,a),E=Qe.pbe.generatePkcs12Key(t,S,2,i,a),x=Ie.des.createEncryptionCipher(v);x.start(E),x.update(te.toDer(e)),x.finish(),c=x.output.getBytes(),o=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ra["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,n),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,s.getBytes())])]);}else {var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var N=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[o,te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,c)]);return N};Qe.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!te.validate(e,AZ,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=te.derToOid(n.encryptionOid),o=Qe.pbe.getCipher(a,n.encryptionParams,t),c=Ie.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=te.fromDer(o.output)),r};Qe.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:te.toDer(e).getBytes()};return Ie.pem.encode(r,{maxline:t})};Qe.encryptedPrivateKeyFromPem=function(e){var t=Ie.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return te.fromDer(t.body)};Qe.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Qe.wrapRsaPrivateKey(Qe.privateKeyToAsn1(e));return n=Qe.encryptPrivateKeyInfo(n,t,r),Qe.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=Ie.random.getBytesSync(16),o=Ie.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=Ie.random.getBytesSync(16),o=Ie.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=Ie.random.getBytesSync(16),o=Ie.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=Ie.random.getBytesSync(8),o=Ie.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=Ie.random.getBytesSync(8),o=Ie.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var l=Ie.pbe.opensslDeriveBytes(t,s.substr(0,8),a),u=o(l);u.start(s),u.update(te.toDer(Qe.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ie.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Ie.pem.encode(f)};Qe.decryptRsaPrivateKey=function(e,t){var r=null,n=Ie.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=Ie.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=Ie.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=Ie.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=Ie.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=Ie.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return Ie.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return Ie.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return Ie.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=Ie.util.hexToBytes(n.dekInfo.parameters),c=Ie.pbe.opensslDeriveBytes(t,o.substr(0,8),s),l=a(c);if(l.start(o),l.update(Ie.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Qe.decryptPrivateKeyInfo(te.fromDer(r),t):r=te.fromDer(r),r!==null&&(r=Qe.privateKeyFromAsn1(r)),r};Qe.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in Ie.md))throw new Error('"sha1" hash algorithm unavailable.');s=Ie.md.sha1.create();}var c=s.digestLength,l=s.blockLength,u=new Ie.util.ByteBuffer,f=new Ie.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0);}var h=f.length(),p=t.length(),m=new Ie.util.ByteBuffer;m.fillWithByte(r,l);var v=l*Math.ceil(p/l),E=new Ie.util.ByteBuffer;for(o=0;o<v;o++)E.putByte(t.at(o%p));var x=l*Math.ceil(h/l),y=new Ie.util.ByteBuffer;for(o=0;o<x;o++)y.putByte(f.at(o%h));var S=E;S.putBuffer(y);for(var N=Math.ceil(i/c),O=1;O<=N;O++){var j=new Ie.util.ByteBuffer;j.putBytes(m.bytes()),j.putBytes(S.bytes());for(var J=0;J<n;J++)s.start(),s.update(j.getBytes()),j=s.digest();var z=new Ie.util.ByteBuffer;for(o=0;o<l;o++)z.putByte(j.at(o%c));var G=Math.ceil(p/l)+Math.ceil(h/l),ee=new Ie.util.ByteBuffer;for(a=0;a<G;a++){var H=new Ie.util.ByteBuffer(S.getBytes(l)),ne=511;for(o=z.length()-1;o>=0;o--)ne=ne>>8,ne+=z.at(o)+H.at(o),H.setAt(o,ne&255);ee.putBuffer(H);}S=ee,u.putBuffer(j);}return u.truncate(u.length()-i),u};Qe.pbe.getCipher=function(e,t,r){switch(e){case Qe.oids.pkcs5PBES2:return Qe.pbe.getCipherForPBES2(e,t,r);case Qe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Qe.oids["pbewithSHAAnd40BitRC2-CBC"]:return Qe.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Qe.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!te.validate(t,IZ,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=te.derToOid(n.kdfOid),e!==Qe.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=te.derToOid(n.encOid),e!==Qe.oids["aes128-CBC"]&&e!==Qe.oids["aes192-CBC"]&&e!==Qe.oids["aes256-CBC"]&&e!==Qe.oids["des-EDE3-CBC"]&&e!==Qe.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=Ie.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,l;switch(Qe.oids[e]){case"aes128-CBC":c=16,l=Ie.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=Ie.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=Ie.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=Ie.des.createDecryptionCipher;break;case"desCBC":c=8,l=Ie.des.createDecryptionCipher;break}var u=nk(n.prfOid),f=Ie.pkcs5.pbkdf2(r,a,o,c,u),h=n.encIv,p=l(f);return p.start(h),p};Qe.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!te.validate(t,RZ,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=Ie.util.createBuffer(n.salt),o=Ie.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,l,u;switch(e){case Qe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,u=Ie.des.startDecrypting;break;case Qe.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,u=function(v,E){var x=Ie.rc2.createDecryptionCipher(v,40);return x.start(E,null),x};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=nk(n.prfOid),h=Qe.pbe.generatePkcs12Key(r,a,1,o,c,f);f.start();var p=Qe.pbe.generatePkcs12Key(r,a,2,o,l,f);return u(h,p)};Qe.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in Ie.md))throw new Error('"md5" hash algorithm unavailable.');n=Ie.md.md5.create();}t===null&&(t="");for(var i=[rk(n,e+t)],s=16,a=1;s<r;++a,s+=16)i.push(rk(n,i[a-1]+e+t));return i.join("").substr(0,r)};function rk(e,t){return e.start().update(t).digest().getBytes()}function nk(e){var t;if(!e)t="hmacWithSHA1";else if(t=Qe.oids[te.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return ik(t)}function ik(e){var t=Ie.md;switch(e){case"hmacWithSHA224":t=Ie.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function PZ(e,t,r,n){var i=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,e),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,Ie.util.hexToBytes(r.toString(16))),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Qe.oids[n]).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")])),i}});var wy=P((Toe,uk)=>{var so=Je();Kn();mt();var xe=so.asn1,ao=uk.exports=so.pkcs7asn1=so.pkcs7asn1||{};so.pkcs7=so.pkcs7||{};so.pkcs7.asn1=ao;var ak={name:"ContentInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ao.contentInfoValidator=ak;var ok={name:"EncryptedContentInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ao.envelopedDataValidator={name:"EnvelopedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(ok)};ao.encryptedDataValidator={name:"EncryptedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"}].concat(ok)};var NZ={name:"SignerInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:xe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ao.signedDataValidator={name:"SignedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},ak,{name:"SignedData.Certificates",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:xe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,capture:"signerInfos",optional:!0,value:[NZ]}]};ao.recipientInfoValidator={name:"RecipientInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};});var xy=P((Aoe,ck)=>{var na=Je();mt();na.mgf=na.mgf||{};var kZ=ck.exports=na.mgf.mgf1=na.mgf1=na.mgf1||{};kZ.create=function(e){var t={generate:function(r,n){for(var i=new na.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new na.util.ByteBuffer;o.putInt32(a),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest());}return i.truncate(i.length()-n),i.getBytes()}};return t};});var fk=P((Ioe,lk)=>{var Gf=Je();xy();lk.exports=Gf.mgf=Gf.mgf||{};Gf.mgf.mgf1=Gf.mgf1;});var Xf=P((Roe,dk)=>{var ia=Je();Tn();mt();var DZ=dk.exports=ia.pss=ia.pss||{};DZ.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=ia.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||ia.random,o={};return o.encode=function(c,l){var u,f=l-1,h=Math.ceil(f/8),p=c.digest().getBytes();if(h<n+s+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=a.getBytesSync(s):m=i.bytes();var v=new ia.util.ByteBuffer;v.fillWithByte(0,8),v.putBytes(p),v.putBytes(m),t.start(),t.update(v.getBytes());var E=t.digest().getBytes(),x=new ia.util.ByteBuffer;x.fillWithByte(0,h-s-n-2),x.putByte(1),x.putBytes(m);var y=x.getBytes(),S=h-n-1,N=r.generate(E,S),O="";for(u=0;u<S;u++)O+=String.fromCharCode(y.charCodeAt(u)^N.charCodeAt(u));var j=65280>>8*h-f&255;return O=String.fromCharCode(O.charCodeAt(0)&~j)+O.substr(1),O+E+"\xBC"},o.verify=function(c,l,u){var f,h=u-1,p=Math.ceil(h/8);if(l=l.substr(-p),p<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=p-n-1,v=l.substr(0,m),E=l.substr(m,n),x=65280>>8*p-h&255;if(v.charCodeAt(0)&x)throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(E,m),S="";for(f=0;f<m;f++)S+=String.fromCharCode(v.charCodeAt(f)^y.charCodeAt(f));S=String.fromCharCode(S.charCodeAt(0)&~x)+S.substr(1);var N=p-n-s-2;for(f=0;f<N;f++)if(S.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(N)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var O=S.substr(-s),j=new ia.util.ByteBuffer;j.fillWithByte(0,8),j.putBytes(c),j.putBytes(O),t.start(),t.update(j.getBytes());var J=t.digest().getBytes();return E===J},o};});var Qf=P((Poe,yk)=>{var qe=Je();ss();Kn();Bu();oi();fk();as();Js();Xf();Hu();mt();var T=qe.asn1,Se=yk.exports=qe.pki=qe.pki||{},pt=Se.oids,Yt={};Yt.CN=pt.commonName;Yt.commonName="CN";Yt.C=pt.countryName;Yt.countryName="C";Yt.L=pt.localityName;Yt.localityName="L";Yt.ST=pt.stateOrProvinceName;Yt.stateOrProvinceName="ST";Yt.O=pt.organizationName;Yt.organizationName="O";Yt.OU=pt.organizationalUnitName;Yt.organizationalUnitName="OU";Yt.E=pt.emailAddress;Yt.emailAddress="E";var pk=qe.pki.rsa.publicKeyValidator,LZ={name:"Certificate",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:T.Class.UNIVERSAL,type:T.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:T.Class.UNIVERSAL,type:T.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:T.Class.UNIVERSAL,type:T.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:T.Class.UNIVERSAL,type:T.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},pk,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:T.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:T.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:T.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},OZ={name:"rsapss",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:T.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:T.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:T.Class.UNIVERSAL,type:T.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:T.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:T.Class.UNIVERSAL,type:T.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},FZ={name:"CertificationRequestInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},pk,{name:"CertificationRequestInfo.attributes",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:T.Class.UNIVERSAL,type:T.Type.SET,constructed:!0}]}]}]},BZ={name:"CertificationRequest",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[FZ,{name:"CertificationRequest.signatureAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Se.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,a=0;a<e.value.length;++a){n=e.value[a];for(var o=0;o<n.value.length;++o)s={},i=n.value[o],s.type=T.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in pt&&(s.name=pt[s.type],s.name in Yt&&(s.shortName=Yt[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s);}return r};Se.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=T.derToOid(n.value[0].value),s=n.value[1].value,a=0;a<s.length;++a){var o={};if(o.type=i,o.value=s[a].value,o.valueTagClass=s[a].type,o.type in pt&&(o.name=pt[o.type],o.name in Yt&&(o.shortName=Yt[o.name])),o.type===pt.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(Se.certificateExtensionFromAsn1(o.value[c]));}t.push(o);}return t};function cs(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var Zf=function(e,t,r){var n={};if(e!==pt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:pt.sha1},mgf:{algorithmOid:pt.mgf1,hash:{algorithmOid:pt.sha1}},saltLength:20});var i={},s=[];if(!T.validate(t,OZ,i,s)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=s,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=T.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=T.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=T.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Yf=function(e){switch(pt[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return qe.md.sha1.create();case"md5WithRSAEncryption":return qe.md.md5.create();case"sha256WithRSAEncryption":return qe.md.sha256.create();case"sha384WithRSAEncryption":return qe.md.sha384.create();case"sha512WithRSAEncryption":return qe.md.sha512.create();case"RSASSA-PSS":return qe.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},gk=function(e){var t=e.certificate,r;switch(t.signatureOid){case pt.sha1WithRSAEncryption:case pt.sha1WithRSASignature:break;case pt["RSASSA-PSS"]:var n,i;if(n=pt[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=pt[t.signatureParameters.mgf.algorithmOid],i===void 0||qe.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=qe.mgf[i].create(qe.md[n].create()),n=pt[t.signatureParameters.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=qe.pss.create(qe.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};Se.certificateFromPem=function(e,t,r){var n=qe.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=T.fromDer(n.body,r);return Se.certificateFromAsn1(s,t)};Se.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:T.toDer(Se.certificateToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};Se.publicKeyFromPem=function(e){var t=qe.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=T.fromDer(t.body);return Se.publicKeyFromAsn1(n)};Se.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:T.toDer(Se.publicKeyToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};Se.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:T.toDer(Se.publicKeyToRSAPublicKey(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};Se.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||qe.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=T.toDer(Se.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=T.toDer(Se.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else {if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};Se.certificationRequestFromPem=function(e,t,r){var n=qe.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=T.fromDer(n.body,r);return Se.certificationRequestFromAsn1(s,t)};Se.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:T.toDer(Se.certificationRequestToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};Se.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return cs(e.issuer,t)},e.issuer.addField=function(t){Rn([t]),e.issuer.attributes.push(t);},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return cs(e.subject,t)},e.subject.addField=function(t){Rn([t]),e.subject.attributes.push(t);},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){Rn(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null;},e.setIssuer=function(t,r){Rn(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null;},e.setExtensions=function(t){for(var r=0;r<t.length;++r)mk(t[r],{cert:e});e.extensions=t;},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||qe.md.sha1.create();var n=pt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=Se.getTBSCertificate(e);var s=T.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md);},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var a=t.md;if(a===null){a=Yf({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||Se.getTBSCertificate(t),c=T.toDer(o);a.update(c.getBytes());}return a!==null&&(r=gk({certificate:e,md:a,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,a,o=0;r&&o<n.attributes.length;++o)s=n.attributes[o],a=i.attributes[o],(s.type!==a.type||s.value!==a.value)&&(r=!1);}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return Se.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=pt.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return qe.util.hexToBytes(n.subjectKeyIdentifier)===i}}return !1},e};Se.certificateFromAsn1=function(e,t){var r={},n=[];if(!T.validate(e,LZ,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=T.derToOid(r.publicKeyOid);if(s!==Se.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Se.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=qe.util.createBuffer(r.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=qe.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Zf(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=qe.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Zf(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(T.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(T.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(T.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(T.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,t){a.md=Yf({signatureOid:a.signatureOid,type:"certificate"});var l=T.toDer(a.tbsCertificate);a.md.update(l.getBytes());}var u=qe.md.sha1.create(),f=T.toDer(r.certIssuer);u.update(f.getBytes()),a.issuer.getField=function(m){return cs(a.issuer,m)},a.issuer.addField=function(m){Rn([m]),a.issuer.attributes.push(m);},a.issuer.attributes=Se.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=u.digest().toHex();var h=qe.md.sha1.create(),p=T.toDer(r.certSubject);return h.update(p.getBytes()),a.subject.getField=function(m){return cs(a.subject,m)},a.subject.addField=function(m){Rn([m]),a.subject.attributes.push(m);},a.subject.attributes=Se.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=h.digest().toHex(),r.certExtensions?a.extensions=Se.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Se.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Se.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(Se.certificateExtensionFromAsn1(n.value[i]));return t};Se.certificateExtensionFromAsn1=function(e){var t={};if(t.id=T.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===T.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in pt){if(t.name=pt[t.id],t.name==="keyUsage"){var r=T.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128;}else if(t.name==="basicConstraints"){var r=T.fromDer(t.value);r.value.length>0&&r.value[0].type===T.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===T.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=T.derToInteger(s));}else if(t.name==="extKeyUsage")for(var r=T.fromDer(t.value),a=0;a<r.value.length;++a){var o=T.derToOid(r.value[a].value);o in pt?t[pt[o]]=!0:t[o]=!0;}else if(t.name==="nsCertType"){var r=T.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1;}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=T.fromDer(t.value),l=0;l<r.value.length;++l){c=r.value[l];var u={type:c.type,value:c.value};switch(t.altNames.push(u),c.type){case 1:case 2:case 6:break;case 7:u.ip=qe.util.bytesToIP(c.value);break;case 8:u.oid=T.derToOid(c.value);break;}}}else if(t.name==="subjectKeyIdentifier"){var r=T.fromDer(t.value);t.subjectKeyIdentifier=qe.util.bytesToHex(r.value);}}return t};Se.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!T.validate(e,BZ,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=T.derToOid(r.publicKeyOid);if(s!==Se.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Se.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=qe.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Zf(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=qe.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Zf(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,t){a.md=Yf({signatureOid:a.signatureOid,type:"certification request"});var o=T.toDer(a.certificationRequestInfo);a.md.update(o.getBytes());}var c=qe.md.sha1.create();return a.subject.getField=function(l){return cs(a.subject,l)},a.subject.addField=function(l){Rn([l]),a.subject.attributes.push(l);},a.subject.attributes=Se.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Se.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(l){return cs(a,l)},a.addAttribute=function(l){Rn([l]),a.attributes.push(l);},a.attributes=Se.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Se.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return cs(e.subject,t)},e.subject.addField=function(t){Rn([t]),e.subject.attributes.push(t);},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return cs(e,t)},e.addAttribute=function(t){Rn([t]),e.attributes.push(t);},e.md=null,e.setSubject=function(t){Rn(t),e.subject.attributes=t,e.subject.hash=null;},e.setAttributes=function(t){Rn(t),e.attributes=t;},e.sign=function(t,r){e.md=r||qe.md.sha1.create();var n=pt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=Se.getCertificationRequestInfo(e);var s=T.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md);},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Yf({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||Se.getCertificationRequestInfo(e),i=T.toDer(n);r.update(i.getBytes());}return r!==null&&(t=gk({certificate:e,md:r,signature:e.signature})),t},e};function oo(e){for(var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var a=r.value,o=T.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===T.Type.UTF8&&(a=qe.util.encodeUtf8(a))),n=T.create(T.Class.UNIVERSAL,T.Type.SET,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(r.type).getBytes()),T.create(T.Class.UNIVERSAL,o,!1,a)])]),t.value.push(n);}return t}function Rn(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in Se.oids?t.name=Se.oids[t.type]:t.shortName&&t.shortName in Yt&&(t.name=Se.oids[Yt[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in Se.oids)t.type=Se.oids[t.name];else {var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in Yt&&(t.shortName=Yt[t.name]),t.type===pt.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=T.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(Se.certificateExtensionToAsn1(mk(t.extensions[i])));}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function mk(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in Se.oids&&(e.name=Se.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in Se.oids)e.id=Se.oids[e.name];else {var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var a=String.fromCharCode(n);s!==0?a+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(a+=String.fromCharCode(i)),e.value=T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,a);}else if(e.name==="basicConstraints")e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(T.create(T.Class.UNIVERSAL,T.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var c in e)e[c]===!0&&(c in pt?o.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(pt[c]).getBytes())):c.indexOf(".")!==-1&&o.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(c).getBytes())));}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),e.value=T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,a);}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);for(var l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var a=l.value;if(l.type===7&&l.ip){if(a=qe.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=T.oidToDer(T.oidToDer(l.oid)):a=T.oidToDer(a));e.value.value.push(T.create(T.Class.CONTEXT_SPECIFIC,l.type,!1,a));}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=T.create(T.Class.UNIVERSAL,T.Type.IA5STRING,!1,e.comment);}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,f.getBytes());}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!1,h));}if(e.authorityCertIssuer){var p=[T.create(T.Class.CONTEXT_SPECIFIC,4,!0,[oo(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,p));}if(e.serialNumber){var m=qe.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!1,m));}}else if(e.name==="cRLDistributionPoints"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);for(var o=e.value.value,v=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),E=T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[]),l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var a=l.value;if(l.type===7&&l.ip){if(a=qe.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=T.oidToDer(T.oidToDer(l.oid)):a=T.oidToDer(a));E.value.push(T.create(T.Class.CONTEXT_SPECIFIC,l.type,!1,a));}v.value.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[E])),o.push(v);}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function Ty(e,t){switch(e){case pt["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.hash.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.mgf.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.mgf.hash.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(t.saltLength).getBytes())])),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,r);default:return T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")}}function MZ(e){var t=T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,a=T.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===T.Type.UTF8&&(s=qe.util.encodeUtf8(s));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var c=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(i.type).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SET,!0,[T.create(T.Class.UNIVERSAL,a,o,s)])]);t.value.push(c);}return t}var qZ=new Date("1950-01-01T00:00:00Z"),HZ=new Date("2050-01-01T00:00:00Z");function hk(e){return e>=qZ&&e<HZ?T.create(T.Class.UNIVERSAL,T.Type.UTCTIME,!1,T.dateToUtcTime(e)):T.create(T.Class.UNIVERSAL,T.Type.GENERALIZEDTIME,!1,T.dateToGeneralizedTime(e))}Se.getTBSCertificate=function(e){var t=hk(e.validity.notBefore),r=hk(e.validity.notAfter),n=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.version).getBytes())]),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,qe.util.hexToBytes(e.serialNumber)),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.siginfo.algorithmOid).getBytes()),Ty(e.siginfo.algorithmOid,e.siginfo.parameters)]),oo(e.issuer),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,r]),oo(e.subject),Se.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,[T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!0,[T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(Se.certificateExtensionsToAsn1(e.extensions)),n};Se.getCertificationRequestInfo=function(e){var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.version).getBytes()),oo(e.subject),Se.publicKeyToAsn1(e.publicKey),MZ(e)]);return t};Se.distinguishedNameToAsn1=function(e){return oo(e)};Se.certificateToAsn1=function(e){var t=e.tbsCertificate||Se.getTBSCertificate(e);return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.signatureOid).getBytes()),Ty(e.signatureOid,e.signatureParameters)]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.signature)])};Se.certificateExtensionsToAsn1=function(e){var t=T.create(T.Class.CONTEXT_SPECIFIC,3,!0,[]),r=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(Se.certificateExtensionToAsn1(e[n]));return t};Se.certificateExtensionToAsn1=function(e){var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);t.value.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.id).getBytes())),e.critical&&t.value.push(T.create(T.Class.UNIVERSAL,T.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=T.toDer(r).getBytes()),t.value.push(T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,r)),t};Se.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||Se.getCertificationRequestInfo(e);return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.signatureOid).getBytes()),Ty(e.signatureOid,e.signatureParameters)]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.signature)])};Se.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(a){var o=r(a.issuer);return o},t.addCertificate=function(a){if(typeof a=="string"&&(a=qe.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))if(a.subject.hash in t.certs){var o=t.certs[a.subject.hash];qe.util.isArray(o)||(o=[o]),o.push(a),t.certs[a.subject.hash]=o;}else t.certs[a.subject.hash]=a;},t.hasCertificate=function(a){typeof a=="string"&&(a=qe.pki.certificateFromPem(a));var o=r(a.subject);if(!o)return !1;qe.util.isArray(o)||(o=[o]);for(var c=T.toDer(Se.certificateToAsn1(a)).getBytes(),l=0;l<o.length;++l){var u=T.toDer(Se.certificateToAsn1(o[l])).getBytes();if(c===u)return !0}return !1},t.listAllCertificates=function(){var a=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var c=t.certs[o];if(!qe.util.isArray(c))a.push(c);else for(var l=0;l<c.length;++l)a.push(c[l]);}return a},t.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=qe.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))return null;var c=r(a.subject);if(!qe.util.isArray(c))return o=t.certs[a.subject.hash],delete t.certs[a.subject.hash],o;for(var l=T.toDer(Se.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=T.toDer(Se.certificateToAsn1(c[u])).getBytes();l===f&&(o=c[u],c.splice(u,1));}return c.length===0&&delete t.certs[a.subject.hash],o};function r(a){return n(a),t.certs[a.hash]||null}function n(a){if(!a.hash){var o=qe.md.sha1.create();a.attributes=Se.RDNAttributesAsArray(oo(a),o),a.hash=o.digest().toHex();}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s);}return t};Se.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Se.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,a=null,o=0;do{var c=t.shift(),l=null,u=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Se.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(l=t[0]||e.getIssuer(c),l===null&&c.isIssuer(c)&&(u=!0,l=c),l){var f=l;qe.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){l=f.shift();try{h=l.verify(c);}catch{}}h||(a={message:"Certificate signature is invalid.",error:Se.certificateError.bad_certificate});}a===null&&(!l||u)&&!e.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Se.certificateError.unknown_ca});}if(a===null&&l&&!c.isIssuer(l)&&(a={message:"Certificate issuer is invalid.",error:Se.certificateError.bad_certificate}),a===null)for(var p={keyUsage:!0,basicConstraints:!0},m=0;a===null&&m<c.extensions.length;++m){var v=c.extensions[m];v.critical&&!(v.name in p)&&(a={message:"Certificate has an unsupported critical extension.",error:Se.certificateError.unsupported_certificate});}if(a===null&&(!s||t.length===0&&(!l||u))){var E=c.getExtension("basicConstraints"),x=c.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Se.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Se.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in E){var y=o-1;y>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Se.certificateError.bad_certificate});}}var S=a===null?!0:a.error,N=r.verify?r.verify(S,o,n):S;if(N===!0)a=null;else throw S===!0&&(a={message:"The application rejected the certificate.",error:Se.certificateError.bad_certificate}),(N||N===0)&&(typeof N=="object"&&!qe.util.isArray(N)?(N.message&&(a.message=N.message),N.error&&(a.error=N.error)):typeof N=="string"&&(a.error=N)),a;s=!1,++o;}while(t.length>0);return !0};});var Iy=P((Noe,vk)=>{var Bt=Je();Kn();eo();as();wy();Cy();Tn();Hu();io();mt();Qf();var B=Bt.asn1,st=Bt.pki,$u=vk.exports=Bt.pkcs12=Bt.pkcs12||{},_k={name:"ContentInfo",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},UZ={name:"PFX",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,capture:"version"},_k,{name:"PFX.macData",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:B.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:B.Class.UNIVERSAL,type:B.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:B.Class.UNIVERSAL,type:B.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},$Z={name:"SafeBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},jZ={name:"Attribute",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:B.Class.UNIVERSAL,type:B.Type.SET,constructed:!0,capture:"values"}]},VZ={name:"CertBag",tagClass:B.Class.UNIVERSAL,type:B.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:B.Class.UNIVERSAL,type:B.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:B.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:B.Class.UNIVERSAL,type:B.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Uu(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o);}}return i}$u.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!B.validate(e,UZ,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var x={},y;return "localKeyId"in E?y=E.localKeyId:"localKeyIdHex"in E&&(y=Bt.util.hexToBytes(E.localKeyIdHex)),y===void 0&&!("friendlyName"in E)&&"bagType"in E&&(x[E.bagType]=Uu(a.safeContents,null,null,E.bagType)),y!==void 0&&(x.localKeyId=Uu(a.safeContents,"localKeyId",y,E.bagType)),"friendlyName"in E&&(x.friendlyName=Uu(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),x},getBagsByFriendlyName:function(E,x){return Uu(a.safeContents,"friendlyName",E,x)},getBagsByLocalKeyId:function(E,x){return Uu(a.safeContents,"localKeyId",E,x)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(B.derToOid(n.contentType)!==st.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=B.derToOid(n.contentType),s}var o=n.content.value[0];if(o.tagClass!==B.Class.UNIVERSAL||o.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Ay(o),n.mac){var c=null,l=0,u=B.derToOid(n.macAlgorithm);switch(u){case st.oids.sha1:c=Bt.md.sha1.create(),l=20;break;case st.oids.sha256:c=Bt.md.sha256.create(),l=32;break;case st.oids.sha384:c=Bt.md.sha384.create(),l=48;break;case st.oids.sha512:c=Bt.md.sha512.create(),l=64;break;case st.oids.md5:c=Bt.md.md5.create(),l=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var f=new Bt.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Bt.util.bytesToHex(n.macIterations),16):1,p=$u.generateKey(r,f,3,h,l,c),m=Bt.hmac.create();m.start(c,p),m.update(o.value);var v=m.getMac();if(v.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return WZ(a,o.value,t,r),a};function Ay(e){if(e.composed||e.constructed){for(var t=Bt.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes();}return e}function WZ(e,t,r,n){if(t=B.fromDer(t,r),t.tagClass!==B.Class.UNIVERSAL||t.type!==B.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],a={},o=[];if(!B.validate(s,_k,a,o)){var c=new Error("Cannot read ContentInfo.");throw c.errors=o,c}var l={encrypted:!1},u=null,f=a.content.value[0];switch(B.derToOid(a.contentType)){case st.oids.data:if(f.tagClass!==B.Class.UNIVERSAL||f.type!==B.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=Ay(f).value;break;case st.oids.encryptedData:u=KZ(f,n),l.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=B.derToOid(a.contentType),c}l.safeBags=zZ(u,r,n),e.safeContents.push(l);}}function KZ(e,t){var r={},n=[];if(!B.validate(e,Bt.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=B.derToOid(r.contentType);if(s!==st.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=B.derToOid(r.encAlgorithm);var a=st.pbe.getCipher(s,r.encParameter,t),o=Ay(r.encryptedContentAsn1),c=Bt.util.createBuffer(o.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function zZ(e,t,r){if(!t&&e.length===0)return [];if(e=B.fromDer(e,t),e.tagClass!==B.Class.UNIVERSAL||e.type!==B.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],a={},o=[];if(!B.validate(s,$Z,a,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var l={type:B.derToOid(a.bagId),attributes:GZ(a.bagAttributes)};n.push(l);var u,f,h=a.bagValue.value[0];switch(l.type){case st.oids.pkcs8ShroudedKeyBag:if(h=st.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case st.oids.keyBag:try{l.key=st.privateKeyFromAsn1(h);}catch{l.key=null,l.asn1=h;}continue;case st.oids.certBag:u=VZ,f=function(){if(B.derToOid(a.certId)!==st.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=B.derToOid(a.certId),m}var v=B.fromDer(a.cert,t);try{l.cert=st.certificateFromAsn1(v,!0);}catch{l.cert=null,l.asn1=v;}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=l.type,c}if(u!==void 0&&!B.validate(h,u,a,o)){var c=new Error("Cannot read PKCS#12 "+u.name);throw c.errors=o,c}f();}return n}function GZ(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!B.validate(e[r],jZ,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var a=B.derToOid(n.oid);if(st.oids[a]!==void 0){t[st.oids[a]]=[];for(var o=0;o<n.values.length;++o)t[st.oids[a]].push(n.values[o].value);}}return t}$u.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=Bt.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var a=Bt.util.isArray(t)?t[0]:t;typeof a=="string"&&(a=st.certificateFromPem(a));var o=Bt.md.sha1.create();o.update(B.toDer(st.certificateToAsn1(a)).getBytes()),i=o.digest().getBytes();}else i=Bt.random.getBytes(20);var c=[];i!==null&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.localKeyId).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.friendlyName).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[B.create(B.Class.UNIVERSAL,B.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(s=B.create(B.Class.UNIVERSAL,B.Type.SET,!0,c));var l=[],u=[];t!==null&&(Bt.util.isArray(t)?u=t:u=[t]);for(var f=[],h=0;h<u.length;++h){t=u[h],typeof t=="string"&&(t=st.certificateFromPem(t));var p=h===0?s:void 0,m=st.certificateToAsn1(t),v=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.certBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.x509Certificate).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(m).getBytes())])])]),p]);f.push(v);}if(f.length>0){var E=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,f),x=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(E).getBytes())])]);l.push(x);}var y=null;if(e!==null){var S=st.wrapRsaPrivateKey(st.privateKeyToAsn1(e));r===null?y=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.keyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[S]),s]):y=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.pkcs8ShroudedKeyBag).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[st.encryptPrivateKeyInfo(S,r,n)]),s]);var N=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[y]),O=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(N).getBytes())])]);l.push(O);}var j=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,l),J;if(n.useMac){var o=Bt.md.sha1.create(),z=new Bt.util.ByteBuffer(Bt.random.getBytes(n.saltSize)),G=n.count,e=$u.generateKey(r,z,3,G,20),ee=Bt.hmac.create();ee.start(o,e),ee.update(B.toDer(j).getBytes());var H=ee.getMac();J=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.sha1).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,H.getBytes())]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,z.getBytes()),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(G).getBytes())]);}return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(3).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(st.oids.data).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,B.toDer(j).getBytes())])]),J])};$u.generateKey=Bt.pbe.generatePkcs12Key;});var Py=P((koe,Sk)=>{var ls=Je();Kn();as();Cy();Js();$f();Iy();Xf();Hu();mt();Qf();var Ry=ls.asn1,uo=Sk.exports=ls.pki=ls.pki||{};uo.pemToDer=function(e){var t=ls.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return ls.util.createBuffer(t.body)};uo.privateKeyFromPem=function(e){var t=ls.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ry.fromDer(t.body);return uo.privateKeyFromAsn1(n)};uo.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Ry.toDer(uo.privateKeyToAsn1(e)).getBytes()};return ls.pem.encode(r,{maxline:t})};uo.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Ry.toDer(e).getBytes()};return ls.pem.encode(r,{maxline:t})};});var Fy=P((Doe,Ik)=>{var de=Je();Kn();eo();Mf();Js();Py();Tn();io();mt();var rd=function(e,t,r,n){var i=de.util.createBuffer(),s=e.length>>1,a=s+(e.length&1),o=e.substr(0,a),c=e.substr(s,a),l=de.util.createBuffer(),u=de.hmac.create();r=t+r;var f=Math.ceil(n/16),h=Math.ceil(n/20);u.start("MD5",o);var p=de.util.createBuffer();l.putBytes(r);for(var m=0;m<f;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),p.putBuffer(u.digest());u.start("SHA1",c);var v=de.util.createBuffer();l.clear(),l.putBytes(r);for(var m=0;m<h;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),v.putBuffer(u.digest());return i.putBytes(de.util.xorBytes(p.getBytes(),v.getBytes(),n)),i},XZ=function(e,t,r){var n=de.hmac.create();n.start("SHA1",e);var i=de.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},ZZ=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=de.util.createBuffer(i),t.length=i.length,n=!0;}catch{}return n},YZ=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=de.util.createBuffer(i),t.length=i.length,n=!0;}catch{}return n},gn=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return de.util.createBuffer(e.getBytes(r))},Pn=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r);},R={};R.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};R.SupportedVersions=[R.Versions.TLS_1_1,R.Versions.TLS_1_0];R.Version=R.SupportedVersions[0];R.MaxFragment=15360;R.ConnectionEnd={server:0,client:1};R.PRFAlgorithm={tls_prf_sha256:0};R.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};R.CipherType={stream:0,block:1,aead:2};R.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};R.CompressionMethod={none:0,deflate:1};R.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};R.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};R.Alert={};R.Alert.Level={warning:1,fatal:2};R.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};R.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};R.CipherSuites={};R.getCipherSuite=function(e){var t=null;for(var r in R.CipherSuites){var n=R.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};R.handleUnexpected=function(e,t){var r=!e.open&&e.entity===R.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.unexpected_message}});};R.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(R.queue(e,R.createAlert(e,{level:R.Alert.Level.warning,description:R.Alert.Description.no_renegotiation})),R.flush(e)),e.process();};R.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===R.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}});else {var s=t.fragment,a=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:de.util.createBuffer(s.getBytes(32)),session_id:gn(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=gn(s,2),n.compression_methods=gn(s,1)),a=r-(a-s.length()),a>0){for(var o=gn(s,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:gn(o,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var l=n.extensions[c];if(l.type[0]===0&&l.type[1]===0)for(var u=gn(l.data,2);u.length()>0;){var f=u.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(gn(u,2).getBytes());}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=R.getCipherSuite(n.cipher_suite);else for(var h=de.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=R.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.handshake_failure},cipherSuite:de.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=R.CompressionMethod.none;}return n};R.createSecurityParameters=function(e,t){var r=e.entity===R.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:R.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:R.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s};};R.handleServerHello=function(e,t,r){var n=R.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=Ck,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=JZ,e.session.resuming=!1,R.createSecurityParameters(e,n)),e.session.id=i,e.process();}};R.handleClientHello=function(e,t,r){var n=R.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=de.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else {for(var a,o=1;o<R.SupportedVersions.length&&(a=R.SupportedVersions[o],!(a.minor<=n.version.minor));++o);e.version={major:a.major,minor:a.minor},e.session.version=e.version;}s!==null?(e.expect=Ly,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?aY:Dy,e.session.resuming=!1,R.createSecurityParameters(e,n)),e.open=!0,R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createServerHello(e)})),e.session.resuming?(R.queue(e,R.createRecord(e,{type:R.ContentType.change_cipher_spec,data:R.createChangeCipherSpec()})),e.state.pending=R.createConnectionState(e),e.state.current.write=e.state.pending.write,R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createFinished(e)}))):(R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createCertificate(e)})),e.fail||(R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createServerKeyExchange(e)})),e.verifyClient!==!1&&R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createCertificateRequest(e)})),R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createServerHelloDone(e)})))),R.flush(e),e.process();}};R.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:gn(n,3)},s,a,o=[];try{for(;i.certificate_list.length()>0;)s=gn(i.certificate_list,3),a=de.asn1.fromDer(s),s=de.pki.certificateFromAsn1(a,!0),o.push(s);}catch(l){return e.error(e,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.bad_certificate}})}var c=e.entity===R.ConnectionEnd.client;(c||e.verifyClient===!0)&&o.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}}):o.length===0?e.expect=c?bk:Dy:(c?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],R.verifyCertificateChain(e,o)&&(e.expect=c?bk:Dy)),e.process();};R.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.unsupported_certificate}});e.expect=eY,e.process();};R.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:gn(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=de.pki.privateKeyFromPem(s);}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}});}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}});try{var a=e.session.sp;a.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=de.random.getBytes(48);}e.expect=Ly,e.session.clientCertificate!==null&&(e.expect=oY),e.process();};R.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:gn(n,1),certificate_authorities:gn(n,2)};e.session.certificateRequest=i,e.expect=tY,e.process();};R.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:gn(n,2).getBytes()},a=de.util.createBuffer();a.putBuffer(e.session.md5.digest()),a.putBuffer(e.session.sha1.digest()),a=a.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(a,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i);}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.handshake_failure}})}e.expect=Ly,e.process();};R.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return (s||s===0)&&(typeof s=="object"&&!de.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=R.createRecord(e,{type:R.ContentType.handshake,data:R.createCertificate(e)}),R.queue(e,t)),t=R.createRecord(e,{type:R.ContentType.handshake,data:R.createClientKeyExchange(e)}),R.queue(e,t),e.expect=iY;var a=function(o,c){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&R.queue(o,R.createRecord(o,{type:R.ContentType.handshake,data:R.createCertificateVerify(o,c)})),R.queue(o,R.createRecord(o,{type:R.ContentType.change_cipher_spec,data:R.createChangeCipherSpec()})),o.state.pending=R.createConnectionState(o),o.state.current.write=o.state.pending.write,R.queue(o,R.createRecord(o,{type:R.ContentType.handshake,data:R.createFinished(o)})),o.expect=Ck,R.flush(o),o.process();};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return a(e,null);R.getClientSignature(e,a);};R.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.illegal_parameter}});var r=e.entity===R.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=R.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?rY:uY,e.process();};R.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=de.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var a=e.entity===R.ConnectionEnd.client,o=a?"server finished":"client finished",c=e.session.sp,l=12,u=rd;if(n=u(c.master_secret,o,n.getBytes(),l),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&a||!e.session.resuming&&!a)&&(R.queue(e,R.createRecord(e,{type:R.ContentType.change_cipher_spec,data:R.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,R.queue(e,R.createRecord(e,{type:R.ContentType.handshake,data:R.createFinished(e)}))),e.expect=a?nY:cY,e.handshaking=!1,++e.handshakes,e.peerCertificate=a?e.session.serverCertificate:e.session.clientCertificate,R.flush(e),e.isConnected=!0,e.connected(e),e.process();};R.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case R.Alert.Description.close_notify:i="Connection closed.";break;case R.Alert.Description.unexpected_message:i="Unexpected message.";break;case R.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case R.Alert.Description.decryption_failed:i="Decryption failed.";break;case R.Alert.Description.record_overflow:i="Record overflow.";break;case R.Alert.Description.decompression_failure:i="Decompression failed.";break;case R.Alert.Description.handshake_failure:i="Handshake failure.";break;case R.Alert.Description.bad_certificate:i="Bad certificate.";break;case R.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case R.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case R.Alert.Description.certificate_expired:i="Certificate expired.";break;case R.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case R.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case R.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case R.Alert.Description.access_denied:i="Access denied.";break;case R.Alert.Description.decode_error:i="Decode error.";break;case R.Alert.Description.decrypt_error:i="Decrypt error.";break;case R.Alert.Description.export_restriction:i="Export restriction.";break;case R.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case R.Alert.Description.insufficient_security:i="Insufficient security.";break;case R.Alert.Description.internal_error:i="Internal error.";break;case R.Alert.Description.user_canceled:i="User canceled.";break;case R.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===R.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===R.ConnectionEnd.client?"server":"client",alert:n}),e.process();};R.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=de.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in td[e.entity][e.expect]?(e.entity===R.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:de.md.md5.create(),sha1:de.md.sha1.create()}),n!==R.HandshakeType.hello_request&&n!==R.HandshakeType.certificate_verify&&n!==R.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),td[e.entity][e.expect][n](e,t,i)):R.handleUnexpected(e,t);};R.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process();};R.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===R.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();R.queue(e,R.createRecord(e,{type:R.ContentType.heartbeat,data:R.createHeartbeat(R.HeartbeatMessageType.heartbeat_response,s)})),R.flush(e);}else if(n===R.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,de.util.createBuffer(s));}e.process();};var QZ=0,JZ=1,bk=2,eY=3,tY=4,Ck=5,rY=6,nY=7,iY=8,sY=0,aY=1,Dy=2,oY=3,Ly=4,uY=5,cY=6,I=R.handleUnexpected,wk=R.handleChangeCipherSpec,Cr=R.handleAlert,Vr=R.handleHandshake,xk=R.handleApplicationData,wr=R.handleHeartbeat,Oy=[];Oy[R.ConnectionEnd.client]=[[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[wk,Cr,I,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,xk,wr],[I,Cr,Vr,I,wr]];Oy[R.ConnectionEnd.server]=[[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,I,wr],[wk,Cr,I,I,wr],[I,Cr,Vr,I,wr],[I,Cr,Vr,xk,wr],[I,Cr,Vr,I,wr]];var ds=R.handleHelloRequest,lY=R.handleServerHello,Tk=R.handleCertificate,Ek=R.handleServerKeyExchange,Ny=R.handleCertificateRequest,Jf=R.handleServerHelloDone,Ak=R.handleFinished,td=[];td[R.ConnectionEnd.client]=[[I,I,lY,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,Tk,Ek,Ny,Jf,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,Ek,Ny,Jf,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,I,Ny,Jf,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,I,I,Jf,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,Ak],[ds,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[ds,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I]];var fY=R.handleClientHello,dY=R.handleClientKeyExchange,hY=R.handleCertificateVerify;td[R.ConnectionEnd.server]=[[I,fY,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,Tk,I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,dY,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,hY,I,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,Ak],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I]];R.generateKeys=function(e,t){var r=rd,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===R.Versions.TLS_1_0.major&&e.version.minor===R.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var a=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return s&&(o.client_write_IV=a.getBytes(t.fixed_iv_length),o.server_write_IV=a.getBytes(t.fixed_iv_length)),o};R.createConnectionState=function(e){var t=e.entity===R.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return !0},compressionState:null,compressFunction:function(a){return !0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1];}};return s},n={read:r(),write:r()};if(n.read.update=function(s,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(s,a,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,a){return n.write.compressFunction(s,a,n.write)?n.write.cipherFunction(a,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=R.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case R.CompressionMethod.none:break;case R.CompressionMethod.deflate:n.read.compressFunction=YZ,n.write.compressFunction=ZZ;break;default:throw new Error("Unsupported compression algorithm.")}}return n};R.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=de.util.createBuffer();return r.putInt32(t),r.putBytes(de.random.getBytes(28)),r};R.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};R.createAlert=function(e,t){var r=de.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),R.createRecord(e,{type:R.ContentType.alert,data:r})};R.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=de.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1]);}var i=t.length(),s=de.util.createBuffer();s.putByte(R.CompressionMethod.none);var a=s.length(),o=de.util.createBuffer();if(e.virtualHost){var c=de.util.createBuffer();c.putByte(0),c.putByte(0);var l=de.util.createBuffer();l.putByte(0),Pn(l,2,de.util.createBuffer(e.virtualHost));var u=de.util.createBuffer();Pn(u,2,l),Pn(c,2,u),o.putBuffer(c);}var f=o.length();f>0&&(f+=2);var h=e.session.id,p=h.length+1+2+4+28+2+i+1+a+f,m=de.util.createBuffer();return m.putByte(R.HandshakeType.client_hello),m.putInt24(p),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),Pn(m,1,de.util.createBuffer(h)),Pn(m,2,t),Pn(m,1,s),f>0&&Pn(m,2,o),m};R.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=de.util.createBuffer();return n.putByte(R.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),Pn(n,1,de.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};R.createCertificate=function(e){var t=e.entity===R.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n);}var i=de.util.createBuffer();if(r!==null)try{de.util.isArray(r)||(r=[r]);for(var s=null,a=0;a<r.length;++a){var o=de.pem.decode(r[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=de.util.createBuffer(o.body);s===null&&(s=de.asn1.fromDer(l.bytes(),!1));var u=de.util.createBuffer();Pn(u,3,l),i.putBuffer(u);}r=de.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r;}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.bad_certificate}})}var f=3+i.length(),h=de.util.createBuffer();return h.putByte(R.HandshakeType.certificate),h.putInt24(f),Pn(h,3,i),h};R.createClientKeyExchange=function(e){var t=de.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(de.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=de.util.createBuffer();return s.putByte(R.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};R.createServerKeyExchange=function(e){var r=de.util.createBuffer();return r};R.getClientSignature=function(e,t){var r=de.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=de.pki.privateKeyFromPem(a);}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}});}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.internal_error}}):i=a.sign(i,null),s(n,i);},e.getSignature(e,r,t);};R.createCertificateVerify=function(e,t){var r=t.length+2,n=de.util.createBuffer();return n.putByte(R.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};R.createCertificateRequest=function(e){var t=de.util.createBuffer();t.putByte(1);var r=de.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=de.pki.distinguishedNameToAsn1(i.subject),a=de.asn1.toDer(s);r.putInt16(a.length()),r.putBuffer(a);}var o=1+t.length()+2+r.length(),c=de.util.createBuffer();return c.putByte(R.HandshakeType.certificate_request),c.putInt24(o),Pn(c,1,t),Pn(c,2,r),c};R.createServerHelloDone=function(e){var t=de.util.createBuffer();return t.putByte(R.HandshakeType.server_hello_done),t.putInt24(0),t};R.createChangeCipherSpec=function(){var e=de.util.createBuffer();return e.putByte(1),e};R.createFinished=function(e){var t=de.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===R.ConnectionEnd.client,n=e.session.sp,i=12,s=rd,a=r?"client finished":"server finished";t=s(n.master_secret,a,t.getBytes(),i);var o=de.util.createBuffer();return o.putByte(R.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};R.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=de.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(de.random.getBytes(s)),n};R.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===R.ContentType.handshake||t.type===R.ContentType.alert||t.type===R.ContentType.change_cipher_spec))){if(t.type===R.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null;}var n;if(t.fragment.length()<=R.MaxFragment)n=[t];else {n=[];for(var i=t.fragment.bytes();i.length>R.MaxFragment;)n.push(R.createRecord(e,{type:t.type,data:de.util.createBuffer(i.slice(0,R.MaxFragment))})),i=i.slice(R.MaxFragment);i.length>0&&n.push(R.createRecord(e,{type:t.type,data:de.util.createBuffer(i)}));}for(var s=0;s<n.length&&!e.fail;++s){var a=n[s],o=e.state.current.write;o.update(e,a)&&e.records.push(a);}}};R.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment);}return e.records=[],e.tlsDataReady(e)};var ky=function(e){switch(e){case!0:return !0;case de.pki.certificateError.bad_certificate:return R.Alert.Description.bad_certificate;case de.pki.certificateError.unsupported_certificate:return R.Alert.Description.unsupported_certificate;case de.pki.certificateError.certificate_revoked:return R.Alert.Description.certificate_revoked;case de.pki.certificateError.certificate_expired:return R.Alert.Description.certificate_expired;case de.pki.certificateError.certificate_unknown:return R.Alert.Description.certificate_unknown;case de.pki.certificateError.unknown_ca:return R.Alert.Description.unknown_ca;default:return R.Alert.Description.bad_certificate}},pY=function(e){switch(e){case!0:return !0;case R.Alert.Description.bad_certificate:return de.pki.certificateError.bad_certificate;case R.Alert.Description.unsupported_certificate:return de.pki.certificateError.unsupported_certificate;case R.Alert.Description.certificate_revoked:return de.pki.certificateError.certificate_revoked;case R.Alert.Description.certificate_expired:return de.pki.certificateError.certificate_expired;case R.Alert.Description.certificate_unknown:return de.pki.certificateError.certificate_unknown;case R.Alert.Description.unknown_ca:return de.pki.certificateError.unknown_ca;default:return de.pki.certificateError.bad_certificate}};R.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,a,o){var l=e.verify(e,s,a,o);if(l!==!0){if(typeof l=="object"&&!de.util.isArray(l)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:R.Alert.Level.fatal,description:R.Alert.Description.bad_certificate},l.message&&(u.message=l.message),l.alert&&(u.alert.description=l.alert),u}l!==s&&(l=pY(l));}return l},de.pki.verifyCertificateChain(e.caStore,t,r);}catch(s){var i=s;(typeof i!="object"||de.util.isArray(i))&&(i={send:!0,alert:{level:R.Alert.Level.fatal,description:ky(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:R.Alert.Level.fatal,description:ky(i.error)}),e.error(e,i);}return !e.fail};R.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else {r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,a=null;if(i?a=de.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){s=r.cache[a],delete r.cache[a];for(var o in r.order)if(r.order[o]===a){r.order.splice(o,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a];}var a=de.util.bytesToHex(i);r.order.push(a),r.cache[a]=s;};}return r};R.createConnection=function(e){var t=null;e.caStore?de.util.isArray(e.caStore)?t=de.pki.createCaStore(e.caStore):t=e.caStore:t=de.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in R.CipherSuites)r.push(R.CipherSuites[n]);}var i=e.server?R.ConnectionEnd.server:R.ConnectionEnd.client,s=e.sessionCache?R.createSessionCache(e.sessionCache):null,a={version:{major:R.Version.major,minor:R.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,f,h,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:de.util.createBuffer(),tlsData:de.util.createBuffer(),data:de.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,f){f.origin=f.origin||(u.entity===R.ConnectionEnd.client?"client":"server"),f.send&&(R.queue(u,R.createAlert(u,f.alert)),R.flush(u));var h=f.fatal!==!1;h&&(u.fail=!0),e.error(u,f),h&&u.close(!1);},deflate:e.deflate||null,inflate:e.inflate||null};a.reset=function(u){a.version={major:R.Version.major,minor:R.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===R.ConnectionEnd.client?QZ:sY,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(u||typeof u>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=R.createConnectionState(a);},a.reset();var o=function(u,f){var h=f.type-R.ContentType.change_cipher_spec,p=Oy[u.entity][u.expect];h in p?p[h](u,f):R.handleUnexpected(u,f);},c=function(u){var f=0,h=u.input,p=h.length();if(p<5)f=5-p;else {u.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:de.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.protocol_version}});}return f},l=function(u){var f=0,h=u.input,p=h.length();if(p<u.record.length)f=u.record.length-p;else {u.record.fragment.putBytes(h.getBytes(u.record.length)),h.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:R.Alert.Level.fatal,description:R.Alert.Description.unexpected_message}})),u.record.ready=!0);}return f};return a.handshake=function(u){if(a.entity!==R.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else {a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,u=u||"";var f=null;u.length>0&&(a.sessionCache&&(f=a.sessionCache.getSession(u)),f===null&&(u="")),u.length===0&&a.sessionCache&&(f=a.sessionCache.getSession(),f!==null&&(u=f.id)),a.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:de.md.md5.create(),sha1:de.md.sha1.create()},f&&(a.version=f.version,a.session.sp=f.sp),a.session.sp.client_random=R.createRandom().getBytes(),a.open=!0,R.queue(a,R.createRecord(a,{type:R.ContentType.handshake,data:R.createClientHello(a)})),R.flush(a);}},a.process=function(u){var f=0;return u&&a.input.putBytes(u),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(f=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(f=l(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),f},a.prepare=function(u){return R.queue(a,R.createRecord(a,{type:R.ContentType.application_data,data:de.util.createBuffer(u)})),R.flush(a)},a.prepareHeartbeatRequest=function(u,f){return u instanceof de.util.ByteBuffer&&(u=u.bytes()),typeof f>"u"&&(f=u.length),a.expectedHeartbeatPayload=u,R.queue(a,R.createRecord(a,{type:R.ContentType.heartbeat,data:R.createHeartbeat(R.HeartbeatMessageType.heartbeat_request,u,f)})),R.flush(a)},a.close=function(u){if(!a.fail&&a.sessionCache&&a.session){var f={id:a.session.id,version:a.session.version,sp:a.session.sp};f.sp.keys=null,a.sessionCache.setSession(f.id,f);}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,R.queue(a,R.createAlert(a,{level:R.Alert.Level.warning,description:R.Alert.Description.close_notify})),R.flush(a)),a.closed(a)),a.reset(u);},a};Ik.exports=de.tls=de.tls||{};for(ed in R)typeof R[ed]!="function"&&(de.tls[ed]=R[ed]);var ed;de.tls.prf_tls1=rd;de.tls.hmac_sha1=XZ;de.tls.createSessionCache=R.createSessionCache;de.tls.createConnection=R.createConnection;});var Nk=P((Loe,Pk)=>{var hs=Je();ss();Fy();var Nn=Pk.exports=hs.tls;Nn.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Nn.BulkCipherAlgorithm.aes,e.cipher_type=Nn.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Nn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20;},initConnectionState:Rk};Nn.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Nn.BulkCipherAlgorithm.aes,e.cipher_type=Nn.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Nn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20;},initConnectionState:Rk};function Rk(e,t,r){var n=t.entity===hs.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:hs.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:hs.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=_Y,e.write.cipherFunction=gY,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=Nn.hmac_sha1;}function gY(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===Nn.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=hs.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=Nn.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(mY)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function mY(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n);}return !0}function yY(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)n=n&&t.at(a)==s;n&&t.truncate(s+1);}return n}function _Y(e,t){var r=!1,n;e.version.minor===Nn.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(yY);var s=t.macLength,a=hs.random.getBytesSync(s),o=i.output.length();o>=s?(e.fragment=i.output.getBytes(o-s),a=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=hs.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=vY(t.macKey,a,c)&&r,r}function vY(e,t,r){var n=hs.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var qy=P((Ooe,Ok)=>{var Ut=Je();oi();mt();var ju=Ok.exports=Ut.sha512=Ut.sha512||{};Ut.md.sha512=Ut.md.algorithms.sha512=ju;var Dk=Ut.sha384=Ut.sha512.sha384=Ut.sha512.sha384||{};Dk.create=function(){return ju.create("SHA-384")};Ut.md.sha384=Ut.md.algorithms.sha384=Dk;Ut.sha512.sha256=Ut.sha512.sha256||{create:function(){return ju.create("SHA-512/256")}};Ut.md["sha512/256"]=Ut.md.algorithms["sha512/256"]=Ut.sha512.sha256;Ut.sha512.sha224=Ut.sha512.sha224||{create:function(){return ju.create("SHA-512/224")}};Ut.md["sha512/224"]=Ut.md.algorithms["sha512/224"]=Ut.sha512.sha224;ju.create=function(e){if(Lk||SY(),typeof e>"u"&&(e="SHA-512"),!(e in sa))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=sa[e],r=null,n=Ut.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);n=Ut.util.createBuffer(),r=new Array(t.length);for(var l=0;l<t.length;++l)r[l]=t[l].slice(0);return o},o.start(),o.update=function(c,l){l==="utf8"&&(c=Ut.util.encodeUtf8(c));var u=c.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=u[1],u[1]=u[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),kk(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=Ut.util.createBuffer();c.putBytes(n.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,u=l&o.blockLength-1;c.putBytes(By.substr(0,o.blockLength-u));for(var f,h,p=o.fullMessageLength[0]*8,m=0;m<o.fullMessageLength.length-1;++m)f=o.fullMessageLength[m+1]*8,h=f/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=f>>>0;c.putInt32(p);for(var v=new Array(r.length),m=0;m<r.length;++m)v[m]=r[m].slice(0);kk(v,i,c);var E=Ut.util.createBuffer(),x;e==="SHA-512"?x=v.length:e==="SHA-384"?x=v.length-2:x=v.length-4;for(var m=0;m<x;++m)E.putInt32(v[m][0]),(m!==x-1||e!=="SHA-512/224")&&E.putInt32(v[m][1]);return E},o};var By=null,Lk=!1,My=null,sa=null;function SY(){By="\x80",By+=Ut.util.fillString("\0",128),My=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],sa={},sa["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],sa["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],sa["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],sa["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Lk=!0;}function kk(e,t,r){for(var n,i,s,a,o,c,l,u,f,h,p,m,v,E,x,y,S,N,O,j,J,z,G,ee,H,ne,me,Pe,W,K,se,Ae,Fe,je,Ve,ot=r.length();ot>=128;){for(W=0;W<16;++W)t[W][0]=r.getInt32()>>>0,t[W][1]=r.getInt32()>>>0;for(;W<80;++W)Ae=t[W-2],K=Ae[0],se=Ae[1],n=((K>>>19|se<<13)^(se>>>29|K<<3)^K>>>6)>>>0,i=((K<<13|se>>>19)^(se<<3|K>>>29)^(K<<26|se>>>6))>>>0,je=t[W-15],K=je[0],se=je[1],s=((K>>>1|se<<31)^(K>>>8|se<<24)^K>>>7)>>>0,a=((K<<31|se>>>1)^(K<<24|se>>>8)^(K<<25|se>>>7))>>>0,Fe=t[W-7],Ve=t[W-16],se=i+Fe[1]+a+Ve[1],t[W][0]=n+Fe[0]+s+Ve[0]+(se/4294967296>>>0)>>>0,t[W][1]=se>>>0;for(v=e[0][0],E=e[0][1],x=e[1][0],y=e[1][1],S=e[2][0],N=e[2][1],O=e[3][0],j=e[3][1],J=e[4][0],z=e[4][1],G=e[5][0],ee=e[5][1],H=e[6][0],ne=e[6][1],me=e[7][0],Pe=e[7][1],W=0;W<80;++W)l=((J>>>14|z<<18)^(J>>>18|z<<14)^(z>>>9|J<<23))>>>0,u=((J<<18|z>>>14)^(J<<14|z>>>18)^(z<<23|J>>>9))>>>0,f=(H^J&(G^H))>>>0,h=(ne^z&(ee^ne))>>>0,o=((v>>>28|E<<4)^(E>>>2|v<<30)^(E>>>7|v<<25))>>>0,c=((v<<4|E>>>28)^(E<<30|v>>>2)^(E<<25|v>>>7))>>>0,p=(v&x|S&(v^x))>>>0,m=(E&y|N&(E^y))>>>0,se=Pe+u+h+My[W][1]+t[W][1],n=me+l+f+My[W][0]+t[W][0]+(se/4294967296>>>0)>>>0,i=se>>>0,se=c+m,s=o+p+(se/4294967296>>>0)>>>0,a=se>>>0,me=H,Pe=ne,H=G,ne=ee,G=J,ee=z,se=j+i,J=O+n+(se/4294967296>>>0)>>>0,z=se>>>0,O=S,j=N,S=x,N=y,x=v,y=E,se=i+a,v=n+s+(se/4294967296>>>0)>>>0,E=se>>>0;se=e[0][1]+E,e[0][0]=e[0][0]+v+(se/4294967296>>>0)>>>0,e[0][1]=se>>>0,se=e[1][1]+y,e[1][0]=e[1][0]+x+(se/4294967296>>>0)>>>0,e[1][1]=se>>>0,se=e[2][1]+N,e[2][0]=e[2][0]+S+(se/4294967296>>>0)>>>0,e[2][1]=se>>>0,se=e[3][1]+j,e[3][0]=e[3][0]+O+(se/4294967296>>>0)>>>0,e[3][1]=se>>>0,se=e[4][1]+z,e[4][0]=e[4][0]+J+(se/4294967296>>>0)>>>0,e[4][1]=se>>>0,se=e[5][1]+ee,e[5][0]=e[5][0]+G+(se/4294967296>>>0)>>>0,e[5][1]=se>>>0,se=e[6][1]+ne,e[6][0]=e[6][0]+H+(se/4294967296>>>0)>>>0,e[6][1]=se>>>0,se=e[7][1]+Pe,e[7][0]=e[7][0]+me+(se/4294967296>>>0)>>>0,e[7][1]=se>>>0,ot-=128;}}});var Fk=P(Hy=>{var bY=Je();Kn();var mr=bY.asn1;Hy.privateKeyValidator={name:"PrivateKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:mr.Class.UNIVERSAL,type:mr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Hy.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:mr.Class.UNIVERSAL,type:mr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};});var Xk=P((Boe,Gk)=>{var xr=Je();qu();Tn();qy();mt();var $k=Fk(),EY=$k.publicKeyValidator,CY=$k.privateKeyValidator;var jy=xr.util.ByteBuffer,Jr=typeof Buffer>"u"?Uint8Array:Buffer;xr.pki=xr.pki||{};Gk.exports=xr.pki.ed25519=xr.ed25519=xr.ed25519||{};var at=xr.ed25519;at.constants={};at.constants.PUBLIC_KEY_BYTE_LENGTH=32;at.constants.PRIVATE_KEY_BYTE_LENGTH=64;at.constants.SEED_BYTE_LENGTH=32;at.constants.SIGN_BYTE_LENGTH=64;at.constants.HASH_BYTE_LENGTH=64;at.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=xr.random.getBytesSync(at.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==at.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+at.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Oi({message:t,encoding:"binary"});for(var r=new Jr(at.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Jr(at.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return AY(r,n),{publicKey:r,privateKey:n}};at.privateKeyFromAsn1=function(e){var t={},r=[],n=xr.asn1.validate(e,CY,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=xr.asn1.derToOid(t.privateKeyOid),a=xr.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.privateKey,c=Oi({message:xr.asn1.fromDer(o).value,encoding:"binary"});return {privateKeyBytes:c}};at.publicKeyFromAsn1=function(e){var t={},r=[],n=xr.asn1.validate(e,EY,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=xr.asn1.derToOid(t.publicKeyOid),a=xr.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.ed25519PublicKey;if(o.length!==at.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Oi({message:o,encoding:"binary"})};at.publicKeyFromPrivateKey=function(e){e=e||{};var t=Oi({message:e.privateKey,encoding:"binary"});if(t.length!==at.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+at.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Jr(at.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};at.sign=function(e){e=e||{};var t=Oi(e),r=Oi({message:e.privateKey,encoding:"binary"});if(r.length===at.constants.SEED_BYTE_LENGTH){var n=at.generateKeyPair({seed:r});r=n.privateKey;}else if(r.length!==at.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+at.constants.SEED_BYTE_LENGTH+" or "+at.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Jr(at.constants.SIGN_BYTE_LENGTH+t.length);IY(i,t,t.length,r);for(var s=new Jr(at.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=i[a];return s};at.verify=function(e){e=e||{};var t=Oi(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Oi({message:e.signature,encoding:"binary"});if(r.length!==at.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+at.constants.SIGN_BYTE_LENGTH);var n=Oi({message:e.publicKey,encoding:"binary"});if(n.length!==at.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+at.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Jr(at.constants.SIGN_BYTE_LENGTH+t.length),s=new Jr(at.constants.SIGN_BYTE_LENGTH+t.length),a;for(a=0;a<at.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<t.length;++a)i[a+at.constants.SIGN_BYTE_LENGTH]=t[a];return RY(s,i,i.length,n)>=0};function Oi(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Jr)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new jy(t,r);}else if(!(t instanceof jy))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Jr(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var Vy=He(),nd=He([1]),wY=He([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),xY=He([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Mk=He([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),qk=He([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Uy=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),TY=He([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Vu(e,t){var r=xr.md.sha512.create(),n=new jy(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new Jr(at.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=i.charCodeAt(a);return s}function AY(e,t){var r=[He(),He(),He(),He()],n,i=Vu(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Gy(r,i),zy(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function IY(e,t,r,n){var i,s,a=new Float64Array(64),o=[He(),He(),He(),He()],c=Vu(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var l=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var u=Vu(e.subarray(32),r+32);for(Wy(u),Gy(o,u),zy(e,o),i=32;i<64;++i)e[i]=n[i];var f=Vu(e,r+64);for(Wy(f),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=u[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=f[i]*c[s];return jk(e.subarray(32),a),l}function RY(e,t,r,n){var i,s,a=new Jr(32),o=[He(),He(),He(),He()],c=[He(),He(),He(),He()];if(s=-1,r<64||PY(c,n))return -1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var l=Vu(e,r);if(Wy(l),Kk(o,c,l),Gy(c,t.subarray(32)),Ky(o,c),zy(a,o),r-=64,Vk(t,0,a,0)){for(i=0;i<r;++i)e[i]=0;return -1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function jk(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*Uy[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0;}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*Uy[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*Uy[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255;}function Wy(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;jk(e,t);}function Ky(e,t){var r=He(),n=He(),i=He(),s=He(),a=He(),o=He(),c=He(),l=He(),u=He();lo(r,e[1],e[0]),lo(u,t[1],t[0]),Dt(r,r,u),co(n,e[0],e[1]),co(u,t[0],t[1]),Dt(n,n,u),Dt(i,e[3],t[3]),Dt(i,i,xY),Dt(s,e[2],t[2]),co(s,s,s),lo(a,n,r),lo(o,s,i),co(c,s,i),co(l,n,r),Dt(e[0],a,o),Dt(e[1],l,c),Dt(e[2],c,o),Dt(e[3],a,l);}function Hk(e,t,r){for(var n=0;n<4;++n)zk(e[n],t[n],r);}function zy(e,t){var r=He(),n=He(),i=He();LY(i,t[2]),Dt(r,t[0],i),Dt(n,t[1],i),id(e,n),e[31]^=Wk(r)<<7;}function id(e,t){var r,n,i,s=He(),a=He();for(r=0;r<16;++r)a[r]=t[r];for($y(a),$y(a),$y(a),n=0;n<2;++n){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,zk(a,s,1-i);}for(r=0;r<16;r++)e[2*r]=a[r]&255,e[2*r+1]=a[r]>>8;}function PY(e,t){var r=He(),n=He(),i=He(),s=He(),a=He(),o=He(),c=He();return ps(e[2],nd),NY(e[1],t),aa(i,e[1]),Dt(s,i,wY),lo(i,i,e[2]),co(s,e[2],s),aa(a,s),aa(o,a),Dt(c,o,a),Dt(r,c,i),Dt(r,r,s),kY(r,r),Dt(r,r,i),Dt(r,r,s),Dt(r,r,s),Dt(e[0],r,s),aa(n,e[0]),Dt(n,n,s),Uk(n,i)&&Dt(e[0],e[0],TY),aa(n,e[0]),Dt(n,n,s),Uk(n,i)?-1:(Wk(e[0])===t[31]>>7&&lo(e[0],Vy,e[0]),Dt(e[3],e[0],e[1]),0)}function NY(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767;}function kY(e,t){var r=He(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)aa(r,r),n!==1&&Dt(r,r,t);for(n=0;n<16;++n)e[n]=r[n];}function Uk(e,t){var r=new Jr(32),n=new Jr(32);return id(r,e),id(n,t),Vk(r,0,n,0)}function Vk(e,t,r,n){return DY(e,t,r,n,32)}function DY(e,t,r,n,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^r[n+s];return (1&a-1>>>8)-1}function Wk(e){var t=new Jr(32);return id(t,e),t[0]&1}function Kk(e,t,r){var n,i;for(ps(e[0],Vy),ps(e[1],nd),ps(e[2],nd),ps(e[3],Vy),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Hk(e,t,n),Ky(t,e),Ky(e,e),Hk(e,t,n);}function Gy(e,t){var r=[He(),He(),He(),He()];ps(r[0],Mk),ps(r[1],qk),ps(r[2],nd),Dt(r[3],Mk,qk),Kk(e,r,t);}function ps(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0;}function LY(e,t){var r=He(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)aa(r,r),n!==2&&n!==4&&Dt(r,r,t);for(n=0;n<16;++n)e[n]=r[n];}function $y(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1);}function zk(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n;}function He(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function co(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n];}function lo(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n];}function aa(e,t){Dt(e,t,t);}function Dt(e,t,r){var n,i,s=0,a=0,o=0,c=0,l=0,u=0,f=0,h=0,p=0,m=0,v=0,E=0,x=0,y=0,S=0,N=0,O=0,j=0,J=0,z=0,G=0,ee=0,H=0,ne=0,me=0,Pe=0,W=0,K=0,se=0,Ae=0,Fe=0,je=r[0],Ve=r[1],ot=r[2],kt=r[3],St=r[4],ft=r[5],Le=r[6],It=r[7],qt=r[8],ye=r[9],Ue=r[10],le=r[11],Re=r[12],We=r[13],et=r[14],ze=r[15];n=t[0],s+=n*je,a+=n*Ve,o+=n*ot,c+=n*kt,l+=n*St,u+=n*ft,f+=n*Le,h+=n*It,p+=n*qt,m+=n*ye,v+=n*Ue,E+=n*le,x+=n*Re,y+=n*We,S+=n*et,N+=n*ze,n=t[1],a+=n*je,o+=n*Ve,c+=n*ot,l+=n*kt,u+=n*St,f+=n*ft,h+=n*Le,p+=n*It,m+=n*qt,v+=n*ye,E+=n*Ue,x+=n*le,y+=n*Re,S+=n*We,N+=n*et,O+=n*ze,n=t[2],o+=n*je,c+=n*Ve,l+=n*ot,u+=n*kt,f+=n*St,h+=n*ft,p+=n*Le,m+=n*It,v+=n*qt,E+=n*ye,x+=n*Ue,y+=n*le,S+=n*Re,N+=n*We,O+=n*et,j+=n*ze,n=t[3],c+=n*je,l+=n*Ve,u+=n*ot,f+=n*kt,h+=n*St,p+=n*ft,m+=n*Le,v+=n*It,E+=n*qt,x+=n*ye,y+=n*Ue,S+=n*le,N+=n*Re,O+=n*We,j+=n*et,J+=n*ze,n=t[4],l+=n*je,u+=n*Ve,f+=n*ot,h+=n*kt,p+=n*St,m+=n*ft,v+=n*Le,E+=n*It,x+=n*qt,y+=n*ye,S+=n*Ue,N+=n*le,O+=n*Re,j+=n*We,J+=n*et,z+=n*ze,n=t[5],u+=n*je,f+=n*Ve,h+=n*ot,p+=n*kt,m+=n*St,v+=n*ft,E+=n*Le,x+=n*It,y+=n*qt,S+=n*ye,N+=n*Ue,O+=n*le,j+=n*Re,J+=n*We,z+=n*et,G+=n*ze,n=t[6],f+=n*je,h+=n*Ve,p+=n*ot,m+=n*kt,v+=n*St,E+=n*ft,x+=n*Le,y+=n*It,S+=n*qt,N+=n*ye,O+=n*Ue,j+=n*le,J+=n*Re,z+=n*We,G+=n*et,ee+=n*ze,n=t[7],h+=n*je,p+=n*Ve,m+=n*ot,v+=n*kt,E+=n*St,x+=n*ft,y+=n*Le,S+=n*It,N+=n*qt,O+=n*ye,j+=n*Ue,J+=n*le,z+=n*Re,G+=n*We,ee+=n*et,H+=n*ze,n=t[8],p+=n*je,m+=n*Ve,v+=n*ot,E+=n*kt,x+=n*St,y+=n*ft,S+=n*Le,N+=n*It,O+=n*qt,j+=n*ye,J+=n*Ue,z+=n*le,G+=n*Re,ee+=n*We,H+=n*et,ne+=n*ze,n=t[9],m+=n*je,v+=n*Ve,E+=n*ot,x+=n*kt,y+=n*St,S+=n*ft,N+=n*Le,O+=n*It,j+=n*qt,J+=n*ye,z+=n*Ue,G+=n*le,ee+=n*Re,H+=n*We,ne+=n*et,me+=n*ze,n=t[10],v+=n*je,E+=n*Ve,x+=n*ot,y+=n*kt,S+=n*St,N+=n*ft,O+=n*Le,j+=n*It,J+=n*qt,z+=n*ye,G+=n*Ue,ee+=n*le,H+=n*Re,ne+=n*We,me+=n*et,Pe+=n*ze,n=t[11],E+=n*je,x+=n*Ve,y+=n*ot,S+=n*kt,N+=n*St,O+=n*ft,j+=n*Le,J+=n*It,z+=n*qt,G+=n*ye,ee+=n*Ue,H+=n*le,ne+=n*Re,me+=n*We,Pe+=n*et,W+=n*ze,n=t[12],x+=n*je,y+=n*Ve,S+=n*ot,N+=n*kt,O+=n*St,j+=n*ft,J+=n*Le,z+=n*It,G+=n*qt,ee+=n*ye,H+=n*Ue,ne+=n*le,me+=n*Re,Pe+=n*We,W+=n*et,K+=n*ze,n=t[13],y+=n*je,S+=n*Ve,N+=n*ot,O+=n*kt,j+=n*St,J+=n*ft,z+=n*Le,G+=n*It,ee+=n*qt,H+=n*ye,ne+=n*Ue,me+=n*le,Pe+=n*Re,W+=n*We,K+=n*et,se+=n*ze,n=t[14],S+=n*je,N+=n*Ve,O+=n*ot,j+=n*kt,J+=n*St,z+=n*ft,G+=n*Le,ee+=n*It,H+=n*qt,ne+=n*ye,me+=n*Ue,Pe+=n*le,W+=n*Re,K+=n*We,se+=n*et,Ae+=n*ze,n=t[15],N+=n*je,O+=n*Ve,j+=n*ot,J+=n*kt,z+=n*St,G+=n*ft,ee+=n*Le,H+=n*It,ne+=n*qt,me+=n*ye,Pe+=n*Ue,W+=n*le,K+=n*Re,se+=n*We,Ae+=n*et,Fe+=n*ze,s+=38*O,a+=38*j,o+=38*J,c+=38*z,l+=38*G,u+=38*ee,f+=38*H,h+=38*ne,p+=38*me,m+=38*Pe,v+=38*W,E+=38*K,x+=38*se,y+=38*Ae,S+=38*Fe,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=c,e[4]=l,e[5]=u,e[6]=f,e[7]=h,e[8]=p,e[9]=m,e[10]=v,e[11]=E,e[12]=x,e[13]=y,e[14]=S,e[15]=N;}});var Jk=P((Moe,Qk)=>{var mn=Je();mt();Tn();qu();Qk.exports=mn.kem=mn.kem||{};var Zk=mn.jsbn.BigInteger;mn.kem.rsa={};mn.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||mn.random,n={};return n.encrypt=function(i,s){var a=Math.ceil(i.n.bitLength()/8),o;do o=new Zk(mn.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(Zk.ONE)<=0);o=mn.util.hexToBytes(o.toString(16));var c=a-o.length;c>0&&(o=mn.util.fillString("\0",c)+o);var l=i.encrypt(o,"NONE"),u=e.generate(o,s);return {encapsulation:l,key:u}},n.decrypt=function(i,s,a){var o=i.decrypt(s,"NONE");return e.generate(o,a)},n};mn.kem.kdf1=function(e,t){Yk(this,e,0,t||e.digestLength);};mn.kem.kdf2=function(e,t){Yk(this,e,1,t||e.digestLength);};function Yk(e,t,r,n){e.generate=function(i,s){for(var a=new mn.util.ByteBuffer,o=Math.ceil(s/n)+r,c=new mn.util.ByteBuffer,l=r;l<o;++l){c.putInt32(l),t.start(),t.update(i+c.getBytes());var u=t.digest();a.putBytes(u.getBytes(n));}return a.truncate(a.length()-s),a.getBytes()};}});var nD=P((qoe,rD)=>{var ct=Je();mt();rD.exports=ct.log=ct.log||{};ct.log.levels=["none","error","warning","info","debug","verbose","max"];var sd={},Yy=[],Ku=null;ct.log.LEVEL_LOCKED=2;ct.log.NO_LEVEL_CHECK=4;ct.log.INTERPOLATE=8;for(gi=0;gi<ct.log.levels.length;++gi)Xy=ct.log.levels[gi],sd[Xy]={index:gi,name:Xy.toUpperCase()};var Xy,gi;ct.log.logMessage=function(e){for(var t=sd[e.level].index,r=0;r<Yy.length;++r){var n=Yy[r];if(n.flags&ct.log.NO_LEVEL_CHECK)n.f(e);else {var i=sd[n.level].index;t<=i&&n.f(n,e);}}};ct.log.prepareStandard=function(e){"standard"in e||(e.standard=sd[e.level].name+" ["+e.category+"] "+e.message);};ct.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=ct.util.format.apply(this,t);}};ct.log.prepareStandardFull=function(e){"standardFull"in e||(ct.log.prepareStandard(e),e.standardFull=e.standard);};for(Zy=["error","warning","info","debug","verbose"],gi=0;gi<Zy.length;++gi)(function(t){ct.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};ct.log.logMessage(s);};})(Zy[gi]);var Zy,gi;ct.log.makeLogger=function(e){var t={flags:0,f:e};return ct.log.setLevel(t,"none"),t};ct.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&ct.log.LEVEL_LOCKED))for(var n=0;n<ct.log.levels.length;++n){var i=ct.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};ct.log.lock=function(e,t){typeof t>"u"||t?e.flags|=ct.log.LEVEL_LOCKED:e.flags&=~ct.log.LEVEL_LOCKED;};ct.log.addLogger=function(e){Yy.push(e);};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(eD={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},zu=function(e,t){ct.log.prepareStandard(t);var r=eD[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n);},fo=ct.log.makeLogger(zu)):(zu=function(t,r){ct.log.prepareStandardFull(r),console.log(r.standardFull);},fo=ct.log.makeLogger(zu)),ct.log.setLevel(fo,"debug"),ct.log.addLogger(fo),Ku=fo):console={log:function(){}};var fo,eD,zu;Ku!==null&&typeof window<"u"&&window.location&&(Wu=new URL(window.location.href).searchParams,Wu.has("console.level")&&ct.log.setLevel(Ku,Wu.get("console.level").slice(-1)[0]),Wu.has("console.lock")&&(tD=Wu.get("console.lock").slice(-1)[0],tD=="true"&&ct.log.lock(Ku)));var Wu,tD;ct.log.consoleLogger=Ku;});var sD=P((Hoe,iD)=>{iD.exports=oi();Mf();io();ly();qy();});var uD=P((Uoe,oD)=>{var Ee=Je();ss();Kn();Bu();as();Js();wy();Tn();mt();Qf();var $=Ee.asn1,Wr=oD.exports=Ee.pkcs7=Ee.pkcs7||{};Wr.messageFromPem=function(e){var t=Ee.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=$.fromDer(t.body);return Wr.messageFromAsn1(n)};Wr.messageToPem=function(e,t){var r={type:"PKCS7",body:$.toDer(e.toAsn1()).getBytes()};return Ee.pem.encode(r,{maxline:t})};Wr.messageFromAsn1=function(e){var t={},r=[];if(!$.validate(e,Wr.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=$.derToOid(t.contentType),s;switch(i){case Ee.pki.oids.envelopedData:s=Wr.createEnvelopedData();break;case Ee.pki.oids.encryptedData:s=Wr.createEncryptedData();break;case Ee.pki.oids.signedData:s=Wr.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};Wr.createSignedData=function(){var e=null;return e={type:Ee.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Jy(e,n,Wr.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(Ee.pki.certificateFromAsn1(i[s]));},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Ee.pki.certificateToAsn1(e.certificates[i]));var s=[],a=$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(e.version).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&a.value[0].value.push($.create($.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&a.value[0].value.push($.create($.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push($.create($.Class.UNIVERSAL,$.Type.SET,!0,e.signerInfos)),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.type).getBytes()),a])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Ee.pki.certificateFromPem(a)),i=a.issuer.attributes,s=a.serialNumber;}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=Ee.pki.privateKeyFromPem(o));var c=n.digestAlgorithm||Ee.pki.oids.sha1;switch(c){case Ee.pki.oids.sha1:case Ee.pki.oids.sha256:case Ee.pki.oids.sha384:case Ee.pki.oids.sha512:case Ee.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var l=n.authenticatedAttributes||[];if(l.length>0){for(var u=!1,f=!1,h=0;h<l.length;++h){var p=l[h];if(!u&&p.type===Ee.pki.oids.contentType){if(u=!0,f)break;continue}if(!f&&p.type===Ee.pki.oids.messageDigest){if(f=!0,u)break;continue}}if(!u||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:Ee.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]});},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Ee.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Ee.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Ee.util.encodeUtf8(e.content)),n.detached?e.detachedContent=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,i):e.contentInfo.value.push($.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,i)]));}if(e.signers.length!==0){var s=t();r(s);}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ee.pki.certificateFromPem(n)),e.certificates.push(n);},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],a=s.digestAlgorithm;a in n||(n[a]=Ee.md[Ee.pki.oids[a]].create()),s.authenticatedAttributes.length===0?s.md=n[a]:s.md=Ee.md[Ee.pki.oids[a]].create();}e.digestAlgorithmIdentifiers=[];for(var a in n)e.digestAlgorithmIdentifiers.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(a).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=$.derToOid(e.contentInfo.value[0].value),a=$.toDer(i);a.getByte(),$.getBerValueLength(a),a=a.getBytes();for(var o in n)n[o].start().update(a);for(var c=new Date,l=0;l<e.signers.length;++l){var u=e.signers[l];if(u.authenticatedAttributes.length===0){if(s!==Ee.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else {u.authenticatedAttributesAsn1=$.create($.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=$.create($.Class.UNIVERSAL,$.Type.SET,!0,[]),h=0;h<u.authenticatedAttributes.length;++h){var p=u.authenticatedAttributes[h];p.type===Ee.pki.oids.messageDigest?p.value=n[u.digestAlgorithm].digest():p.type===Ee.pki.oids.signingTime&&(p.value||(p.value=c)),f.value.push(Qy(p)),u.authenticatedAttributesAsn1.value.push(Qy(p));}a=$.toDer(f).getBytes(),u.md.start().update(a);}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5");}e.signerInfos=HY(e.signers);}};Wr.createEncryptedData=function(){var e=null;return e={type:Ee.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){Jy(e,t,Wr.asn1.encryptedDataValidator);},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),aD(e);}},e};Wr.createEnvelopedData=function(){var e=null;return e={type:Ee.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Jy(e,t,Wr.asn1.envelopedDataValidator);e.recipients=BY(r.recipientInfos.value);},toAsn1:function(){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.type).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(e.version).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,MY(e.recipients)),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,UY(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(s[o].type!==r[o].type||s[o].value!==r[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:case Ee.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Ee.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}aD(e);},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Ee.pki.oids.rsaEncryption,key:t.publicKey}});},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case Ee.pki.oids["aes128-CBC"]:n=16,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes192-CBC"]:n=24,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes256-CBC"]:n=32,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Ee.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Ee.util.createBuffer(Ee.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Ee.util.createBuffer(Ee.random.getBytes(i));var a=s(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output;}for(var o=0;o<e.recipients.length;++o){var c=e.recipients[o];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function OY(e){var t={},r=[];if(!$.validate(e,Wr.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return {version:t.version.charCodeAt(0),issuer:Ee.pki.RDNAttributesAsArray(t.issuer),serialNumber:Ee.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:$.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function FY(e){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(e.version).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Ee.util.hexToBytes(e.serialNumber))]),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.encryptedContent.algorithm).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function BY(e){for(var t=[],r=0;r<e.length;++r)t.push(OY(e[r]));return t}function MY(e){for(var t=[],r=0;r<e.length;++r)t.push(FY(e[r]));return t}function qY(e){var t=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(e.version).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,Ee.util.hexToBytes(e.serialNumber))]),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.digestAlgorithm).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.signatureAlgorithm).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")])),t.value.push($.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=$.create($.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Qy(i));}t.value.push(r);}return t}function HY(e){for(var t=[],r=0;r<e.length;++r)t.push(qY(e[r]));return t}function Qy(e){var t;if(e.type===Ee.pki.oids.contentType)t=$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.value).getBytes());else if(e.type===Ee.pki.oids.messageDigest)t=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Ee.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=$.utcTimeToDate(i):i=$.generalizedTimeToDate(i):i=new Date(s);}i>=r&&i<n?t=$.create($.Class.UNIVERSAL,$.Type.UTCTIME,!1,$.dateToUtcTime(i)):t=$.create($.Class.UNIVERSAL,$.Type.GENERALIZEDTIME,!1,$.dateToGeneralizedTime(i));}return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.type).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,[t])])}function UY(e){return [$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Ee.pki.oids.data).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(e.algorithm).getBytes()),e.parameter?$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Jy(e,t,r){var n={},i=[];if(!$.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var a=$.derToOid(n.contentType);if(a!==Ee.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(Ee.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==$.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[c].value;}else o=n.encryptedContent;e.encryptedContent={algorithm:$.derToOid(n.encAlgorithm),parameter:Ee.util.createBuffer(n.encParameter.value),content:Ee.util.createBuffer(o)};}if(n.content){var o="";if(Ee.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==$.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[c].value;}else o=n.content;e.content=Ee.util.createBuffer(o);}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function aD(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Ee.pki.oids["aes128-CBC"]:case Ee.pki.oids["aes192-CBC"]:case Ee.pki.oids["aes256-CBC"]:t=Ee.aes.createDecryptionCipher(e.encryptedContent.key);break;case Ee.pki.oids.desCBC:case Ee.pki.oids["des-EDE3-CBC"]:t=Ee.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output;}}});var lD=P(($oe,cD)=>{var ir=Je();ss();eo();Mf();io();mt();var od=cD.exports=ir.ssh=ir.ssh||{};od.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var a=ir.util.createBuffer();ho(a,n),mi(a,e.e),mi(a,e.n);var o=ir.util.encode64(a.bytes(),64),c=Math.floor(o.length/66)+1;s+="Public-Lines: "+c+`\r
`,s+=o;var l=ir.util.createBuffer();mi(l,e.d),mi(l,e.p),mi(l,e.q),mi(l,e.qInv);var u;if(!t)u=ir.util.encode64(l.bytes(),64);else {var f=l.length()+16-1;f-=f%16;var h=ad(l.bytes());h.truncate(h.length()-f+l.length()),l.putBuffer(h);var p=ir.util.createBuffer();p.putBuffer(ad("\0\0\0\0",t)),p.putBuffer(ad("\0\0\0",t));var m=ir.aes.createEncryptionCipher(p.truncate(8),"CBC");m.start(ir.util.createBuffer().fillWithByte(0,16)),m.update(l.copy()),m.finish();var v=m.output;v.truncate(16),u=ir.util.encode64(v.bytes(),64);}c=Math.floor(u.length/66)+1,s+=`\r
Private-Lines: `+c+`\r
`,s+=u;var E=ad("putty-private-key-file-mac-key",t),x=ir.util.createBuffer();ho(x,n),ho(x,i),ho(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(l.length()),x.putBuffer(l);var y=ir.hmac.create();return y.start("sha1",E),y.update(x.bytes()),s+=`\r
Private-MAC: `+y.digest().toHex()+`\r
`,s};od.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=ir.util.createBuffer();return ho(n,r),mi(n,e.e),mi(n,e.n),r+" "+ir.util.encode64(n.bytes())+" "+t};od.privateKeyToOpenSSH=function(e,t){return t?ir.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):ir.pki.privateKeyToPem(e)};od.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||ir.md.md5.create(),n="ssh-rsa",i=ir.util.createBuffer();ho(i,n),mi(i,e.e),mi(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else {if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function mi(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=ir.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n);}function ho(e,t){e.putInt32(t.length),e.putString(t);}function ad(){for(var e=ir.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var e_=P((joe,fD)=>{fD.exports=Je();ss();Nk();Kn();Nf();Bu();Xk();eo();Jk();nD();sD();xy();$f();Js();vy();Iy();uD();Py();by();fy();Xf();Tn();py();lD();Fy();mt();});var hD=P((Voe,dD)=>{dD.exports={dc:"0.9.2342.19200300.100.1.25"};});var t_=P((Woe,pD)=>{var ud;pD.exports=$Y;function $Y(){var e,t,r,n;if(!ud){ud=e_(),e=ud.oids;for(t in r=hD())n=r[t],e[t]==null&&(e[t]=n),e[n]==null&&(e[n]=t);}return ud}});var Xu=P((Koe,SD)=>{var cd,n_,Gu,r_,gD,mD,i_;SD.exports=ld;cd=t_();n_={der:yD,pem:_D,txt:jY,asn1:vD,x509:VY};Gu=[];for(r_ in n_)gD=n_[r_],ld[r_]=Gu.length,Gu.push(gD);ld.forge=ld.x509;mD=Buffer.isBuffer;i_=Buffer.from||function(e,t){return new Buffer(e,t)};function ld(e,t){var r;return r=Gu[e]||Gu[0],t!=null?r(t):r}function yD(e){return mD(e)?e:i_(e,"binary")}function _D(e){var t,r,n,i;for(e=yD(e).toString("base64"),t=["-----BEGIN CERTIFICATE-----"],r=0,n=e.length;r<n;r+=64)i=r,t.push(e.substr(i,64));return t.push("-----END CERTIFICATE-----",""),t.join(`\r
`)}function jY(e){var t;return t=vD(e),"Subject	"+t.subject.value.map(function(r){return i_(r.value[0].value[1].value,"binary").toString("utf8")}).join("/")+`
Valid	`+t.valid.value.map(function(r){return r.value}).join(" - ")+`
`+_D(e)}function vD(e){var t,r,n,i;return t=cd().asn1,e=e.toString("binary"),r=t.fromDer(e).value[0].value,n=r[0],i=n.tagClass===t.Class.CONTEXT_SPECIFIC&&n.type===0&&n.constructed,r=r.slice(i),{serial:r[0],valid:r[3],issuer:r[2],subject:r[4]}}function VY(e){return cd().pki.certificateFromAsn1(cd().asn1.fromDer(e.toString("binary")))}});var ED=P(a_=>{a_.all=KY;a_.each=bD;bD.async=WY;function bD(){var e;s_(arguments,e={unique:!0,ondata:function(t){typeof e.$cb=="function"&&e.$cb(t);}});}function WY(){var e;s_(arguments,e={async:!0,ondata:function(t){typeof e.$cb=="function"&&e.$cb(void 0,t);},onend:function(){typeof e.$cb=="function"&&e.$cb();}});}function KY(){var e;return s_(arguments,{ondata:e=[]}),e}function s_(e,t){var r,n;r=ku(),n=e[0],t.unique==null&&(t.unique=!1),t.format=n??r.der2.x509,t.$cb=e[1]||n,r(t);}});var f_=P((Goe,xD)=>{var c_,CD,o_,Zu,l_,u_;c_=he("crypto");CD=t_();o_=Xu();Zu=CD().asn1;l_=o_(o_.asn1);xD.exports=XY;u_=Buffer.from||function(e,t){return new Buffer(e,t)};function zY(e){var t;return t=c_.createHash("sha1"),l_(e).subject.value.forEach(function(r){var n,i;r=Zu.copy(r),n=r.value[0].value[1],n.value&&(n.type=Zu.Type.UTF8,i=u_(n.value,"binary").toString("utf8"),i=i.trim().replace(/[A-Z]+/g,function(s){return s.toLowerCase()}).replace(/\s+/g," "),n.value=u_(i,"utf8").toString("binary"),t.update(Zu.toDer(r).getBytes(),"binary"));}),wD(t)}function GY(e){var t,r;return t=c_.createHash("md5"),r=l_(e).subject,t.update(Zu.toDer(r).getBytes(),"binary"),wD(t)}function wD(e){return e=e.digest().slice(0,4),e.writeUInt32LE(e.readUInt32BE(0),0),e.toString("hex")}function XY(e,t){var r;return r=e===0?GY:zY,t!=null?r(t):r}});var h_=P((Xoe,ND)=>{var AD,Yu,d_,ID,fd,gs,Ju,Qu;AD=he("https");Yu=he("tls");d_=Xu();ND.exports=RD;RD.inject=PD;ID=d_(d_.pem);fd=AD.globalAgent.options;gs=[];function RD(e){return PD(e,[]),ZY}function ZY(e){gs.push(ID(e));}Ju=0;function PD(e,t){if(t&&(gs.length=0,gs.push.apply(gs,t)),e=e==="+"?2:e?1:0,e!==Ju){switch(Ju){case 1:fd.ca===gs&&delete fd.ca;break;case 2:Yu.createSecureContext===TD&&(Yu.createSecureContext=Qu,Qu=void 0);}switch(Ju=e){case 1:fd.ca=gs;break;case 2:Qu||(Qu=Yu.createSecureContext,Yu.createSecureContext=TD);}}}function TD(e){var t,r,n,i,s;if(t=Qu.apply(this,arguments),Ju===2&&!(e!=null&&e.ca))for(r=0,i=(n=gs).length;r<i;++r)s=n[r],t.context.addCACert(s);return t}});var LD=P((kD,DD)=>{var YY=he("stream");DD.exports=p_;p_.through=p_;function p_(e,t,r){e=e||function(u){this.queue(u);},t=t||function(){this.queue(null);};var n=!1,i=!1,s=[],a=!1,o=new YY;o.readable=o.writable=!0,o.paused=!1,o.autoDestroy=!(r&&r.autoDestroy===!1),o.write=function(u){return e.call(this,u),!o.paused};function c(){for(;s.length&&!o.paused;){var u=s.shift();if(u===null)return o.emit("end");o.emit("data",u);}}o.queue=o.push=function(u){return a||(u===null&&(a=!0),s.push(u),c()),o},o.on("end",function(){o.readable=!1,!o.writable&&o.autoDestroy&&process.nextTick(function(){o.destroy();});});function l(){o.writable=!1,t.call(o),!o.readable&&o.autoDestroy&&o.destroy();}return o.end=function(u){if(!n)return n=!0,arguments.length&&o.write(u),l(),o},o.destroy=function(){if(!i)return i=!0,n=!0,s.length=0,o.writable=o.readable=!1,o.emit("close"),o},o.pause=function(){if(!o.paused)return o.paused=!0,o},o.resume=function(){return o.paused&&(o.paused=!1,o.emit("resume")),c(),o.paused||o.emit("drain"),o},o}});var FD=P((Zoe,OD)=>{var QY=LD(),JY=he("string_decoder").StringDecoder;OD.exports=eQ;function eQ(e,t,r){var n=new JY,i="",s=r&&r.maxLength,a=!(r&&r.trailing===!1);typeof e=="function"&&(t=e,e=null),e||(e=/\r?\n/);function o(l,u){if(t){try{u=t(u);}catch(f){return l.emit("error",f)}typeof u<"u"&&l.queue(u);}else l.queue(u);}function c(l,u){var f=((i??"")+u).split(e);if(i=f.pop(),s&&i.length>s)return l.emit("error",new Error("maximum buffer reached"));for(var h=0;h<f.length;h++){var p=f[h];o(l,p);}}return QY(function(l){c(this,n.write(l));},function(){n.end&&c(this,n.end()),a&&i!=null&&o(this,i),this.queue(null);})}});var __=P(dd=>{var BD,g_,MD,hd,m_,qD,y_=typeof dd<"u"&&dd||dd;BD=he("path");g_=he("child_process");MD=FD();m_={maxBuffer:1024*1024*1024};function HD(e){var t;return e==null&&(e="roots.exe"),t=hd,hd=BD.resolve(__dirname,e),t}HD();y_.exe=HD;y_.sync=tQ;function tQ(e){var t,r;return {run:s,next:n,done:i};function n(){if(t||(t=[],r=0,s(function(a){a&&t.push(a);})),r<t.length)return t[r++];t=[];}function i(){t=[];}function s(a){UD(a).on("end",function(){a();}).end(g_.execFileSync(hd,e,m_));}}y_.async=rQ;function rQ(e){var t,r,n;return {run:c,next:i,done:a};function i(){return t||(t=[],r=[],c(s)),t.length?Promise.resolve(t.shift()):n?Promise.resolve():new Promise(function(l){r.push(l);})}function s(l){n||(l?r.length?r.shift()(l):t.push(l):o());}function a(){t=[],o();}function o(){var l,u,f,h;for(n=!0,l=0,f=(u=r).length;l<f;++l)h=u[l],h();}function c(l){g_.execFile(hd,e,m_,function(){}).stdout.pipe(UD(l)).on("end",function(){l();});}}function UD(e){return MD(function(t){t.length&&e(qD(t,"hex"));})}qD=Buffer.from||function(e,t){return new Buffer(e,t)};});var VD=P(pd=>{var $D=typeof pd<"u"&&pd||pd;$D.sync=jD;function jD(){return {next:function(){},done:function(){},run:function(e){return e()}}}$D.async=jD;});var WD=P(()=>{});var KD=P(()=>{});var iQ,v_=Qh(()=>{iQ=ob({"./crypt32-ia32.node":()=>WD(),"./crypt32-x64.node":()=>KD()});});var XD=P(gd=>{v_();var S_,zD=typeof gd<"u"&&gd||gd;S_=iQ("./crypt32-"+process.arch);zD.sync=GD;function GD(e){var t,r;return r=e.length?0:-1,{next:n,done:i,run:s};function n(){for(var a;r<e.length;){if(t==null&&(t=r<0?S_():S_(e[r])),a=t.next())return a;t.done(),t=void 0,r++;}}function i(){t?.done(),t=void 0,r=e.length;}function s(a){for(var o;o=n();)a(o);a();}}zD.async=sQ;function sQ(e){var t,r;return t=GD(e),r=t.next,t.run=n,t;function n(i){function s(){return Promise.resolve().then(r).then(function(a){if(a)return i(a),s();i();})}s();}}});var QD=P((oue,YD)=>{var ZD;ZD=he("crypto");YD.exports=aQ;function aQ(){var e;e=new Set;function t(r){var n;if(n=ZD.createHash("sha256").update(r).digest("base64"),!e.has(n))return e.add(n),!0}return t}});var tL=P((uue,eL)=>{var JD=(e,t)=>function(){let r=t.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{t.errorFirst?n.push(function(a,o){if(t.multiArgs){let c=new Array(arguments.length-1);for(let l=1;l<arguments.length;l++)c[l-1]=arguments[l];a?(c.unshift(a),s(c)):i(c);}else a?s(a):i(o);}):n.push(function(a){if(t.multiArgs){let o=new Array(arguments.length-1);for(let c=0;c<arguments.length;c++)o[c]=arguments[c];i(o);}else i(a);}),e.apply(this,n);})};eL.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);let r=i=>{let s=a=>typeof a=="string"?i===a:a.test(i);return t.include?t.include.some(s):!t.exclude.some(s)},n;typeof e=="function"?n=function(){return t.excludeMain?e.apply(this,arguments):JD(e,t).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(e));for(let i in e){let s=e[i];n[i]=typeof s=="function"&&r(i)?JD(s,t):s;}return n};});var sL=P((cue,b_)=>{var oQ=he("fs"),oa=he("path"),rL=tL(),nL={mode:511&~process.umask(),fs:oQ},iL=e=>{if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(oa.parse(e).root,""))){let r=new Error(`Path contains invalid characters: ${e}`);throw r.code="EINVAL",r}};b_.exports=(e,t)=>Promise.resolve().then(()=>{iL(e),t=Object.assign({},nL,t);let r=rL(t.fs.mkdir),n=rL(t.fs.stat),i=s=>r(s,t.mode).then(()=>s).catch(a=>{if(a.code==="ENOENT"){if(a.message.includes("null bytes")||oa.dirname(s)===s)throw a;return i(oa.dirname(s)).then(()=>i(s))}return n(s).then(o=>o.isDirectory()?s:Promise.reject()).catch(()=>{throw a})});return i(oa.resolve(e))});b_.exports.sync=(e,t)=>{iL(e),t=Object.assign({},nL,t);let r=n=>{try{t.fs.mkdirSync(n,t.mode);}catch(i){if(i.code==="ENOENT"){if(i.message.includes("null bytes")||oa.dirname(n)===n)throw i;return r(oa.dirname(n)),r(n)}try{if(!t.fs.statSync(n).isDirectory())throw new Error("The path is not a directory")}catch{throw i}}return n};return r(oa.resolve(e))};});var gL=P((lue,pL)=>{var tc,aL,ec,oL,C_,uL,cL,lL,fL,dL,hL;tc=he("fs");aL=he("os");ec=he("path");oL=sL();C_=Xu();uL=f_();pL.exports=uQ;cL=C_(C_.txt);lL=uL();fL=w_(tc.writeFile);dL=w_(tc.readdir);hL=w_(tc.unlink);function uQ(e){var t,r,n,i,s;return i={},s=new Set,a;function a(f){return Promise.resolve(f).then(o)}function o(f){f?(r||(r=lQ(e.save||e.$ave).then(function(h){return t=h})),r=r.then(function(){if(t)return c(f)})):r?r.then(u).then(function(){n?.end(),t&&e.$ave&&(process.env.SSL_CERT_DIR=ku().path=t),typeof e.onsave=="function"&&e.onsave(t);}):typeof e.onsave=="function"&&e.onsave();}function c(f){var h,p;return (n||(n=tc.createWriteStream(l("roots.pem")))).write(h=cL(f)),i[p=lL(f)]||(i[p]=0),fL(l(p+"."+i[p]++),h).catch(E_)}function l(f){return s.add(f),ec.join(t,f)}function u(){t&&dL(t).then(function(f){return Promise.all(f.filter(function(h){return !s.has(h)}).map(function(h){return ec.join(t,h)}).map(function(h){return hL(h).catch(E_)}))}).catch(E_);}}function cQ(){return [ec.join(__dirname,"../pem"),ec.join(aL.homedir(),".local/win-ca/pem")]}function lQ(e){var t;return typeof e=="string"?e=[e]:Array.isArray(e)||(e=cQ()),t=0,r();function r(){return t<e.length?oL(e[t++]).catch(r):Promise.resolve()}}function w_(e){return function(){var t,r=this;return t=[].slice.call(arguments),new Promise(function(n,i){t.push(s),e.apply(r,t);function s(a,o){a?i(a):n(o);}})}}function E_(){}});var ku=P((fue,vL)=>{var x_,yL,_L;vL.exports=Kr;Kr.disabled=x_=process.platform!=="win32";Kr.nApi=yL=!!process.versions.napi&&Kr===GP()&&!(Kr.electron=ZP()());Kr.der2=_L=Xu();Kr.hash=fQ;Kr.inject=dQ;Kr.exe=hQ;pQ(Kr,ED());!x_&&Kr===T_()&&Kr({inject:!0,$ave:!0,async:!0});function fQ(){return (Kr.hash=f_()).apply(this,arguments)}function dQ(){return (Kr.inject=h_().inject).apply(this,arguments)}function hQ(){return (Kr.exe=__().exe).apply(this,arguments)}function Kr(e){var t,r,n,i,s,a,o,c,l;if(e==null&&(e={}),t=x_||e.disabled?VD():((r=e.fallback)!=null?r:!yL)?__():XD(),(n=e.store)?Array.isArray(n)||(n=[n]):n=[],t=t[(i=e.async)?"async":"sync"](n),s=i?f:u,e.unique!==!1&&(a=QD()()),o=_L(e.format),Array.isArray(e.ondata)&&(e.ondata=e.ondata.push.bind(e.ondata)),(e.save||e.$ave)&&(c=gL()(e)),e.inject&&(l=h_()(e.inject)),e.generator)return (i?p:h)();t.run(function(y){(!y||!a||a(y))&&s(y);});function u(y){c&&c(y),y?(l&&l(y),typeof e.ondata=="function"&&e.ondata(o(y))):typeof e.onend=="function"&&e.onend();}function f(y){Promise.resolve(y).then(u);}function h(){var y;return y={},y[Symbol.iterator]=mL,y.return=v,y.next=E,y}function p(){var y,S;return y={},y[(S=Symbol.asyncIterator)!=null?S:"@"]=mL,y.return=v,y.next=x,y}function m(y){return s(y),{done:!y,value:y!=null?o(y):y}}function v(y){return t.done(),{done:!0,value:y}}function E(){for(var y;(y=t.next())&&a&&!a(y););return m(y)}function x(){function y(){return Promise.resolve().then(t.next).then(function(S){return S&&a&&!a(S)?y():m(S)})}return y()}}function mL(){return this}function pQ(e,t){for(var r in t)e[r]=t[r];return e}});var T_=P((due,SL)=>{SL.exports=ku();});var CL=P(ua=>{Object.defineProperty(ua,"__esModule",{value:!0});ua.convert=ua.Format=void 0;var rc=e_(),ms;(function(e){e.der="der",e.pem="pem",e.txt="txt",e.asn1="asn1",e.x509="x509",e.fingerprint="fingerprint";})(ms=ua.Format||(ua.Format={}));function bL(e){var t=rc.pki.pemToDer(e),r=rc.asn1,n=r.fromDer(t.data.toString("binary")).value[0].value,i=n[0],s=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(s);return {serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}function gQ(e){var t=bL(e),r=t.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=t.valid.value.map(function(i){return i.value}).join(" - ");return ["Subject	".concat(r),"Valid	".concat(n),String(e)].join(`
`)}function EL(e,t){switch(t){case ms.der:return rc.pki.pemToDer(e);case ms.pem:return e;case ms.txt:return gQ(e);case ms.asn1:return bL(e);case ms.fingerprint:var r=rc.md.sha1.create(),n=EL(e,ms.der);return r.update(n.getBytes()),r.digest().toHex();case ms.x509:return rc.pki.certificateFromPem(e);default:throw new Error("unknown format ".concat(t))}}ua.convert=EL;});var IL=P(en=>{var ca=en&&en.__assign||function(){return ca=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}return e},ca.apply(this,arguments)},md=en&&en.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(en,"__esModule",{value:!0});en.convert=en.Format=en.addToGlobalAgent=en.get=void 0;var xL=he("https"),mQ=he("tls"),wL=he("child_process"),Fi=CL();Object.defineProperty(en,"Format",{enumerable:!0,get:function(){return Fi.Format}});Object.defineProperty(en,"convert",{enumerable:!0,get:function(){return Fi.convert}});var TL=process.platform==="darwin",_d={keychain:"all",unique:!0,excludeBundled:!0,format:Fi.Format.pem};function AL(e){if(e===void 0&&(e=_d),!TL)return [];e=ca(ca({},_d),e);var t=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0, wL.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(t).map(function(l){return l.trim()});n=md(md([],n,!0),s,!0);}if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var a=(0, wL.spawnSync)("/usr/bin/security",r).stdout.toString().split(t).map(function(l){return l.trim()});n=md(md([],n,!0),a,!0);}if(e.unique||e.excludeBundled){var o=n.map(function(l){return (0, Fi.convert)(l,Fi.Format.fingerprint)}),c=e.excludeBundled?mQ.rootCertificates.map(function(l){return (0, Fi.convert)(l,Fi.Format.fingerprint)}):[];n=n.filter(function(l,u){var f=o[u];return !(e.unique&&u!==o.indexOf(f)||e.excludeBundled&&c.includes(f))});}return n.map(function(l){return (0, Fi.convert)(l,e.format)})}en.get=AL;var yd=xL.globalAgent.options.ca,yQ=function(e){if(e===void 0&&(e=_d),!!TL){var t;Array.isArray(yd)?t=Array.from(yd):t=typeof yd<"u"?[yd]:[],AL(ca(ca(ca({},_d),e),{format:Fi.Format.pem})).forEach(function(r){return t.push(r)}),xL.globalAgent.options.ca=t;}};en.addToGlobalAgent=yQ;});var wd=P(sr=>{Object.defineProperty(sr,"__esModule",{value:!0});sr.thenable=sr.typedArray=sr.stringArray=sr.array=sr.func=sr.error=sr.number=sr.string=sr.boolean=void 0;function SQ(e){return e===!0||e===!1}sr.boolean=SQ;function FL(e){return typeof e=="string"||e instanceof String}sr.string=FL;function bQ(e){return typeof e=="number"||e instanceof Number}sr.number=bQ;function EQ(e){return e instanceof Error}sr.error=EQ;function BL(e){return typeof e=="function"}sr.func=BL;function ML(e){return Array.isArray(e)}sr.array=ML;function CQ(e){return ML(e)&&e.every(t=>FL(t))}sr.stringArray=CQ;function wQ(e,t){return Array.isArray(e)&&e.every(t)}sr.typedArray=wQ;function xQ(e){return e&&BL(e.then)}sr.thenable=xQ;});var po=P(Rr=>{Object.defineProperty(Rr,"__esModule",{value:!0});Rr.stringArray=Rr.array=Rr.func=Rr.error=Rr.number=Rr.string=Rr.boolean=void 0;function TQ(e){return e===!0||e===!1}Rr.boolean=TQ;function qL(e){return typeof e=="string"||e instanceof String}Rr.string=qL;function AQ(e){return typeof e=="number"||e instanceof Number}Rr.number=AQ;function IQ(e){return e instanceof Error}Rr.error=IQ;function RQ(e){return typeof e=="function"}Rr.func=RQ;function HL(e){return Array.isArray(e)}Rr.array=HL;function PQ(e){return HL(e)&&e.every(t=>qL(t))}Rr.stringArray=PQ;});var ev=P(Be=>{Object.defineProperty(Be,"__esModule",{value:!0});Be.Message=Be.NotificationType9=Be.NotificationType8=Be.NotificationType7=Be.NotificationType6=Be.NotificationType5=Be.NotificationType4=Be.NotificationType3=Be.NotificationType2=Be.NotificationType1=Be.NotificationType0=Be.NotificationType=Be.RequestType9=Be.RequestType8=Be.RequestType7=Be.RequestType6=Be.RequestType5=Be.RequestType4=Be.RequestType3=Be.RequestType2=Be.RequestType1=Be.RequestType=Be.RequestType0=Be.AbstractMessageSignature=Be.ParameterStructures=Be.ResponseError=Be.ErrorCodes=void 0;var la=po(),P_;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3;})(P_||(Be.ErrorCodes=P_={}));var N_=class e extends Error{constructor(t,r,n){super(r),this.code=la.number(t)?t:P_.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,e.prototype);}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};Be.ResponseError=N_;var tn=class e{constructor(t){this.kind=t;}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};Be.ParameterStructures=tn;tn.auto=new tn("auto");tn.byPosition=new tn("byPosition");tn.byName=new tn("byName");var $t=class{constructor(t,r){this.method=t,this.numberOfParams=r;}get parameterStructures(){return tn.auto}};Be.AbstractMessageSignature=$t;var k_=class extends $t{constructor(t){super(t,0);}};Be.RequestType0=k_;var D_=class extends $t{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Be.RequestType=D_;var L_=class extends $t{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Be.RequestType1=L_;var O_=class extends $t{constructor(t){super(t,2);}};Be.RequestType2=O_;var F_=class extends $t{constructor(t){super(t,3);}};Be.RequestType3=F_;var B_=class extends $t{constructor(t){super(t,4);}};Be.RequestType4=B_;var M_=class extends $t{constructor(t){super(t,5);}};Be.RequestType5=M_;var q_=class extends $t{constructor(t){super(t,6);}};Be.RequestType6=q_;var H_=class extends $t{constructor(t){super(t,7);}};Be.RequestType7=H_;var U_=class extends $t{constructor(t){super(t,8);}};Be.RequestType8=U_;var $_=class extends $t{constructor(t){super(t,9);}};Be.RequestType9=$_;var j_=class extends $t{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Be.NotificationType=j_;var V_=class extends $t{constructor(t){super(t,0);}};Be.NotificationType0=V_;var W_=class extends $t{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Be.NotificationType1=W_;var K_=class extends $t{constructor(t){super(t,2);}};Be.NotificationType2=K_;var z_=class extends $t{constructor(t){super(t,3);}};Be.NotificationType3=z_;var G_=class extends $t{constructor(t){super(t,4);}};Be.NotificationType4=G_;var X_=class extends $t{constructor(t){super(t,5);}};Be.NotificationType5=X_;var Z_=class extends $t{constructor(t){super(t,6);}};Be.NotificationType6=Z_;var Y_=class extends $t{constructor(t){super(t,7);}};Be.NotificationType7=Y_;var Q_=class extends $t{constructor(t){super(t,8);}};Be.NotificationType8=Q_;var J_=class extends $t{constructor(t){super(t,9);}};Be.NotificationType9=J_;var UL;(function(e){function t(i){let s=i;return s&&la.string(s.method)&&(la.string(s.id)||la.number(s.id))}e.isRequest=t;function r(i){let s=i;return s&&la.string(s.method)&&i.id===void 0}e.isNotification=r;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(la.string(s.id)||la.number(s.id)||s.id===null)}e.isResponse=n;})(UL||(Be.Message=UL={}));});var rv=P(ys=>{var $L;Object.defineProperty(ys,"__esModule",{value:!0});ys.LRUCache=ys.LinkedMap=ys.Touch=void 0;var Pr;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last;})(Pr||(ys.Touch=Pr={}));var xd=class{constructor(){this[$L]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0;}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++;}isEmpty(){return !this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,r=Pr.None){let n=this._map.get(t);if(n)return r!==Pr.None&&this.touch(n,r),n.value}set(t,r,n=Pr.None){let i=this._map.get(t);if(i)i.value=r,n!==Pr.None&&this.touch(i,n);else {switch(i={key:t,value:r,next:void 0,previous:void 0},n){case Pr.None:this.addItemLast(i);break;case Pr.First:this.addItemFirst(i);break;case Pr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++;}return this}delete(t){return !!this.remove(t)}remove(t){let r=this._map.get(t);if(r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next;}}keys(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}values(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}entries(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}[($L=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++;}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++;}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++;}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next;}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous;}else {let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r;}t.next=void 0,t.previous=void 0,this._state++;}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Pr.First&&r!==Pr.Last)){if(r===Pr.First){if(t===this._head)return;let n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++;}else if(r===Pr.Last){if(t===this._tail)return;let n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++;}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r]);}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n);}};ys.LinkedMap=xd;var tv=class extends xd{constructor(t,r=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,r),1);}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim();}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim();}get(t,r=Pr.AsNew){return super.get(t,r)}peek(t){return super.get(t,Pr.None)}set(t,r){return super.set(t,r,Pr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio));}};ys.LRUCache=tv;});var VL=P(Td=>{Object.defineProperty(Td,"__esModule",{value:!0});Td.Disposable=void 0;var jL;(function(e){function t(r){return {dispose:r}}e.create=t;})(jL||(Td.Disposable=jL={}));});var _s=P(sv=>{Object.defineProperty(sv,"__esModule",{value:!0});var nv;function iv(){if(nv===void 0)throw new Error("No runtime abstraction layer installed");return nv}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");nv=r;}e.install=t;})(iv||(iv={}));sv.default=iv;});var mo=P(go=>{Object.defineProperty(go,"__esModule",{value:!0});go.Emitter=go.Event=void 0;var NQ=_s(),WL;(function(e){let t={dispose(){}};e.None=function(){return t};})(WL||(go.Event=WL={}));var av=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)});}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===t)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return [];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{r.push(n[s].apply(i[s],t));}catch(o){(0, NQ.default)().console.error(o);}return r}isEmpty(){return !this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0;}},Ad=class e{constructor(t){this._options=t;}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new av),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,r),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this));}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t);}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0);}};go.Emitter=Ad;Ad._noop=function(){};});var Pd=P(yo=>{Object.defineProperty(yo,"__esModule",{value:!0});yo.CancellationTokenSource=yo.CancellationToken=void 0;var kQ=_s(),DQ=po(),ov=mo(),Id;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ov.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ov.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||DQ.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t;})(Id||(yo.CancellationToken=Id={}));var LQ=Object.freeze(function(e,t){let r=(0, kQ.default)().timer.setTimeout(e.bind(t),0);return {dispose(){r.dispose();}}}),Rd=class{constructor(){this._isCancelled=!1;}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()));}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?LQ:(this._emitter||(this._emitter=new ov.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0);}},uv=class{get token(){return this._token||(this._token=new Rd),this._token}cancel(){this._token?this._token.cancel():this._token=Id.Cancelled;}dispose(){this._token?this._token instanceof Rd&&this._token.dispose():this._token=Id.None;}};yo.CancellationTokenSource=uv;});var KL=P(_o=>{Object.defineProperty(_o,"__esModule",{value:!0});_o.SharedArrayReceiverStrategy=_o.SharedArraySenderStrategy=void 0;var OQ=Pd(),nc;(function(e){e.Continue=0,e.Cancelled=1;})(nc||(nc={}));var cv=class{constructor(){this.buffers=new Map;}enableCancellation(t){if(t.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=nc.Continue,this.buffers.set(t.id,r),t.$cancellationData=r;}async sendCancellation(t,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,nc.Cancelled);}cleanup(t){this.buffers.delete(t);}dispose(){this.buffers.clear();}};_o.SharedArraySenderStrategy=cv;var lv=class{constructor(t){this.data=new Int32Array(t,0,1);}get isCancellationRequested(){return Atomics.load(this.data,0)===nc.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},fv=class{constructor(t){this.token=new lv(t);}cancel(){}dispose(){}},dv=class{constructor(){this.kind="request";}createCancellationTokenSource(t){let r=t.$cancellationData;return r===void 0?new OQ.CancellationTokenSource:new fv(r)}};_o.SharedArrayReceiverStrategy=dv;});var pv=P(Nd=>{Object.defineProperty(Nd,"__esModule",{value:!0});Nd.Semaphore=void 0;var FQ=_s(),hv=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[];}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext();})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0, FQ.default)().timer.setImmediate(()=>this.doRunNext());}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext();},n=>{this._active--,t.reject(n),this.runNext();}):(this._active--,t.resolve(r),this.runNext());}catch(r){this._active--,t.reject(r),this.runNext();}}};Nd.Semaphore=hv;});var GL=P(vs=>{Object.defineProperty(vs,"__esModule",{value:!0});vs.ReadableStreamMessageReader=vs.AbstractMessageReader=vs.MessageReader=void 0;var mv=_s(),vo=po(),gv=mo(),BQ=pv(),zL;(function(e){function t(r){let n=r;return n&&vo.func(n.listen)&&vo.func(n.dispose)&&vo.func(n.onError)&&vo.func(n.onClose)&&vo.func(n.onPartialMessage)}e.is=t;})(zL||(vs.MessageReader=zL={}));var kd=class{constructor(){this.errorEmitter=new gv.Emitter,this.closeEmitter=new gv.Emitter,this.partialMessageEmitter=new gv.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t));}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t);}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${vo.string(t.message)?t.message:"unknown"}`)}};vs.AbstractMessageReader=kd;var yv;(function(e){function t(r){let n,s,a=new Map,o,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else {if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,a.set(s.name,s)),r.contentDecoders!==void 0)for(let l of r.contentDecoders)a.set(l.name,l);if(r.contentTypeDecoder!==void 0&&(o=r.contentTypeDecoder,c.set(o.name,o)),r.contentTypeDecoders!==void 0)for(let l of r.contentTypeDecoders)c.set(l.name,l);}return o===void 0&&(o=(0, mv.default)().applicationJson.decoder,c.set(o.name,o)),{charset:n,contentDecoder:s,contentDecoders:a,contentTypeDecoder:o,contentTypeDecoders:c}}e.fromOptions=t;})(yv||(yv={}));var _v=class extends kd{constructor(t,r){super(),this.readable=t,this.options=yv.fromOptions(r),this.buffer=(0, mv.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new BQ.Semaphore(1);}set partialMessageTimeout(t){this._partialMessageTimeout=t;}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n);});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s;}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i);}).catch(n=>{this.fireError(n);});}}catch(r){this.fireError(r);}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0);}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0, mv.default)().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer());},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout));}};vs.ReadableStreamMessageReader=_v;});var JL=P(Ss=>{Object.defineProperty(Ss,"__esModule",{value:!0});Ss.WriteableStreamMessageWriter=Ss.AbstractMessageWriter=Ss.MessageWriter=void 0;var XL=_s(),ic=po(),MQ=pv(),ZL=mo(),qQ="Content-Length: ",YL=`\r
`,QL;(function(e){function t(r){let n=r;return n&&ic.func(n.dispose)&&ic.func(n.onClose)&&ic.func(n.onError)&&ic.func(n.write)}e.is=t;})(QL||(Ss.MessageWriter=QL={}));var Dd=class{constructor(){this.errorEmitter=new ZL.Emitter,this.closeEmitter=new ZL.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n]);}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${ic.string(t.message)?t.message:"unknown"}`)}};Ss.AbstractMessageWriter=Dd;var vv;(function(e){function t(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0, XL.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0, XL.default)().applicationJson.encoder}}e.fromOptions=t;})(vv||(vv={}));var Sv=class extends Dd{constructor(t,r){super(),this.writable=t,this.options=vv.fromOptions(r),this.errorCount=0,this.writeSemaphore=new MQ.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose());}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(qQ,n.byteLength.toString(),YL),i.push(YL),this.doWrite(t,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){this.writable.end();}};Ss.WriteableStreamMessageWriter=Sv;});var eO=P(Ld=>{Object.defineProperty(Ld,"__esModule",{value:!0});Ld.AbstractMessageBuffer=void 0;var HQ=13,UQ=10,$Q=`\r
`,bv=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0;}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength;}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case HQ:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0;}break;case UQ:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0;}break;default:r=0;}i++;}s+=l.byteLength,n++;}if(r!==4)return;let a=this._read(s+i),o=new Map,c=this.toString(a,"ascii").split($Q);if(c.length<2)return o;for(let l=0;l<c.length-2;l++){let u=c[l],f=u.indexOf(":");if(f===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let h=u.substr(0,f),p=u.substr(f+1).trim();o.set(t?h.toLowerCase():h,p);}return o}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(s)}if(this._chunks[0].byteLength>t){let s=this._chunks[0],a=this.asNative(s,t);return this._chunks[0]=s.slice(t),this._totalLength-=t,a}let r=this.allocNative(t),n=0,i=0;for(;t>0;){let s=this._chunks[i];if(s.byteLength>t){let a=s.slice(0,t);r.set(a,n),n+=t,this._chunks[i]=s.slice(t),this._totalLength-=t,t-=t;}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,t-=s.byteLength;}return r}};Ld.AbstractMessageBuffer=bv;});var sO=P(Ye=>{Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createMessageConnection=Ye.ConnectionOptions=Ye.MessageStrategy=Ye.CancellationStrategy=Ye.CancellationSenderStrategy=Ye.CancellationReceiverStrategy=Ye.RequestCancellationReceiverStrategy=Ye.IdCancellationReceiverStrategy=Ye.ConnectionStrategy=Ye.ConnectionError=Ye.ConnectionErrors=Ye.LogTraceNotification=Ye.SetTraceNotification=Ye.TraceFormat=Ye.TraceValues=Ye.Trace=Ye.NullLogger=Ye.ProgressType=Ye.ProgressToken=void 0;var tO=_s(),Xt=po(),$e=ev(),rO=rv(),sc=mo(),Ev=Pd(),uc;(function(e){e.type=new $e.NotificationType("$/cancelRequest");})(uc||(uc={}));var Cv;(function(e){function t(r){return typeof r=="string"||typeof r=="number"}e.is=t;})(Cv||(Ye.ProgressToken=Cv={}));var ac;(function(e){e.type=new $e.NotificationType("$/progress");})(ac||(ac={}));var wv=class{constructor(){}};Ye.ProgressType=wv;var xv;(function(e){function t(r){return Xt.func(r)}e.is=t;})(xv||(xv={}));Ye.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Et;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose";})(Et||(Ye.Trace=Et={}));var nO;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose";})(nO||(Ye.TraceValues=nO={}));(function(e){function t(n){if(!Xt.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return "off";case e.Messages:return "messages";case e.Compact:return "compact";case e.Verbose:return "verbose";default:return "off"}}e.toString=r;})(Et||(Ye.Trace=Et={}));var yn;(function(e){e.Text="text",e.JSON="json";})(yn||(Ye.TraceFormat=yn={}));(function(e){function t(r){return Xt.string(r)?(r=r.toLowerCase(),r==="json"?e.JSON:e.Text):e.Text}e.fromString=t;})(yn||(Ye.TraceFormat=yn={}));var Tv;(function(e){e.type=new $e.NotificationType("$/setTrace");})(Tv||(Ye.SetTraceNotification=Tv={}));var Od;(function(e){e.type=new $e.NotificationType("$/logTrace");})(Od||(Ye.LogTraceNotification=Od={}));var oc;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening";})(oc||(Ye.ConnectionErrors=oc={}));var So=class e extends Error{constructor(t,r){super(r),this.code=t,Object.setPrototypeOf(this,e.prototype);}};Ye.ConnectionError=So;var Av;(function(e){function t(r){let n=r;return n&&Xt.func(n.cancelUndispatched)}e.is=t;})(Av||(Ye.ConnectionStrategy=Av={}));var Fd;(function(e){function t(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Xt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Xt.func(n.dispose))}e.is=t;})(Fd||(Ye.IdCancellationReceiverStrategy=Fd={}));var Iv;(function(e){function t(r){let n=r;return n&&n.kind==="request"&&Xt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Xt.func(n.dispose))}e.is=t;})(Iv||(Ye.RequestCancellationReceiverStrategy=Iv={}));var Bd;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new Ev.CancellationTokenSource}});function t(r){return Fd.is(r)||Iv.is(r)}e.is=t;})(Bd||(Ye.CancellationReceiverStrategy=Bd={}));var Md;(function(e){e.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(uc.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Xt.func(n.sendCancellation)&&Xt.func(n.cleanup)}e.is=t;})(Md||(Ye.CancellationSenderStrategy=Md={}));var qd;(function(e){e.Message=Object.freeze({receiver:Bd.Message,sender:Md.Message});function t(r){let n=r;return n&&Bd.is(n.receiver)&&Md.is(n.sender)}e.is=t;})(qd||(Ye.CancellationStrategy=qd={}));var Hd;(function(e){function t(r){let n=r;return n&&Xt.func(n.handleMessage)}e.is=t;})(Hd||(Ye.MessageStrategy=Hd={}));var iO;(function(e){function t(r){let n=r;return n&&(qd.is(n.cancellationStrategy)||Av.is(n.connectionStrategy)||Hd.is(n.messageStrategy))}e.is=t;})(iO||(Ye.ConnectionOptions=iO={}));var Gn;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed";})(Gn||(Gn={}));function jQ(e,t,r,n){let i=r!==void 0?r:Ye.NullLogger,s=0,a=0,o=0,c="2.0",l,u=new Map,f,h=new Map,p=new Map,m,v=new rO.LinkedMap,E=new Map,x=new Set,y=new Map,S=Et.Off,N=yn.Text,O,j=Gn.New,J=new sc.Emitter,z=new sc.Emitter,G=new sc.Emitter,ee=new sc.Emitter,H=new sc.Emitter,ne=n&&n.cancellationStrategy?n.cancellationStrategy:qd.Message;function me(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return "req-"+M.toString()}function Pe(M){return M===null?"res-unknown-"+(++o).toString():"res-"+M.toString()}function W(){return "not-"+(++a).toString()}function K(M,ae){$e.Message.isRequest(ae)?M.set(me(ae.id),ae):$e.Message.isResponse(ae)?M.set(Pe(ae.id),ae):M.set(W(),ae);}function se(M){}function Ae(){return j===Gn.Listening}function Fe(){return j===Gn.Closed}function je(){return j===Gn.Disposed}function Ve(){(j===Gn.New||j===Gn.Listening)&&(j=Gn.Closed,z.fire(void 0));}function ot(M){J.fire([M,void 0,void 0]);}function kt(M){J.fire(M);}e.onClose(Ve),e.onError(ot),t.onClose(Ve),t.onError(kt);function St(){m||v.size===0||(m=(0, tO.default)().timer.setImmediate(()=>{m=void 0,Le();}));}function ft(M){$e.Message.isRequest(M)?qt(M):$e.Message.isNotification(M)?Ue(M):$e.Message.isResponse(M)?ye(M):le(M);}function Le(){if(v.size===0)return;let M=v.shift();try{let ae=n?.messageStrategy;Hd.is(ae)?ae.handleMessage(M,ft):ft(M);}finally{St();}}let It=M=>{try{if($e.Message.isNotification(M)&&M.method===uc.type.method){let ae=M.params.id,be=me(ae),Ne=v.get(be);if($e.Message.isRequest(Ne)){let gt=n?.connectionStrategy,Rt=gt&&gt.cancelUndispatched?gt.cancelUndispatched(Ne,se):void 0;if(Rt&&(Rt.error!==void 0||Rt.result!==void 0)){v.delete(be),y.delete(ae),Rt.id=Ne.id,ze(Rt,M.method,Date.now()),t.write(Rt).catch(()=>i.error("Sending response for canceled message failed."));return}}let bt=y.get(ae);if(bt!==void 0){bt.cancel(),Dr(M);return}else x.add(ae);}K(v,M);}finally{St();}};function qt(M){if(je())return;function ae(tt,xt,dt){let jt={jsonrpc:c,id:M.id};tt instanceof $e.ResponseError?jt.error=tt.toJson():jt.result=tt===void 0?null:tt,ze(jt,xt,dt),t.write(jt).catch(()=>i.error("Sending response failed."));}function be(tt,xt,dt){let jt={jsonrpc:c,id:M.id,error:tt.toJson()};ze(jt,xt,dt),t.write(jt).catch(()=>i.error("Sending response failed."));}function Ne(tt,xt,dt){tt===void 0&&(tt=null);let jt={jsonrpc:c,id:M.id,result:tt};ze(jt,xt,dt),t.write(jt).catch(()=>i.error("Sending response failed."));}vn(M);let bt=u.get(M.method),gt,Rt;bt&&(gt=bt.type,Rt=bt.handler);let Lt=Date.now();if(Rt||l){let tt=M.id??String(Date.now()),xt=Fd.is(ne.receiver)?ne.receiver.createCancellationTokenSource(tt):ne.receiver.createCancellationTokenSource(M);M.id!==null&&x.has(M.id)&&xt.cancel(),M.id!==null&&y.set(tt,xt);try{let dt;if(Rt)if(M.params===void 0){if(gt!==void 0&&gt.numberOfParams!==0){be(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${M.method} defines ${gt.numberOfParams} params but received none.`),M.method,Lt);return}dt=Rt(xt.token);}else if(Array.isArray(M.params)){if(gt!==void 0&&gt.parameterStructures===$e.ParameterStructures.byName){be(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,Lt);return}dt=Rt(...M.params,xt.token);}else {if(gt!==void 0&&gt.parameterStructures===$e.ParameterStructures.byPosition){be(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,Lt);return}dt=Rt(M.params,xt.token);}else l&&(dt=l(M.method,M.params,xt.token));let jt=dt;dt?jt.then?jt.then(Jt=>{y.delete(tt),ae(Jt,M.method,Lt);},Jt=>{y.delete(tt),Jt instanceof $e.ResponseError?be(Jt,M.method,Lt):Jt&&Xt.string(Jt.message)?be(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${Jt.message}`),M.method,Lt):be(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Lt);}):(y.delete(tt),ae(dt,M.method,Lt)):(y.delete(tt),Ne(dt,M.method,Lt));}catch(dt){y.delete(tt),dt instanceof $e.ResponseError?ae(dt,M.method,Lt):dt&&Xt.string(dt.message)?be(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${dt.message}`),M.method,Lt):be(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Lt);}}else be(new $e.ResponseError($e.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,Lt);}function ye(M){if(!je())if(M.id===null)M.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else {let ae=M.id,be=E.get(ae);if(Rs(M,be),be!==void 0){E.delete(ae);try{if(M.error){let Ne=M.error;be.reject(new $e.ResponseError(Ne.code,Ne.message,Ne.data));}else if(M.result!==void 0)be.resolve(M.result);else throw new Error("Should never happen.")}catch(Ne){Ne.message?i.error(`Response handler '${be.method}' failed with message: ${Ne.message}`):i.error(`Response handler '${be.method}' failed unexpectedly.`);}}}}function Ue(M){if(je())return;let ae,be;if(M.method===uc.type.method){let Ne=M.params.id;x.delete(Ne),Dr(M);return}else {let Ne=h.get(M.method);Ne&&(be=Ne.handler,ae=Ne.type);}if(be||f)try{if(Dr(M),be)if(M.params===void 0)ae!==void 0&&ae.numberOfParams!==0&&ae.parameterStructures!==$e.ParameterStructures.byName&&i.error(`Notification ${M.method} defines ${ae.numberOfParams} params but received none.`),be();else if(Array.isArray(M.params)){let Ne=M.params;M.method===ac.type.method&&Ne.length===2&&Cv.is(Ne[0])?be({token:Ne[0],value:Ne[1]}):(ae!==void 0&&(ae.parameterStructures===$e.ParameterStructures.byName&&i.error(`Notification ${M.method} defines parameters by name but received parameters by position`),ae.numberOfParams!==M.params.length&&i.error(`Notification ${M.method} defines ${ae.numberOfParams} params but received ${Ne.length} arguments`)),be(...Ne));}else ae!==void 0&&ae.parameterStructures===$e.ParameterStructures.byPosition&&i.error(`Notification ${M.method} defines parameters by position but received parameters by name`),be(M.params);else f&&f(M.method,M.params);}catch(Ne){Ne.message?i.error(`Notification handler '${M.method}' failed with message: ${Ne.message}`):i.error(`Notification handler '${M.method}' failed unexpectedly.`);}else G.fire(M);}function le(M){if(!M){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let ae=M;if(Xt.string(ae.id)||Xt.number(ae.id)){let be=ae.id,Ne=E.get(be);Ne&&Ne.reject(new Error("The received response has neither a result nor an error property."));}}function Re(M){if(M!=null)switch(S){case Et.Verbose:return JSON.stringify(M,null,4);case Et.Compact:return JSON.stringify(M);default:return}}function We(M){if(!(S===Et.Off||!O))if(N===yn.Text){let ae;(S===Et.Verbose||S===Et.Compact)&&M.params&&(ae=`Params: ${Re(M.params)}

`),O.log(`Sending request '${M.method} - (${M.id})'.`,ae);}else Lr("send-request",M);}function et(M){if(!(S===Et.Off||!O))if(N===yn.Text){let ae;(S===Et.Verbose||S===Et.Compact)&&(M.params?ae=`Params: ${Re(M.params)}

`:ae=`No parameters provided.

`),O.log(`Sending notification '${M.method}'.`,ae);}else Lr("send-notification",M);}function ze(M,ae,be){if(!(S===Et.Off||!O))if(N===yn.Text){let Ne;(S===Et.Verbose||S===Et.Compact)&&(M.error&&M.error.data?Ne=`Error data: ${Re(M.error.data)}

`:M.result?Ne=`Result: ${Re(M.result)}

`:M.error===void 0&&(Ne=`No result returned.

`)),O.log(`Sending response '${ae} - (${M.id})'. Processing request took ${Date.now()-be}ms`,Ne);}else Lr("send-response",M);}function vn(M){if(!(S===Et.Off||!O))if(N===yn.Text){let ae;(S===Et.Verbose||S===Et.Compact)&&M.params&&(ae=`Params: ${Re(M.params)}

`),O.log(`Received request '${M.method} - (${M.id})'.`,ae);}else Lr("receive-request",M);}function Dr(M){if(!(S===Et.Off||!O||M.method===Od.type.method))if(N===yn.Text){let ae;(S===Et.Verbose||S===Et.Compact)&&(M.params?ae=`Params: ${Re(M.params)}

`:ae=`No parameters provided.

`),O.log(`Received notification '${M.method}'.`,ae);}else Lr("receive-notification",M);}function Rs(M,ae){if(!(S===Et.Off||!O))if(N===yn.Text){let be;if((S===Et.Verbose||S===Et.Compact)&&(M.error&&M.error.data?be=`Error data: ${Re(M.error.data)}

`:M.result?be=`Result: ${Re(M.result)}

`:M.error===void 0&&(be=`No result returned.

`)),ae){let Ne=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";O.log(`Received response '${ae.method} - (${M.id})' in ${Date.now()-ae.timerStart}ms.${Ne}`,be);}else O.log(`Received response ${M.id} without active response promise.`,be);}else Lr("receive-response",M);}function Lr(M,ae){if(!O||S===Et.Off)return;let be={isLSPMessage:!0,type:M,message:ae,timestamp:Date.now()};O.log(be);}function zr(){if(Fe())throw new So(oc.Closed,"Connection is closed.");if(je())throw new So(oc.Disposed,"Connection is disposed.")}function Ps(){if(Ae())throw new So(oc.AlreadyListening,"Connection is already listening")}function _a(){if(!Ae())throw new Error("Call listen() first.")}function on(M){return M===void 0?null:M}function Ns(M){if(M!==null)return M}function ks(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function bi(M,ae){switch(M){case $e.ParameterStructures.auto:return ks(ae)?Ns(ae):[on(ae)];case $e.ParameterStructures.byName:if(!ks(ae))throw new Error("Received parameters by name but param is not an object literal.");return Ns(ae);case $e.ParameterStructures.byPosition:return [on(ae)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function Ds(M,ae){let be,Ne=M.numberOfParams;switch(Ne){case 0:be=void 0;break;case 1:be=bi(M.parameterStructures,ae[0]);break;default:be=[];for(let bt=0;bt<ae.length&&bt<Ne;bt++)be.push(on(ae[bt]));if(ae.length<Ne)for(let bt=ae.length;bt<Ne;bt++)be.push(null);break}return be}let Mn={sendNotification:(M,...ae)=>{zr();let be,Ne;if(Xt.string(M)){be=M;let gt=ae[0],Rt=0,Lt=$e.ParameterStructures.auto;$e.ParameterStructures.is(gt)&&(Rt=1,Lt=gt);let tt=ae.length,xt=tt-Rt;switch(xt){case 0:Ne=void 0;break;case 1:Ne=bi(Lt,ae[Rt]);break;default:if(Lt===$e.ParameterStructures.byName)throw new Error(`Received ${xt} parameters for 'by Name' notification parameter structure.`);Ne=ae.slice(Rt,tt).map(dt=>on(dt));break}}else {let gt=ae;be=M.method,Ne=Ds(M,gt);}let bt={jsonrpc:c,method:be,params:Ne};return et(bt),t.write(bt).catch(gt=>{throw i.error("Sending notification failed."),gt})},onNotification:(M,ae)=>{zr();let be;return Xt.func(M)?f=M:ae&&(Xt.string(M)?(be=M,h.set(M,{type:void 0,handler:ae})):(be=M.method,h.set(M.method,{type:M,handler:ae}))),{dispose:()=>{be!==void 0?h.delete(be):f=void 0;}}},onProgress:(M,ae,be)=>{if(p.has(ae))throw new Error(`Progress handler for token ${ae} already registered`);return p.set(ae,be),{dispose:()=>{p.delete(ae);}}},sendProgress:(M,ae,be)=>Mn.sendNotification(ac.type,{token:ae,value:be}),onUnhandledProgress:ee.event,sendRequest:(M,...ae)=>{zr(),_a();let be,Ne,bt;if(Xt.string(M)){be=M;let tt=ae[0],xt=ae[ae.length-1],dt=0,jt=$e.ParameterStructures.auto;$e.ParameterStructures.is(tt)&&(dt=1,jt=tt);let Jt=ae.length;Ev.CancellationToken.is(xt)&&(Jt=Jt-1,bt=xt);let Or=Jt-dt;switch(Or){case 0:Ne=void 0;break;case 1:Ne=bi(jt,ae[dt]);break;default:if(jt===$e.ParameterStructures.byName)throw new Error(`Received ${Or} parameters for 'by Name' request parameter structure.`);Ne=ae.slice(dt,Jt).map(va=>on(va));break}}else {let tt=ae;be=M.method,Ne=Ds(M,tt);let xt=M.numberOfParams;bt=Ev.CancellationToken.is(tt[xt])?tt[xt]:void 0;}let gt=s++,Rt;bt&&(Rt=bt.onCancellationRequested(()=>{let tt=ne.sender.sendCancellation(Mn,gt);return tt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${gt}`),Promise.resolve()):tt.catch(()=>{i.log(`Sending cancellation messages for id ${gt} failed`);})}));let Lt={jsonrpc:c,id:gt,method:be,params:Ne};return We(Lt),typeof ne.sender.enableCancellation=="function"&&ne.sender.enableCancellation(Lt),new Promise(async(tt,xt)=>{let dt=Or=>{tt(Or),ne.sender.cleanup(gt),Rt?.dispose();},jt=Or=>{xt(Or),ne.sender.cleanup(gt),Rt?.dispose();},Jt={method:be,timerStart:Date.now(),resolve:dt,reject:jt};try{await t.write(Lt),E.set(gt,Jt);}catch(Or){throw i.error("Sending request failed."),Jt.reject(new $e.ResponseError($e.ErrorCodes.MessageWriteError,Or.message?Or.message:"Unknown reason")),Or}})},onRequest:(M,ae)=>{zr();let be=null;return xv.is(M)?(be=void 0,l=M):Xt.string(M)?(be=null,ae!==void 0&&(be=M,u.set(M,{handler:ae,type:void 0}))):ae!==void 0&&(be=M.method,u.set(M.method,{type:M,handler:ae})),{dispose:()=>{be!==null&&(be!==void 0?u.delete(be):l=void 0);}}},hasPendingResponse:()=>E.size>0,trace:async(M,ae,be)=>{let Ne=!1,bt=yn.Text;be!==void 0&&(Xt.boolean(be)?Ne=be:(Ne=be.sendNotification||!1,bt=be.traceFormat||yn.Text)),S=M,N=bt,S===Et.Off?O=void 0:O=ae,Ne&&!Fe()&&!je()&&await Mn.sendNotification(Tv.type,{value:Et.toString(M)});},onError:J.event,onClose:z.event,onUnhandledNotification:G.event,onDispose:H.event,end:()=>{t.end();},dispose:()=>{if(je())return;j=Gn.Disposed,H.fire(void 0);let M=new $e.ResponseError($e.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let ae of E.values())ae.reject(M);E=new Map,y=new Map,x=new Set,v=new rO.LinkedMap,Xt.func(t.dispose)&&t.dispose(),Xt.func(e.dispose)&&e.dispose();},listen:()=>{zr(),Ps(),j=Gn.Listening,e.listen(It);},inspect:()=>{(0, tO.default)().console.log("inspect");}};return Mn.onNotification(Od.type,M=>{if(S===Et.Off||!O)return;let ae=S===Et.Verbose||S===Et.Compact;O.log(M.message,ae?M.verbose:void 0);}),Mn.onNotification(ac.type,M=>{let ae=p.get(M.token);ae?ae(M.value):ee.fire(M);}),Mn}Ye.createMessageConnection=jQ;});var Ud=P(re=>{Object.defineProperty(re,"__esModule",{value:!0});re.ProgressType=re.ProgressToken=re.createMessageConnection=re.NullLogger=re.ConnectionOptions=re.ConnectionStrategy=re.AbstractMessageBuffer=re.WriteableStreamMessageWriter=re.AbstractMessageWriter=re.MessageWriter=re.ReadableStreamMessageReader=re.AbstractMessageReader=re.MessageReader=re.SharedArrayReceiverStrategy=re.SharedArraySenderStrategy=re.CancellationToken=re.CancellationTokenSource=re.Emitter=re.Event=re.Disposable=re.LRUCache=re.Touch=re.LinkedMap=re.ParameterStructures=re.NotificationType9=re.NotificationType8=re.NotificationType7=re.NotificationType6=re.NotificationType5=re.NotificationType4=re.NotificationType3=re.NotificationType2=re.NotificationType1=re.NotificationType0=re.NotificationType=re.ErrorCodes=re.ResponseError=re.RequestType9=re.RequestType8=re.RequestType7=re.RequestType6=re.RequestType5=re.RequestType4=re.RequestType3=re.RequestType2=re.RequestType1=re.RequestType0=re.RequestType=re.Message=re.RAL=void 0;re.MessageStrategy=re.CancellationStrategy=re.CancellationSenderStrategy=re.CancellationReceiverStrategy=re.ConnectionError=re.ConnectionErrors=re.LogTraceNotification=re.SetTraceNotification=re.TraceFormat=re.TraceValues=re.Trace=void 0;var Mt=ev();Object.defineProperty(re,"Message",{enumerable:!0,get:function(){return Mt.Message}});Object.defineProperty(re,"RequestType",{enumerable:!0,get:function(){return Mt.RequestType}});Object.defineProperty(re,"RequestType0",{enumerable:!0,get:function(){return Mt.RequestType0}});Object.defineProperty(re,"RequestType1",{enumerable:!0,get:function(){return Mt.RequestType1}});Object.defineProperty(re,"RequestType2",{enumerable:!0,get:function(){return Mt.RequestType2}});Object.defineProperty(re,"RequestType3",{enumerable:!0,get:function(){return Mt.RequestType3}});Object.defineProperty(re,"RequestType4",{enumerable:!0,get:function(){return Mt.RequestType4}});Object.defineProperty(re,"RequestType5",{enumerable:!0,get:function(){return Mt.RequestType5}});Object.defineProperty(re,"RequestType6",{enumerable:!0,get:function(){return Mt.RequestType6}});Object.defineProperty(re,"RequestType7",{enumerable:!0,get:function(){return Mt.RequestType7}});Object.defineProperty(re,"RequestType8",{enumerable:!0,get:function(){return Mt.RequestType8}});Object.defineProperty(re,"RequestType9",{enumerable:!0,get:function(){return Mt.RequestType9}});Object.defineProperty(re,"ResponseError",{enumerable:!0,get:function(){return Mt.ResponseError}});Object.defineProperty(re,"ErrorCodes",{enumerable:!0,get:function(){return Mt.ErrorCodes}});Object.defineProperty(re,"NotificationType",{enumerable:!0,get:function(){return Mt.NotificationType}});Object.defineProperty(re,"NotificationType0",{enumerable:!0,get:function(){return Mt.NotificationType0}});Object.defineProperty(re,"NotificationType1",{enumerable:!0,get:function(){return Mt.NotificationType1}});Object.defineProperty(re,"NotificationType2",{enumerable:!0,get:function(){return Mt.NotificationType2}});Object.defineProperty(re,"NotificationType3",{enumerable:!0,get:function(){return Mt.NotificationType3}});Object.defineProperty(re,"NotificationType4",{enumerable:!0,get:function(){return Mt.NotificationType4}});Object.defineProperty(re,"NotificationType5",{enumerable:!0,get:function(){return Mt.NotificationType5}});Object.defineProperty(re,"NotificationType6",{enumerable:!0,get:function(){return Mt.NotificationType6}});Object.defineProperty(re,"NotificationType7",{enumerable:!0,get:function(){return Mt.NotificationType7}});Object.defineProperty(re,"NotificationType8",{enumerable:!0,get:function(){return Mt.NotificationType8}});Object.defineProperty(re,"NotificationType9",{enumerable:!0,get:function(){return Mt.NotificationType9}});Object.defineProperty(re,"ParameterStructures",{enumerable:!0,get:function(){return Mt.ParameterStructures}});var Rv=rv();Object.defineProperty(re,"LinkedMap",{enumerable:!0,get:function(){return Rv.LinkedMap}});Object.defineProperty(re,"LRUCache",{enumerable:!0,get:function(){return Rv.LRUCache}});Object.defineProperty(re,"Touch",{enumerable:!0,get:function(){return Rv.Touch}});var VQ=VL();Object.defineProperty(re,"Disposable",{enumerable:!0,get:function(){return VQ.Disposable}});var aO=mo();Object.defineProperty(re,"Event",{enumerable:!0,get:function(){return aO.Event}});Object.defineProperty(re,"Emitter",{enumerable:!0,get:function(){return aO.Emitter}});var oO=Pd();Object.defineProperty(re,"CancellationTokenSource",{enumerable:!0,get:function(){return oO.CancellationTokenSource}});Object.defineProperty(re,"CancellationToken",{enumerable:!0,get:function(){return oO.CancellationToken}});var uO=KL();Object.defineProperty(re,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return uO.SharedArraySenderStrategy}});Object.defineProperty(re,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return uO.SharedArrayReceiverStrategy}});var Pv=GL();Object.defineProperty(re,"MessageReader",{enumerable:!0,get:function(){return Pv.MessageReader}});Object.defineProperty(re,"AbstractMessageReader",{enumerable:!0,get:function(){return Pv.AbstractMessageReader}});Object.defineProperty(re,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Pv.ReadableStreamMessageReader}});var Nv=JL();Object.defineProperty(re,"MessageWriter",{enumerable:!0,get:function(){return Nv.MessageWriter}});Object.defineProperty(re,"AbstractMessageWriter",{enumerable:!0,get:function(){return Nv.AbstractMessageWriter}});Object.defineProperty(re,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Nv.WriteableStreamMessageWriter}});var WQ=eO();Object.defineProperty(re,"AbstractMessageBuffer",{enumerable:!0,get:function(){return WQ.AbstractMessageBuffer}});var Tr=sO();Object.defineProperty(re,"ConnectionStrategy",{enumerable:!0,get:function(){return Tr.ConnectionStrategy}});Object.defineProperty(re,"ConnectionOptions",{enumerable:!0,get:function(){return Tr.ConnectionOptions}});Object.defineProperty(re,"NullLogger",{enumerable:!0,get:function(){return Tr.NullLogger}});Object.defineProperty(re,"createMessageConnection",{enumerable:!0,get:function(){return Tr.createMessageConnection}});Object.defineProperty(re,"ProgressToken",{enumerable:!0,get:function(){return Tr.ProgressToken}});Object.defineProperty(re,"ProgressType",{enumerable:!0,get:function(){return Tr.ProgressType}});Object.defineProperty(re,"Trace",{enumerable:!0,get:function(){return Tr.Trace}});Object.defineProperty(re,"TraceValues",{enumerable:!0,get:function(){return Tr.TraceValues}});Object.defineProperty(re,"TraceFormat",{enumerable:!0,get:function(){return Tr.TraceFormat}});Object.defineProperty(re,"SetTraceNotification",{enumerable:!0,get:function(){return Tr.SetTraceNotification}});Object.defineProperty(re,"LogTraceNotification",{enumerable:!0,get:function(){return Tr.LogTraceNotification}});Object.defineProperty(re,"ConnectionErrors",{enumerable:!0,get:function(){return Tr.ConnectionErrors}});Object.defineProperty(re,"ConnectionError",{enumerable:!0,get:function(){return Tr.ConnectionError}});Object.defineProperty(re,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Tr.CancellationReceiverStrategy}});Object.defineProperty(re,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Tr.CancellationSenderStrategy}});Object.defineProperty(re,"CancellationStrategy",{enumerable:!0,get:function(){return Tr.CancellationStrategy}});Object.defineProperty(re,"MessageStrategy",{enumerable:!0,get:function(){return Tr.MessageStrategy}});var KQ=_s();re.RAL=KQ.default;});var fO=P(Ov=>{Object.defineProperty(Ov,"__esModule",{value:!0});var cO=he("util"),Bi=Ud(),$d=class e extends Bi.AbstractMessageBuffer{constructor(t="utf-8"){super(t);}emptyBuffer(){return e.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new cO.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};$d.emptyBuffer=Buffer.allocUnsafe(0);var kv=class{constructor(t){this.stream=t;}onClose(t){return this.stream.on("close",t),Bi.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Bi.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Bi.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Bi.Disposable.create(()=>this.stream.off("data",t))}},Dv=class{constructor(t){this.stream=t;}onClose(t){return this.stream.on("close",t),Bi.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Bi.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Bi.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,i)=>{let s=a=>{a==null?n():i(a);};typeof t=="string"?this.stream.write(t,r,s):this.stream.write(t,s);})}end(){this.stream.end();}},lO=Object.freeze({messageBuffer:Object.freeze({create:e=>new $d(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new cO.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new kv(e),asWritableStream:e=>new Dv(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){let n=setTimeout(e,t,...r);return {dispose:()=>clearTimeout(n)}},setImmediate(e,...t){let r=setImmediate(e,...t);return {dispose:()=>clearImmediate(r)}},setInterval(e,t,...r){let n=setInterval(e,t,...r);return {dispose:()=>clearInterval(n)}}})});function Lv(){return lO}(function(e){function t(){Bi.RAL.install(lO);}e.install=t;})(Lv||(Lv={}));Ov.default=Lv;});var ha=P(lt=>{var zQ=lt&&lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),GQ=lt&&lt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zQ(t,e,r);};Object.defineProperty(lt,"__esModule",{value:!0});lt.createMessageConnection=lt.createServerSocketTransport=lt.createClientSocketTransport=lt.createServerPipeTransport=lt.createClientPipeTransport=lt.generateRandomPipeName=lt.StreamMessageWriter=lt.StreamMessageReader=lt.SocketMessageWriter=lt.SocketMessageReader=lt.PortMessageWriter=lt.PortMessageReader=lt.IPCMessageWriter=lt.IPCMessageReader=void 0;var bo=fO();bo.default.install();var dO=he("path"),XQ=he("os"),ZQ=he("crypto"),Wd=he("net"),_n=Ud();GQ(Ud(),lt);var Fv=class extends _n.AbstractMessageReader{constructor(t){super(),this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose());}listen(t){return this.process.on("message",t),_n.Disposable.create(()=>this.process.off("message",t))}};lt.IPCMessageReader=Fv;var Bv=class extends _n.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose);}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0;}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){}};lt.IPCMessageWriter=Bv;var Mv=class extends _n.AbstractMessageReader{constructor(t){super(),this.onData=new _n.Emitter,t.on("close",()=>this.fireClose),t.on("error",r=>this.fireError(r)),t.on("message",r=>{this.onData.fire(r);});}listen(t){return this.onData.event(t)}};lt.PortMessageReader=Mv;var qv=class extends _n.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",r=>this.fireError(r));}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){}};lt.PortMessageWriter=qv;var fa=class extends _n.ReadableStreamMessageReader{constructor(t,r="utf-8"){super((0, bo.default)().stream.asReadableStream(t),r);}};lt.SocketMessageReader=fa;var da=class extends _n.WriteableStreamMessageWriter{constructor(t,r){super((0, bo.default)().stream.asWritableStream(t),r),this.socket=t;}dispose(){super.dispose(),this.socket.destroy();}};lt.SocketMessageWriter=da;var jd=class extends _n.ReadableStreamMessageReader{constructor(t,r){super((0, bo.default)().stream.asReadableStream(t),r);}};lt.StreamMessageReader=jd;var Vd=class extends _n.WriteableStreamMessageWriter{constructor(t,r){super((0, bo.default)().stream.asWritableStream(t),r);}};lt.StreamMessageWriter=Vd;var hO=process.env.XDG_RUNTIME_DIR,YQ=new Map([["linux",107],["darwin",103]]);function QQ(){let e=(0, ZQ.randomBytes)(21).toString("hex");if(process.platform==="win32")return `\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;hO?t=dO.join(hO,`vscode-ipc-${e}.sock`):t=dO.join(XQ.tmpdir(),`vscode-${e}.sock`);let r=YQ.get(process.platform);return r!==void 0&&t.length>r&&(0, bo.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}lt.generateRandomPipeName=QQ;function JQ(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i;});return new Promise((i,s)=>{let a=(0, Wd.createServer)(o=>{a.close(),r([new fa(o,t),new da(o,t)]);});a.on("error",s),a.listen(e,()=>{a.removeListener("error",s),i({onConnected:()=>n});});})}lt.createClientPipeTransport=JQ;function eJ(e,t="utf-8"){let r=(0, Wd.createConnection)(e);return [new fa(r,t),new da(r,t)]}lt.createServerPipeTransport=eJ;function tJ(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i;});return new Promise((i,s)=>{let a=(0, Wd.createServer)(o=>{a.close(),r([new fa(o,t),new da(o,t)]);});a.on("error",s),a.listen(e,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>n});});})}lt.createClientSocketTransport=tJ;function rJ(e,t="utf-8"){let r=(0, Wd.createConnection)(e,"127.0.0.1");return [new fa(r,t),new da(r,t)]}lt.createServerSocketTransport=rJ;function nJ(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function iJ(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function sJ(e,t,r,n){r||(r=_n.NullLogger);let i=nJ(e)?new jd(e):e,s=iJ(t)?new Vd(t):t;return _n.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, _n.createMessageConnection)(i,s,r,n)}lt.createMessageConnection=sJ;});var Hv=P((pce,pO)=>{pO.exports=ha();});var zd=P((gO,Kd)=>{(function(e){if(typeof Kd=="object"&&typeof Kd.exports=="object"){var t=e(he,gO);t!==void 0&&(Kd.exports=t);}else typeof define=="function"&&define.amd&&define(["require","exports"],e);})(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var r;(function(A){function q(U){return typeof U=="string"}A.is=q;})(r||(t.DocumentUri=r={}));var n;(function(A){function q(U){return typeof U=="string"}A.is=q;})(n||(t.URI=n={}));var i;(function(A){A.MIN_VALUE=-2147483648,A.MAX_VALUE=2147483647;function q(U){return typeof U=="number"&&A.MIN_VALUE<=U&&U<=A.MAX_VALUE}A.is=q;})(i||(t.integer=i={}));var s;(function(A){A.MIN_VALUE=0,A.MAX_VALUE=2147483647;function q(U){return typeof U=="number"&&A.MIN_VALUE<=U&&U<=A.MAX_VALUE}A.is=q;})(s||(t.uinteger=s={}));var a;(function(A){function q(k,b){return k===Number.MAX_VALUE&&(k=s.MAX_VALUE),b===Number.MAX_VALUE&&(b=s.MAX_VALUE),{line:k,character:b}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&Y.uinteger(b.line)&&Y.uinteger(b.character)}A.is=U;})(a||(t.Position=a={}));var o;(function(A){function q(k,b,X,oe){if(Y.uinteger(k)&&Y.uinteger(b)&&Y.uinteger(X)&&Y.uinteger(oe))return {start:a.create(k,b),end:a.create(X,oe)};if(a.is(k)&&a.is(b))return {start:k,end:b};throw new Error("Range#create called with invalid arguments[".concat(k,", ").concat(b,", ").concat(X,", ").concat(oe,"]"))}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&a.is(b.start)&&a.is(b.end)}A.is=U;})(o||(t.Range=o={}));var c;(function(A){function q(k,b){return {uri:k,range:b}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&o.is(b.range)&&(Y.string(b.uri)||Y.undefined(b.uri))}A.is=U;})(c||(t.Location=c={}));var l;(function(A){function q(k,b,X,oe){return {targetUri:k,targetRange:b,targetSelectionRange:X,originSelectionRange:oe}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&o.is(b.targetRange)&&Y.string(b.targetUri)&&o.is(b.targetSelectionRange)&&(o.is(b.originSelectionRange)||Y.undefined(b.originSelectionRange))}A.is=U;})(l||(t.LocationLink=l={}));var u;(function(A){function q(k,b,X,oe){return {red:k,green:b,blue:X,alpha:oe}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&Y.numberRange(b.red,0,1)&&Y.numberRange(b.green,0,1)&&Y.numberRange(b.blue,0,1)&&Y.numberRange(b.alpha,0,1)}A.is=U;})(u||(t.Color=u={}));var f;(function(A){function q(k,b){return {range:k,color:b}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&o.is(b.range)&&u.is(b.color)}A.is=U;})(f||(t.ColorInformation=f={}));var h;(function(A){function q(k,b,X){return {label:k,textEdit:b,additionalTextEdits:X}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&Y.string(b.label)&&(Y.undefined(b.textEdit)||O.is(b))&&(Y.undefined(b.additionalTextEdits)||Y.typedArray(b.additionalTextEdits,O.is))}A.is=U;})(h||(t.ColorPresentation=h={}));var p;(function(A){A.Comment="comment",A.Imports="imports",A.Region="region";})(p||(t.FoldingRangeKind=p={}));var m;(function(A){function q(k,b,X,oe,Ge,Vt){var Pt={startLine:k,endLine:b};return Y.defined(X)&&(Pt.startCharacter=X),Y.defined(oe)&&(Pt.endCharacter=oe),Y.defined(Ge)&&(Pt.kind=Ge),Y.defined(Vt)&&(Pt.collapsedText=Vt),Pt}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&Y.uinteger(b.startLine)&&Y.uinteger(b.startLine)&&(Y.undefined(b.startCharacter)||Y.uinteger(b.startCharacter))&&(Y.undefined(b.endCharacter)||Y.uinteger(b.endCharacter))&&(Y.undefined(b.kind)||Y.string(b.kind))}A.is=U;})(m||(t.FoldingRange=m={}));var v;(function(A){function q(k,b){return {location:k,message:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&c.is(b.location)&&Y.string(b.message)}A.is=U;})(v||(t.DiagnosticRelatedInformation=v={}));var E;(function(A){A.Error=1,A.Warning=2,A.Information=3,A.Hint=4;})(E||(t.DiagnosticSeverity=E={}));var x;(function(A){A.Unnecessary=1,A.Deprecated=2;})(x||(t.DiagnosticTag=x={}));var y;(function(A){function q(U){var k=U;return Y.objectLiteral(k)&&Y.string(k.href)}A.is=q;})(y||(t.CodeDescription=y={}));var S;(function(A){function q(k,b,X,oe,Ge,Vt){var Pt={range:k,message:b};return Y.defined(X)&&(Pt.severity=X),Y.defined(oe)&&(Pt.code=oe),Y.defined(Ge)&&(Pt.source=Ge),Y.defined(Vt)&&(Pt.relatedInformation=Vt),Pt}A.create=q;function U(k){var b,X=k;return Y.defined(X)&&o.is(X.range)&&Y.string(X.message)&&(Y.number(X.severity)||Y.undefined(X.severity))&&(Y.integer(X.code)||Y.string(X.code)||Y.undefined(X.code))&&(Y.undefined(X.codeDescription)||Y.string((b=X.codeDescription)===null||b===void 0?void 0:b.href))&&(Y.string(X.source)||Y.undefined(X.source))&&(Y.undefined(X.relatedInformation)||Y.typedArray(X.relatedInformation,v.is))}A.is=U;})(S||(t.Diagnostic=S={}));var N;(function(A){function q(k,b){for(var X=[],oe=2;oe<arguments.length;oe++)X[oe-2]=arguments[oe];var Ge={title:k,command:b};return Y.defined(X)&&X.length>0&&(Ge.arguments=X),Ge}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.string(b.title)&&Y.string(b.command)}A.is=U;})(N||(t.Command=N={}));var O;(function(A){function q(X,oe){return {range:X,newText:oe}}A.replace=q;function U(X,oe){return {range:{start:X,end:X},newText:oe}}A.insert=U;function k(X){return {range:X,newText:""}}A.del=k;function b(X){var oe=X;return Y.objectLiteral(oe)&&Y.string(oe.newText)&&o.is(oe.range)}A.is=b;})(O||(t.TextEdit=O={}));var j;(function(A){function q(k,b,X){var oe={label:k};return b!==void 0&&(oe.needsConfirmation=b),X!==void 0&&(oe.description=X),oe}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&Y.string(b.label)&&(Y.boolean(b.needsConfirmation)||b.needsConfirmation===void 0)&&(Y.string(b.description)||b.description===void 0)}A.is=U;})(j||(t.ChangeAnnotation=j={}));var J;(function(A){function q(U){var k=U;return Y.string(k)}A.is=q;})(J||(t.ChangeAnnotationIdentifier=J={}));var z;(function(A){function q(X,oe,Ge){return {range:X,newText:oe,annotationId:Ge}}A.replace=q;function U(X,oe,Ge){return {range:{start:X,end:X},newText:oe,annotationId:Ge}}A.insert=U;function k(X,oe){return {range:X,newText:"",annotationId:oe}}A.del=k;function b(X){var oe=X;return O.is(oe)&&(j.is(oe.annotationId)||J.is(oe.annotationId))}A.is=b;})(z||(t.AnnotatedTextEdit=z={}));var G;(function(A){function q(k,b){return {textDocument:k,edits:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Fe.is(b.textDocument)&&Array.isArray(b.edits)}A.is=U;})(G||(t.TextDocumentEdit=G={}));var ee;(function(A){function q(k,b,X){var oe={kind:"create",uri:k};return b!==void 0&&(b.overwrite!==void 0||b.ignoreIfExists!==void 0)&&(oe.options=b),X!==void 0&&(oe.annotationId=X),oe}A.create=q;function U(k){var b=k;return b&&b.kind==="create"&&Y.string(b.uri)&&(b.options===void 0||(b.options.overwrite===void 0||Y.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||Y.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||J.is(b.annotationId))}A.is=U;})(ee||(t.CreateFile=ee={}));var H;(function(A){function q(k,b,X,oe){var Ge={kind:"rename",oldUri:k,newUri:b};return X!==void 0&&(X.overwrite!==void 0||X.ignoreIfExists!==void 0)&&(Ge.options=X),oe!==void 0&&(Ge.annotationId=oe),Ge}A.create=q;function U(k){var b=k;return b&&b.kind==="rename"&&Y.string(b.oldUri)&&Y.string(b.newUri)&&(b.options===void 0||(b.options.overwrite===void 0||Y.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||Y.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||J.is(b.annotationId))}A.is=U;})(H||(t.RenameFile=H={}));var ne;(function(A){function q(k,b,X){var oe={kind:"delete",uri:k};return b!==void 0&&(b.recursive!==void 0||b.ignoreIfNotExists!==void 0)&&(oe.options=b),X!==void 0&&(oe.annotationId=X),oe}A.create=q;function U(k){var b=k;return b&&b.kind==="delete"&&Y.string(b.uri)&&(b.options===void 0||(b.options.recursive===void 0||Y.boolean(b.options.recursive))&&(b.options.ignoreIfNotExists===void 0||Y.boolean(b.options.ignoreIfNotExists)))&&(b.annotationId===void 0||J.is(b.annotationId))}A.is=U;})(ne||(t.DeleteFile=ne={}));var me;(function(A){function q(U){var k=U;return k&&(k.changes!==void 0||k.documentChanges!==void 0)&&(k.documentChanges===void 0||k.documentChanges.every(function(b){return Y.string(b.kind)?ee.is(b)||H.is(b)||ne.is(b):G.is(b)}))}A.is=q;})(me||(t.WorkspaceEdit=me={}));var Pe=function(){function A(q,U){this.edits=q,this.changeAnnotations=U;}return A.prototype.insert=function(q,U,k){var b,X;if(k===void 0?b=O.insert(q,U):J.is(k)?(X=k,b=z.insert(q,U,k)):(this.assertChangeAnnotations(this.changeAnnotations),X=this.changeAnnotations.manage(k),b=z.insert(q,U,X)),this.edits.push(b),X!==void 0)return X},A.prototype.replace=function(q,U,k){var b,X;if(k===void 0?b=O.replace(q,U):J.is(k)?(X=k,b=z.replace(q,U,k)):(this.assertChangeAnnotations(this.changeAnnotations),X=this.changeAnnotations.manage(k),b=z.replace(q,U,X)),this.edits.push(b),X!==void 0)return X},A.prototype.delete=function(q,U){var k,b;if(U===void 0?k=O.del(q):J.is(U)?(b=U,k=z.del(q,U)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(U),k=z.del(q,b)),this.edits.push(k),b!==void 0)return b},A.prototype.add=function(q){this.edits.push(q);},A.prototype.all=function(){return this.edits},A.prototype.clear=function(){this.edits.splice(0,this.edits.length);},A.prototype.assertChangeAnnotations=function(q){if(q===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},A}(),W=function(){function A(q){this._annotations=q===void 0?Object.create(null):q,this._counter=0,this._size=0;}return A.prototype.all=function(){return this._annotations},Object.defineProperty(A.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),A.prototype.manage=function(q,U){var k;if(J.is(q)?k=q:(k=this.nextId(),U=q),this._annotations[k]!==void 0)throw new Error("Id ".concat(k," is already in use."));if(U===void 0)throw new Error("No annotation provided for id ".concat(k));return this._annotations[k]=U,this._size++,k},A.prototype.nextId=function(){return this._counter++,this._counter.toString()},A}(),K=function(){function A(q){var U=this;this._textEditChanges=Object.create(null),q!==void 0?(this._workspaceEdit=q,q.documentChanges?(this._changeAnnotations=new W(q.changeAnnotations),q.changeAnnotations=this._changeAnnotations.all(),q.documentChanges.forEach(function(k){if(G.is(k)){var b=new Pe(k.edits,U._changeAnnotations);U._textEditChanges[k.textDocument.uri]=b;}})):q.changes&&Object.keys(q.changes).forEach(function(k){var b=new Pe(q.changes[k]);U._textEditChanges[k]=b;})):this._workspaceEdit={};}return Object.defineProperty(A.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),A.prototype.getTextEditChange=function(q){if(Fe.is(q)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var U={uri:q.uri,version:q.version},k=this._textEditChanges[U.uri];if(!k){var b=[],X={textDocument:U,edits:b};this._workspaceEdit.documentChanges.push(X),k=new Pe(b,this._changeAnnotations),this._textEditChanges[U.uri]=k;}return k}else {if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var k=this._textEditChanges[q];if(!k){var b=[];this._workspaceEdit.changes[q]=b,k=new Pe(b),this._textEditChanges[q]=k;}return k}},A.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new W,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all());},A.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null));},A.prototype.createFile=function(q,U,k){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;j.is(U)||J.is(U)?b=U:k=U;var X,oe;if(b===void 0?X=ee.create(q,k):(oe=J.is(b)?b:this._changeAnnotations.manage(b),X=ee.create(q,k,oe)),this._workspaceEdit.documentChanges.push(X),oe!==void 0)return oe},A.prototype.renameFile=function(q,U,k,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var X;j.is(k)||J.is(k)?X=k:b=k;var oe,Ge;if(X===void 0?oe=H.create(q,U,b):(Ge=J.is(X)?X:this._changeAnnotations.manage(X),oe=H.create(q,U,b,Ge)),this._workspaceEdit.documentChanges.push(oe),Ge!==void 0)return Ge},A.prototype.deleteFile=function(q,U,k){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;j.is(U)||J.is(U)?b=U:k=U;var X,oe;if(b===void 0?X=ne.create(q,k):(oe=J.is(b)?b:this._changeAnnotations.manage(b),X=ne.create(q,k,oe)),this._workspaceEdit.documentChanges.push(X),oe!==void 0)return oe},A}();t.WorkspaceChange=K;var se;(function(A){function q(k){return {uri:k}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.string(b.uri)}A.is=U;})(se||(t.TextDocumentIdentifier=se={}));var Ae;(function(A){function q(k,b){return {uri:k,version:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.string(b.uri)&&Y.integer(b.version)}A.is=U;})(Ae||(t.VersionedTextDocumentIdentifier=Ae={}));var Fe;(function(A){function q(k,b){return {uri:k,version:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.string(b.uri)&&(b.version===null||Y.integer(b.version))}A.is=U;})(Fe||(t.OptionalVersionedTextDocumentIdentifier=Fe={}));var je;(function(A){function q(k,b,X,oe){return {uri:k,languageId:b,version:X,text:oe}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.string(b.uri)&&Y.string(b.languageId)&&Y.integer(b.version)&&Y.string(b.text)}A.is=U;})(je||(t.TextDocumentItem=je={}));var Ve;(function(A){A.PlainText="plaintext",A.Markdown="markdown";function q(U){var k=U;return k===A.PlainText||k===A.Markdown}A.is=q;})(Ve||(t.MarkupKind=Ve={}));var ot;(function(A){function q(U){var k=U;return Y.objectLiteral(U)&&Ve.is(k.kind)&&Y.string(k.value)}A.is=q;})(ot||(t.MarkupContent=ot={}));var kt;(function(A){A.Text=1,A.Method=2,A.Function=3,A.Constructor=4,A.Field=5,A.Variable=6,A.Class=7,A.Interface=8,A.Module=9,A.Property=10,A.Unit=11,A.Value=12,A.Enum=13,A.Keyword=14,A.Snippet=15,A.Color=16,A.File=17,A.Reference=18,A.Folder=19,A.EnumMember=20,A.Constant=21,A.Struct=22,A.Event=23,A.Operator=24,A.TypeParameter=25;})(kt||(t.CompletionItemKind=kt={}));var St;(function(A){A.PlainText=1,A.Snippet=2;})(St||(t.InsertTextFormat=St={}));var ft;(function(A){A.Deprecated=1;})(ft||(t.CompletionItemTag=ft={}));var Le;(function(A){function q(k,b,X){return {newText:k,insert:b,replace:X}}A.create=q;function U(k){var b=k;return b&&Y.string(b.newText)&&o.is(b.insert)&&o.is(b.replace)}A.is=U;})(Le||(t.InsertReplaceEdit=Le={}));var It;(function(A){A.asIs=1,A.adjustIndentation=2;})(It||(t.InsertTextMode=It={}));var qt;(function(A){function q(U){var k=U;return k&&(Y.string(k.detail)||k.detail===void 0)&&(Y.string(k.description)||k.description===void 0)}A.is=q;})(qt||(t.CompletionItemLabelDetails=qt={}));var ye;(function(A){function q(U){return {label:U}}A.create=q;})(ye||(t.CompletionItem=ye={}));var Ue;(function(A){function q(U,k){return {items:U||[],isIncomplete:!!k}}A.create=q;})(Ue||(t.CompletionList=Ue={}));var le;(function(A){function q(k){return k.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}A.fromPlainText=q;function U(k){var b=k;return Y.string(b)||Y.objectLiteral(b)&&Y.string(b.language)&&Y.string(b.value)}A.is=U;})(le||(t.MarkedString=le={}));var Re;(function(A){function q(U){var k=U;return !!k&&Y.objectLiteral(k)&&(ot.is(k.contents)||le.is(k.contents)||Y.typedArray(k.contents,le.is))&&(U.range===void 0||o.is(U.range))}A.is=q;})(Re||(t.Hover=Re={}));var We;(function(A){function q(U,k){return k?{label:U,documentation:k}:{label:U}}A.create=q;})(We||(t.ParameterInformation=We={}));var et;(function(A){function q(U,k){for(var b=[],X=2;X<arguments.length;X++)b[X-2]=arguments[X];var oe={label:U};return Y.defined(k)&&(oe.documentation=k),Y.defined(b)?oe.parameters=b:oe.parameters=[],oe}A.create=q;})(et||(t.SignatureInformation=et={}));var ze;(function(A){A.Text=1,A.Read=2,A.Write=3;})(ze||(t.DocumentHighlightKind=ze={}));var vn;(function(A){function q(U,k){var b={range:U};return Y.number(k)&&(b.kind=k),b}A.create=q;})(vn||(t.DocumentHighlight=vn={}));var Dr;(function(A){A.File=1,A.Module=2,A.Namespace=3,A.Package=4,A.Class=5,A.Method=6,A.Property=7,A.Field=8,A.Constructor=9,A.Enum=10,A.Interface=11,A.Function=12,A.Variable=13,A.Constant=14,A.String=15,A.Number=16,A.Boolean=17,A.Array=18,A.Object=19,A.Key=20,A.Null=21,A.EnumMember=22,A.Struct=23,A.Event=24,A.Operator=25,A.TypeParameter=26;})(Dr||(t.SymbolKind=Dr={}));var Rs;(function(A){A.Deprecated=1;})(Rs||(t.SymbolTag=Rs={}));var Lr;(function(A){function q(U,k,b,X,oe){var Ge={name:U,kind:k,location:{uri:X,range:b}};return oe&&(Ge.containerName=oe),Ge}A.create=q;})(Lr||(t.SymbolInformation=Lr={}));var zr;(function(A){function q(U,k,b,X){return X!==void 0?{name:U,kind:k,location:{uri:b,range:X}}:{name:U,kind:k,location:{uri:b}}}A.create=q;})(zr||(t.WorkspaceSymbol=zr={}));var Ps;(function(A){function q(k,b,X,oe,Ge,Vt){var Pt={name:k,detail:b,kind:X,range:oe,selectionRange:Ge};return Vt!==void 0&&(Pt.children=Vt),Pt}A.create=q;function U(k){var b=k;return b&&Y.string(b.name)&&Y.number(b.kind)&&o.is(b.range)&&o.is(b.selectionRange)&&(b.detail===void 0||Y.string(b.detail))&&(b.deprecated===void 0||Y.boolean(b.deprecated))&&(b.children===void 0||Array.isArray(b.children))&&(b.tags===void 0||Array.isArray(b.tags))}A.is=U;})(Ps||(t.DocumentSymbol=Ps={}));var _a;(function(A){A.Empty="",A.QuickFix="quickfix",A.Refactor="refactor",A.RefactorExtract="refactor.extract",A.RefactorInline="refactor.inline",A.RefactorRewrite="refactor.rewrite",A.Source="source",A.SourceOrganizeImports="source.organizeImports",A.SourceFixAll="source.fixAll";})(_a||(t.CodeActionKind=_a={}));var on;(function(A){A.Invoked=1,A.Automatic=2;})(on||(t.CodeActionTriggerKind=on={}));var Ns;(function(A){function q(k,b,X){var oe={diagnostics:k};return b!=null&&(oe.only=b),X!=null&&(oe.triggerKind=X),oe}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.typedArray(b.diagnostics,S.is)&&(b.only===void 0||Y.typedArray(b.only,Y.string))&&(b.triggerKind===void 0||b.triggerKind===on.Invoked||b.triggerKind===on.Automatic)}A.is=U;})(Ns||(t.CodeActionContext=Ns={}));var ks;(function(A){function q(k,b,X){var oe={title:k},Ge=!0;return typeof b=="string"?(Ge=!1,oe.kind=b):N.is(b)?oe.command=b:oe.edit=b,Ge&&X!==void 0&&(oe.kind=X),oe}A.create=q;function U(k){var b=k;return b&&Y.string(b.title)&&(b.diagnostics===void 0||Y.typedArray(b.diagnostics,S.is))&&(b.kind===void 0||Y.string(b.kind))&&(b.edit!==void 0||b.command!==void 0)&&(b.command===void 0||N.is(b.command))&&(b.isPreferred===void 0||Y.boolean(b.isPreferred))&&(b.edit===void 0||me.is(b.edit))}A.is=U;})(ks||(t.CodeAction=ks={}));var bi;(function(A){function q(k,b){var X={range:k};return Y.defined(b)&&(X.data=b),X}A.create=q;function U(k){var b=k;return Y.defined(b)&&o.is(b.range)&&(Y.undefined(b.command)||N.is(b.command))}A.is=U;})(bi||(t.CodeLens=bi={}));var Ds;(function(A){function q(k,b){return {tabSize:k,insertSpaces:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&Y.uinteger(b.tabSize)&&Y.boolean(b.insertSpaces)}A.is=U;})(Ds||(t.FormattingOptions=Ds={}));var Mn;(function(A){function q(k,b,X){return {range:k,target:b,data:X}}A.create=q;function U(k){var b=k;return Y.defined(b)&&o.is(b.range)&&(Y.undefined(b.target)||Y.string(b.target))}A.is=U;})(Mn||(t.DocumentLink=Mn={}));var M;(function(A){function q(k,b){return {range:k,parent:b}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&o.is(b.range)&&(b.parent===void 0||A.is(b.parent))}A.is=U;})(M||(t.SelectionRange=M={}));var ae;(function(A){A.namespace="namespace",A.type="type",A.class="class",A.enum="enum",A.interface="interface",A.struct="struct",A.typeParameter="typeParameter",A.parameter="parameter",A.variable="variable",A.property="property",A.enumMember="enumMember",A.event="event",A.function="function",A.method="method",A.macro="macro",A.keyword="keyword",A.modifier="modifier",A.comment="comment",A.string="string",A.number="number",A.regexp="regexp",A.operator="operator",A.decorator="decorator";})(ae||(t.SemanticTokenTypes=ae={}));var be;(function(A){A.declaration="declaration",A.definition="definition",A.readonly="readonly",A.static="static",A.deprecated="deprecated",A.abstract="abstract",A.async="async",A.modification="modification",A.documentation="documentation",A.defaultLibrary="defaultLibrary";})(be||(t.SemanticTokenModifiers=be={}));var Ne;(function(A){function q(U){var k=U;return Y.objectLiteral(k)&&(k.resultId===void 0||typeof k.resultId=="string")&&Array.isArray(k.data)&&(k.data.length===0||typeof k.data[0]=="number")}A.is=q;})(Ne||(t.SemanticTokens=Ne={}));var bt;(function(A){function q(k,b){return {range:k,text:b}}A.create=q;function U(k){var b=k;return b!=null&&o.is(b.range)&&Y.string(b.text)}A.is=U;})(bt||(t.InlineValueText=bt={}));var gt;(function(A){function q(k,b,X){return {range:k,variableName:b,caseSensitiveLookup:X}}A.create=q;function U(k){var b=k;return b!=null&&o.is(b.range)&&Y.boolean(b.caseSensitiveLookup)&&(Y.string(b.variableName)||b.variableName===void 0)}A.is=U;})(gt||(t.InlineValueVariableLookup=gt={}));var Rt;(function(A){function q(k,b){return {range:k,expression:b}}A.create=q;function U(k){var b=k;return b!=null&&o.is(b.range)&&(Y.string(b.expression)||b.expression===void 0)}A.is=U;})(Rt||(t.InlineValueEvaluatableExpression=Rt={}));var Lt;(function(A){function q(k,b){return {frameId:k,stoppedLocation:b}}A.create=q;function U(k){var b=k;return Y.defined(b)&&o.is(k.stoppedLocation)}A.is=U;})(Lt||(t.InlineValueContext=Lt={}));var tt;(function(A){A.Type=1,A.Parameter=2;function q(U){return U===1||U===2}A.is=q;})(tt||(t.InlayHintKind=tt={}));var xt;(function(A){function q(k){return {value:k}}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&(b.tooltip===void 0||Y.string(b.tooltip)||ot.is(b.tooltip))&&(b.location===void 0||c.is(b.location))&&(b.command===void 0||N.is(b.command))}A.is=U;})(xt||(t.InlayHintLabelPart=xt={}));var dt;(function(A){function q(k,b,X){var oe={position:k,label:b};return X!==void 0&&(oe.kind=X),oe}A.create=q;function U(k){var b=k;return Y.objectLiteral(b)&&a.is(b.position)&&(Y.string(b.label)||Y.typedArray(b.label,xt.is))&&(b.kind===void 0||tt.is(b.kind))&&b.textEdits===void 0||Y.typedArray(b.textEdits,O.is)&&(b.tooltip===void 0||Y.string(b.tooltip)||ot.is(b.tooltip))&&(b.paddingLeft===void 0||Y.boolean(b.paddingLeft))&&(b.paddingRight===void 0||Y.boolean(b.paddingRight))}A.is=U;})(dt||(t.InlayHint=dt={}));var jt;(function(A){function q(U){return {kind:"snippet",value:U}}A.createSnippet=q;})(jt||(t.StringValue=jt={}));var Jt;(function(A){function q(U,k,b,X){return {insertText:U,filterText:k,range:b,command:X}}A.create=q;})(Jt||(t.InlineCompletionItem=Jt={}));var Or;(function(A){function q(U){return {items:U}}A.create=q;})(Or||(t.InlineCompletionList=Or={}));var va;(function(A){A.Invoked=0,A.Automatic=1;})(va||(t.InlineCompletionTriggerKind=va={}));var qi;(function(A){function q(U,k){return {range:U,text:k}}A.create=q;})(qi||(t.SelectedCompletionInfo=qi={}));var Hi;(function(A){function q(U,k){return {triggerKind:U,selectedCompletionInfo:k}}A.create=q;})(Hi||(t.InlineCompletionContext=Hi={}));var Fo;((function(A){function q(U){var k=U;return Y.objectLiteral(k)&&n.is(k.uri)&&Y.string(k.name)}A.is=q;}))(Fo||(t.WorkspaceFolder=Fo={})),t.EOL=[`
`,`\r
`,"\r"];var Bo;(function(A){function q(X,oe,Ge,Vt){return new _c(X,oe,Ge,Vt)}A.create=q;function U(X){var oe=X;return !!(Y.defined(oe)&&Y.string(oe.uri)&&(Y.undefined(oe.languageId)||Y.string(oe.languageId))&&Y.uinteger(oe.lineCount)&&Y.func(oe.getText)&&Y.func(oe.positionAt)&&Y.func(oe.offsetAt))}A.is=U;function k(X,oe){for(var Ge=X.getText(),Vt=b(oe,function(Ui,Sa){var vc=Ui.range.start.line-Sa.range.start.line;return vc===0?Ui.range.start.character-Sa.range.start.character:vc}),Pt=Ge.length,un=Vt.length-1;un>=0;un--){var cn=Vt[un],qn=X.offsetAt(cn.range.start),nt=X.offsetAt(cn.range.end);if(nt<=Pt)Ge=Ge.substring(0,qn)+cn.newText+Ge.substring(nt,Ge.length);else throw new Error("Overlapping edit");Pt=qn;}return Ge}A.applyEdits=k;function b(X,oe){if(X.length<=1)return X;var Ge=X.length/2|0,Vt=X.slice(0,Ge),Pt=X.slice(Ge);b(Vt,oe),b(Pt,oe);for(var un=0,cn=0,qn=0;un<Vt.length&&cn<Pt.length;){var nt=oe(Vt[un],Pt[cn]);nt<=0?X[qn++]=Vt[un++]:X[qn++]=Pt[cn++];}for(;un<Vt.length;)X[qn++]=Vt[un++];for(;cn<Pt.length;)X[qn++]=Pt[cn++];return X}})(Bo||(t.TextDocument=Bo={}));var _c=function(){function A(q,U,k,b){this._uri=q,this._languageId=U,this._version=k,this._content=b,this._lineOffsets=void 0;}return Object.defineProperty(A.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),A.prototype.getText=function(q){if(q){var U=this.offsetAt(q.start),k=this.offsetAt(q.end);return this._content.substring(U,k)}return this._content},A.prototype.update=function(q,U){this._content=q.text,this._version=U,this._lineOffsets=void 0;},A.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var q=[],U=this._content,k=!0,b=0;b<U.length;b++){k&&(q.push(b),k=!1);var X=U.charAt(b);k=X==="\r"||X===`
`,X==="\r"&&b+1<U.length&&U.charAt(b+1)===`
`&&b++;}k&&U.length>0&&q.push(U.length),this._lineOffsets=q;}return this._lineOffsets},A.prototype.positionAt=function(q){q=Math.max(Math.min(q,this._content.length),0);var U=this.getLineOffsets(),k=0,b=U.length;if(b===0)return a.create(0,q);for(;k<b;){var X=Math.floor((k+b)/2);U[X]>q?b=X:k=X+1;}var oe=k-1;return a.create(oe,q-U[oe])},A.prototype.offsetAt=function(q){var U=this.getLineOffsets();if(q.line>=U.length)return this._content.length;if(q.line<0)return 0;var k=U[q.line],b=q.line+1<U.length?U[q.line+1]:this._content.length;return Math.max(Math.min(k+q.character,b),k)},Object.defineProperty(A.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),A}(),Y;(function(A){var q=Object.prototype.toString;function U(nt){return typeof nt<"u"}A.defined=U;function k(nt){return typeof nt>"u"}A.undefined=k;function b(nt){return nt===!0||nt===!1}A.boolean=b;function X(nt){return q.call(nt)==="[object String]"}A.string=X;function oe(nt){return q.call(nt)==="[object Number]"}A.number=oe;function Ge(nt,Ui,Sa){return q.call(nt)==="[object Number]"&&Ui<=nt&&nt<=Sa}A.numberRange=Ge;function Vt(nt){return q.call(nt)==="[object Number]"&&-2147483648<=nt&&nt<=2147483647}A.integer=Vt;function Pt(nt){return q.call(nt)==="[object Number]"&&0<=nt&&nt<=2147483647}A.uinteger=Pt;function un(nt){return q.call(nt)==="[object Function]"}A.func=un;function cn(nt){return nt!==null&&typeof nt=="object"}A.objectLiteral=cn;function qn(nt,Ui){return Array.isArray(nt)&&nt.every(Ui)}A.typedArray=qn;})(Y||(Y={}));});});var Kt=P(rn=>{Object.defineProperty(rn,"__esModule",{value:!0});rn.ProtocolNotificationType=rn.ProtocolNotificationType0=rn.ProtocolRequestType=rn.ProtocolRequestType0=rn.RegistrationType=rn.MessageDirection=void 0;var Eo=ha(),mO;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both";})(mO||(rn.MessageDirection=mO={}));var Uv=class{constructor(t){this.method=t;}};rn.RegistrationType=Uv;var $v=class extends Eo.RequestType0{constructor(t){super(t);}};rn.ProtocolRequestType0=$v;var jv=class extends Eo.RequestType{constructor(t){super(t,Eo.ParameterStructures.byName);}};rn.ProtocolRequestType=jv;var Vv=class extends Eo.NotificationType0{constructor(t){super(t);}};rn.ProtocolNotificationType0=Vv;var Wv=class extends Eo.NotificationType{constructor(t){super(t,Eo.ParameterStructures.byName);}};rn.ProtocolNotificationType=Wv;});var Gd=P(ar=>{Object.defineProperty(ar,"__esModule",{value:!0});ar.objectLiteral=ar.typedArray=ar.stringArray=ar.array=ar.func=ar.error=ar.number=ar.string=ar.boolean=void 0;function aJ(e){return e===!0||e===!1}ar.boolean=aJ;function yO(e){return typeof e=="string"||e instanceof String}ar.string=yO;function oJ(e){return typeof e=="number"||e instanceof Number}ar.number=oJ;function uJ(e){return e instanceof Error}ar.error=uJ;function cJ(e){return typeof e=="function"}ar.func=cJ;function _O(e){return Array.isArray(e)}ar.array=_O;function lJ(e){return _O(e)&&e.every(t=>yO(t))}ar.stringArray=lJ;function fJ(e,t){return Array.isArray(e)&&e.every(t)}ar.typedArray=fJ;function dJ(e){return e!==null&&typeof e=="object"}ar.objectLiteral=dJ;});var bO=P(Xd=>{Object.defineProperty(Xd,"__esModule",{value:!0});Xd.ImplementationRequest=void 0;var vO=Kt(),SO;(function(e){e.method="textDocument/implementation",e.messageDirection=vO.MessageDirection.clientToServer,e.type=new vO.ProtocolRequestType(e.method);})(SO||(Xd.ImplementationRequest=SO={}));});var wO=P(Zd=>{Object.defineProperty(Zd,"__esModule",{value:!0});Zd.TypeDefinitionRequest=void 0;var EO=Kt(),CO;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=EO.MessageDirection.clientToServer,e.type=new EO.ProtocolRequestType(e.method);})(CO||(Zd.TypeDefinitionRequest=CO={}));});var AO=P(Co=>{Object.defineProperty(Co,"__esModule",{value:!0});Co.DidChangeWorkspaceFoldersNotification=Co.WorkspaceFoldersRequest=void 0;var Yd=Kt(),xO;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Yd.MessageDirection.serverToClient,e.type=new Yd.ProtocolRequestType0(e.method);})(xO||(Co.WorkspaceFoldersRequest=xO={}));var TO;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Yd.MessageDirection.clientToServer,e.type=new Yd.ProtocolNotificationType(e.method);})(TO||(Co.DidChangeWorkspaceFoldersNotification=TO={}));});var PO=P(Qd=>{Object.defineProperty(Qd,"__esModule",{value:!0});Qd.ConfigurationRequest=void 0;var IO=Kt(),RO;(function(e){e.method="workspace/configuration",e.messageDirection=IO.MessageDirection.serverToClient,e.type=new IO.ProtocolRequestType(e.method);})(RO||(Qd.ConfigurationRequest=RO={}));});var DO=P(wo=>{Object.defineProperty(wo,"__esModule",{value:!0});wo.ColorPresentationRequest=wo.DocumentColorRequest=void 0;var Jd=Kt(),NO;(function(e){e.method="textDocument/documentColor",e.messageDirection=Jd.MessageDirection.clientToServer,e.type=new Jd.ProtocolRequestType(e.method);})(NO||(wo.DocumentColorRequest=NO={}));var kO;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Jd.MessageDirection.clientToServer,e.type=new Jd.ProtocolRequestType(e.method);})(kO||(wo.ColorPresentationRequest=kO={}));});var FO=P(xo=>{Object.defineProperty(xo,"__esModule",{value:!0});xo.FoldingRangeRefreshRequest=xo.FoldingRangeRequest=void 0;var eh=Kt(),LO;(function(e){e.method="textDocument/foldingRange",e.messageDirection=eh.MessageDirection.clientToServer,e.type=new eh.ProtocolRequestType(e.method);})(LO||(xo.FoldingRangeRequest=LO={}));var OO;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=eh.MessageDirection.serverToClient,e.type=new eh.ProtocolRequestType0(e.method);})(OO||(xo.FoldingRangeRefreshRequest=OO={}));});var qO=P(th=>{Object.defineProperty(th,"__esModule",{value:!0});th.DeclarationRequest=void 0;var BO=Kt(),MO;(function(e){e.method="textDocument/declaration",e.messageDirection=BO.MessageDirection.clientToServer,e.type=new BO.ProtocolRequestType(e.method);})(MO||(th.DeclarationRequest=MO={}));});var $O=P(rh=>{Object.defineProperty(rh,"__esModule",{value:!0});rh.SelectionRangeRequest=void 0;var HO=Kt(),UO;(function(e){e.method="textDocument/selectionRange",e.messageDirection=HO.MessageDirection.clientToServer,e.type=new HO.ProtocolRequestType(e.method);})(UO||(rh.SelectionRangeRequest=UO={}));});var KO=P(bs=>{Object.defineProperty(bs,"__esModule",{value:!0});bs.WorkDoneProgressCancelNotification=bs.WorkDoneProgressCreateRequest=bs.WorkDoneProgress=void 0;var hJ=ha(),nh=Kt(),jO;(function(e){e.type=new hJ.ProgressType;function t(r){return r===e.type}e.is=t;})(jO||(bs.WorkDoneProgress=jO={}));var VO;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=nh.MessageDirection.serverToClient,e.type=new nh.ProtocolRequestType(e.method);})(VO||(bs.WorkDoneProgressCreateRequest=VO={}));var WO;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=nh.MessageDirection.clientToServer,e.type=new nh.ProtocolNotificationType(e.method);})(WO||(bs.WorkDoneProgressCancelNotification=WO={}));});var ZO=P(Es=>{Object.defineProperty(Es,"__esModule",{value:!0});Es.CallHierarchyOutgoingCallsRequest=Es.CallHierarchyIncomingCallsRequest=Es.CallHierarchyPrepareRequest=void 0;var To=Kt(),zO;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(zO||(Es.CallHierarchyPrepareRequest=zO={}));var GO;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(GO||(Es.CallHierarchyIncomingCallsRequest=GO={}));var XO;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(XO||(Es.CallHierarchyOutgoingCallsRequest=XO={}));});var rF=P(nn=>{Object.defineProperty(nn,"__esModule",{value:!0});nn.SemanticTokensRefreshRequest=nn.SemanticTokensRangeRequest=nn.SemanticTokensDeltaRequest=nn.SemanticTokensRequest=nn.SemanticTokensRegistrationType=nn.TokenFormat=void 0;var Mi=Kt(),YO;(function(e){e.Relative="relative";})(YO||(nn.TokenFormat=YO={}));var cc;(function(e){e.method="textDocument/semanticTokens",e.type=new Mi.RegistrationType(e.method);})(cc||(nn.SemanticTokensRegistrationType=cc={}));var QO;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=Mi.MessageDirection.clientToServer,e.type=new Mi.ProtocolRequestType(e.method),e.registrationMethod=cc.method;})(QO||(nn.SemanticTokensRequest=QO={}));var JO;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=Mi.MessageDirection.clientToServer,e.type=new Mi.ProtocolRequestType(e.method),e.registrationMethod=cc.method;})(JO||(nn.SemanticTokensDeltaRequest=JO={}));var eF;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=Mi.MessageDirection.clientToServer,e.type=new Mi.ProtocolRequestType(e.method),e.registrationMethod=cc.method;})(eF||(nn.SemanticTokensRangeRequest=eF={}));var tF;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=Mi.MessageDirection.serverToClient,e.type=new Mi.ProtocolRequestType0(e.method);})(tF||(nn.SemanticTokensRefreshRequest=tF={}));});var sF=P(ih=>{Object.defineProperty(ih,"__esModule",{value:!0});ih.ShowDocumentRequest=void 0;var nF=Kt(),iF;(function(e){e.method="window/showDocument",e.messageDirection=nF.MessageDirection.serverToClient,e.type=new nF.ProtocolRequestType(e.method);})(iF||(ih.ShowDocumentRequest=iF={}));});var uF=P(sh=>{Object.defineProperty(sh,"__esModule",{value:!0});sh.LinkedEditingRangeRequest=void 0;var aF=Kt(),oF;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=aF.MessageDirection.clientToServer,e.type=new aF.ProtocolRequestType(e.method);})(oF||(sh.LinkedEditingRangeRequest=oF={}));});var mF=P(Nr=>{Object.defineProperty(Nr,"__esModule",{value:!0});Nr.WillDeleteFilesRequest=Nr.DidDeleteFilesNotification=Nr.DidRenameFilesNotification=Nr.WillRenameFilesRequest=Nr.DidCreateFilesNotification=Nr.WillCreateFilesRequest=Nr.FileOperationPatternKind=void 0;var kn=Kt(),cF;(function(e){e.file="file",e.folder="folder";})(cF||(Nr.FileOperationPatternKind=cF={}));var lF;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolRequestType(e.method);})(lF||(Nr.WillCreateFilesRequest=lF={}));var fF;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolNotificationType(e.method);})(fF||(Nr.DidCreateFilesNotification=fF={}));var dF;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolRequestType(e.method);})(dF||(Nr.WillRenameFilesRequest=dF={}));var hF;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolNotificationType(e.method);})(hF||(Nr.DidRenameFilesNotification=hF={}));var pF;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolNotificationType(e.method);})(pF||(Nr.DidDeleteFilesNotification=pF={}));var gF;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=kn.MessageDirection.clientToServer,e.type=new kn.ProtocolRequestType(e.method);})(gF||(Nr.WillDeleteFilesRequest=gF={}));});var bF=P(Cs=>{Object.defineProperty(Cs,"__esModule",{value:!0});Cs.MonikerRequest=Cs.MonikerKind=Cs.UniquenessLevel=void 0;var yF=Kt(),_F;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global";})(_F||(Cs.UniquenessLevel=_F={}));var vF;(function(e){e.$import="import",e.$export="export",e.local="local";})(vF||(Cs.MonikerKind=vF={}));var SF;(function(e){e.method="textDocument/moniker",e.messageDirection=yF.MessageDirection.clientToServer,e.type=new yF.ProtocolRequestType(e.method);})(SF||(Cs.MonikerRequest=SF={}));});var xF=P(ws=>{Object.defineProperty(ws,"__esModule",{value:!0});ws.TypeHierarchySubtypesRequest=ws.TypeHierarchySupertypesRequest=ws.TypeHierarchyPrepareRequest=void 0;var Ao=Kt(),EF;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Ao.MessageDirection.clientToServer,e.type=new Ao.ProtocolRequestType(e.method);})(EF||(ws.TypeHierarchyPrepareRequest=EF={}));var CF;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Ao.MessageDirection.clientToServer,e.type=new Ao.ProtocolRequestType(e.method);})(CF||(ws.TypeHierarchySupertypesRequest=CF={}));var wF;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Ao.MessageDirection.clientToServer,e.type=new Ao.ProtocolRequestType(e.method);})(wF||(ws.TypeHierarchySubtypesRequest=wF={}));});var IF=P(Io=>{Object.defineProperty(Io,"__esModule",{value:!0});Io.InlineValueRefreshRequest=Io.InlineValueRequest=void 0;var ah=Kt(),TF;(function(e){e.method="textDocument/inlineValue",e.messageDirection=ah.MessageDirection.clientToServer,e.type=new ah.ProtocolRequestType(e.method);})(TF||(Io.InlineValueRequest=TF={}));var AF;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=ah.MessageDirection.serverToClient,e.type=new ah.ProtocolRequestType0(e.method);})(AF||(Io.InlineValueRefreshRequest=AF={}));});var kF=P(xs=>{Object.defineProperty(xs,"__esModule",{value:!0});xs.InlayHintRefreshRequest=xs.InlayHintResolveRequest=xs.InlayHintRequest=void 0;var Ro=Kt(),RF;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Ro.MessageDirection.clientToServer,e.type=new Ro.ProtocolRequestType(e.method);})(RF||(xs.InlayHintRequest=RF={}));var PF;(function(e){e.method="inlayHint/resolve",e.messageDirection=Ro.MessageDirection.clientToServer,e.type=new Ro.ProtocolRequestType(e.method);})(PF||(xs.InlayHintResolveRequest=PF={}));var NF;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Ro.MessageDirection.serverToClient,e.type=new Ro.ProtocolRequestType0(e.method);})(NF||(xs.InlayHintRefreshRequest=NF={}));});var qF=P(Dn=>{Object.defineProperty(Dn,"__esModule",{value:!0});Dn.DiagnosticRefreshRequest=Dn.WorkspaceDiagnosticRequest=Dn.DocumentDiagnosticRequest=Dn.DocumentDiagnosticReportKind=Dn.DiagnosticServerCancellationData=void 0;var MF=ha(),pJ=Gd(),Po=Kt(),DF;(function(e){function t(r){let n=r;return n&&pJ.boolean(n.retriggerRequest)}e.is=t;})(DF||(Dn.DiagnosticServerCancellationData=DF={}));var LF;(function(e){e.Full="full",e.Unchanged="unchanged";})(LF||(Dn.DocumentDiagnosticReportKind=LF={}));var OF;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Po.MessageDirection.clientToServer,e.type=new Po.ProtocolRequestType(e.method),e.partialResult=new MF.ProgressType;})(OF||(Dn.DocumentDiagnosticRequest=OF={}));var FF;(function(e){e.method="workspace/diagnostic",e.messageDirection=Po.MessageDirection.clientToServer,e.type=new Po.ProtocolRequestType(e.method),e.partialResult=new MF.ProgressType;})(FF||(Dn.WorkspaceDiagnosticRequest=FF={}));var BF;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Po.MessageDirection.serverToClient,e.type=new Po.ProtocolRequestType0(e.method);})(BF||(Dn.DiagnosticRefreshRequest=BF={}));});var KF=P(Qt=>{Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DidCloseNotebookDocumentNotification=Qt.DidSaveNotebookDocumentNotification=Qt.DidChangeNotebookDocumentNotification=Qt.NotebookCellArrayChange=Qt.DidOpenNotebookDocumentNotification=Qt.NotebookDocumentSyncRegistrationType=Qt.NotebookDocument=Qt.NotebookCell=Qt.ExecutionSummary=Qt.NotebookCellKind=void 0;var lc=zd(),Xn=Gd(),yi=Kt(),Kv;(function(e){e.Markup=1,e.Code=2;function t(r){return r===1||r===2}e.is=t;})(Kv||(Qt.NotebookCellKind=Kv={}));var zv;(function(e){function t(i,s){let a={executionOrder:i};return (s===!0||s===!1)&&(a.success=s),a}e.create=t;function r(i){let s=i;return Xn.objectLiteral(s)&&lc.uinteger.is(s.executionOrder)&&(s.success===void 0||Xn.boolean(s.success))}e.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}e.equals=n;})(zv||(Qt.ExecutionSummary=zv={}));var oh;(function(e){function t(s,a){return {kind:s,document:a}}e.create=t;function r(s){let a=s;return Xn.objectLiteral(a)&&Kv.is(a.kind)&&lc.DocumentUri.is(a.document)&&(a.metadata===void 0||Xn.objectLiteral(a.metadata))}e.is=r;function n(s,a){let o=new Set;return s.document!==a.document&&o.add("document"),s.kind!==a.kind&&o.add("kind"),s.executionSummary!==a.executionSummary&&o.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!i(s.metadata,a.metadata)&&o.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!zv.equals(s.executionSummary,a.executionSummary)&&o.add("executionSummary"),o}e.diff=n;function i(s,a){if(s===a)return !0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return !1;let o=Array.isArray(s),c=Array.isArray(a);if(o!==c)return !1;if(o&&c){if(s.length!==a.length)return !1;for(let l=0;l<s.length;l++)if(!i(s[l],a[l]))return !1}if(Xn.objectLiteral(s)&&Xn.objectLiteral(a)){let l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length||(l.sort(),u.sort(),!i(l,u)))return !1;for(let f=0;f<l.length;f++){let h=l[f];if(!i(s[h],a[h]))return !1}}return !0}})(oh||(Qt.NotebookCell=oh={}));var HF;(function(e){function t(n,i,s,a){return {uri:n,notebookType:i,version:s,cells:a}}e.create=t;function r(n){let i=n;return Xn.objectLiteral(i)&&Xn.string(i.uri)&&lc.integer.is(i.version)&&Xn.typedArray(i.cells,oh.is)}e.is=r;})(HF||(Qt.NotebookDocument=HF={}));var No;(function(e){e.method="notebookDocument/sync",e.messageDirection=yi.MessageDirection.clientToServer,e.type=new yi.RegistrationType(e.method);})(No||(Qt.NotebookDocumentSyncRegistrationType=No={}));var UF;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=yi.MessageDirection.clientToServer,e.type=new yi.ProtocolNotificationType(e.method),e.registrationMethod=No.method;})(UF||(Qt.DidOpenNotebookDocumentNotification=UF={}));var $F;(function(e){function t(n){let i=n;return Xn.objectLiteral(i)&&lc.uinteger.is(i.start)&&lc.uinteger.is(i.deleteCount)&&(i.cells===void 0||Xn.typedArray(i.cells,oh.is))}e.is=t;function r(n,i,s){let a={start:n,deleteCount:i};return s!==void 0&&(a.cells=s),a}e.create=r;})($F||(Qt.NotebookCellArrayChange=$F={}));var jF;(function(e){e.method="notebookDocument/didChange",e.messageDirection=yi.MessageDirection.clientToServer,e.type=new yi.ProtocolNotificationType(e.method),e.registrationMethod=No.method;})(jF||(Qt.DidChangeNotebookDocumentNotification=jF={}));var VF;(function(e){e.method="notebookDocument/didSave",e.messageDirection=yi.MessageDirection.clientToServer,e.type=new yi.ProtocolNotificationType(e.method),e.registrationMethod=No.method;})(VF||(Qt.DidSaveNotebookDocumentNotification=VF={}));var WF;(function(e){e.method="notebookDocument/didClose",e.messageDirection=yi.MessageDirection.clientToServer,e.type=new yi.ProtocolNotificationType(e.method),e.registrationMethod=No.method;})(WF||(Qt.DidCloseNotebookDocumentNotification=WF={}));});var XF=P(uh=>{Object.defineProperty(uh,"__esModule",{value:!0});uh.InlineCompletionRequest=void 0;var zF=Kt(),GF;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=zF.MessageDirection.clientToServer,e.type=new zF.ProtocolRequestType(e.method);})(GF||(uh.InlineCompletionRequest=GF={}));});var uM=P(L=>{Object.defineProperty(L,"__esModule",{value:!0});L.WorkspaceSymbolRequest=L.CodeActionResolveRequest=L.CodeActionRequest=L.DocumentSymbolRequest=L.DocumentHighlightRequest=L.ReferencesRequest=L.DefinitionRequest=L.SignatureHelpRequest=L.SignatureHelpTriggerKind=L.HoverRequest=L.CompletionResolveRequest=L.CompletionRequest=L.CompletionTriggerKind=L.PublishDiagnosticsNotification=L.WatchKind=L.RelativePattern=L.FileChangeType=L.DidChangeWatchedFilesNotification=L.WillSaveTextDocumentWaitUntilRequest=L.WillSaveTextDocumentNotification=L.TextDocumentSaveReason=L.DidSaveTextDocumentNotification=L.DidCloseTextDocumentNotification=L.DidChangeTextDocumentNotification=L.TextDocumentContentChangeEvent=L.DidOpenTextDocumentNotification=L.TextDocumentSyncKind=L.TelemetryEventNotification=L.LogMessageNotification=L.ShowMessageRequest=L.ShowMessageNotification=L.MessageType=L.DidChangeConfigurationNotification=L.ExitNotification=L.ShutdownRequest=L.InitializedNotification=L.InitializeErrorCodes=L.InitializeRequest=L.WorkDoneProgressOptions=L.TextDocumentRegistrationOptions=L.StaticRegistrationOptions=L.PositionEncodingKind=L.FailureHandlingKind=L.ResourceOperationKind=L.UnregistrationRequest=L.RegistrationRequest=L.DocumentSelector=L.NotebookCellTextDocumentFilter=L.NotebookDocumentFilter=L.TextDocumentFilter=void 0;L.MonikerRequest=L.MonikerKind=L.UniquenessLevel=L.WillDeleteFilesRequest=L.DidDeleteFilesNotification=L.WillRenameFilesRequest=L.DidRenameFilesNotification=L.WillCreateFilesRequest=L.DidCreateFilesNotification=L.FileOperationPatternKind=L.LinkedEditingRangeRequest=L.ShowDocumentRequest=L.SemanticTokensRegistrationType=L.SemanticTokensRefreshRequest=L.SemanticTokensRangeRequest=L.SemanticTokensDeltaRequest=L.SemanticTokensRequest=L.TokenFormat=L.CallHierarchyPrepareRequest=L.CallHierarchyOutgoingCallsRequest=L.CallHierarchyIncomingCallsRequest=L.WorkDoneProgressCancelNotification=L.WorkDoneProgressCreateRequest=L.WorkDoneProgress=L.SelectionRangeRequest=L.DeclarationRequest=L.FoldingRangeRefreshRequest=L.FoldingRangeRequest=L.ColorPresentationRequest=L.DocumentColorRequest=L.ConfigurationRequest=L.DidChangeWorkspaceFoldersNotification=L.WorkspaceFoldersRequest=L.TypeDefinitionRequest=L.ImplementationRequest=L.ApplyWorkspaceEditRequest=L.ExecuteCommandRequest=L.PrepareRenameRequest=L.RenameRequest=L.PrepareSupportDefaultBehavior=L.DocumentOnTypeFormattingRequest=L.DocumentRangesFormattingRequest=L.DocumentRangeFormattingRequest=L.DocumentFormattingRequest=L.DocumentLinkResolveRequest=L.DocumentLinkRequest=L.CodeLensRefreshRequest=L.CodeLensResolveRequest=L.CodeLensRequest=L.WorkspaceSymbolResolveRequest=void 0;L.InlineCompletionRequest=L.DidCloseNotebookDocumentNotification=L.DidSaveNotebookDocumentNotification=L.DidChangeNotebookDocumentNotification=L.NotebookCellArrayChange=L.DidOpenNotebookDocumentNotification=L.NotebookDocumentSyncRegistrationType=L.NotebookDocument=L.NotebookCell=L.ExecutionSummary=L.NotebookCellKind=L.DiagnosticRefreshRequest=L.WorkspaceDiagnosticRequest=L.DocumentDiagnosticRequest=L.DocumentDiagnosticReportKind=L.DiagnosticServerCancellationData=L.InlayHintRefreshRequest=L.InlayHintResolveRequest=L.InlayHintRequest=L.InlineValueRefreshRequest=L.InlineValueRequest=L.TypeHierarchySupertypesRequest=L.TypeHierarchySubtypesRequest=L.TypeHierarchyPrepareRequest=void 0;var ve=Kt(),ZF=zd(),yr=Gd(),gJ=bO();Object.defineProperty(L,"ImplementationRequest",{enumerable:!0,get:function(){return gJ.ImplementationRequest}});var mJ=wO();Object.defineProperty(L,"TypeDefinitionRequest",{enumerable:!0,get:function(){return mJ.TypeDefinitionRequest}});var iM=AO();Object.defineProperty(L,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return iM.WorkspaceFoldersRequest}});Object.defineProperty(L,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return iM.DidChangeWorkspaceFoldersNotification}});var yJ=PO();Object.defineProperty(L,"ConfigurationRequest",{enumerable:!0,get:function(){return yJ.ConfigurationRequest}});var sM=DO();Object.defineProperty(L,"DocumentColorRequest",{enumerable:!0,get:function(){return sM.DocumentColorRequest}});Object.defineProperty(L,"ColorPresentationRequest",{enumerable:!0,get:function(){return sM.ColorPresentationRequest}});var aM=FO();Object.defineProperty(L,"FoldingRangeRequest",{enumerable:!0,get:function(){return aM.FoldingRangeRequest}});Object.defineProperty(L,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return aM.FoldingRangeRefreshRequest}});var _J=qO();Object.defineProperty(L,"DeclarationRequest",{enumerable:!0,get:function(){return _J.DeclarationRequest}});var vJ=$O();Object.defineProperty(L,"SelectionRangeRequest",{enumerable:!0,get:function(){return vJ.SelectionRangeRequest}});var Qv=KO();Object.defineProperty(L,"WorkDoneProgress",{enumerable:!0,get:function(){return Qv.WorkDoneProgress}});Object.defineProperty(L,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Qv.WorkDoneProgressCreateRequest}});Object.defineProperty(L,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Qv.WorkDoneProgressCancelNotification}});var Jv=ZO();Object.defineProperty(L,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Jv.CallHierarchyIncomingCallsRequest}});Object.defineProperty(L,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Jv.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(L,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Jv.CallHierarchyPrepareRequest}});var ko=rF();Object.defineProperty(L,"TokenFormat",{enumerable:!0,get:function(){return ko.TokenFormat}});Object.defineProperty(L,"SemanticTokensRequest",{enumerable:!0,get:function(){return ko.SemanticTokensRequest}});Object.defineProperty(L,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return ko.SemanticTokensDeltaRequest}});Object.defineProperty(L,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return ko.SemanticTokensRangeRequest}});Object.defineProperty(L,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return ko.SemanticTokensRefreshRequest}});Object.defineProperty(L,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return ko.SemanticTokensRegistrationType}});var SJ=sF();Object.defineProperty(L,"ShowDocumentRequest",{enumerable:!0,get:function(){return SJ.ShowDocumentRequest}});var bJ=uF();Object.defineProperty(L,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return bJ.LinkedEditingRangeRequest}});var pa=mF();Object.defineProperty(L,"FileOperationPatternKind",{enumerable:!0,get:function(){return pa.FileOperationPatternKind}});Object.defineProperty(L,"DidCreateFilesNotification",{enumerable:!0,get:function(){return pa.DidCreateFilesNotification}});Object.defineProperty(L,"WillCreateFilesRequest",{enumerable:!0,get:function(){return pa.WillCreateFilesRequest}});Object.defineProperty(L,"DidRenameFilesNotification",{enumerable:!0,get:function(){return pa.DidRenameFilesNotification}});Object.defineProperty(L,"WillRenameFilesRequest",{enumerable:!0,get:function(){return pa.WillRenameFilesRequest}});Object.defineProperty(L,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return pa.DidDeleteFilesNotification}});Object.defineProperty(L,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return pa.WillDeleteFilesRequest}});var eS=bF();Object.defineProperty(L,"UniquenessLevel",{enumerable:!0,get:function(){return eS.UniquenessLevel}});Object.defineProperty(L,"MonikerKind",{enumerable:!0,get:function(){return eS.MonikerKind}});Object.defineProperty(L,"MonikerRequest",{enumerable:!0,get:function(){return eS.MonikerRequest}});var tS=xF();Object.defineProperty(L,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return tS.TypeHierarchyPrepareRequest}});Object.defineProperty(L,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return tS.TypeHierarchySubtypesRequest}});Object.defineProperty(L,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return tS.TypeHierarchySupertypesRequest}});var oM=IF();Object.defineProperty(L,"InlineValueRequest",{enumerable:!0,get:function(){return oM.InlineValueRequest}});Object.defineProperty(L,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return oM.InlineValueRefreshRequest}});var rS=kF();Object.defineProperty(L,"InlayHintRequest",{enumerable:!0,get:function(){return rS.InlayHintRequest}});Object.defineProperty(L,"InlayHintResolveRequest",{enumerable:!0,get:function(){return rS.InlayHintResolveRequest}});Object.defineProperty(L,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return rS.InlayHintRefreshRequest}});var fc=qF();Object.defineProperty(L,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return fc.DiagnosticServerCancellationData}});Object.defineProperty(L,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return fc.DocumentDiagnosticReportKind}});Object.defineProperty(L,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return fc.DocumentDiagnosticRequest}});Object.defineProperty(L,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return fc.WorkspaceDiagnosticRequest}});Object.defineProperty(L,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return fc.DiagnosticRefreshRequest}});var _i=KF();Object.defineProperty(L,"NotebookCellKind",{enumerable:!0,get:function(){return _i.NotebookCellKind}});Object.defineProperty(L,"ExecutionSummary",{enumerable:!0,get:function(){return _i.ExecutionSummary}});Object.defineProperty(L,"NotebookCell",{enumerable:!0,get:function(){return _i.NotebookCell}});Object.defineProperty(L,"NotebookDocument",{enumerable:!0,get:function(){return _i.NotebookDocument}});Object.defineProperty(L,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return _i.NotebookDocumentSyncRegistrationType}});Object.defineProperty(L,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return _i.DidOpenNotebookDocumentNotification}});Object.defineProperty(L,"NotebookCellArrayChange",{enumerable:!0,get:function(){return _i.NotebookCellArrayChange}});Object.defineProperty(L,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return _i.DidChangeNotebookDocumentNotification}});Object.defineProperty(L,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return _i.DidSaveNotebookDocumentNotification}});Object.defineProperty(L,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return _i.DidCloseNotebookDocumentNotification}});var EJ=XF();Object.defineProperty(L,"InlineCompletionRequest",{enumerable:!0,get:function(){return EJ.InlineCompletionRequest}});var Gv;(function(e){function t(r){let n=r;return yr.string(n)||yr.string(n.language)||yr.string(n.scheme)||yr.string(n.pattern)}e.is=t;})(Gv||(L.TextDocumentFilter=Gv={}));var Xv;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(yr.string(n.notebookType)||yr.string(n.scheme)||yr.string(n.pattern))}e.is=t;})(Xv||(L.NotebookDocumentFilter=Xv={}));var Zv;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(yr.string(n.notebook)||Xv.is(n.notebook))&&(n.language===void 0||yr.string(n.language))}e.is=t;})(Zv||(L.NotebookCellTextDocumentFilter=Zv={}));var Yv;(function(e){function t(r){if(!Array.isArray(r))return !1;for(let n of r)if(!yr.string(n)&&!Gv.is(n)&&!Zv.is(n))return !1;return !0}e.is=t;})(Yv||(L.DocumentSelector=Yv={}));var YF;(function(e){e.method="client/registerCapability",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(YF||(L.RegistrationRequest=YF={}));var QF;(function(e){e.method="client/unregisterCapability",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(QF||(L.UnregistrationRequest=QF={}));var JF;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete";})(JF||(L.ResourceOperationKind=JF={}));var eB;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo";})(eB||(L.FailureHandlingKind=eB={}));var tB;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32";})(tB||(L.PositionEncodingKind=tB={}));var rB;(function(e){function t(r){let n=r;return n&&yr.string(n.id)&&n.id.length>0}e.hasId=t;})(rB||(L.StaticRegistrationOptions=rB={}));var nB;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||Yv.is(n.documentSelector))}e.is=t;})(nB||(L.TextDocumentRegistrationOptions=nB={}));var iB;(function(e){function t(n){let i=n;return yr.objectLiteral(i)&&(i.workDoneProgress===void 0||yr.boolean(i.workDoneProgress))}e.is=t;function r(n){let i=n;return i&&yr.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=r;})(iB||(L.WorkDoneProgressOptions=iB={}));var sB;(function(e){e.method="initialize",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(sB||(L.InitializeRequest=sB={}));var aB;(function(e){e.unknownProtocolVersion=1;})(aB||(L.InitializeErrorCodes=aB={}));var oB;(function(e){e.method="initialized",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(oB||(L.InitializedNotification=oB={}));var uB;(function(e){e.method="shutdown",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType0(e.method);})(uB||(L.ShutdownRequest=uB={}));var cB;(function(e){e.method="exit",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType0(e.method);})(cB||(L.ExitNotification=cB={}));var lB;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(lB||(L.DidChangeConfigurationNotification=lB={}));var fB;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5;})(fB||(L.MessageType=fB={}));var dB;(function(e){e.method="window/showMessage",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(dB||(L.ShowMessageNotification=dB={}));var hB;(function(e){e.method="window/showMessageRequest",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(hB||(L.ShowMessageRequest=hB={}));var pB;(function(e){e.method="window/logMessage",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(pB||(L.LogMessageNotification=pB={}));var gB;(function(e){e.method="telemetry/event",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(gB||(L.TelemetryEventNotification=gB={}));var mB;(function(e){e.None=0,e.Full=1,e.Incremental=2;})(mB||(L.TextDocumentSyncKind=mB={}));var yB;(function(e){e.method="textDocument/didOpen",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(yB||(L.DidOpenTextDocumentNotification=yB={}));var _B;(function(e){function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=r;})(_B||(L.TextDocumentContentChangeEvent=_B={}));var vB;(function(e){e.method="textDocument/didChange",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(vB||(L.DidChangeTextDocumentNotification=vB={}));var SB;(function(e){e.method="textDocument/didClose",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(SB||(L.DidCloseTextDocumentNotification=SB={}));var bB;(function(e){e.method="textDocument/didSave",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(bB||(L.DidSaveTextDocumentNotification=bB={}));var EB;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3;})(EB||(L.TextDocumentSaveReason=EB={}));var CB;(function(e){e.method="textDocument/willSave",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(CB||(L.WillSaveTextDocumentNotification=CB={}));var wB;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(wB||(L.WillSaveTextDocumentWaitUntilRequest=wB={}));var xB;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(xB||(L.DidChangeWatchedFilesNotification=xB={}));var TB;(function(e){e.Created=1,e.Changed=2,e.Deleted=3;})(TB||(L.FileChangeType=TB={}));var AB;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(ZF.URI.is(n.baseUri)||ZF.WorkspaceFolder.is(n.baseUri))&&yr.string(n.pattern)}e.is=t;})(AB||(L.RelativePattern=AB={}));var IB;(function(e){e.Create=1,e.Change=2,e.Delete=4;})(IB||(L.WatchKind=IB={}));var RB;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(RB||(L.PublishDiagnosticsNotification=RB={}));var PB;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3;})(PB||(L.CompletionTriggerKind=PB={}));var NB;(function(e){e.method="textDocument/completion",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(NB||(L.CompletionRequest=NB={}));var kB;(function(e){e.method="completionItem/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(kB||(L.CompletionResolveRequest=kB={}));var DB;(function(e){e.method="textDocument/hover",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(DB||(L.HoverRequest=DB={}));var LB;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3;})(LB||(L.SignatureHelpTriggerKind=LB={}));var OB;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(OB||(L.SignatureHelpRequest=OB={}));var FB;(function(e){e.method="textDocument/definition",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(FB||(L.DefinitionRequest=FB={}));var BB;(function(e){e.method="textDocument/references",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(BB||(L.ReferencesRequest=BB={}));var MB;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(MB||(L.DocumentHighlightRequest=MB={}));var qB;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(qB||(L.DocumentSymbolRequest=qB={}));var HB;(function(e){e.method="textDocument/codeAction",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(HB||(L.CodeActionRequest=HB={}));var UB;(function(e){e.method="codeAction/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(UB||(L.CodeActionResolveRequest=UB={}));var $B;(function(e){e.method="workspace/symbol",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})($B||(L.WorkspaceSymbolRequest=$B={}));var jB;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(jB||(L.WorkspaceSymbolResolveRequest=jB={}));var VB;(function(e){e.method="textDocument/codeLens",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(VB||(L.CodeLensRequest=VB={}));var WB;(function(e){e.method="codeLens/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(WB||(L.CodeLensResolveRequest=WB={}));var KB;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType0(e.method);})(KB||(L.CodeLensRefreshRequest=KB={}));var zB;(function(e){e.method="textDocument/documentLink",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(zB||(L.DocumentLinkRequest=zB={}));var GB;(function(e){e.method="documentLink/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(GB||(L.DocumentLinkResolveRequest=GB={}));var XB;(function(e){e.method="textDocument/formatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(XB||(L.DocumentFormattingRequest=XB={}));var ZB;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(ZB||(L.DocumentRangeFormattingRequest=ZB={}));var YB;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(YB||(L.DocumentRangesFormattingRequest=YB={}));var QB;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(QB||(L.DocumentOnTypeFormattingRequest=QB={}));var JB;(function(e){e.Identifier=1;})(JB||(L.PrepareSupportDefaultBehavior=JB={}));var eM;(function(e){e.method="textDocument/rename",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(eM||(L.RenameRequest=eM={}));var tM;(function(e){e.method="textDocument/prepareRename",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(tM||(L.PrepareRenameRequest=tM={}));var rM;(function(e){e.method="workspace/executeCommand",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(rM||(L.ExecuteCommandRequest=rM={}));var nM;(function(e){e.method="workspace/applyEdit",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType("workspace/applyEdit");})(nM||(L.ApplyWorkspaceEditRequest=nM={}));});var lM=P(ch=>{Object.defineProperty(ch,"__esModule",{value:!0});ch.createProtocolConnection=void 0;var cM=ha();function CJ(e,t,r,n){return cM.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, cM.createMessageConnection)(e,t,r,n)}ch.createProtocolConnection=CJ;});var dM=P(sn=>{var wJ=sn&&sn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),lh=sn&&sn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wJ(t,e,r);};Object.defineProperty(sn,"__esModule",{value:!0});sn.LSPErrorCodes=sn.createProtocolConnection=void 0;lh(ha(),sn);lh(zd(),sn);lh(Kt(),sn);lh(uM(),sn);var xJ=lM();Object.defineProperty(sn,"createProtocolConnection",{enumerable:!0,get:function(){return xJ.createProtocolConnection}});var fM;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800;})(fM||(sn.LSPErrorCodes=fM={}));});var nr=P(vi=>{var TJ=vi&&vi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),hM=vi&&vi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&TJ(t,e,r);};Object.defineProperty(vi,"__esModule",{value:!0});vi.createProtocolConnection=void 0;var AJ=Hv();hM(Hv(),vi);hM(dM(),vi);function IJ(e,t,r,n){return (0, AJ.createMessageConnection)(e,t,r,n)}vi.createProtocolConnection=IJ;});var nS=P(Ln=>{Object.defineProperty(Ln,"__esModule",{value:!0});Ln.generateUuid=Ln.parse=Ln.isUUID=Ln.v4=Ln.empty=void 0;var dc=class{constructor(t){this._value=t;}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},hc=class e extends dc{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""));}};hc._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];hc._timeHighBits=["8","9","a","b"];Ln.empty=new dc("00000000-0000-0000-0000-000000000000");function pM(){return new hc}Ln.v4=pM;var RJ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function gM(e){return RJ.test(e)}Ln.isUUID=gM;function PJ(e){if(!gM(e))throw new Error("invalid uuid");return new dc(e)}Ln.parse=PJ;function NJ(){return pM().asHex()}Ln.generateUuid=NJ;});var mM=P(As=>{Object.defineProperty(As,"__esModule",{value:!0});As.attachPartialResult=As.ProgressFeature=As.attachWorkDone=void 0;var Ts=nr(),kJ=nS(),ga=class e{constructor(t,r){this._connection=t,this._token=r,e.Instances.set(this._token,this);}begin(t,r,n,i){let s={kind:"begin",title:t,percentage:r,message:n,cancellable:i};this._connection.sendProgress(Ts.WorkDoneProgress.type,this._token,s);}report(t,r){let n={kind:"report"};typeof t=="number"?(n.percentage=t,r!==void 0&&(n.message=r)):n.message=t,this._connection.sendProgress(Ts.WorkDoneProgress.type,this._token,n);}done(){e.Instances.delete(this._token),this._connection.sendProgress(Ts.WorkDoneProgress.type,this._token,{kind:"end"});}};ga.Instances=new Map;var fh=class extends ga{constructor(t,r){super(t,r),this._source=new Ts.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose(),super.done();}cancel(){this._source.cancel();}},pc=class{constructor(){}begin(){}report(){}done(){}},dh=class extends pc{constructor(){super(),this._source=new Ts.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose();}cancel(){this._source.cancel();}};function DJ(e,t){if(t===void 0||t.workDoneToken===void 0)return new pc;let r=t.workDoneToken;return delete t.workDoneToken,new ga(e,r)}As.attachWorkDone=DJ;var LJ=e=>class extends e{constructor(){super(),this._progressSupported=!1;}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Ts.WorkDoneProgressCancelNotification.type,r=>{let n=ga.Instances.get(r.token);(n instanceof fh||n instanceof dh)&&n.cancel();}));}attachWorkDoneProgress(t){return t===void 0?new pc:new ga(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0, kJ.generateUuid)();return this.connection.sendRequest(Ts.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new fh(this.connection,t))}else return Promise.resolve(new dh)}};As.ProgressFeature=LJ;var iS;(function(e){e.type=new Ts.ProgressType;})(iS||(iS={}));var sS=class{constructor(t,r){this._connection=t,this._token=r;}report(t){this._connection.sendProgress(iS.type,this._token,t);}};function OJ(e,t){if(t===void 0||t.partialResultToken===void 0)return;let r=t.partialResultToken;return delete t.partialResultToken,new sS(e,r)}As.attachPartialResult=OJ;});var yM=P(hh=>{Object.defineProperty(hh,"__esModule",{value:!0});hh.ConfigurationFeature=void 0;var FJ=nr(),BJ=wd(),MJ=e=>class extends e{getConfiguration(t){return t?BJ.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let r={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(FJ.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(t)?n:n[0]:Array.isArray(t)?[]:null)}};hh.ConfigurationFeature=MJ;});var _M=P(gh=>{Object.defineProperty(gh,"__esModule",{value:!0});gh.WorkspaceFoldersFeature=void 0;var ph=nr(),qJ=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1;}initialize(t){super.initialize(t);let r=t.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new ph.Emitter,this.connection.onNotification(ph.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event);}));}fillServerCapabilities(t){super.fillServerCapabilities(t);let r=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string";}getWorkspaceFolders(){return this.connection.sendRequest(ph.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return !this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(ph.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};gh.WorkspaceFoldersFeature=qJ;});var vM=P(mh=>{Object.defineProperty(mh,"__esModule",{value:!0});mh.CallHierarchyFeature=void 0;var aS=nr(),HJ=e=>class extends e{get callHierarchy(){return {onPrepare:t=>this.connection.onRequest(aS.CallHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onIncomingCalls:t=>{let r=aS.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onOutgoingCalls:t=>{let r=aS.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};mh.CallHierarchyFeature=HJ;});var uS=P(Is=>{Object.defineProperty(Is,"__esModule",{value:!0});Is.SemanticTokensBuilder=Is.SemanticTokensDiff=Is.SemanticTokensFeature=void 0;var yh=nr(),UJ=e=>class extends e{get semanticTokens(){return {refresh:()=>this.connection.sendRequest(yh.SemanticTokensRefreshRequest.type),on:t=>{let r=yh.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onDelta:t=>{let r=yh.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onRange:t=>{let r=yh.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Is.SemanticTokensFeature=UJ;var _h=class{constructor(t,r){this.originalSequence=t,this.modifiedSequence=r;}computeDiff(){let t=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<t&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<t){let i=t-1,s=r-1;for(;i>=n&&s>=n&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<n||s<n)&&(i++,s++);let a=i-n+1,o=this.modifiedSequence.slice(n,s+1);return o.length===1&&o[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:o}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<t?[{start:n,deleteCount:t-n}]:[]}};Is.SemanticTokensDiff=_h;var oS=class{constructor(){this._prevData=void 0,this.initialize();}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0;}push(t,r,n,i,s){let a=t,o=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=t,this._prevChar=r;}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize();}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new _h(this._prevData,this._data).computeDiff()}:this.build()}};Is.SemanticTokensBuilder=oS;});var SM=P(vh=>{Object.defineProperty(vh,"__esModule",{value:!0});vh.ShowDocumentFeature=void 0;var $J=nr(),jJ=e=>class extends e{showDocument(t){return this.connection.sendRequest($J.ShowDocumentRequest.type,t)}};vh.ShowDocumentFeature=jJ;});var bM=P(Sh=>{Object.defineProperty(Sh,"__esModule",{value:!0});Sh.FileOperationsFeature=void 0;var Do=nr(),VJ=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(Do.DidCreateFilesNotification.type,r=>{t(r);})}onDidRenameFiles(t){return this.connection.onNotification(Do.DidRenameFilesNotification.type,r=>{t(r);})}onDidDeleteFiles(t){return this.connection.onNotification(Do.DidDeleteFilesNotification.type,r=>{t(r);})}onWillCreateFiles(t){return this.connection.onRequest(Do.WillCreateFilesRequest.type,(r,n)=>t(r,n))}onWillRenameFiles(t){return this.connection.onRequest(Do.WillRenameFilesRequest.type,(r,n)=>t(r,n))}onWillDeleteFiles(t){return this.connection.onRequest(Do.WillDeleteFilesRequest.type,(r,n)=>t(r,n))}};Sh.FileOperationsFeature=VJ;});var EM=P(bh=>{Object.defineProperty(bh,"__esModule",{value:!0});bh.LinkedEditingRangeFeature=void 0;var WJ=nr(),KJ=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(WJ.LinkedEditingRangeRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0))}};bh.LinkedEditingRangeFeature=KJ;});var CM=P(Eh=>{Object.defineProperty(Eh,"__esModule",{value:!0});Eh.TypeHierarchyFeature=void 0;var cS=nr(),zJ=e=>class extends e{get typeHierarchy(){return {onPrepare:t=>this.connection.onRequest(cS.TypeHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onSupertypes:t=>{let r=cS.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onSubtypes:t=>{let r=cS.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Eh.TypeHierarchyFeature=zJ;});var xM=P(Ch=>{Object.defineProperty(Ch,"__esModule",{value:!0});Ch.InlineValueFeature=void 0;var wM=nr(),GJ=e=>class extends e{get inlineValue(){return {refresh:()=>this.connection.sendRequest(wM.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(wM.InlineValueRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};Ch.InlineValueFeature=GJ;});var AM=P(wh=>{Object.defineProperty(wh,"__esModule",{value:!0});wh.FoldingRangeFeature=void 0;var TM=nr(),XJ=e=>class extends e{get foldingRange(){return {refresh:()=>this.connection.sendRequest(TM.FoldingRangeRefreshRequest.type),on:t=>{let r=TM.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};wh.FoldingRangeFeature=XJ;});var IM=P(xh=>{Object.defineProperty(xh,"__esModule",{value:!0});xh.InlayHintFeature=void 0;var lS=nr(),ZJ=e=>class extends e{get inlayHint(){return {refresh:()=>this.connection.sendRequest(lS.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(lS.InlayHintRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r))),resolve:t=>this.connection.onRequest(lS.InlayHintResolveRequest.type,(r,n)=>t(r,n))}}};xh.InlayHintFeature=ZJ;});var RM=P(Th=>{Object.defineProperty(Th,"__esModule",{value:!0});Th.DiagnosticFeature=void 0;var gc=nr(),YJ=e=>class extends e{get diagnostics(){return {refresh:()=>this.connection.sendRequest(gc.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(gc.DocumentDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(gc.DocumentDiagnosticRequest.partialResult,r))),onWorkspace:t=>this.connection.onRequest(gc.WorkspaceDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(gc.WorkspaceDiagnosticRequest.partialResult,r)))}}};Th.DiagnosticFeature=YJ;});var dS=P(Ah=>{Object.defineProperty(Ah,"__esModule",{value:!0});Ah.TextDocuments=void 0;var ma=nr(),fS=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new ma.Emitter,this._onDidOpen=new ma.Emitter,this._onDidClose=new ma.Emitter,this._onDidSave=new ma.Emitter,this._onWillSave=new ma.Emitter;}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t;}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=ma.TextDocumentSyncKind.Incremental;let r=[];return r.push(t.onDidOpenTextDocument(n=>{let i=n.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let a=Object.freeze({document:s});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a);})),r.push(t.onDidChangeTextDocument(n=>{let i=n.textDocument,s=n.contentChanges;if(s.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let o=this._syncedDocuments.get(i.uri);o!==void 0&&(o=this._configuration.update(o,s,a),this._syncedDocuments.set(i.uri,o),this._onDidChangeContent.fire(Object.freeze({document:o})));})),r.push(t.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})));})),r.push(t.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}));})),r.push(t.onWillSaveTextDocumentWaitUntil((n,i)=>{let s=this._syncedDocuments.get(n.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:n.reason}),i):[]})),r.push(t.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}));})),ma.Disposable.create(()=>{r.forEach(n=>n.dispose());})}};Ah.TextDocuments=fS;});var pS=P(Lo=>{Object.defineProperty(Lo,"__esModule",{value:!0});Lo.NotebookDocuments=Lo.NotebookSyncFeature=void 0;var On=nr(),PM=dS(),QJ=e=>class extends e{get synchronization(){return {onDidOpenNotebookDocument:t=>this.connection.onNotification(On.DidOpenNotebookDocumentNotification.type,r=>{t(r);}),onDidChangeNotebookDocument:t=>this.connection.onNotification(On.DidChangeNotebookDocumentNotification.type,r=>{t(r);}),onDidSaveNotebookDocument:t=>this.connection.onNotification(On.DidSaveNotebookDocumentNotification.type,r=>{t(r);}),onDidCloseNotebookDocument:t=>this.connection.onNotification(On.DidCloseNotebookDocumentNotification.type,r=>{t(r);})}}};Lo.NotebookSyncFeature=QJ;var Ih=class e{onDidOpenTextDocument(t){return this.openHandler=t,On.Disposable.create(()=>{this.openHandler=void 0;})}openTextDocument(t){this.openHandler&&this.openHandler(t);}onDidChangeTextDocument(t){return this.changeHandler=t,On.Disposable.create(()=>{this.changeHandler=t;})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t);}onDidCloseTextDocument(t){return this.closeHandler=t,On.Disposable.create(()=>{this.closeHandler=void 0;})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t);}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Ih.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var hS=class{constructor(t){t instanceof PM.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new PM.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new On.Emitter,this._onDidChange=new On.Emitter,this._onDidSave=new On.Emitter,this._onDidClose=new On.Emitter;}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let r=this.notebookCellMap.get(t);return r&&r[0]}findNotebookDocumentForCell(t){let r=typeof t=="string"?t:t.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let r=new Ih,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)r.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument);})),n.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let a=s.metadata,o=!1,c=i.change;c.metadata!==void 0&&(o=!0,s.metadata=c.metadata);let l=[],u=[],f=[],h=[];if(c.cells!==void 0){let x=c.cells;if(x.structure!==void 0){let y=x.structure.array;if(s.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),x.structure.didOpen!==void 0)for(let S of x.structure.didOpen)r.openTextDocument({textDocument:S}),l.push(S.uri);if(x.structure.didClose)for(let S of x.structure.didClose)r.closeTextDocument({textDocument:S}),u.push(S.uri);}if(x.data!==void 0){let y=new Map(x.data.map(S=>[S.document,S]));for(let S=0;S<=s.cells.length;S++){let N=y.get(s.cells[S].document);if(N!==void 0){let O=s.cells.splice(S,1,N);if(f.push({old:O[0],new:N}),y.delete(N.document),y.size===0)break}}}if(x.textContent!==void 0)for(let y of x.textContent)r.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),h.push(y.document.uri);}this.updateCellMap(s);let p={notebookDocument:s};o&&(p.metadata={old:a,new:s.metadata});let m=[];for(let x of l)m.push(this.getNotebookCell(x));let v=[];for(let x of u)v.push(this.getNotebookCell(x));let E=[];for(let x of h)E.push(this.getNotebookCell(x));(m.length>0||v.length>0||f.length>0||E.length>0)&&(p.cells={added:m,removed:v,changed:{data:f,textContent:E}}),(p.metadata!==void 0||p.cells!==void 0)&&this._onDidChange.fire(p);})),n.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s);})),n.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of s.cells)this.notebookCellMap.delete(a.document);}})),On.Disposable.create(()=>{n.forEach(i=>i.dispose());})}updateCellMap(t){for(let r of t.cells)this.notebookCellMap.set(r.document,[r,t]);}};Lo.NotebookDocuments=hS;});var NM=P(Rh=>{Object.defineProperty(Rh,"__esModule",{value:!0});Rh.MonikerFeature=void 0;var JJ=nr(),eee=e=>class extends e{get moniker(){return {on:t=>{let r=JJ.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Rh.MonikerFeature=eee;});var SS=P(vt=>{Object.defineProperty(vt,"__esModule",{value:!0});vt.createConnection=vt.combineFeatures=vt.combineNotebooksFeatures=vt.combineLanguagesFeatures=vt.combineWorkspaceFeatures=vt.combineWindowFeatures=vt.combineClientFeatures=vt.combineTracerFeatures=vt.combineTelemetryFeatures=vt.combineConsoleFeatures=vt._NotebooksImpl=vt._LanguagesImpl=vt.BulkUnregistration=vt.BulkRegistration=vt.ErrorMessageTracker=void 0;var Ce=nr(),Fn=wd(),mS=nS(),Xe=mM(),tee=yM(),ree=_M(),nee=vM(),iee=uS(),see=SM(),aee=bM(),oee=EM(),uee=CM(),cee=xM(),lee=AM(),fee=IM(),dee=RM(),hee=pS(),pee=NM();function gS(e){if(e!==null)return e}var yS=class{constructor(){this._messages=Object.create(null);}add(t){let r=this._messages[t];r||(r=0),r++,this._messages[t]=r;}sendErrors(t){Object.keys(this._messages).forEach(r=>{t.window.showErrorMessage(r);});}};vt.ErrorMessageTracker=yS;var Ph=class{constructor(){}rawAttach(t){this._rawConnection=t;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(Ce.MessageType.Error,t);}warn(t){this.send(Ce.MessageType.Warning,t);}info(t){this.send(Ce.MessageType.Info,t);}log(t){this.send(Ce.MessageType.Log,t);}debug(t){this.send(Ce.MessageType.Debug,t);}send(t,r){this._rawConnection&&this._rawConnection.sendNotification(Ce.LogMessageNotification.type,{type:t,message:r}).catch(()=>{(0, Ce.RAL)().console.error("Sending log message failed");});}},_S=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...r){let n={type:Ce.MessageType.Error,message:t,actions:r};return this.connection.sendRequest(Ce.ShowMessageRequest.type,n).then(gS)}showWarningMessage(t,...r){let n={type:Ce.MessageType.Warning,message:t,actions:r};return this.connection.sendRequest(Ce.ShowMessageRequest.type,n).then(gS)}showInformationMessage(t,...r){let n={type:Ce.MessageType.Info,message:t,actions:r};return this.connection.sendRequest(Ce.ShowMessageRequest.type,n).then(gS)}},kM=(0, see.ShowDocumentFeature)((0, Xe.ProgressFeature)(_S)),DM;(function(e){function t(){return new Nh}e.create=t;})(DM||(vt.BulkRegistration=DM={}));var Nh=class{constructor(){this._registrations=[],this._registered=new Set;}add(t,r){let n=Fn.string(t)?t:t.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=mS.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n);}asRegistrationParams(){return {registrations:this._registrations}}},LM;(function(e){function t(){return new mc(void 0,[])}e.create=t;})(LM||(vt.BulkUnregistration=LM={}));var mc=class{constructor(t,r){this._connection=t,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n);});}get isAttached(){return !!this._connection}attach(t){this._connection=t;}add(t){this._unregistrations.set(t.method,t);}dispose(){let t=[];for(let n of this._unregistrations.values())t.push(n);let r={unregisterations:t};this._connection.sendRequest(Ce.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.");});}disposeSingle(t){let r=Fn.string(t)?t:t.method,n=this._unregistrations.get(r);if(!n)return !1;let i={unregisterations:[n]};return this._connection.sendRequest(Ce.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r);},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`);}),!0}},kh=class{attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,r,n){return t instanceof Nh?this.registerMany(t):t instanceof mc?this.registerSingle1(t,r,n):this.registerSingle2(t,r)}registerSingle1(t,r,n){let i=Fn.string(r)?r:r.method,s=mS.generateUuid(),a={registrations:[{id:s,method:i,registerOptions:n||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(Ce.RegistrationRequest.type,a).then(o=>(t.add({id:s,method:i}),t),o=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(o)))}registerSingle2(t,r){let n=Fn.string(t)?t:t.method,i=mS.generateUuid(),s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(Ce.RegistrationRequest.type,s).then(a=>Ce.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`);});}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(t,r){let n={unregisterations:[{id:t,method:r}]};return this.connection.sendRequest(Ce.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`);})}registerMany(t){let r=t.asRegistrationParams();return this.connection.sendRequest(Ce.RegistrationRequest.type,r).then(()=>new mc(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},vS=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function r(i){return i&&!!i.edit}let n=r(t)?t:{edit:t};return this.connection.sendRequest(Ce.ApplyWorkspaceEditRequest.type,n)}},OM=(0, aee.FileOperationsFeature)((0, ree.WorkspaceFoldersFeature)((0, tee.ConfigurationFeature)(vS))),Dh=class{constructor(){this._trace=Ce.Trace.Off;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t;}log(t,r){this._trace!==Ce.Trace.Off&&this.connection.sendNotification(Ce.LogTraceNotification.type,{message:t,verbose:this._trace===Ce.Trace.Verbose?r:void 0}).catch(()=>{});}},Lh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(Ce.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed");});}},Oh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Xe.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Xe.attachPartialResult)(this.connection,r)}};vt._LanguagesImpl=Oh;var FM=(0, lee.FoldingRangeFeature)((0, pee.MonikerFeature)((0, dee.DiagnosticFeature)((0, fee.InlayHintFeature)((0, cee.InlineValueFeature)((0, uee.TypeHierarchyFeature)((0, oee.LinkedEditingRangeFeature)((0, iee.SemanticTokensFeature)((0, nee.CallHierarchyFeature)(Oh))))))))),Fh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Xe.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Xe.attachPartialResult)(this.connection,r)}};vt._NotebooksImpl=Fh;var BM=(0, hee.NotebookSyncFeature)(Fh);function MM(e,t){return function(r){return t(e(r))}}vt.combineConsoleFeatures=MM;function qM(e,t){return function(r){return t(e(r))}}vt.combineTelemetryFeatures=qM;function HM(e,t){return function(r){return t(e(r))}}vt.combineTracerFeatures=HM;function UM(e,t){return function(r){return t(e(r))}}vt.combineClientFeatures=UM;function $M(e,t){return function(r){return t(e(r))}}vt.combineWindowFeatures=$M;function jM(e,t){return function(r){return t(e(r))}}vt.combineWorkspaceFeatures=jM;function VM(e,t){return function(r){return t(e(r))}}vt.combineLanguagesFeatures=VM;function WM(e,t){return function(r){return t(e(r))}}vt.combineNotebooksFeatures=WM;function gee(e,t){function r(i,s,a){return i&&s?a(i,s):i||s}return {__brand:"features",console:r(e.console,t.console,MM),tracer:r(e.tracer,t.tracer,HM),telemetry:r(e.telemetry,t.telemetry,qM),client:r(e.client,t.client,UM),window:r(e.window,t.window,$M),workspace:r(e.workspace,t.workspace,jM),languages:r(e.languages,t.languages,VM),notebooks:r(e.notebooks,t.notebooks,WM)}}vt.combineFeatures=gee;function mee(e,t,r){let n=r&&r.console?new(r.console(Ph)):new Ph,i=e(n);n.rawAttach(i);let s=r&&r.tracer?new(r.tracer(Dh)):new Dh,a=r&&r.telemetry?new(r.telemetry(Lh)):new Lh,o=r&&r.client?new(r.client(kh)):new kh,c=r&&r.window?new(r.window(kM)):new kM,l=r&&r.workspace?new(r.workspace(OM)):new OM,u=r&&r.languages?new(r.languages(FM)):new FM,f=r&&r.notebooks?new(r.notebooks(BM)):new BM,h=[n,s,a,o,c,l,u,f];function p(y){return y instanceof Promise?y:Fn.thenable(y)?new Promise((S,N)=>{y.then(O=>S(O),O=>N(O));}):Promise.resolve(y)}let m,v,E,x={listen:()=>i.listen(),sendRequest:(y,...S)=>i.sendRequest(Fn.string(y)?y:y.method,...S),onRequest:(y,S)=>i.onRequest(y,S),sendNotification:(y,S)=>{let N=Fn.string(y)?y:y.method;return i.sendNotification(N,S)},onNotification:(y,S)=>i.onNotification(y,S),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(v=y,{dispose:()=>{v=void 0;}}),onInitialized:y=>i.onNotification(Ce.InitializedNotification.type,y),onShutdown:y=>(m=y,{dispose:()=>{m=void 0;}}),onExit:y=>(E=y,{dispose:()=>{E=void 0;}}),get console(){return n},get telemetry(){return a},get tracer(){return s},get client(){return o},get window(){return c},get workspace(){return l},get languages(){return u},get notebooks(){return f},onDidChangeConfiguration:y=>i.onNotification(Ce.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(Ce.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(Ce.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(Ce.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(Ce.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(Ce.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(Ce.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(Ce.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(Ce.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(Ce.HoverRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),onCompletion:y=>i.onRequest(Ce.CompletionRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onCompletionResolve:y=>i.onRequest(Ce.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(Ce.SignatureHelpRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),onDeclaration:y=>i.onRequest(Ce.DeclarationRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onDefinition:y=>i.onRequest(Ce.DefinitionRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onTypeDefinition:y=>i.onRequest(Ce.TypeDefinitionRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onImplementation:y=>i.onRequest(Ce.ImplementationRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onReferences:y=>i.onRequest(Ce.ReferencesRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onDocumentHighlight:y=>i.onRequest(Ce.DocumentHighlightRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onDocumentSymbol:y=>i.onRequest(Ce.DocumentSymbolRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onWorkspaceSymbol:y=>i.onRequest(Ce.WorkspaceSymbolRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onWorkspaceSymbolResolve:y=>i.onRequest(Ce.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(Ce.CodeActionRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onCodeActionResolve:y=>i.onRequest(Ce.CodeActionResolveRequest.type,(S,N)=>y(S,N)),onCodeLens:y=>i.onRequest(Ce.CodeLensRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onCodeLensResolve:y=>i.onRequest(Ce.CodeLensResolveRequest.type,(S,N)=>y(S,N)),onDocumentFormatting:y=>i.onRequest(Ce.DocumentFormattingRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),onDocumentRangeFormatting:y=>i.onRequest(Ce.DocumentRangeFormattingRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(Ce.DocumentOnTypeFormattingRequest.type,(S,N)=>y(S,N)),onRenameRequest:y=>i.onRequest(Ce.RenameRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),onPrepareRename:y=>i.onRequest(Ce.PrepareRenameRequest.type,(S,N)=>y(S,N)),onDocumentLinks:y=>i.onRequest(Ce.DocumentLinkRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onDocumentLinkResolve:y=>i.onRequest(Ce.DocumentLinkResolveRequest.type,(S,N)=>y(S,N)),onDocumentColor:y=>i.onRequest(Ce.DocumentColorRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onColorPresentation:y=>i.onRequest(Ce.ColorPresentationRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onFoldingRanges:y=>i.onRequest(Ce.FoldingRangeRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onSelectionRanges:y=>i.onRequest(Ce.SelectionRangeRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),(0, Xe.attachPartialResult)(i,S))),onExecuteCommand:y=>i.onRequest(Ce.ExecuteCommandRequest.type,(S,N)=>y(S,N,(0, Xe.attachWorkDone)(i,S),void 0)),dispose:()=>i.dispose()};for(let y of h)y.attach(x);return i.onRequest(Ce.InitializeRequest.type,y=>{t.initialize(y),Fn.string(y.trace)&&(s.trace=Ce.Trace.fromString(y.trace));for(let S of h)S.initialize(y.capabilities);if(v){let S=v(y,new Ce.CancellationTokenSource().token,(0, Xe.attachWorkDone)(i,y),void 0);return p(S).then(N=>{if(N instanceof Ce.ResponseError)return N;let O=N;O||(O={capabilities:{}});let j=O.capabilities;j||(j={},O.capabilities=j),j.textDocumentSync===void 0||j.textDocumentSync===null?j.textDocumentSync=Fn.number(x.__textDocumentSync)?x.__textDocumentSync:Ce.TextDocumentSyncKind.None:!Fn.number(j.textDocumentSync)&&!Fn.number(j.textDocumentSync.change)&&(j.textDocumentSync.change=Fn.number(x.__textDocumentSync)?x.__textDocumentSync:Ce.TextDocumentSyncKind.None);for(let J of h)J.fillServerCapabilities(j);return O})}else {let S={capabilities:{textDocumentSync:Ce.TextDocumentSyncKind.None}};for(let N of h)N.fillServerCapabilities(S.capabilities);return S}}),i.onRequest(Ce.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,m)return m(new Ce.CancellationTokenSource().token)}),i.onNotification(Ce.ExitNotification.type,()=>{try{E&&E();}finally{t.shutdownReceived?t.exit(0):t.exit(1);}}),i.onNotification(Ce.SetTraceNotification.type,y=>{s.trace=Ce.Trace.fromString(y.value);}),x}vt.createConnection=mee;});var KM=P(an=>{Object.defineProperty(an,"__esModule",{value:!0});an.resolveModulePath=an.FileSystem=an.resolveGlobalYarnPath=an.resolveGlobalNodePath=an.resolve=an.uriToFilePath=void 0;var yee=he("url"),Zn=he("path"),bS=he("fs"),xS=he("child_process");function _ee(e){let t=yee.parse(e);if(t.protocol!=="file:"||!t.path)return;let r=t.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],a=r[1];s.length===0&&a.length>1&&a[1]===":"&&r.shift();}return Zn.normalize(r.join("/"))}an.uriToFilePath=_ee;function ES(){return process.platform==="win32"}function Bh(e,t,r,n){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,o)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(u=>l[u]=c[u]),t&&bS.existsSync(t)&&(l[i]?l[i]=t+Zn.delimiter+l[i]:l[i]=t,n&&n(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let u=(0, xS.fork)("",[],{cwd:r,env:l,execArgv:["-e",s]});if(u.pid===void 0){o(new Error(`Starting process to resolve node module  ${e} failed`));return}u.on("error",h=>{o(h);}),u.on("message",h=>{h.c==="r"&&(u.send({c:"e"}),h.s?a(h.r):o(new Error(`Failed to resolve module: ${e}`)));});let f={c:"rs",a:e};u.send(f);}catch(u){o(u);}})}an.resolve=Bh;function CS(e){let t="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};ES()&&(t="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0, xS.spawnSync)(t,["config","get","prefix"],n).stdout;if(!s){e&&e("'npm config get prefix' didn't return a value.");return}let a=s.trim();return e&&e(`'npm config get prefix' value is: ${a}`),a.length>0?ES()?Zn.join(a,"node_modules"):Zn.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i);}}an.resolveGlobalNodePath=CS;function vee(e){let t="yarn",r={encoding:"utf8"};ES()&&(t="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=(0, xS.spawnSync)(t,["global","dir","--json"],r),s=i.stdout;if(!s){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let a=s.trim().split(/\r?\n/);for(let o of a)try{let c=JSON.parse(o);if(c.type==="log")return Zn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n);}}an.resolveGlobalYarnPath=vee;var wS;(function(e){let t;function r(){return t!==void 0||(process.platform==="win32"?t=!1:t=!bS.existsSync(__filename.toUpperCase())||!bS.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=r;function n(i,s){return r()?Zn.normalize(s).indexOf(Zn.normalize(i))===0:Zn.normalize(s).toLowerCase().indexOf(Zn.normalize(i).toLowerCase())===0}e.isParent=n;})(wS||(an.FileSystem=wS={}));function See(e,t,r,n){return r?(Zn.isAbsolute(r)||(r=Zn.join(e,r)),Bh(t,r,r,n).then(i=>wS.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>Bh(t,CS(n),e,n))):Bh(t,CS(n),e,n)}an.resolveModulePath=See;});var TS=P((Cle,zM)=>{zM.exports=nr();});var GM=P(Mh=>{Object.defineProperty(Mh,"__esModule",{value:!0});Mh.InlineCompletionFeature=void 0;var bee=nr(),Eee=e=>class extends e{get inlineCompletion(){return {on:t=>this.connection.onRequest(bee.InlineCompletionRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};Mh.InlineCompletionFeature=Eee;});var YM=P(kr=>{var Cee=kr&&kr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),ZM=kr&&kr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Cee(t,e,r);};Object.defineProperty(kr,"__esModule",{value:!0});kr.ProposedFeatures=kr.NotebookDocuments=kr.TextDocuments=kr.SemanticTokensBuilder=void 0;var wee=uS();Object.defineProperty(kr,"SemanticTokensBuilder",{enumerable:!0,get:function(){return wee.SemanticTokensBuilder}});var xee=GM();ZM(nr(),kr);var Tee=dS();Object.defineProperty(kr,"TextDocuments",{enumerable:!0,get:function(){return Tee.TextDocuments}});var Aee=pS();Object.defineProperty(kr,"NotebookDocuments",{enumerable:!0,get:function(){return Aee.NotebookDocuments}});ZM(SS(),kr);var XM;(function(e){e.all={__brand:"features",languages:xee.InlineCompletionFeature};})(XM||(kr.ProposedFeatures=XM={}));});var n3=P(Bn=>{var Iee=Bn&&Bn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),t3=Bn&&Bn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Iee(t,e,r);};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.createConnection=Bn.Files=void 0;var QM=he("util"),AS=wd(),Ree=SS(),yc=KM(),ya=TS();t3(TS(),Bn);t3(YM(),Bn);var JM;(function(e){e.uriToFilePath=yc.uriToFilePath,e.resolveGlobalNodePath=yc.resolveGlobalNodePath,e.resolveGlobalYarnPath=yc.resolveGlobalYarnPath,e.resolve=yc.resolve,e.resolveModulePath=yc.resolveModulePath;})(JM||(Bn.Files=JM={}));var Oo=!1,r3;function Pee(){let e="--clientProcessId";function t(r){try{let n=parseInt(r);isNaN(n)||(r3=setInterval(()=>{try{process.kill(n,0);}catch{process.exit(Oo?0:1);}},3e3));}catch{}}for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===e&&r+1<process.argv.length){t(process.argv[r+1]);return}else {let i=n.split("=");i[0]===e&&t(i[1]);}}}Pee();var Nee={initialize:e=>{let t=e.processId;AS.number(t)&&r3===void 0&&setInterval(()=>{try{process.kill(t,0);}catch{process.exit(Oo?0:1);}},3e3);},get shutdownReceived(){return Oo},set shutdownReceived(e){Oo=e;},exit:e=>{process.exit(e);}};function kee(e,t,r,n){let i,s,a,o;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=r,r=n),ya.ConnectionStrategy.is(e)||ya.ConnectionOptions.is(e)?o=e:(s=e,a=t,o=r),Dee(s,a,o,i)}Bn.createConnection=kee;function Dee(e,t,r,n){let i=!1;if(!e&&!t&&process.argv.length>2){let c,l,u=process.argv.slice(2);for(let f=0;f<u.length;f++){let h=u[f];if(h==="--node-ipc"){e=new ya.IPCMessageReader(process),t=new ya.IPCMessageWriter(process);break}else if(h==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(h==="--socket"){c=parseInt(u[f+1]);break}else if(h==="--pipe"){l=u[f+1];break}else {var s=h.split("=");if(s[0]==="--socket"){c=parseInt(s[1]);break}else if(s[0]==="--pipe"){l=s[1];break}}}if(c){let f=(0, ya.createServerSocketTransport)(c);e=f[0],t=f[1];}else if(l){let f=(0, ya.createServerPipeTransport)(l);e=f[0],t=f[1];}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+a);if(!t)throw new Error("Connection output stream is not set. "+a);if(AS.func(e.read)&&AS.func(e.on)){let c=e;c.on("end",()=>{process.exit(Oo?0:1);}),c.on("close",()=>{process.exit(Oo?0:1);});}let o=c=>{let l=(0, ya.createProtocolConnection)(e,t,c,r);return i&&Lee(c),l};return (0, Ree.createConnection)(o,Nee,n)}function Lee(e){function t(n){return n.map(i=>typeof i=="string"?i:(0, QM.inspect)(i)).join(" ")}let r=new Map;console.assert=function(i,...s){if(!i)if(s.length===0)e.error("Assertion failed");else {let[a,...o]=s;e.error(`Assertion failed: ${a} ${t(o)}`);}},console.count=function(i="default"){let s=String(i),a=r.get(s)??0;a+=1,r.set(s,a),e.log(`${s}: ${s}`);},console.countReset=function(i){i===void 0?r.clear():r.delete(String(i));},console.debug=function(...i){e.log(t(i));},console.dir=function(i,s){e.log((0, QM.inspect)(i,s));},console.log=function(...i){e.log(t(i));},console.error=function(...i){e.error(t(i));},console.trace=function(...i){let s=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${t(i)}`),e.log(`${a}
${s}`);},console.warn=function(...i){e.warn(t(i));};}});var s3=P((Ile,i3)=>{i3.exports=n3();});var Ac=new Uint8Array(256),Tc=Ac.length;function Jh(){return Tc>Ac.length-16&&(J3__default.default.randomFillSync(Ac),Tc=0),Ac.slice(Tc,Tc+=16)}var br=[];for(let e=0;e<256;++e)br.push((e+256).toString(16).slice(1));function cb(e,t=0){return br[e[t+0]]+br[e[t+1]]+br[e[t+2]]+br[e[t+3]]+"-"+br[e[t+4]]+br[e[t+5]]+"-"+br[e[t+6]]+br[e[t+7]]+"-"+br[e[t+8]]+br[e[t+9]]+"-"+br[e[t+10]]+br[e[t+11]]+br[e[t+12]]+br[e[t+13]]+br[e[t+14]]+br[e[t+15]]}var ep={randomUUID:J3__default.default.randomUUID};function tq(e,t,r){if(ep.randomUUID&&!t&&!e)return ep.randomUUID();e=e||{};let n=e.random||(e.rng||Jh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return cb(n)}var Ei=tq;var bd=or(dl());var Xi={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function UU(e,t){return t}function Sw(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:VU(e)?1:e instanceof Set?3:e instanceof Map?4:5}function $U(e){let t=new Set;for(let r of e)for(let n of [...Object.keys(r),...Object.getOwnPropertySymbols(r)])t.add(n);return t}function jU(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function Ew(e){return {*[Symbol.iterator](){for(let t of e)for(let r of t)yield r;}}}var bw=new Set(["[object Object]","[object Module]"]);function VU(e){if(!bw.has(Object.prototype.toString.call(e)))return !1;let{constructor:t}=e;if(t===void 0)return !0;let r=t.prototype;return !(r===null||typeof r!="object"||!bw.has(Object.prototype.toString.call(r))||!r.hasOwnProperty("isPrototypeOf"))}function WU(e,t,r){let n={};for(let i of $U(e)){let s=[];for(let c of e)jU(c,i)&&s.push(c[i]);if(s.length===0)continue;let a=t.metaDataUpdater(r,{key:i,parents:e}),o=xw(s,t,a);o!==Xi.skip&&(i==="__proto__"?Object.defineProperty(n,i,{value:o,configurable:!0,enumerable:!0,writable:!0}):n[i]=o);}return n}function KU(e){return e.flat()}function zU(e){return new Set(Ew(e))}function GU(e){return new Map(Ew(e))}function Cw(e){return e.at(-1)}var rg=Object.freeze({__proto__:null,mergeArrays:KU,mergeMaps:GU,mergeOthers:Cw,mergeRecords:WU,mergeSets:zU});function ww(...e){return XU({})(...e)}function XU(e,t){let r=ZU(e,n);function n(...i){return xw(i,r,t)}return n}function ZU(e,t){return {defaultMergeFunctions:rg,mergeFunctions:{...rg,...Object.fromEntries(Object.entries(e).filter(([r,n])=>Object.hasOwn(rg,r)).map(([r,n])=>n===!1?[r,Cw]:[r,n]))},metaDataUpdater:e.metaDataUpdater??UU,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,actions:Xi}}function xw(e,t,r){if(e.length===0)return;if(e.length===1)return ng(e,t,r);let n=Sw(e[0]);if(n!==0&&n!==5){for(let i=1;i<e.length;i++)if(Sw(e[i])!==n)return ng(e,t,r)}switch(n){case 1:return YU(e,t,r);case 2:return QU(e,t,r);case 3:return JU(e,t,r);case 4:return e5(e,t,r);default:return ng(e,t,r)}}function YU(e,t,r){let n=t.mergeFunctions.mergeRecords(e,t,r);return n===Xi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,r):n}function QU(e,t,r){let n=t.mergeFunctions.mergeArrays(e,t,r);return n===Xi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):n}function JU(e,t,r){let n=t.mergeFunctions.mergeSets(e,t,r);return n===Xi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):n}function e5(e,t,r){let n=t.mergeFunctions.mergeMaps(e,t,r);return n===Xi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):n}function ng(e,t,r){let n=t.mergeFunctions.mergeOthers(e,t,r);return n===Xi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):n}var Xo=e=>{let t=typeof e;return e!==null&&(t==="object"||t==="function")};var ig=new Set(["__proto__","prototype","constructor"]),t5=new Set("0123456789");function sg(e){let t=[],r="",n="start",i=!1;for(let s of e)switch(s){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=s),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=s;break}if(ig.has(r))return [];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=s;break}if(n==="property"){if(ig.has(r))return [];t.push(r),r="";}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!t5.has(s))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=s;}}switch(i&&(r+="\\"),n){case"property":{if(ig.has(r))return [];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function Tw(e,t){if(typeof t!="number"&&Array.isArray(e)){let r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return !1}function Aw(e,t){if(Tw(e,t))throw new Error("Cannot use string index")}function hl(e,t,r){if(!Xo(e)||typeof t!="string")return r===void 0?e:r;let n=sg(t);if(n.length===0)return r;for(let i=0;i<n.length;i++){let s=n[i];if(Tw(e,s)?e=i===n.length-1?void 0:null:e=e[s],e==null){if(i!==n.length-1)return r;break}}return e===void 0?r:e}function Bs(e,t,r){if(!Xo(e)||typeof t!="string")return e;let n=e,i=sg(t);for(let s=0;s<i.length;s++){let a=i[s];Aw(e,a),s===i.length-1?e[a]=r:Xo(e[a])||(e[a]=typeof i[s+1]=="number"?[]:{}),e=e[a];}return n}function pl(e,t){if(!Xo(e)||typeof t!="string")return !1;let r=sg(t);for(let n=0;n<r.length;n++){let i=r[n];if(Aw(e,i),n===r.length-1)return delete e[i],!0;if(e=e[i],!Xo(e))return !1}}var r5={"Content-Type":"application/json"};function Ms(e={}){let{fetch:t=globalThis.fetch,querySerializer:r,bodySerializer:n,...i}=e,s=i.baseUrl??"";s.endsWith("/")&&(s=s.slice(0,-1));async function a(o,c){let{fetch:l=t,headers:u,body:f,params:h={},parseAs:p="json",querySerializer:m=r??n5,bodySerializer:v=n??i5,...E}=c||{},x=s5(o,{baseUrl:s,params:h,querySerializer:m}),y=a5(r5,e?.headers,u,h.header),S={redirect:"follow",...i,...E,headers:y};f&&(S.body=v(f)),S.body instanceof FormData&&y.delete("Content-Type");let N=await l(x,S);if(N.status===204||N.headers.get("Content-Length")==="0")return N.ok?{data:{},response:N}:{error:{},response:N};if(N.ok){let j;if(p!=="stream"){let J=N.clone();j=typeof J[p]=="function"?await J[p]():await J.text();}else j=N.clone().body;return {data:j,response:N}}let O={};try{O=await N.clone().json();}catch{O=await N.clone().text();}return {error:O,response:N}}return {async GET(o,...c){return a(o,{...c[0],method:"GET"})},async PUT(o,...c){return a(o,{...c[0],method:"PUT"})},async POST(o,...c){return a(o,{...c[0],method:"POST"})},async DELETE(o,...c){return a(o,{...c[0],method:"DELETE"})},async OPTIONS(o,...c){return a(o,{...c[0],method:"OPTIONS"})},async HEAD(o,...c){return a(o,{...c[0],method:"HEAD"})},async PATCH(o,...c){return a(o,{...c[0],method:"PATCH"})},async TRACE(o,...c){return a(o,{...c[0],method:"TRACE"})}}}function n5(e){let t=new URLSearchParams;if(e&&typeof e=="object")for(let[r,n]of Object.entries(e))n!=null&&t.set(r,n);return t.toString()}function i5(e){return JSON.stringify(e)}function s5(e,t){let r=`${t.baseUrl}${e}`;if(t.params.path)for(let[i,s]of Object.entries(t.params.path))r=r.replace(`{${i}}`,encodeURIComponent(String(s)));let n=t.querySerializer(t.params.query??{});return n&&(r+=`?${n}`),r}function a5(...e){let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[i,s]of n)s===null?t.delete(i):s!==void 0&&t.set(i,s);}return t}var Dw=or(Nw());function Ot(e){let t=e.match(/.*(?:$|\r?\n)/g)?.filter(Boolean)??[];return t.length>0&&t[t.length-1]?.endsWith(`
`)&&t.push(""),t}function rt(e){return e.trim().length===0}function ei(e,t){if(t===void 0)return e.match(/^[ \t]*/)?.[0]?.length??0;if(t==="	")return e.match(/^\t*/)?.[0].length??0;if(t.match(/^ *$/))return (e.match(/^ */)?.[0].length??0)/t.length;throw new Error(`Invalid indentation: ${t}`)}function og(e,t){return t<0||t>=e.length-1?!1:ei(e[t])<ei(e[t+1])}function gl(e,t){return t<=0||t>e.length-1?!1:ei(e[t-1])>ei(e[t])}var ug=[{open:{chars:"(",reg:/\(/},close:{chars:")",reg:/\)/}},{open:{chars:"[",reg:/\[/},close:{chars:"]",reg:/\]/}},{open:{chars:"{",reg:/\{/},close:{chars:"}",reg:/\}/}},{open:{chars:"<",reg:/<(?=\w)/},close:{chars:"/>",reg:/\/>/}},{open:{chars:"<",reg:/<(?=[/\w])/},close:{chars:">",reg:/>/}},{openOrClose:{chars:'"',reg:/"/}},{openOrClose:{chars:"'",reg:/'/}},{openOrClose:{chars:"`",reg:/`/}}],kw=/^([)\]}>"'`]|(\/>))*$/g;function ml(e){let t=[],r=0;for(;r<e.length;){let n=e.slice(r),i={index:n.length,found:void 0};if(ug.forEach(s=>{Object.entries(s).forEach(([a,o])=>{let c=n.match(o.reg);c&&c.index!==void 0&&c.index<i.index&&(i={index:c.index,found:{pair:s,pos:a,pattern:o}});});}),!i.found)break;switch(i.found.pos){case"openOrClose":{let s=i.found.pattern.chars;t.length>0&&t.includes(s)?t.splice(t.lastIndexOf(s),t.length-t.lastIndexOf(s)):t.push(s);break}case"open":{t.push(i.found.pattern.chars);break}case"close":{let s=i.found.pair;t.length>0&&"open"in s&&t[t.length-1]===s.open.chars?t.pop():t.push(i.found.pattern.chars);break}}r+=i.index+i.found.pattern.chars.length;}return t}function ka(e,t){return Dw.get(e,t)}function Yo(e){let t=new AbortController;for(let r of e){if(r?.aborted)return t.abort(r.reason),r;r?.addEventListener("abort",()=>t.abort(r.reason),{signal:t.signal});}return t.signal}var Fr=class extends Error{constructor(t){super(`${t.status} ${t.statusText}`),this.name="HttpError",this.status=t.status,this.statusText=t.statusText,this.response=t;}};function Qo(e){return e instanceof Error&&e.name==="TimeoutError"||e instanceof Fr&&[408,499].includes(e.status)}function wi(e){return e instanceof Error&&e.name==="AbortError"}function cg(e){let t=e.message||e.toString();return e.cause&&(t+=`
Caused by: `+cg(e.cause)),t}function lg(e){this.message=e;}lg.prototype=new Error,lg.prototype.name="InvalidCharacterError";var Lw=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new lg("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,a="";n=t.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?a+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function l5(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw "Illegal base64url string!"}try{return function(r){return decodeURIComponent(Lw(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return Lw(t)}}function yl(e){this.message=e;}function f5(e,t){if(typeof e!="string")throw new yl("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(l5(e.split(".")[r]))}catch(n){throw new yl("Invalid token specified: "+n.message)}}yl.prototype=new Error,yl.prototype.name="InvalidTokenError";var _l=f5;var Cm=or(Rl()),NI=or(dl()),kI=or(Em());var wm=class extends events.EventEmitter{constructor(r){super();this.filepath=r;this.data={};}async load(){this.data=await Cm.default.readJson(xm,{throws:!1})||{};}async save(){await Cm.default.outputJson(xm,this.data);}watch(){this.watcher=kI.default.watch(this.filepath,{interval:1e3});let r=async()=>{let n=this.data;await this.load(),(0, NI.default)(n,this.data)||super.emit("updated",this.data);};this.watcher.on("add",r),this.watcher.on("change",r);}},xm=I___default.default.join($P__default.default.homedir(),".tabby-client","agent","data.json"),Vs=new wm(xm);var _f=or(j2()),eP=or(Y2());var k0=class{constructor(){this.streamOptions={filename:I___default.default.join($P__default.default.homedir(),".tabby-client","agent","logs","%DATE%"),frequency:"daily",size:"10M",max_logs:"30d",extension:".log",create_symlink:!0};}write(t){this.stream||(this.stream=eP.getStream(this.streamOptions)),this.stream.write(t);}},Q2=new k0,J2={serializers:{error:_f.default.stdSerializers.err}},Zt=Q2?(0, _f.default)(J2,Q2):(0, _f.default)(J2);Zt.level="silent";var wu=[Zt];Zt.onChild=e=>{wu.push(e);};var D0=class extends Error{constructor(r){super();this.cause=r;this.name="RetryLimitReachedError";}},vf=class e extends events.EventEmitter{constructor(r){super();this.endpoint=r;this.logger=Zt.child({component:"Auth"});this.authApi=Ms({baseUrl:"https://app.tabbyml.com/api"});}static{this.authPageUrl="https://app.tabbyml.com/account/device-token";}static{this.tokenStrategy={polling:{interval:5e3,timeout:5*60*1e3},refresh:{interval:15*60*1e3,beforeExpire:30*60*1e3,whenLoaded:{maxTry:5,retryDelay:1e3},whenScheduled:{maxTry:60,retryDelay:30*1e3}}};}async init(r){r?.dataStore?this.dataStore=r.dataStore:(this.dataStore=Vs,Vs&&(Vs.on("updated",async()=>{await this.load(),super.emit("updated",this.jwt);}),Vs.watch())),this.scheduleRefreshToken(),await this.load();}get token(){return this.jwt?.token}get user(){return this.jwt?.payload.email}async load(){if(this.dataStore)try{await this.dataStore.load();let r=this.dataStore.data.auth?.[this.endpoint]?.jwt;if(typeof r=="string"&&this.jwt?.token!==r){this.logger.debug({storedJwt:r},"Load jwt from data store.");let n={token:r,payload:_l(r)};n.payload.exp*1e3-Date.now()<e.tokenStrategy.refresh.beforeExpire?(this.jwt=await this.refreshToken(n,e.tokenStrategy.refresh.whenLoaded),await this.save()):this.jwt=n;}}catch(r){this.logger.debug({error:r},"Error when loading auth");}}async save(){if(this.dataStore)try{if(this.jwt){if(this.dataStore.data.auth?.[this.endpoint]?.jwt===this.jwt.token)return;this.dataStore.data.auth={...this.dataStore.data.auth,[this.endpoint]:{jwt:this.jwt.token}};}else {if(typeof this.dataStore.data.auth?.[this.endpoint]>"u")return;delete this.dataStore.data.auth[this.endpoint];}await this.dataStore.save(),this.logger.debug("Save changes to data store.");}catch(r){this.logger.error({error:r},"Error when saving auth");}}async reset(){this.jwt&&(this.jwt=void 0,await this.save());}async requestAuthUrl(r){try{if(await this.reset(),r?.signal.aborted)throw r.signal.reason;this.logger.debug("Start to request device token");let n=await this.authApi.POST("/device-token",{body:{auth_url:this.endpoint},signal:r?.signal});if(n.error||!n.response.ok)throw new Fr(n.response);let i=n.data;this.logger.debug({deviceToken:i},"Request device token response");let s=new URL(e.authPageUrl);return s.searchParams.append("code",i.data.code),{authUrl:s.toString(),code:i.data.code}}catch(n){throw this.logger.error({error:n},"Error when requesting token"),n}}async pollingToken(r,n){return new Promise((i,s)=>{let a=Yo([AbortSignal.timeout(e.tokenStrategy.polling.timeout),n?.signal]),o=setInterval(async()=>{try{let c=await this.authApi.POST("/device-token/accept",{params:{query:{code:r}},signal:a});if(c.error||!c.response.ok)throw new Fr(c.response);let l=c.data;this.logger.debug({result:l},"Poll jwt response"),this.jwt={token:l.data.jwt,payload:_l(l.data.jwt)},super.emit("updated",this.jwt),await this.save(),clearInterval(o),i(!0);}catch(c){c instanceof Fr&&[400,401,403,405].includes(c.status)?this.logger.debug({error:c},"Expected error when polling jwt"):this.logger.error({error:c},"Error when polling jwt");}},e.tokenStrategy.polling.interval);a.aborted?(clearInterval(o),s(a.reason)):a.addEventListener("abort",()=>{clearInterval(o),s(a.reason);});})}async refreshToken(r,n={maxTry:1,retryDelay:1e3},i=0){try{this.logger.debug({retry:i},"Start to refresh token");let s=await this.authApi.POST("/device-token/refresh",{headers:{Authorization:`Bearer ${r.token}`}});if(s.error||!s.response.ok)throw new Fr(s.response);let a=s.data;return this.logger.debug({refreshedJwt:a},"Refresh token response"),{token:a.data.jwt,payload:_l(a.data.jwt)}}catch(s){if(s instanceof Fr&&[400,401,403,405].includes(s.status))this.logger.debug({error:s},"Error when refreshing jwt");else if(this.logger.error({error:s},"Unknown error when refreshing jwt"),i<n.maxTry)return this.logger.debug(`Retry refreshing jwt after ${n.retryDelay}ms`),await new Promise(a=>setTimeout(a,n.retryDelay)),this.refreshToken(r,n,i+1);throw new D0(s)}}scheduleRefreshToken(){setInterval(async()=>{if(this.jwt)if(this.jwt.payload.exp*1e3-Date.now()<e.tokenStrategy.refresh.beforeExpire)try{this.jwt=await this.refreshToken(this.jwt,e.tokenStrategy.refresh.whenScheduled),super.emit("updated",this.jwt),await this.save();}catch(r){this.logger.error({error:r},"Error when refreshing jwt");}else this.logger.debug("Check token, still valid");},e.tokenStrategy.refresh.interval);}};var L0={server:{endpoint:"http://localhost:8080",token:"",requestHeaders:{},requestTimeout:12e4},completion:{prompt:{experimentalStripAutoClosingCharacters:!1,maxPrefixLines:20,maxSuffixLines:20,clipboard:{minChars:3,maxChars:2e3}},debounce:{mode:"adaptive",interval:250}},postprocess:{limitScope:{experimentalSyntax:!1,indentation:{experimentalKeepBlockScopeWhenCompletingLine:!1}},calculateReplaceRange:{experimentalSyntax:!1}},logs:{level:"silent"},tls:{caCerts:"system"},anonymousUsageTracking:{disable:!1}};var O0=or(Rl()),uP=or(aP()),cP=or(Em()),lP=or(dl());var oP=`## Tabby agent configuration file

## Online documentation: https://tabby.tabbyml.com/docs/extensions/configurations
## You can uncomment and edit the values below to change the default settings.
## Configurations in this file have lower priority than the IDE settings.

## Server
## You can set the server endpoint here and an optional authentication token if required.
# [server]
# endpoint = "http://localhost:8080" # http or https URL
# token = "your-token-here" # if token is set, request header Authorization = "Bearer $token" will be added automatically

## You can add custom request headers.
# [server.requestHeaders]
# Header1 = "Value1" # list your custom headers here
# Header2 = "Value2" # values can be strings, numbers or booleans

## Logs
## You can set the log level here. The log file is located at ~/.tabby-client/agent/logs/.
# [logs]
# level = "silent" # "silent" or "error" or "debug"

## Anonymous usage tracking
## Tabby collects anonymous usage data and sends it to the Tabby team to help improve our products.
## Your code, generated completions, or any sensitive information is never tracked or sent.
## For more details on data collection, see https://tabby.tabbyml.com/docs/extensions/configurations#usage-collection
## Your contribution is greatly appreciated. However, if you prefer not to participate, you can disable anonymous usage tracking here.
# [anonymousUsageTracking]
# disable = false # set to true to disable

`,Uz={server:"object","server.endpoint":"string","server.token":"string","server.requestHeaders":"object","server.requestTimeout":"number",completion:"object","completion.prompt":"object","completion.prompt.experimentalStripAutoClosingCharacters":"boolean","completion.prompt.maxPrefixLines":"number","completion.prompt.maxSuffixLines":"number","completion.prompt.clipboard":"object","completion.prompt.clipboard.minChars":"number","completion.prompt.clipboard.maxChars":"number","completion.debounce":"object","completion.debounce.mode":"string","completion.debounce.interval":"number",postprocess:"object","postprocess.limitScopeByIndentation":"object","postprocess.limitScopeByIndentation.experimentalKeepBlockScopeWhenCompletingLine":"boolean",logs:"object","logs.level":"string",tls:"object","tls.caCerts":"string",anonymousUsageTracking:"object","anonymousUsageTracking.disable":"boolean"};function $z(e){for(let[t,r]of Object.entries(Uz))typeof hl(e,t)!==r&&pl(e,t);return e}var F0=class extends events.EventEmitter{constructor(r){super();this.filepath=r;this.data={};this.logger=Zt.child({component:"ConfigFile"});}get config(){return this.data}async load(){try{let r=await O0.default.readFile(this.filepath,"utf8"),n=uP.default.parse(r);if(Object.keys(n).length===0&&r.trim()!==oP.trim()){await this.createTemplate();return}this.data=$z(n);}catch(r){r instanceof Error&&"code"in r&&r.code==="ENOENT"?await this.createTemplate():this.logger.error({error:r},"Failed to load config file");}}watch(){this.watcher=cP.default.watch(this.filepath,{interval:1e3});let r=async()=>{let n=this.data;await this.load(),(0, lP.default)(n,this.data)||super.emit("updated",this.data);};this.watcher.on("add",r),this.watcher.on("change",r);}async createTemplate(){try{await O0.default.outputFile(this.filepath,oP);}catch(r){this.logger.error({error:r},"Failed to create config template file");}}},jz=I___default.default.join($P__default.default.homedir(),".tabby-client","agent","config.toml"),Ga=new F0(jz);var xu=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,dP=new Set,B0=typeof process=="object"&&process?process:{},hP=(e,t,r,n)=>{typeof B0.emitWarning=="function"?B0.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`);},Sf=globalThis.AbortController,fP=globalThis.AbortSignal;if(typeof Sf>"u"){fP=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i);}},Sf=class{constructor(){t();}signal=new fP;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n);}}};let e=B0.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,hP("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t));};}var Vz=e=>!dP.has(e),rs=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),pP=e=>rs(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Xa:null:null,Xa=class extends Array{constructor(t){super(t),this.fill(0);}},M0=class e{heap;length;static#u=!1;static create(t){let r=pP(t);if(!r)return [];e.#u=!0;let n=new e(t,r);return e.#u=!1,n}constructor(t,r){if(!e.#u)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0;}push(t){this.heap[this.length++]=t;}pop(){return this.heap[--this.length]}},bf=class e{#u;#f;#_;#p;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#g;#i;#r;#e;#c;#d;#o;#s;#m;#a;#E;#C;#y;#v;#x;#l;static unsafeExposeInternals(t){return {starts:t.#C,ttls:t.#y,sizes:t.#E,keyMap:t.#i,keyList:t.#r,valList:t.#e,next:t.#c,prev:t.#d,get head(){return t.#o},get tail(){return t.#s},free:t.#m,isBackgroundFetch:r=>t.#t(r),backgroundFetch:(r,n,i,s)=>t.#k(r,n,i,s),moveToTail:r=>t.#I(r),indexes:r=>t.#S(r),rindexes:r=>t.#b(r),isStale:r=>t.#h(r)}}get max(){return this.#u}get maxSize(){return this.#f}get calculatedSize(){return this.#g}get size(){return this.#n}get fetchMethod(){return this.#R}get dispose(){return this.#_}get disposeAfter(){return this.#p}constructor(t){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:h,maxSize:p=0,maxEntrySize:m=0,sizeCalculation:v,fetchMethod:E,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:N,ignoreFetchAbort:O}=t;if(r!==0&&!rs(r))throw new TypeError("max option must be a nonnegative integer");let j=r?pP(r):Array;if(!j)throw new Error("invalid max value: "+r);if(this.#u=r,this.#f=p,this.maxEntrySize=m||this.#f,this.sizeCalculation=v,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=E,this.#x=!!E,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#c=new j(r),this.#d=new j(r),this.#o=0,this.#s=0,this.#m=M0.create(r),this.#n=0,this.#g=0,typeof l=="function"&&(this.#_=l),typeof u=="function"?(this.#p=u,this.#a=[]):(this.#p=void 0,this.#a=void 0),this.#v=!!this.#_,this.#l=!!this.#p,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!x,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!O,this.maxEntrySize!==0){if(this.#f!==0&&!rs(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!rs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M();}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=rs(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!rs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#D();}if(this.#u===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#f){let J="LRU_CACHE_UNBOUNDED";Vz(J)&&(dP.add(J),hP("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",J,e));}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#D(){let t=new Xa(this.#u),r=new Xa(this.#u);this.#y=t,this.#C=r,this.#L=(s,a,o=xu.now())=>{if(r[s]=a!==0?o:0,t[s]=a,a!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#h(s)&&this.delete(this.#r[s]);},a+1);c.unref&&c.unref();}},this.#T=s=>{r[s]=t[s]!==0?xu.now():0;},this.#w=(s,a)=>{if(t[a]){let o=t[a],c=r[a];s.ttl=o,s.start=c,s.now=n||i();let l=s.now-c;s.remainingTTL=o-l;}};let n=0,i=()=>{let s=xu.now();if(this.ttlResolution>0){n=s;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref();}return s};this.getRemainingTTL=s=>{let a=this.#i.get(s);if(a===void 0)return 0;let o=t[a],c=r[a];if(o===0||c===0)return 1/0;let l=(n||i())-c;return o-l},this.#h=s=>t[s]!==0&&r[s]!==0&&(n||i())-r[s]>t[s];}#T=()=>{};#w=()=>{};#L=()=>{};#h=()=>!1;#M(){let t=new Xa(this.#u);this.#g=0,this.#E=t,this.#A=r=>{this.#g-=t[r],t[r]=0;},this.#O=(r,n,i,s)=>{if(this.#t(n))return 0;if(!rs(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!rs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(t[r]=n,this.#f){let s=this.#f-t[r];for(;this.#g>s;)this.#N(!0);}this.#g+=t[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#g);};}#A=t=>{};#P=(t,r,n)=>{};#O=(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#s;!(!this.#F(r)||((t||!this.#h(r))&&(yield r),r===this.#o));)r=this.#d[r];}*#b({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#F(r)||((t||!this.#h(r))&&(yield r),r===this.#s));)r=this.#c[r];}#F(t){return t!==void 0&&this.#i.get(this.#r[t])===t}*entries(){for(let t of this.#S())this.#e[t]!==void 0&&this.#r[t]!==void 0&&!this.#t(this.#e[t])&&(yield [this.#r[t],this.#e[t]]);}*rentries(){for(let t of this.#b())this.#e[t]!==void 0&&this.#r[t]!==void 0&&!this.#t(this.#e[t])&&(yield [this.#r[t],this.#e[t]]);}*keys(){for(let t of this.#S()){let r=this.#r[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r);}}*rkeys(){for(let t of this.#b()){let r=this.#r[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r);}}*values(){for(let t of this.#S())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t]);}*rvalues(){for(let t of this.#b())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t]);}[Symbol.iterator](){return this.entries()}find(t,r={}){for(let n of this.#S()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(t,r=this){for(let n of this.#S()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#r[n],this);}}rforEach(t,r=this){for(let n of this.#b()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#r[n],this);}}purgeStale(){let t=!1;for(let r of this.#b({allowStale:!0}))this.#h(r)&&(this.delete(this.#r[r]),t=!0);return t}dump(){let t=[];for(let r of this.#S({allowStale:!0})){let n=this.#r[r],i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let a={value:s};if(this.#y&&this.#C){a.ttl=this.#y[r];let o=xu.now()-this.#C[r];a.start=Math.floor(Date.now()-o);}this.#E&&(a.size=this.#E[r]),t.unshift([n,a]);}return t}load(t){this.clear();for(let[r,n]of t){if(n.start){let i=Date.now()-n.start;n.start=xu.now()-i;}this.set(r,n.value,n);}}set(t,r,n={}){if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#O(t,r,n.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(t),this;let f=this.#n===0?void 0:this.#i.get(t);if(f===void 0)f=this.#n===0?this.#s:this.#m.length!==0?this.#m.pop():this.#n===this.#u?this.#N(!1):this.#n,this.#r[f]=t,this.#e[f]=r,this.#i.set(t,f),this.#c[this.#s]=f,this.#d[f]=this.#s,this.#s=f,this.#n++,this.#P(f,u,c),c&&(c.set="add"),l=!1;else {this.#I(f);let h=this.#e[f];if(r!==h){if(this.#x&&this.#t(h)?h.__abortController.abort(new Error("replaced")):a||(this.#v&&this.#_?.(h,t,"set"),this.#l&&this.#a?.push([h,t,"set"])),this.#A(f),this.#P(f,u,c),this.#e[f]=r,c){c.set="replace";let p=h&&this.#t(h)?h.__staleWhileFetching:h;p!==void 0&&(c.oldValue=p);}}else c&&(c.set="update");}if(i!==0&&!this.#y&&this.#D(),this.#y&&(l||this.#L(f,i,s),c&&this.#w(c,f)),!a&&this.#l&&this.#a){let h=this.#a,p;for(;p=h?.shift();)this.#p?.(...p);}return this}pop(){try{for(;this.#n;){let t=this.#e[this.#o];if(this.#N(!0),this.#t(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#l&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#p?.(...r);}}}#N(t){let r=this.#o,n=this.#r[r],i=this.#e[r];return this.#x&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#l)&&(this.#v&&this.#_?.(i,n,"evict"),this.#l&&this.#a?.push([i,n,"evict"])),this.#A(r),t&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#m.push(r)),this.#n===1?(this.#o=this.#s=0,this.#m.length=0):this.#o=this.#c[r],this.#i.delete(n),this.#n--,r}has(t,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#i.get(t);if(s!==void 0){let a=this.#e[s];if(this.#t(a)&&a.__staleWhileFetching===void 0)return !1;if(this.#h(s))i&&(i.has="stale",this.#w(i,s));else return n&&this.#T(s),i&&(i.has="hit",this.#w(i,s)),!0}else i&&(i.has="miss");return !1}peek(t,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(t);if(i!==void 0&&(n||!this.#h(i))){let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}}#k(t,r,n,i){let s=r===void 0?void 0:this.#e[r];if(this.#t(s))return s;let a=new Sf,{signal:o}=n;o?.addEventListener("abort",()=>a.abort(o.reason),{signal:a.signal});let c={signal:a.signal,options:n,context:i},l=(v,E=!1)=>{let{aborted:x}=a.signal,y=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(x&&!E?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,y&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),x&&!y&&!E)return f(a.signal.reason);let S=p;return this.#e[r]===p&&(v===void 0?S.__staleWhileFetching?this.#e[r]=S.__staleWhileFetching:this.delete(t):(n.status&&(n.status.fetchUpdated=!0),this.set(t,v,c.options))),v},u=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),f(v)),f=v=>{let{aborted:E}=a.signal,x=E&&n.allowStaleOnFetchAbort,y=x||n.allowStaleOnFetchRejection,S=y||n.noDeleteOnFetchRejection,N=p;if(this.#e[r]===p&&(!S||N.__staleWhileFetching===void 0?this.delete(t):x||(this.#e[r]=N.__staleWhileFetching)),y)return n.status&&N.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),N.__staleWhileFetching;if(N.__returned===N)throw v},h=(v,E)=>{let x=this.#R?.(t,s,c);x&&x instanceof Promise&&x.then(y=>v(y),E),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(),n.allowStaleOnFetchAbort&&(v=y=>l(y,!0)));});};n.status&&(n.status.fetchDispatched=!0);let p=new Promise(h).then(l,u),m=Object.assign(p,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(t,m,{...c.options,status:void 0}),r=this.#i.get(t)):this.#e[r]=m,m}#t(t){if(!this.#x)return !1;let r=t;return !!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Sf}async fetch(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:v,forceRefresh:E=!1,status:x,signal:y}=r;if(!this.#x)return x&&(x.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:x});let S={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:o,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:m,ignoreFetchAbort:p,status:x,signal:y},N=this.#i.get(t);if(N===void 0){x&&(x.fetch="miss");let O=this.#k(t,N,S,v);return O.__returned=O}else {let O=this.#e[N];if(this.#t(O)){let ee=n&&O.__staleWhileFetching!==void 0;return x&&(x.fetch="inflight",ee&&(x.returnedStale=!0)),ee?O.__staleWhileFetching:O.__returned=O}let j=this.#h(N);if(!E&&!j)return x&&(x.fetch="hit"),this.#I(N),i&&this.#T(N),x&&this.#w(x,N),O;let J=this.#k(t,N,S,v),G=J.__staleWhileFetching!==void 0&&n;return x&&(x.fetch=j?"stale":"refresh",G&&j&&(x.returnedStale=!0)),G?J.__staleWhileFetching:J.__returned=J}}get(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=r,o=this.#i.get(t);if(o!==void 0){let c=this.#e[o],l=this.#t(c);return a&&this.#w(a,o),this.#h(o)?(a&&(a.get="stale"),l?(a&&n&&c.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?c.__staleWhileFetching:void 0):(s||this.delete(t),a&&n&&(a.returnedStale=!0),n?c:void 0)):(a&&(a.get="hit"),l?c.__staleWhileFetching:(this.#I(o),i&&this.#T(o),c))}else a&&(a.get="miss");}#B(t,r){this.#d[r]=t,this.#c[t]=r;}#I(t){t!==this.#s&&(t===this.#o?this.#o=this.#c[t]:this.#B(this.#d[t],this.#c[t]),this.#B(this.#s,t),this.#s=t);}delete(t){let r=!1;if(this.#n!==0){let n=this.#i.get(t);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else {this.#A(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#v||this.#l)&&(this.#v&&this.#_?.(i,t,"delete"),this.#l&&this.#a?.push([i,t,"delete"])),this.#i.delete(t),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#s?this.#s=this.#d[n]:n===this.#o?this.#o=this.#c[n]:(this.#c[this.#d[n]]=this.#c[n],this.#d[this.#c[n]]=this.#d[n]),this.#n--,this.#m.push(n);}}if(this.#l&&this.#a?.length){let n=this.#a,i;for(;i=n?.shift();)this.#p?.(...i);}return r}clear(){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else {let n=this.#r[t];this.#v&&this.#_?.(r,n,"delete"),this.#l&&this.#a?.push([r,n,"delete"]);}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#y&&this.#C&&(this.#y.fill(0),this.#C.fill(0)),this.#E&&this.#E.fill(0),this.#o=0,this.#s=0,this.#m.length=0,this.#g=0,this.#n=0,this.#l&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#p?.(...r);}}};var bP=or(SP());function Kz(e){return e.trimEnd().match(kw)}var Ys=class{constructor(t){this.filepath=t.filepath,this.language=t.language,this.text=t.text,this.position=t.position,this.indentation=t.indentation,this.prefix=t.text.slice(0,t.position),this.suffix=t.text.slice(t.position),this.prefixLines=Ot(this.prefix),this.suffixLines=Ot(this.suffix),this.currentLinePrefix=this.prefixLines[this.prefixLines.length-1]??"",this.currentLineSuffix=this.suffixLines[0]??"",this.clipboard=t.clipboard?.trim()??"";let r=Kz(this.suffixLines[0]??"");this.mode=r?"default":"fill-in-line",this.hash=(0, bP.default)({filepath:this.filepath,language:this.language,text:this.text,position:this.position,clipboard:this.clipboard});}};var Ef=class{constructor(){this.logger=Zt.child({component:"CompletionCache"});this.options={maxCount:1e4,prebuildCache:{enabled:!0,perCharacter:{lines:1,max:50},perLine:{max:10},autoClosingPairCheck:{max:3}}};this.cache=new bf({max:this.options.maxCount});}has(t){return this.cache.has(t.hash)}buildCache(t,r){this.logger.debug({key:t,value:r},"Starting to build cache");let n=this.createCacheEntries(t,r);n.forEach(i=>{this.cache.set(i.key.hash,{value:i.value,rebuildFlag:i.rebuildFlag});}),this.logger.debug({newEntries:n.length,cacheSize:this.cache.size},"Cache updated");}get(t){let r=this.cache.get(t.hash);return r?.rebuildFlag&&this.buildCache(t,r?.value),r?.value}createCacheEntries(t,r){let n=[{key:t,value:r,rebuildFlag:!1}];if(this.options.prebuildCache.enabled)for(let s of r.choices){let a=s.text.slice(t.position-s.replaceRange.start),o=this.getPerLinePositions(a);this.logger.trace({completionText:a,perLinePositions:o},"Calculate per-line cache positions");for(let l of o){let u=a.slice(0,l),f=this.generateAutoClosedPrefixes(u);for(let h of [u,...f]){let p={key:new Ys({...t,text:t.text.slice(0,t.position)+h+t.text.slice(t.position),position:t.position+l}),value:{...r,choices:[{index:s.index,text:a.slice(l),replaceRange:{start:t.position+l,end:t.position+l}}]},rebuildFlag:!0};this.logger.trace({prefix:h,entry:p},"Build per-line cache entry"),n.push(p);}}let c=this.getPerCharacterPositions(a);this.logger.trace({completionText:a,perCharacterPositions:c},"Calculate per-character cache positions");for(let l of c){let u=l;for(;u>0&&a[u-1]!==`
`;)u--;let f=a.slice(0,l),h=this.generateAutoClosedPrefixes(f);for(let p of [f,...h]){let m={key:new Ys({...t,text:t.text.slice(0,t.position)+p+t.text.slice(t.position),position:t.position+l}),value:{...r,choices:[{index:s.index,text:a.slice(u),replaceRange:{start:t.position+u,end:t.position+l}}]},rebuildFlag:!1};this.logger.trace({prefix:p,entry:m},"Build per-character cache entry"),n.push(m);}}}return n.reduce((s,a)=>{let o=s.find(c=>c.key.hash===a.key.hash);return o?(o.value.choices.push(...a.value.choices),o.rebuildFlag=o.rebuildFlag||a.rebuildFlag):s.push(a),s},[])}getPerLinePositions(t){let r=[],n=this.options.prebuildCache,i=Ot(t),s=0,a=0;for(;s<i.length-1&&s<n.perLine.max;){a+=i[s]?.length??0,r.push(a-1),r.push(a);let o=a;for(;o<t.length&&t[o].match(/\s/);)o++;r.push(o),s++;}return r}getPerCharacterPositions(t){let r=[],n=this.options.prebuildCache,i=Ot(t).slice(0,n.perCharacter.lines).join(""),s=0;for(;s<i.length&&s<n.perCharacter.max;)r.push(s),s++;return r}generateAutoClosedPrefixes(t){let r=[],n=ml(t),i=0,s="";for(;i<n.length&&i<this.options.prebuildCache.autoClosingPairCheck.max;)ug.filter(a=>{let o;return "open"in a?o=a.open:o=a.openOrClose,o.chars===n[n.length-1-i]}).forEach(a=>{let o;"close"in a?o=a.close:o=a.openOrClose,s+=o.chars,r.push(t+s);}),i++;return r}};function U0(e,t,r){return Math.max(e,Math.min(t,r))}var Cf=class{constructor(){this.lastCalledTimeStamp=0;this.baseInterval=200;this.calledIntervalHistory=[];this.options={baseIntervalSlideWindowAvg:{minSize:20,maxSize:100,min:100,max:400},adaptiveRate:{min:1.5,max:3},contextScoreWeights:{triggerCharacter:.5,noSuffixInCurrentLine:.4,noSuffix:.1},requestDelay:{min:100,max:1e3}};}async debounce(t,r){let{request:n,config:i,responseTime:s}=t;if(n.manually)return this.sleep(0,r);if(i.mode==="fixed")return this.sleep(i.interval,r);let a=Date.now();this.updateBaseInterval(a-this.lastCalledTimeStamp),this.lastCalledTimeStamp=a;let o=this.calcContextScore(n),l=(this.options.adaptiveRate.max-(this.options.adaptiveRate.max-this.options.adaptiveRate.min)*o)*this.baseInterval,u=U0(this.options.requestDelay.min,this.options.requestDelay.max,l-s);return this.sleep(u,r)}async sleep(t,r){return new Promise((n,i)=>{let s=setTimeout(n,Math.min(t,2147483647));r?.signal&&(r.signal.aborted?(clearTimeout(s),i(r.signal.reason)):r.signal.addEventListener("abort",()=>{clearTimeout(s),i(r.signal.reason);}));})}updateBaseInterval(t){if(!(t>this.options.baseIntervalSlideWindowAvg.max)&&(this.calledIntervalHistory.push(t),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.maxSize&&this.calledIntervalHistory.shift(),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.minSize)){let r=this.calledIntervalHistory.reduce((n,i)=>n+i,0)/this.calledIntervalHistory.length;this.baseInterval=U0(this.options.baseIntervalSlideWindowAvg.min,this.options.baseIntervalSlideWindowAvg.max,r);}}calcContextScore(t){let r=0,n=this.options.contextScoreWeights,i=t.text[t.position-1]??"";r+=i.match(/^\W*$/)?n.triggerCharacter:0;let s=t.text.slice(t.position)??"",a=Ot(s)[0]??"";return r+=a.match(/^\W*$/)?n.noSuffixInCurrentLine:0,r+=s.match(/^\W*$/)?n.noSuffix:0,r=U0(0,1,r),r}};Array.prototype.distinct||(Array.prototype.distinct=function(e){return [...new Map(this.map(t=>[e?.(t)??t,t])).values()]});Array.prototype.mapAsync||(Array.prototype.mapAsync=async function(e,t){return await Promise.all(this.map((r,n)=>e.call(t,r,n,this)))});var Nt=Zt.child({component:"Postprocess"});function Yr(e,t){return $0(async r=>{let n=t.position-r.replaceRange.start,i=r.text.slice(n),s=await e(i,t);return r.text=r.text.slice(0,n)+(s??""),r},t)}function $0(e,t){return async r=>(r.choices=(await r.choices.mapAsync(async n=>await e(n,t))).filter(n=>!!n&&!!n.text).distinct(n=>n.text),r)}function zz(e){return /\n(\s*)\n/g}function EP(){return (e,t)=>{let r=e.split(zz()),n=0,i=2,s=r.length-2;for(;s>=1;){if(rt(r[s])){s--;continue}let a=s-1;for(;a>=0&&rt(r[a]);)a--;if(a<0)break;let o=r[s].trim(),c=r[a].trim(),l=Math.max(.1*o.length,.1*c.length);if(ka(o,c)<=l)n++,s--;else break}return n>=i?(Nt.debug({inputBlocks:r,repetitionCount:n},"Remove repetitive blocks."),r.slice(0,s+1).join("").trimEnd()):e}}function CP(){return e=>{let t=Ot(e),r=0,n=5,i=t.length-2;for(;i>=1;){if(rt(t[i])){i--;continue}let s=i-1;for(;s>=0&&rt(t[s]);)s--;if(s<0)break;let a=t[i].trim(),o=t[s].trim(),c=Math.max(.1*a.length,.1*o.length);if(ka(a,o)<=c)r++,i=s;else break}return r>=n?(Nt.debug({inputLines:t,repetitionCount:r},"Remove repetitive lines."),t.slice(0,i+1).join("").trimEnd()):e}}var Gz=[/(.{3,}?)\1{5,}$/g,/(.{10,}?)\1{3,}$/g];function wP(){return e=>{let t=Ot(e),r=t.length-1;for(;r>=0&&rt(t[r]);)r--;if(r<0)return e;for(let n of Gz){let i=t[r].match(n);if(i)return Nt.debug({inputLines:t,lineNumber:r,match:i},"Remove line ends with repetition."),r<1?null:t.slice(0,r).join("").trimEnd()}return e}}function xP(){return (e,t)=>{let{suffixLines:r,currentLinePrefix:n}=t,i=Ot(e);if(i.length<2)return e;let s=i.map((l,u)=>u===0?n+l:l);if(!gl(s,i.length-1))return e;let a=i[i.length-1],o=1;for(;o<r.length&&rt(r[o]);)o++;if(o>=r.length)return e;let c=r[o];return a.startsWith(c.trimEnd())||c.startsWith(a.trimEnd())?(Nt.debug({inputLines:i,suffixLines:r},"Removing duplicated block closing line"),i.slice(0,i.length-1).join("").trimEnd()):e}}function Xz(e,t,r,n){let i={indentLevelLimit:0,allowClosingLine:!0},{prefixLines:s,suffixLines:a,currentLinePrefix:o}=r;if(e.length==0||s.length==0)return i;let c=rt(o),l=s.length-1;for(;l>=0&&rt(s[l]);)l--;if(l<0)return i;let u=s[l],f=ei(u),h=e[0],p=rt(h),m=0;for(;m<e.length&&rt(e[m]);)m++;if(m>=e.length)return i;let v=e[m],E;p?E=ei(v):E=ei(o+v),!p&&!c?n.experimentalKeepBlockScopeWhenCompletingLine?i.indentLevelLimit=f:(i.indentLevelLimit=f+1,i.allowClosingLine&&=og(t,0)):E>f?i.indentLevelLimit=f+1:(i.indentLevelLimit=f);let x=1;for(;x<a.length&&rt(a[x]);)x++;if(x<a.length){let y=a[x];i.allowClosingLine&&=ei(y)<i.indentLevelLimit;}return i}function TP(e){return (t,r)=>{let{prefixLines:n,suffixLines:i,currentLinePrefix:s}=r,a=Ot(t),o=a.map((u,f)=>f===0?s+u:u),c=Xz(a,o,r,e),l=1;for(;l<a.length;){let u=a[l],f=a[l-1];if(rt(u)){l++;continue}if(ei(u)<c.indentLevelLimit){if(gl(o,l)&&og(o,l)){l++;continue}c.allowClosingLine&&(r.language!=="python"||!rt(f))&&l++;break}l++;}return l<a.length?(Nt.debug({inputLines:a,prefixLines:n,suffixLines:i,scopeLineCount:l},"Remove content out of indent scope"),a.slice(0,l).join("").trimEnd()):t}}var wf=or(AP());var Ya={javascript:"tsx",typescript:"tsx",javascriptreact:"tsx",typescriptreact:"tsx",python:"python",go:"go",rust:"rust",ruby:"ruby"},RP=!1;async function Zz(e){RP||(await wf.default.init({locateFile(n,i){let s=[i,"wasm",n];return I___default.default.join(...s)}}),RP=!0);let t=new wf.default,r=[__dirname,"wasm",`tree-sitter-${e}.wasm`];return t.setLanguage(await wf.default.Language.load(I___default.default.join(...r))),t}var PP=new Map;async function xf(e){let t=PP.get(e);return t||(t=await Zz(e),PP.set(e,t)),t}var NP={tsx:[["jsx_element","jsx_self_closing_element","for_statement","for_in_statement","if_statement","while_statement","do_statement","switch_statement","try_statement","with_statement","labeled_statement","class_declaration","abstract_class_declaration","interface_declaration","enum_declaration","type_alias_declaration","function_declaration","generator_function_declaration","ambient_declaration","method_definition","import_statement","export_statement","module"],["expression_statement","lexical_declaration"]],python:[["for_statement","if_statement","while_statement","match_statement","try_statement","with_statement","function_definition","decorated_definition","class_definition","import_statement","import_from_statement"]],go:[["for_statement","if_statement","expression_switch_statement","type_switch_statement","select_statement","labeled_statement","function_declaration","method_declaration","type_declaration","import_declaration","package_clause"]],rust:[["for_expression","if_expression","while_expression","loop_expression","match_expression","try_expression","function_item","type_item","enum_item","struct_item","union_item","trait_item","impl_item","use_declaration"]],ruby:[["for","if","unless","while","until","case","class","singleton_class","method","singleton_method","module"]]};var Yz=Object.keys(Ya);function Qz(e,t){let r=t-1;for(;r>=0&&e[r]?.match(/\s/);)r--;if(r<0)return 0;let n=e.lastIndexOf(`
`,r);if(n<0)return 0;let s=e.slice(n+1,t).search(/\S/);return n+1+s}function Jz(e,t){let r=t;for(;r<e.length&&e[r]?.match(/\s/);)r++;if(r>=e.length)return e.length;let n=e.indexOf(`
`,r);return n<0?e.length:n}function eG(e,t){for(let r of t){let n=e;for(;n;){if(r.includes(n.type))return n;n=n.parent;}}return e}function kP(){return async(e,t)=>{let{position:r,text:n,language:i,prefix:s,suffix:a}=t;if(!Yz.includes(i))throw new Error(`Language ${i} is not supported`);let o=Ya[i],c=await xf(o),l=s+e+a,u=c.parse(l),f=Qz(l,r),h=Jz(l,r),p=eG(u.rootNode.namedDescendantForIndex(f,h),NP[o]??[]);if(p.type=="ERROR")throw new Error("Cannot determine syntax scope.");return p.endIndex<r+e.length?(Nt.debug({languageConfig:o,text:n,updatedText:l,position:r,lineBegin:f,lineEnd:h,scope:{type:p.type,start:p.startIndex,end:p.endIndex}},"Remove content out of syntax scope"),e.slice(0,p.endIndex-r)):e}}function DP(e){return async(t,r)=>{if(e.experimentalSyntax)try{return await kP()(t,r)}catch(i){Nt.debug({error:i},"Failed to limit scope by syntax parser");}return TP(e.indentation)(t,r)}}function j0(e){let t={"	":0,"  ":0,"    ":0};for(let r of e)if(r.match(/^\t/))t["	"]++;else {let n=r.match(/^ */)?.[0].length??0;n>0&&(n%4===0&&t["    "]++,n%2===0&&t["  "]++);}return t["	"]>0?"	":t["  "]>t["    "]?"  ":t["    "]>0?"    ":null}function tG(e,t){return t==="	"?e.match(/^\t*/)?.[0].length??0:(e.match(/^ */)?.[0].length??0)/t.length}function LP(){return (e,t)=>{let{prefixLines:r,suffixLines:n,currentLinePrefix:i,indentation:s}=t,a=Ot(e);if(!s)return e;let o=rt(i)?r.slice(0,r.length-1):r;if(r.length>1&&j0(o)!==null)return e;let c=n.slice(1);if(n.length>1&&j0(c)!==null)return e;let l=a.map((h,p)=>p===0?i+h:h),u=j0(l);if(u===null||u===s)return e;let f=l.map((h,p)=>{let m=tG(h,u);if(m===0)return a[p];let v=h.slice(u.length*m);return p===0?rt(i)?s.repeat(m).slice(i.length)+v:a[0]:s.repeat(m)+v});return Nt.debug({prefixLines:r,suffixLines:n,inputLines:a,formatted:f},"Format indentation."),f.join("")}}function V0(){return (e,t)=>{let{currentLinePrefix:r,currentLineSuffix:n}=t,i=e;return !rt(r)&&r.match(/\s$/)&&(i=i.trimStart()),(rt(n)||!rt(n)&&n.match(/^\s/))&&(i=i.trimEnd()),i}}function OP(){return (e,t)=>{let r=Ot(e);if(t.mode==="fill-in-line"&&r.length>1){let n=t.currentLineSuffix.trimEnd(),i=r[0].trimEnd();if(i.endsWith(n)){let s=i.slice(0,-n.length);if(s.length>0)return Nt.debug({inputLines:r,trimmedInputLine:s},"Trim content with multiple lines"),s}return Nt.debug({inputLines:r},"Drop content with multiple lines"),null}return e}}function W0(){return (e,t)=>{let{suffixLines:r}=t,n=Ot(e),i=0;for(;i<n.length&&rt(n[i]);)i++;let s=0;for(;s<r.length&&rt(r[s]);)s++;let a=Math.min(3,n.length-i,r.length-s);if(a<1)return e;let o=n.slice(i,i+a).join("").trim(),c=r.slice(s,s+a).join("").trim(),l=Math.max(1,.05*o.length,.05*c.length),u=ka(o,c);return u<=l?(Nt.debug({inputLines:n,suffixLines:r,inputToCompare:o,suffixToCompare:c,distance:u,threshold:l},"Drop completion due to duplicated."),null):e}}function K0(){return e=>rt(e)?null:e}function FP(e,t){let{currentLineSuffix:r}=t,n=r.trimEnd();if(rt(n))return e;let i=e.text.slice(t.position-e.replaceRange.start),s=ml(i).join("");return rt(s)||(n.startsWith(s)?(e.replaceRange.end=t.position+s.length,Nt.trace({context:t,completion:e.text,range:e.replaceRange,unpaired:s},"Adjust replace range by bracket stack")):s.startsWith(n)&&(e.replaceRange.end=t.position+n.length,Nt.trace({context:t,completion:e.text,range:e.replaceRange,unpaired:s},"Adjust replace range by bracket stack"))),e}var rG=Object.keys(Ya);async function BP(e,t){let{position:r,prefix:n,suffix:i,prefixLines:s,currentLinePrefix:a,currentLineSuffix:o,language:c}=t,l=o.trimEnd();if(rt(l))return e;if(!rG.includes(c))throw new Error(`Language ${c} is not supported`);let u=Ya[c],f=await xf(u),h=e.text.slice(r-e.replaceRange.start),p=Ot(h),m=0,v=f.parse(n+h+i),E=v.rootNode.namedDescendantForIndex(n.length+h.length,n.length+h.length+l.length-m);for(;E.hasError()&&m<l.length;){m++;let x=s.length-1+p.length-1,y=p[p.length-1]?.length??0;p.length==1&&(y+=a.length),v.edit({startIndex:n.length+h.length,oldEndIndex:n.length+h.length+1,newEndIndex:n.length+h.length,startPosition:{row:x,column:y},oldEndPosition:{row:x,column:y+1},newEndPosition:{row:x,column:y}}),v=f.parse(n+h+i.slice(m),v),E=v.rootNode.namedDescendantForIndex(n.length+h.length,n.length+h.length+l.length-m);}if(E.hasError())throw new Error("Syntax error when parsing completion");return e.replaceRange.end=r+m,Nt.trace({context:t,completion:e.text,range:e.replaceRange},"Adjust replace range by syntax"),e}function MP(e){return async(t,r)=>{if(e.experimentalSyntax)try{return await BP(t,r)}catch(i){Nt.debug({error:i},"Failed to calculate replace range by syntax parser");}return FP(t,r)}}async function qP(e,t,r){return Promise.resolve(r).then(Yr(OP(),e)).then(Yr(wP(),e)).then(Yr(W0(),e)).then(Yr(V0(),e)).then(Yr(K0(),e))}async function HP(e,t,r){return Promise.resolve(r).then(Yr(EP(),e)).then(Yr(CP(),e)).then(Yr(DP(t.limitScope),e)).then(Yr(xP(),e)).then(Yr(LP(),e)).then(Yr(W0(),e)).then(Yr(V0(),e)).then(Yr(K0(),e)).then($0(MP(t.calculateReplaceRange),e))}var Au="tabby-agent",Iu="1.4.0-dev";var Tf=class{constructor(){this.anonymousUsageTrackingApi=Ms({baseUrl:"https://app.tabbyml.com/api"});this.logger=Zt.child({component:"AnonymousUsage"});this.systemData={agent:`${Au}, ${Iu}`,browser:void 0,node:`${process.version} ${process.platform} ${$P__default.default.arch()} ${$P__default.default.release()}`};this.sessionProperties={};this.userProperties={};this.userPropertiesUpdated=!1;this.emittedUniqueEvent=[];this.disabled=!1;}async init(t){if(this.dataStore=t?.dataStore||Vs,this.dataStore){try{await this.dataStore.load();}catch(r){this.logger.debug({error:r},"Error when loading anonymousId");}if(typeof this.dataStore.data.anonymousId=="string")this.anonymousId=this.dataStore.data.anonymousId;else {this.anonymousId=Ei(),this.dataStore.data.anonymousId=this.anonymousId;try{await this.dataStore.save();}catch(r){this.logger.debug({error:r},"Error when saving anonymousId");}}}else this.anonymousId=Ei();}setSessionProperties(t,r){Bs(this.sessionProperties,t,r);}setUserProperties(t,r){Bs(this.userProperties,t,r),this.userPropertiesUpdated=!0;}async uniqueEvent(t,r={}){await this.event(t,r,!0);}async event(t,r={},n=!1){if(this.disabled||!this.anonymousId||n&&this.emittedUniqueEvent.includes(t))return;n&&this.emittedUniqueEvent.push(t);let i={...this.systemData,...this.sessionProperties,...r};this.userPropertiesUpdated&&(Bs(i,"$set",this.userProperties),this.userPropertiesUpdated=!1);try{await this.anonymousUsageTrackingApi.POST("/usage",{body:{distinctId:this.anonymousId,event:t,properties:i}});}catch(s){this.logger.error({error:s},"Error when sending anonymous usage data");}}};var Z0=or(KP()),Af=class{constructor(){this.sum=0;this.quantity=0;}add(t){this.sum+=t,this.quantity+=1;}mean(){if(this.quantity!==0)return this.sum/this.quantity}count(){return this.quantity}},If=class{constructor(t){this.values=[];this.maxSize=t;}add(t){this.values.push(t),this.values.length>this.maxSize&&this.values.shift();}getValues(){return this.values}},Rf=class{constructor(){this.config={windowSize:10,checks:{disable:!1,healthy:{windowSize:1,latency:3e3},slowResponseTime:{latency:5e3,count:1},highTimeoutRate:{rate:.5,count:1}}};this.autoCompletionCount=0;this.manualCompletionCount=0;this.cacheHitCount=0;this.cacheMissCount=0;this.eventMap=new Map;this.completionRequestLatencyStats=new Z0.Univariate;this.completionRequestCanceledStats=new Af;this.completionRequestTimeoutCount=0;this.recentCompletionRequestLatencies=new If(this.config.windowSize);}add(t){let{triggerMode:r,cacheHit:n,aborted:i,requestSent:s,requestLatency:a,requestCanceled:o,requestTimeout:c}=t;i||(r==="auto"?this.autoCompletionCount+=1:this.manualCompletionCount+=1,n?this.cacheHitCount+=1:this.cacheMissCount+=1),s&&(o?this.completionRequestCanceledStats.add(a):c?this.completionRequestTimeoutCount+=1:this.completionRequestLatencyStats.add(a),o||this.recentCompletionRequestLatencies.add(a));}addEvent(t){let r=this.eventMap.get(t)||0;this.eventMap.set(t,r+1);}reset(){this.autoCompletionCount=0,this.manualCompletionCount=0,this.cacheHitCount=0,this.cacheMissCount=0,this.eventMap=new Map,this.completionRequestLatencyStats=new Z0.Univariate,this.completionRequestCanceledStats=new Af,this.completionRequestTimeoutCount=0;}resetWindowed(){this.recentCompletionRequestLatencies=new If(this.config.windowSize);}stats(){let t=Object.fromEntries(Array.from(this.eventMap.entries()).map(([r,n])=>["count_"+r,n]));return {completion:{count_auto:this.autoCompletionCount,count_manual:this.manualCompletionCount,cache_hit:this.cacheHitCount,cache_miss:this.cacheMissCount,...t},completion_request:{count:this.completionRequestLatencyStats.count(),latency_avg:this.completionRequestLatencyStats.mean(),latency_p50:this.completionRequestLatencyStats.percentile(50),latency_p95:this.completionRequestLatencyStats.percentile(95),latency_p99:this.completionRequestLatencyStats.percentile(99)},completion_request_canceled:{count:this.completionRequestCanceledStats.count(),latency_avg:this.completionRequestCanceledStats.mean()},completion_request_timeout:{count:this.completionRequestTimeoutCount}}}windowed(){let t=this.recentCompletionRequestLatencies.getValues(),r=t.filter(s=>Number.isNaN(s)),n=t.filter(s=>!Number.isNaN(s)),i=n.reduce((s,a)=>s+a,0)/n.length;return {values:t,stats:{total:t.length,timeouts:r.length,responses:n.length,averageResponseTime:i}}}check(t){if(this.config.checks.disable)return null;let r=this.config.checks,{values:n,stats:{total:i,timeouts:s,responses:a,averageResponseTime:o}}=t;return n.slice(-Math.min(this.config.windowSize,r.healthy.windowSize)).every(c=>c<r.healthy.latency)?"healthy":s/i>r.highTimeoutRate.rate&&s>=r.highTimeoutRate.count?"highTimeoutRate":o>r.slowResponseTime.latency&&a>=r.slowResponseTime.count?"slowResponseTime":null}};var NL=or(Rl()),R_=or(T_()),kL=or(IL());var Sd=Zt.child({component:"CaCert"}),vd=[],A_;function DL(e){A_||(A_=RL__default.default.createSecureContext);let t=e.filter(n=>typeof n=="string"?n.trim().length>0:!0),r=[...vd,...t].distinct();Sd.debug(`Loaded ${r.length-vd.length} extra certs.`),vd=r,RL__default.default.createSecureContext=n=>{let i=A_(n);return vd.forEach(s=>{i.context.addCACert(s);}),i};}async function PL(e){Sd.debug(`Loading extra certs from ${e}.`);let t=(await e.split(I___default.default.delimiter).mapAsync(async r=>{try{return (await NL.default.readFile(r)).toString()}catch{return null}})).join(`
`).split(/(?=-----BEGIN\sCERTIFICATE-----)/g).distinct();DL(t);}async function LL(e){if(e.caCerts!=="bundled")if(e.caCerts==="system")if(process.platform==="win32")Sd.debug("Loading extra certs from win-ca."),R_.default.exe(I___default.default.join("win-ca","roots.exe")),(0, R_.default)({fallback:!0,inject:"+"});else if(process.platform==="darwin"){Sd.debug("Loading extra certs from mac-ca.");let t=kL.get();DL(t);}else await PL(I___default.default.join("/etc/ssl/certs/ca-certificates.crt"));else e.caCerts&&await PL(e.caCerts);}var Ed=class e extends events.EventEmitter{constructor(){super();this.logger=Zt.child({component:"TabbyAgent"});this.anonymousUsageLogger=new Tf;this.config=L0;this.userConfig={};this.clientConfig={};this.status="notInitialized";this.issues=[];this.completionCache=new Ef;this.completionDebounce=new Cf;this.completionProviderStats=new Rf;this.tryingConnectTimer=setInterval(async()=>{this.status==="disconnected"&&(this.logger.debug("Trying to connect..."),await this.healthCheck());},e.tryConnectInterval),this.submitStatsTimer=setInterval(async()=>{await this.submitStats();},e.submitStatsInterval);}static{this.tryConnectInterval=1e3*30;}static{this.submitStatsInterval=1e3*60*60*24;}async applyConfig(){let r=this.config,n=this.status;this.config=ww(L0,this.userConfig,this.clientConfig),wu.forEach(s=>s.level=this.config.logs.level),this.anonymousUsageLogger.disabled=this.config.anonymousUsageTracking.disable,await LL(this.config.tls),rt(this.config.server.token)&&this.config.server.requestHeaders.Authorization===void 0?this.config.server.endpoint!==this.auth?.endpoint&&(this.auth=new vf(this.config.server.endpoint),await this.auth.init({dataStore:this.dataStore}),this.auth.on("updated",()=>{this.setupApi();})):this.auth=void 0,(0, bd.default)(r.server,this.config.server)||(this.serverHealthState=void 0,this.completionProviderStats.resetWindowed(),this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate"),this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0),await this.setupApi(),(0, bd.default)(r.server,this.config.server)||n==="unauthorized"&&this.status==="unauthorized"&&this.emitAuthRequired();let i={event:"configUpdated",config:this.config};this.logger.debug({event:i},"Config updated"),super.emit("configUpdated",i);}async setupApi(){let r=rt(this.config.server.token)?this.auth?.token?`Bearer ${this.auth.token}`:void 0:`Bearer ${this.config.server.token}`;this.api=Ms({baseUrl:this.config.server.endpoint.replace(/\/+$/,""),headers:{Authorization:r,...this.config.server.requestHeaders}}),await this.healthCheck();}changeStatus(r){if(this.status!=r){this.status=r;let n={event:"statusChanged",status:r};this.logger.debug({event:n},"Status changed"),super.emit("statusChanged",n),this.status==="unauthorized"&&this.emitAuthRequired();}}issueFromName(r){switch(r){case"highCompletionTimeoutRate":return {name:"highCompletionTimeoutRate",completionResponseStats:this.completionProviderStats.windowed().stats};case"slowCompletionResponseTime":return {name:"slowCompletionResponseTime",completionResponseStats:this.completionProviderStats.windowed().stats};case"connectionFailed":return {name:"connectionFailed",message:this.connectionErrorMessage}}}pushIssue(r){this.issues.includes(r)||(this.issues.push(r),this.logger.debug({issue:r},"Issues Pushed"),this.emitIssueUpdated());}popIssue(r){let n=this.issues.indexOf(r);n>=0&&(this.issues.splice(n,1),this.logger.debug({issue:r},"Issues Popped"),this.emitIssueUpdated());}emitAuthRequired(){let r={event:"authRequired",server:this.config.server};super.emit("authRequired",r);}emitIssueUpdated(){let r={event:"issuesUpdated",issues:this.issues};super.emit("issuesUpdated",r);}async submitStats(){let r=this.completionProviderStats.stats();r.completion_request.count>0&&(await this.anonymousUsageLogger.event("AgentStats",{stats:r}),this.completionProviderStats.reset(),this.logger.debug({stats:r},"Stats submitted"));}createAbortSignal(r){let n=Math.min(2147483647,r?.timeout||this.config.server.requestTimeout);return Yo([AbortSignal.timeout(n),r?.signal])}async healthCheck(r){let n=Ei(),i="/v1/health",s=this.config.server.endpoint+i,a={signal:this.createAbortSignal({signal:r?.signal})};try{if(!this.api)throw new Error("http client not initialized");this.logger.debug({requestId:n,requestOptions:a,url:s},"Health check request");let o;if(r?.method==="POST"?o=await this.api.POST(i,a):o=await this.api.GET(i,a),o.error||!o.response.ok)throw new Fr(o.response);this.logger.debug({requestId:n,response:o},"Health check response"),this.changeStatus("ready"),this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0;let c=o.data;typeof c=="object"&&c.model!==void 0&&c.device!==void 0&&(this.serverHealthState=c,this.anonymousUsageLogger.uniqueEvent("AgentConnected",c));}catch(o){if(this.serverHealthState=void 0,o instanceof Fr&&o.status==405&&r?.method!=="POST")return await this.healthCheck({method:"POST"});if(o instanceof Fr&&[401,403].includes(o.status))this.logger.debug({requestId:n,error:o},"Health check error: unauthorized"),this.changeStatus("unauthorized");else {if(Qo(o))this.logger.debug({requestId:n,error:o},"Health check error: timeout"),this.connectionErrorMessage=`GET ${s}: Timed out.`;else if(wi(o))this.logger.debug({requestId:n,error:o},"Health check error: canceled"),this.connectionErrorMessage=`GET ${s}: Canceled.`;else {this.logger.error({requestId:n,error:o},"Health check error: unknown error");let c=o instanceof Error?cg(o):JSON.stringify(o);this.connectionErrorMessage=`GET ${s}: Request failed: 
${c}`;}this.pushIssue("connectionFailed"),this.changeStatus("disconnected");}}}createSegments(r){let n=this.config.completion.prompt.maxPrefixLines,i=this.config.completion.prompt.maxSuffixLines,{prefixLines:s,suffixLines:a}=r,o=s.slice(Math.max(s.length-n,0)).join(""),c;this.config.completion.prompt.experimentalStripAutoClosingCharacters&&r.mode!=="fill-in-line"?c=`
`+a.slice(1,i).join(""):c=a.slice(0,i).join("");let l,u=this.config.completion.prompt.clipboard;return r.clipboard.length>=u.minChars&&r.clipboard.length<=u.maxChars&&(l=r.clipboard),{prefix:o,suffix:c,clipboard:l}}async initialize(r){if(this.dataStore=r?.dataStore,await this.anonymousUsageLogger.init({dataStore:this.dataStore}),r.clientProperties){let{user:n,session:i}=r.clientProperties;wu.forEach(s=>s.setBindings?.({...i})),i&&Object.entries(i).forEach(([s,a])=>{this.anonymousUsageLogger.setSessionProperties(s,a);}),n&&Object.entries(n).forEach(([s,a])=>{this.anonymousUsageLogger.setUserProperties(s,a);});}return Ga&&(await Ga.load(),this.userConfig=Ga.config,Ga.on("updated",async n=>{this.userConfig=n,await this.applyConfig();}),Ga.watch()),r.config&&(this.clientConfig=r.config),await this.applyConfig(),await this.anonymousUsageLogger.uniqueEvent("AgentInitialized"),this.logger.debug({options:r},"Initialized"),this.status!=="notInitialized"}async finalize(){return this.status==="finalized"?!1:(await this.submitStats(),this.tryingConnectTimer&&clearInterval(this.tryingConnectTimer),this.submitStatsTimer&&clearInterval(this.submitStatsTimer),this.changeStatus("finalized"),!0)}async updateClientProperties(r,n,i){switch(r){case"session":wu.forEach(s=>s.setBindings?.(Bs({},n,i))),this.anonymousUsageLogger.setSessionProperties(n,i);break;case"user":this.anonymousUsageLogger.setUserProperties(n,i);break}return !0}async updateConfig(r,n){let i=hl(this.clientConfig,r);return (0, bd.default)(i,n)||(n===void 0?pl(this.clientConfig,r):Bs(this.clientConfig,r,n),await this.applyConfig()),!0}async clearConfig(r){return await this.updateConfig(r,void 0)}getConfig(){return this.config}getStatus(){return this.status}getIssues(){return this.issues}getIssueDetail(r){let n=this.getIssues();return r.index!==void 0&&r.index<n.length?this.issueFromName(n[r.index]):r.name!==void 0&&this.issues.includes(r.name)?this.issueFromName(r.name):null}getServerHealthState(){return this.serverHealthState??null}async requestAuthUrl(r){if(this.status==="notInitialized")throw new Error("Agent is not initialized");return await this.healthCheck(r),this.status!=="unauthorized"||!this.auth?null:await this.auth.requestAuthUrl(r)}async waitForAuthToken(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.status!=="unauthorized"||!this.auth||(await this.auth.pollingToken(r,n),await this.setupApi());}async provideCompletions(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.logger.trace({request:r},"Call provideCompletions"),this.nonParallelProvideCompletionAbortController&&this.nonParallelProvideCompletionAbortController.abort(),this.nonParallelProvideCompletionAbortController=new AbortController;let i=Yo([this.nonParallelProvideCompletionAbortController.signal,n?.signal]),s,a={triggerMode:r.manually?"manual":"auto",cacheHit:!1,aborted:!1,requestSent:!1,requestLatency:0,requestCanceled:!1,requestTimeout:!1},o,c=new Ys(r);try{if(this.completionCache.has(c))a.cacheHit=!0,this.logger.debug({context:c},"Completion cache hit"),await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:0},{signal:i}),s=this.completionCache.get(c);else {a.cacheHit=!1;let l=this.createSegments(c);if(rt(l.prefix))a=void 0,this.logger.debug("Segment prefix is blank, returning empty completion response"),s={id:"agent-"+Ei(),choices:[]};else {await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:this.completionProviderStats.windowed().stats.averageResponseTime},n);let u=Ei();a.requestSent=!0,o=performance.now();try{if(!this.api)throw new Error("http client not initialized");let f="/v1/completions",h={body:{language:r.language,segments:l,user:this.auth?.user},signal:this.createAbortSignal({signal:i})};this.logger.debug({requestId:u,requestOptions:h,url:this.config.server.endpoint+f},"Completion request");let p=await this.api.POST(f,h);if(p.error||!p.response.ok)throw new Fr(p.response);this.logger.debug({requestId:u,response:p},"Completion response");let m=p.data;a.requestLatency=performance.now()-o,s={id:m.id,choices:m.choices.map(v=>({index:v.index,text:v.text,replaceRange:{start:r.position,end:r.position}}))};}catch(f){throw wi(f)?(this.logger.debug({requestId:u,error:f},"Completion request canceled"),a.requestCanceled=!0,a.requestLatency=performance.now()-o):Qo(f)?(this.logger.debug({requestId:u,error:f},"Completion request timeout"),a.requestTimeout=!0,a.requestLatency=NaN):(this.logger.error({requestId:u,error:f},"Completion request failed with unknown error"),this.healthCheck()),f}if(s=await qP(c,this.config.postprocess,s),i.aborted)throw i.reason;this.completionCache.buildCache(c,JSON.parse(JSON.stringify(s)));}}if(s=await HP(c,this.config.postprocess,s),i.aborted)throw i.reason}catch(l){throw wi(l)||Qo(l)?a&&(a.aborted=!0):a=void 0,l}finally{if(a&&(this.completionProviderStats.add(a),a.requestSent&&!a.requestCanceled)){let l=this.completionProviderStats.windowed();switch(this.completionProviderStats.check(l)){case"healthy":this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate");break;case"highTimeoutRate":this.popIssue("slowCompletionResponseTime"),this.pushIssue("highCompletionTimeoutRate");break;case"slowResponseTime":this.popIssue("highCompletionTimeoutRate"),this.pushIssue("slowCompletionResponseTime");break}}}return this.logger.trace({context:c,completionResponse:s},"Return from provideCompletions"),s}async postEvent(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.completionProviderStats.addEvent(r.type);let i=Ei();try{if(!this.api)throw new Error("http client not initialized");let s="/v1/events",a={body:r,params:{query:{select_kind:r.select_kind}},signal:this.createAbortSignal(n),parseAs:"text"};this.logger.debug({requestId:i,requestOptions:a,url:this.config.server.endpoint+s},"Event request");let o=await this.api.POST(s,a);if(o.error||!o.response.ok)throw new Fr(o.response);return this.logger.debug({requestId:i,response:o},"Event response"),!0}catch(s){return Qo(s)?this.logger.debug({requestId:i,error:s},"Event request timeout"):wi(s)?this.logger.debug({requestId:i,error:s},"Event request canceled"):this.logger.error({requestId:i,error:s},"Event request failed with unknown error"),!1}}};var OL=["statusChanged","configUpdated","authRequired","issuesUpdated"];var Cd=class{constructor(){this.process=process;this.inStream=process.stdin;this.outStream=process.stdout;this.logger=Zt.child({component:"JsonLineServer"});this.abortControllers={};}async handleLine(t){let r;try{r=JSON.parse(t);}catch(i){this.logger.error({error:i},`Failed to parse request: ${t}`);return}this.logger.debug({request:r},"Received request");let n=await this.handleRequest(r);this.sendResponse(n),this.logger.debug({response:n},"Sent response");}async handleRequest(t){let r=0,n=[0,null],i=new AbortController;try{if(!this.agent)throw new Error(`Agent not bound.
`);r=t[0],n[0]=r;let s=t[1].func;if(s==="cancelRequest")n[1]=this.cancelRequest(t);else {let a=this.agent[s];if(!a)throw new Error(`Unknown function: ${s}`);let o=t[1].args;o.length>0&&typeof o[o.length-1]=="object"&&o[o.length-1].signal&&(this.abortControllers[r]=i,o[o.length-1].signal=i.signal),n[1]=await a.apply(this.agent,o);}}catch(s){wi(s)?this.logger.debug({error:s,request:t},"Request canceled"):this.logger.error({error:s,request:t},"Failed to handle request");}finally{this.abortControllers[r]&&delete this.abortControllers[r];}return n}cancelRequest(t){let r=t[1].args[0],n=this.abortControllers[r];return n?(n.abort(),!0):!1}sendResponse(t){this.outStream.write(JSON.stringify(t)+`
`);}bind(t){this.agent=t;for(let r of OL)this.agent.on(r,n=>{this.sendResponse([0,n]);});}listen(){vQ__default.default.createInterface({input:this.inStream}).on("line",t=>{this.handleLine(t);}),["SIGTERM","SIGINT"].forEach(t=>{this.process.on(t,async()=>{this.agent&&this.agent.getStatus()!=="finalized"&&await this.agent.finalize(),this.process.exit(0);});});}};var Si=or(s3());var Hh=class e{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0;}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){for(let n of t)if(e.isIncremental(n)){let i=o3(n.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(a,this._content.length);let o=Math.max(i.start.line,0),c=Math.max(i.end.line,0),l=this._lineOffsets,u=a3(n.text,!1,s);if(c-o===u.length)for(let h=0,p=u.length;h<p;h++)l[h+o+1]=u[h];else u.length<1e4?l.splice(o+1,c-o,...u):this._lineOffsets=l=l.slice(0,o+1).concat(u,l.slice(c+1));let f=n.text.length-(a-s);if(f!==0)for(let h=o+1+u.length,p=l.length;h<p;h++)l[h]=l[h]+f;}else if(e.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r;}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=a3(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return {line:0,character:t};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>t?i=a:n=a+1;}let s=n-1;return {line:s,character:t-r[s]}}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},Uh;(function(e){function t(i,s,a,o){return new Hh(i,s,a,o)}e.create=t;function r(i,s,a){if(i instanceof Hh)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=r;function n(i,s){let a=i.getText(),o=IS(s.map(Oee),(u,f)=>{let h=u.range.start.line-f.range.start.line;return h===0?u.range.start.character-f.range.start.character:h}),c=0,l=[];for(let u of o){let f=i.offsetAt(u.range.start);if(f<c)throw new Error("Overlapping edit");f>c&&l.push(a.substring(c,f)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end);}return l.push(a.substr(c)),l.join("")}e.applyEdits=n;})(Uh||(Uh={}));function IS(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);IS(n,t),IS(i,t);let s=0,a=0,o=0;for(;s<n.length&&a<i.length;)t(n[s],i[a])<=0?e[o++]=n[s++]:e[o++]=i[a++];for(;s<n.length;)e[o++]=n[s++];for(;a<i.length;)e[o++]=i[a++];return e}function a3(e,t,r=0){let n=t?[r]:[];for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);(s===13||s===10)&&(s===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,n.push(r+i+1));}return n}function o3(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function Oee(e){let t=o3(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var $h=class{constructor(){this.connection=(0, Si.createConnection)();this.documents=new Si.TextDocuments(Uh);this.logger=Zt.child({component:"LspServer"});this.connection.onInitialize(async t=>await this.initialize(t)),this.connection.onShutdown(async()=>await this.shutdown()),this.connection.onExit(async()=>this.exit()),this.connection.onCompletion(async t=>await this.completion(t));}bind(t){this.agent=t,this.agent.on("statusChanged",r=>{(r.status==="disconnected"||r.status==="unauthorized")&&this.showMessage({type:Si.MessageType.Warning,message:`Tabby agent status: ${r.status}`});});}listen(){this.documents.listen(this.connection),this.connection.listen();}async initialize(t){if(this.logger.debug({params:t},"LSP: initialize: request"),!this.agent)throw new Error(`Agent not bound.
`);let{clientInfo:r,capabilities:n}=t;return await this.agent.initialize({clientProperties:{session:{client:`${r?.name} ${r?.version??""}`,ide:{name:r?.name,version:r?.version},tabby_plugin:{name:`${Au} (LSP)`,version:Iu}}}}),{capabilities:{textDocumentSync:{openClose:!0,change:Si.TextDocumentSyncKind.Incremental},completionProvider:{}},serverInfo:{name:Au,version:Iu}}}async shutdown(){if(this.logger.debug("LSP: shutdown: request"),!this.agent)throw new Error(`Agent not bound.
`);await this.agent.finalize();}exit(){return this.logger.debug("LSP: exit: request"),process.exit(0)}async showMessage(t){this.logger.debug({params:t},"LSP server notification: window/showMessage"),await this.connection.sendNotification("window/showMessage",t);}async completion(t){if(this.logger.debug({params:t},"LSP: textDocument/completion: request"),!this.agent)throw new Error(`Agent not bound.
`);try{let r=this.buildCompletionRequest(t),n=await this.agent.provideCompletions(r),i=this.toCompletionList(n,t);return this.logger.debug({completionList:i},"LSP: textDocument/completion: response"),i}catch(r){wi(r)?this.logger.debug({error:r},"LSP: textDocument/completion: canceled"):this.logger.error({error:r},"LSP: textDocument/completion: error");}return {isIncomplete:!0,items:[]}}buildCompletionRequest(t,r=!1){let{textDocument:n,position:i}=t,s=this.documents.get(n.uri);return {filepath:s.uri,language:s.languageId,text:s.getText(),position:s.offsetAt(i),manually:r}}toCompletionList(t,r){let{textDocument:n,position:i}=r,s=this.documents.get(n.uri),a=s.getText({start:{line:i.line,character:0},end:i}),o=a.match(/(\w+)$/)?.[0]??"";return {isIncomplete:!0,items:t.choices.map(c=>{let l=c.text.slice(s.offsetAt(i)-c.replaceRange.start),u=Ot(l),f=u[0]||"",h=u[1]||"";return {label:o+f,labelDetails:{detail:h,description:"Tabby"},kind:Si.CompletionItemKind.Text,documentation:{kind:"markdown",value:`\`\`\`
${a+l}
\`\`\`
 ---
Suggested by Tabby.`},textEdit:{newText:o+l,range:{start:{line:i.line,character:i.character-o.length},end:s.positionAt(c.replaceRange.end)}},data:{completionId:t.id,choiceIndex:c.index}}})}}};var Fee=process.argv.slice(2),jh;Fee.indexOf("--lsp")>=0?jh=new $h:jh=new Cd;var Bee=new Ed;jh.bind(Bee);jh.listen();
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)
*/
//# sourceMappingURL=out.js.map
//# sourceMappingURL=cli.js.map